import{V as be,U as Li,S as oe,D as Jm,a as tv,b as ev,c as nv,W as pi,d as Pt,B as ko,e as Gc,C as iv,M as An,L as uo,f as Vr,g as Nr,h as Hi,F as sv,E as Tl,i as ld,N as cd,R as ud,j as Es,P as rv,k as to,l as qc,m as hd,T as dd,n as ov,o as Wc,p as av,q as $c,r as Kc,s as Yc,t as lv,u as ea}from"./threejs-R2oN4ICD.js";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ml(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Mt={},ss=[],vn=()=>{},cv=()=>!1,Io=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Al=n=>n.startsWith("onUpdate:"),de=Object.assign,Rl=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},uv=Object.prototype.hasOwnProperty,xt=(n,t)=>uv.call(n,t),at=Array.isArray,rs=n=>Bo(n)==="[object Map]",pd=n=>Bo(n)==="[object Set]",lt=n=>typeof n=="function",qt=n=>typeof n=="string",fi=n=>typeof n=="symbol",Ot=n=>n!==null&&typeof n=="object",fd=n=>(Ot(n)||lt(n))&&lt(n.then)&&lt(n.catch),md=Object.prototype.toString,Bo=n=>md.call(n),hv=n=>Bo(n).slice(8,-1),vd=n=>Bo(n)==="[object Object]",kl=n=>qt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,$s=Ml(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Oo=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},dv=/-(\w)/g,qe=Oo(n=>n.replace(dv,(t,e)=>e?e.toUpperCase():"")),pv=/\B([A-Z])/g,Gi=Oo(n=>n.replace(pv,"-$1").toLowerCase()),Lo=Oo(n=>n.charAt(0).toUpperCase()+n.slice(1)),na=Oo(n=>n?`on${Lo(n)}`:""),ri=(n,t)=>!Object.is(n,t),ia=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},gd=(n,t,e,i=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:i,value:e})},fv=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Xc;const zo=()=>Xc||(Xc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Il(n){if(at(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],s=qt(i)?_v(i):Il(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(qt(n)||Ot(n))return n}const mv=/;(?![^(]*\))/g,vv=/:([^]+)/,gv=/\/\*[^]*?\*\//g;function _v(n){const t={};return n.replace(gv,"").split(mv).forEach(e=>{if(e){const i=e.split(vv);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Bl(n){let t="";if(qt(n))t=n;else if(at(n))for(let e=0;e<n.length;e++){const i=Bl(n[e]);i&&(t+=i+" ")}else if(Ot(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const bv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wv=Ml(bv);function _d(n){return!!n||n===""}const bd=n=>!!(n&&n.__v_isRef===!0),yv=n=>qt(n)?n:n==null?"":at(n)||Ot(n)&&(n.toString===md||!lt(n.toString))?bd(n)?yv(n.value):JSON.stringify(n,wd,2):String(n),wd=(n,t)=>bd(t)?wd(n,t.value):rs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,s],r)=>(e[sa(i,r)+" =>"]=s,e),{})}:pd(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>sa(e))}:fi(t)?sa(t):Ot(t)&&!at(t)&&!vd(t)?String(t):t,sa=(n,t="")=>{var e;return fi(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Me;class xv{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Me,!t&&Me&&(this.index=(Me.scopes||(Me.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Me;try{return Me=this,t()}finally{Me=e}}}on(){Me=this}off(){Me=this.parent}stop(t){if(this._active){this._active=!1;let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(this.effects.length=0,e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Cv(){return Me}let Tt;const ra=new WeakSet;class yd{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Me&&Me.active&&Me.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ra.has(this)&&(ra.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zc(this),Ed(this);const t=Tt,e=Je;Tt=this,Je=!0;try{return this.fn()}finally{Sd(this),Tt=t,Je=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)zl(t);this.deps=this.depsTail=void 0,Zc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ra.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ha(this)&&this.run()}get dirty(){return Ha(this)}}let xd=0,Ks,Ys;function Cd(n,t=!1){if(n.flags|=8,t){n.next=Ys,Ys=n;return}n.next=Ks,Ks=n}function Ol(){xd++}function Ll(){if(--xd>0)return;if(Ys){let t=Ys;for(Ys=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Ks;){let t=Ks;for(Ks=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){n||(n=i)}t=e}}if(n)throw n}function Ed(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Sd(n){let t,e=n.depsTail,i=e;for(;i;){const s=i.prevDep;i.version===-1?(i===e&&(e=s),zl(i),Ev(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=t,n.depsTail=e}function Ha(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pd(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function Pd(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===sr))return;n.globalVersion=sr;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!Ha(n)){n.flags&=-3;return}const e=Tt,i=Je;Tt=n,Je=!0;try{Ed(n);const s=n.fn(n._value);(t.version===0||ri(s,n._value))&&(n._value=s,t.version++)}catch(s){throw t.version++,s}finally{Tt=e,Je=i,Sd(n),n.flags&=-3}}function zl(n,t=!1){const{dep:e,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),e.subs===n&&(e.subs=i,!i&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)zl(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Ev(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Je=!0;const Td=[];function mi(){Td.push(Je),Je=!1}function vi(){const n=Td.pop();Je=n===void 0?!0:n}function Zc(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=Tt;Tt=void 0;try{t()}finally{Tt=e}}}let sr=0;class Sv{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dl{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Tt||!Je||Tt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Tt)e=this.activeLink=new Sv(Tt,this),Tt.deps?(e.prevDep=Tt.depsTail,Tt.depsTail.nextDep=e,Tt.depsTail=e):Tt.deps=Tt.depsTail=e,Md(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=Tt.depsTail,e.nextDep=void 0,Tt.depsTail.nextDep=e,Tt.depsTail=e,Tt.deps===e&&(Tt.deps=i)}return e}trigger(t){this.version++,sr++,this.notify(t)}notify(t){Ol();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Ll()}}}function Md(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Md(i)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Ga=new WeakMap,Mi=Symbol(""),qa=Symbol(""),rr=Symbol("");function se(n,t,e){if(Je&&Tt){let i=Ga.get(n);i||Ga.set(n,i=new Map);let s=i.get(e);s||(i.set(e,s=new Dl),s.map=i,s.key=e),s.track()}}function On(n,t,e,i,s,r){const o=Ga.get(n);if(!o){sr++;return}const a=l=>{l&&l.trigger()};if(Ol(),t==="clear")o.forEach(a);else{const l=at(n),c=l&&kl(e);if(l&&e==="length"){const u=Number(i);o.forEach((h,d)=>{(d==="length"||d===rr||!fi(d)&&d>=u)&&a(h)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),c&&a(o.get(rr)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Mi)),rs(n)&&a(o.get(qa)));break;case"delete":l||(a(o.get(Mi)),rs(n)&&a(o.get(qa)));break;case"set":rs(n)&&a(o.get(Mi));break}}Ll()}function Ki(n){const t=yt(n);return t===n?t:(se(t,"iterate",rr),Ge(n)?t:t.map(re))}function Do(n){return se(n=yt(n),"iterate",rr),n}const Pv={__proto__:null,[Symbol.iterator](){return oa(this,Symbol.iterator,re)},concat(...n){return Ki(this).concat(...n.map(t=>at(t)?Ki(t):t))},entries(){return oa(this,"entries",n=>(n[1]=re(n[1]),n))},every(n,t){return xn(this,"every",n,t,void 0,arguments)},filter(n,t){return xn(this,"filter",n,t,e=>e.map(re),arguments)},find(n,t){return xn(this,"find",n,t,re,arguments)},findIndex(n,t){return xn(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return xn(this,"findLast",n,t,re,arguments)},findLastIndex(n,t){return xn(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return xn(this,"forEach",n,t,void 0,arguments)},includes(...n){return aa(this,"includes",n)},indexOf(...n){return aa(this,"indexOf",n)},join(n){return Ki(this).join(n)},lastIndexOf(...n){return aa(this,"lastIndexOf",n)},map(n,t){return xn(this,"map",n,t,void 0,arguments)},pop(){return As(this,"pop")},push(...n){return As(this,"push",n)},reduce(n,...t){return Qc(this,"reduce",n,t)},reduceRight(n,...t){return Qc(this,"reduceRight",n,t)},shift(){return As(this,"shift")},some(n,t){return xn(this,"some",n,t,void 0,arguments)},splice(...n){return As(this,"splice",n)},toReversed(){return Ki(this).toReversed()},toSorted(n){return Ki(this).toSorted(n)},toSpliced(...n){return Ki(this).toSpliced(...n)},unshift(...n){return As(this,"unshift",n)},values(){return oa(this,"values",re)}};function oa(n,t,e){const i=Do(n),s=i[t]();return i!==n&&!Ge(n)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=e(r.value)),r}),s}const Tv=Array.prototype;function xn(n,t,e,i,s,r){const o=Do(n),a=o!==n&&!Ge(n),l=o[t];if(l!==Tv[t]){const h=l.apply(n,r);return a?re(h):h}let c=e;o!==n&&(a?c=function(h,d){return e.call(this,re(h),d,n)}:e.length>2&&(c=function(h,d){return e.call(this,h,d,n)}));const u=l.call(o,c,i);return a&&s?s(u):u}function Qc(n,t,e,i){const s=Do(n);let r=e;return s!==n&&(Ge(n)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,n)}):r=function(o,a,l){return e.call(this,o,re(a),l,n)}),s[t](r,...i)}function aa(n,t,e){const i=yt(n);se(i,"iterate",rr);const s=i[t](...e);return(s===-1||s===!1)&&Nl(e[0])?(e[0]=yt(e[0]),i[t](...e)):s}function As(n,t,e=[]){mi(),Ol();const i=yt(n)[t].apply(n,e);return Ll(),vi(),i}const Mv=Ml("__proto__,__v_isRef,__isVue"),Ad=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(fi));function Av(n){fi(n)||(n=String(n));const t=yt(this);return se(t,"has",n),t.hasOwnProperty(n)}class Rd{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){if(e==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return r;if(e==="__v_raw")return i===(s?r?Vv:Od:r?Bd:Id).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=at(t);if(!s){let l;if(o&&(l=Pv[e]))return l;if(e==="hasOwnProperty")return Av}const a=Reflect.get(t,e,ce(t)?t:i);return(fi(e)?Ad.has(e):Mv(e))||(s||se(t,"get",e),r)?a:ce(a)?o&&kl(e)?a:a.value:Ot(a)?s?zd(a):Fo(a):a}}class kd extends Rd{constructor(t=!1){super(!1,t)}set(t,e,i,s){let r=t[e];if(!this._isShallow){const l=zi(r);if(!Ge(i)&&!zi(i)&&(r=yt(r),i=yt(i)),!at(t)&&ce(r)&&!ce(i))return l?!1:(r.value=i,!0)}const o=at(t)&&kl(e)?Number(e)<t.length:xt(t,e),a=Reflect.set(t,e,i,ce(t)?t:s);return t===yt(s)&&(o?ri(i,r)&&On(t,"set",e,i):On(t,"add",e,i)),a}deleteProperty(t,e){const i=xt(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&i&&On(t,"delete",e,void 0),s}has(t,e){const i=Reflect.has(t,e);return(!fi(e)||!Ad.has(e))&&se(t,"has",e),i}ownKeys(t){return se(t,"iterate",at(t)?"length":Mi),Reflect.ownKeys(t)}}class Rv extends Rd{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const kv=new kd,Iv=new Rv,Bv=new kd(!0);const Wa=n=>n,Ur=n=>Reflect.getPrototypeOf(n);function Ov(n,t,e){return function(...i){const s=this.__v_raw,r=yt(s),o=rs(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=e?Wa:t?$a:re;return!t&&se(r,"iterate",l?qa:Mi),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function jr(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function Lv(n,t){const e={get(s){const r=this.__v_raw,o=yt(r),a=yt(s);n||(ri(s,a)&&se(o,"get",s),se(o,"get",a));const{has:l}=Ur(o),c=t?Wa:n?$a:re;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!n&&se(yt(s),"iterate",Mi),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=yt(r),a=yt(s);return n||(ri(s,a)&&se(o,"has",s),se(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=yt(a),c=t?Wa:n?$a:re;return!n&&se(l,"iterate",Mi),a.forEach((u,h)=>s.call(r,c(u),c(h),o))}};return de(e,n?{add:jr("add"),set:jr("set"),delete:jr("delete"),clear:jr("clear")}:{add(s){!t&&!Ge(s)&&!zi(s)&&(s=yt(s));const r=yt(this);return Ur(r).has.call(r,s)||(r.add(s),On(r,"add",s,s)),this},set(s,r){!t&&!Ge(r)&&!zi(r)&&(r=yt(r));const o=yt(this),{has:a,get:l}=Ur(o);let c=a.call(o,s);c||(s=yt(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,r),c?ri(r,u)&&On(o,"set",s,r):On(o,"add",s,r),this},delete(s){const r=yt(this),{has:o,get:a}=Ur(r);let l=o.call(r,s);l||(s=yt(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&On(r,"delete",s,void 0),c},clear(){const s=yt(this),r=s.size!==0,o=s.clear();return r&&On(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Ov(s,n,t)}),e}function Fl(n,t){const e=Lv(n,t);return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(xt(e,s)&&s in i?e:i,s,r)}const zv={get:Fl(!1,!1)},Dv={get:Fl(!1,!0)},Fv={get:Fl(!0,!1)};const Id=new WeakMap,Bd=new WeakMap,Od=new WeakMap,Vv=new WeakMap;function Nv(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Uv(n){return n.__v_skip||!Object.isExtensible(n)?0:Nv(hv(n))}function Fo(n){return zi(n)?n:Vl(n,!1,kv,zv,Id)}function Ld(n){return Vl(n,!1,Bv,Dv,Bd)}function zd(n){return Vl(n,!0,Iv,Fv,Od)}function Vl(n,t,e,i,s){if(!Ot(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=Uv(n);if(o===0)return n;const a=new Proxy(n,o===2?i:e);return s.set(n,a),a}function os(n){return zi(n)?os(n.__v_raw):!!(n&&n.__v_isReactive)}function zi(n){return!!(n&&n.__v_isReadonly)}function Ge(n){return!!(n&&n.__v_isShallow)}function Nl(n){return n?!!n.__v_raw:!1}function yt(n){const t=n&&n.__v_raw;return t?yt(t):n}function jv(n){return!xt(n,"__v_skip")&&Object.isExtensible(n)&&gd(n,"__v_skip",!0),n}const re=n=>Ot(n)?Fo(n):n,$a=n=>Ot(n)?zd(n):n;function ce(n){return n?n.__v_isRef===!0:!1}function Hv(n){return Dd(n,!1)}function Gv(n){return Dd(n,!0)}function Dd(n,t){return ce(n)?n:new qv(n,t)}class qv{constructor(t,e){this.dep=new Dl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:yt(t),this._value=e?t:re(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||Ge(t)||zi(t);t=i?t:yt(t),ri(t,e)&&(this._rawValue=t,this._value=i?t:re(t),this.dep.trigger())}}function as(n){return ce(n)?n.value:n}const Wv={get:(n,t,e)=>t==="__v_raw"?n:as(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const s=n[t];return ce(s)&&!ce(e)?(s.value=e,!0):Reflect.set(n,t,e,i)}};function Fd(n){return os(n)?n:new Proxy(n,Wv)}class $v{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Dl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return Cd(this,!0),!0}get value(){const t=this.dep.track();return Pd(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Kv(n,t,e=!1){let i,s;return lt(n)?i=n:(i=n.get,s=n.set),new $v(i,s,e)}const Hr={},ho=new WeakMap;let Ei;function Yv(n,t=!1,e=Ei){if(e){let i=ho.get(e);i||ho.set(e,i=[]),i.push(n)}}function Xv(n,t,e=Mt){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=e,c=T=>s?T:Ge(T)||s===!1||s===0?ti(T,1):ti(T);let u,h,d,p,m=!1,f=!1;if(ce(n)?(h=()=>n.value,m=Ge(n)):os(n)?(h=()=>c(n),m=!0):at(n)?(f=!0,m=n.some(T=>os(T)||Ge(T)),h=()=>n.map(T=>{if(ce(T))return T.value;if(os(T))return c(T);if(lt(T))return l?l(T,2):T()})):lt(n)?t?h=l?()=>l(n,2):n:h=()=>{if(d){mi();try{d()}finally{vi()}}const T=Ei;Ei=u;try{return l?l(n,3,[p]):n(p)}finally{Ei=T}}:h=vn,t&&s){const T=h,k=s===!0?1/0:s;h=()=>ti(T(),k)}const v=Cv(),C=()=>{u.stop(),v&&v.active&&Rl(v.effects,u)};if(r&&t){const T=t;t=(...k)=>{T(...k),C()}}let g=f?new Array(n.length).fill(Hr):Hr;const E=T=>{if(!(!(u.flags&1)||!u.dirty&&!T))if(t){const k=u.run();if(s||m||(f?k.some((P,R)=>ri(P,g[R])):ri(k,g))){d&&d();const P=Ei;Ei=u;try{const R=[k,g===Hr?void 0:f&&g[0]===Hr?[]:g,p];l?l(t,3,R):t(...R),g=k}finally{Ei=P}}}else u.run()};return a&&a(E),u=new yd(h),u.scheduler=o?()=>o(E,!1):E,p=T=>Yv(T,!1,u),d=u.onStop=()=>{const T=ho.get(u);if(T){if(l)l(T,4);else for(const k of T)k();ho.delete(u)}},t?i?E(!0):g=u.run():o?o(E.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function ti(n,t=1/0,e){if(t<=0||!Ot(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,ce(n))ti(n.value,t,e);else if(at(n))for(let i=0;i<n.length;i++)ti(n[i],t,e);else if(pd(n)||rs(n))n.forEach(i=>{ti(i,t,e)});else if(vd(n)){for(const i in n)ti(n[i],t,e);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&ti(n[i],t,e)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Sr(n,t,e,i){try{return i?n(...i):n()}catch(s){Vo(s,t,e)}}function _n(n,t,e,i){if(lt(n)){const s=Sr(n,t,e,i);return s&&fd(s)&&s.catch(r=>{Vo(r,t,e)}),s}if(at(n)){const s=[];for(let r=0;r<n.length;r++)s.push(_n(n[r],t,e,i));return s}}function Vo(n,t,e,i=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Mt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,l,c)===!1)return}a=a.parent}if(r){mi(),Sr(r,null,10,[n,l,c]),vi();return}}Zv(n,e,s,i,o)}function Zv(n,t,e,i=!0,s=!1){if(s)throw n;console.error(n)}const fe=[];let cn=-1;const ls=[];let Zn=null,ts=0;const Vd=Promise.resolve();let po=null;function Nd(n){const t=po||Vd;return n?t.then(this?n.bind(this):n):t}function Qv(n){let t=cn+1,e=fe.length;for(;t<e;){const i=t+e>>>1,s=fe[i],r=or(s);r<n||r===n&&s.flags&2?t=i+1:e=i}return t}function Ul(n){if(!(n.flags&1)){const t=or(n),e=fe[fe.length-1];!e||!(n.flags&2)&&t>=or(e)?fe.push(n):fe.splice(Qv(t),0,n),n.flags|=1,Ud()}}function Ud(){po||(po=Vd.then(Hd))}function Jv(n){at(n)?ls.push(...n):Zn&&n.id===-1?Zn.splice(ts+1,0,n):n.flags&1||(ls.push(n),n.flags|=1),Ud()}function Jc(n,t,e=cn+1){for(;e<fe.length;e++){const i=fe[e];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;fe.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function jd(n){if(ls.length){const t=[...new Set(ls)].sort((e,i)=>or(e)-or(i));if(ls.length=0,Zn){Zn.push(...t);return}for(Zn=t,ts=0;ts<Zn.length;ts++){const e=Zn[ts];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Zn=null,ts=0}}const or=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Hd(n){try{for(cn=0;cn<fe.length;cn++){const t=fe[cn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Sr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;cn<fe.length;cn++){const t=fe[cn];t&&(t.flags&=-2)}cn=-1,fe.length=0,jd(),po=null,(fe.length||ls.length)&&Hd()}}let Ze=null,Gd=null;function fo(n){const t=Ze;return Ze=n,Gd=n&&n.type.__scopeId||null,t}function tg(n,t=Ze,e){if(!t||n._n)return n;const i=(...s)=>{i._d&&cu(-1);const r=fo(t);let o;try{o=n(...s)}finally{fo(r),i._d&&cu(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function _i(n,t,e,i){const s=n.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(mi(),_n(l,e,8,[n.el,a,n,t]),vi())}}const eg=Symbol("_vte"),ng=n=>n.__isTeleport;function jl(n,t){n.shapeFlag&6&&n.component?(n.transition=t,jl(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function qd(n,t){return lt(n)?de({name:n.name},t,{setup:n}):n}function Wd(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function mo(n,t,e,i,s=!1){if(at(n)){n.forEach((m,f)=>mo(m,t&&(at(t)?t[f]:t),e,i,s));return}if(Xs(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&mo(n,t,e,i.component.subTree);return}const r=i.shapeFlag&4?ql(i.component):i.el,o=s?null:r,{i:a,r:l}=n,c=t&&t.r,u=a.refs===Mt?a.refs={}:a.refs,h=a.setupState,d=yt(h),p=h===Mt?()=>!1:m=>xt(d,m);if(c!=null&&c!==l&&(qt(c)?(u[c]=null,p(c)&&(h[c]=null)):ce(c)&&(c.value=null)),lt(l))Sr(l,a,12,[o,u]);else{const m=qt(l),f=ce(l);if(m||f){const v=()=>{if(n.f){const C=m?p(l)?h[l]:u[l]:l.value;s?at(C)&&Rl(C,r):at(C)?C.includes(r)||C.push(r):m?(u[l]=[r],p(l)&&(h[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else m?(u[l]=o,p(l)&&(h[l]=o)):f&&(l.value=o,n.k&&(u[n.k]=o))};o?(v.id=-1,Te(v,e)):v()}}}zo().requestIdleCallback;zo().cancelIdleCallback;const Xs=n=>!!n.type.__asyncLoader,$d=n=>n.type.__isKeepAlive;function ig(n,t){Kd(n,"a",t)}function sg(n,t){Kd(n,"da",t)}function Kd(n,t,e=ae){const i=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(No(t,i,e),e){let s=e.parent;for(;s&&s.parent;)$d(s.parent.vnode)&&rg(i,t,e,s),s=s.parent}}function rg(n,t,e,i){const s=No(t,n,i,!0);Yd(()=>{Rl(i[t],s)},e)}function No(n,t,e=ae,i=!1){if(e){const s=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{mi();const a=Pr(e),l=_n(t,e,n,o);return a(),vi(),l});return i?s.unshift(r):s.push(r),r}}const Un=n=>(t,e=ae)=>{(!lr||n==="sp")&&No(n,(...i)=>t(...i),e)},og=Un("bm"),ag=Un("m"),lg=Un("bu"),cg=Un("u"),ug=Un("bum"),Yd=Un("um"),hg=Un("sp"),dg=Un("rtg"),pg=Un("rtc");function fg(n,t=ae){No("ec",n,t)}const Xd="components";function Q2(n,t){return Qd(Xd,n,!0,t)||n}const Zd=Symbol.for("v-ndc");function J2(n){return qt(n)?Qd(Xd,n,!1)||n:n||Zd}function Qd(n,t,e=!0,i=!1){const s=Ze||ae;if(s){const r=s.type;{const a=i_(r,!1);if(a&&(a===t||a===qe(t)||a===Lo(qe(t))))return r}const o=tu(s[n]||r[n],t)||tu(s.appContext[n],t);return!o&&i?r:o}}function tu(n,t){return n&&(n[t]||n[qe(t)]||n[Lo(qe(t))])}function tT(n,t,e,i){let s;const r=e,o=at(n);if(o||qt(n)){const a=o&&os(n);let l=!1;a&&(l=!Ge(n),n=Do(n)),s=new Array(n.length);for(let c=0,u=n.length;c<u;c++)s[c]=t(l?re(n[c]):n[c],c,void 0,r)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=t(a+1,a,void 0,r)}else if(Ot(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=t(n[u],u,l,r)}}else s=[];return s}const Ka=n=>n?wp(n)?ql(n):Ka(n.parent):null,Zs=de(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ka(n.parent),$root:n=>Ka(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>tp(n),$forceUpdate:n=>n.f||(n.f=()=>{Ul(n.update)}),$nextTick:n=>n.n||(n.n=Nd.bind(n.proxy)),$watch:n=>Lg.bind(n)}),la=(n,t)=>n!==Mt&&!n.__isScriptSetup&&xt(n,t),mg={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return i[t];case 2:return s[t];case 4:return e[t];case 3:return r[t]}else{if(la(i,t))return o[t]=1,i[t];if(s!==Mt&&xt(s,t))return o[t]=2,s[t];if((c=n.propsOptions[0])&&xt(c,t))return o[t]=3,r[t];if(e!==Mt&&xt(e,t))return o[t]=4,e[t];Ya&&(o[t]=0)}}const u=Zs[t];let h,d;if(u)return t==="$attrs"&&se(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[t]))return h;if(e!==Mt&&xt(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,xt(d,t))return d[t]},set({_:n},t,e){const{data:i,setupState:s,ctx:r}=n;return la(s,t)?(s[t]=e,!0):i!==Mt&&xt(i,t)?(i[t]=e,!0):xt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!e[o]||n!==Mt&&xt(n,o)||la(t,o)||(a=r[0])&&xt(a,o)||xt(i,o)||xt(Zs,o)||xt(s.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:xt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function eu(n){return at(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Ya=!0;function vg(n){const t=tp(n),e=n.proxy,i=n.ctx;Ya=!1,t.beforeCreate&&nu(t.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:m,activated:f,deactivated:v,beforeDestroy:C,beforeUnmount:g,destroyed:E,unmounted:T,render:k,renderTracked:P,renderTriggered:R,errorCaptured:_,serverPrefetch:w,expose:b,inheritAttrs:I,components:B,directives:z,filters:F}=t;if(c&&gg(c,i,null),o)for(const U in o){const $=o[U];lt($)&&(i[U]=$.bind(e))}if(s){const U=s.call(e,e);Ot(U)&&(n.data=Fo(U))}if(Ya=!0,r)for(const U in r){const $=r[U],Z=lt($)?$.bind(e,e):lt($.get)?$.get.bind(e,e):vn,nt=!lt($)&&lt($.set)?$.set.bind(e):vn,ot=Xe({get:Z,set:nt});Object.defineProperty(i,U,{enumerable:!0,configurable:!0,get:()=>ot.value,set:J=>ot.value=J})}if(a)for(const U in a)Jd(a[U],i,e,U);if(l){const U=lt(l)?l.call(e):l;Reflect.ownKeys(U).forEach($=>{eo($,U[$])})}u&&nu(u,n,"c");function L(U,$){at($)?$.forEach(Z=>U(Z.bind(e))):$&&U($.bind(e))}if(L(og,h),L(ag,d),L(lg,p),L(cg,m),L(ig,f),L(sg,v),L(fg,_),L(pg,P),L(dg,R),L(ug,g),L(Yd,T),L(hg,w),at(b))if(b.length){const U=n.exposed||(n.exposed={});b.forEach($=>{Object.defineProperty(U,$,{get:()=>e[$],set:Z=>e[$]=Z})})}else n.exposed||(n.exposed={});k&&n.render===vn&&(n.render=k),I!=null&&(n.inheritAttrs=I),B&&(n.components=B),z&&(n.directives=z),w&&Wd(n)}function gg(n,t,e=vn){at(n)&&(n=Xa(n));for(const i in n){const s=n[i];let r;Ot(s)?"default"in s?r=tn(s.from||i,s.default,!0):r=tn(s.from||i):r=tn(s),ce(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function nu(n,t,e){_n(at(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function Jd(n,t,e,i){let s=i.includes(".")?fp(e,i):()=>e[i];if(qt(n)){const r=t[n];lt(r)&&no(s,r)}else if(lt(n))no(s,n.bind(e));else if(Ot(n))if(at(n))n.forEach(r=>Jd(r,t,e,i));else{const r=lt(n.handler)?n.handler.bind(e):t[n.handler];lt(r)&&no(s,r,n)}}function tp(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!e&&!i?l=t:(l={},s.length&&s.forEach(c=>vo(l,c,o,!0)),vo(l,t,o)),Ot(t)&&r.set(t,l),l}function vo(n,t,e,i=!1){const{mixins:s,extends:r}=t;r&&vo(n,r,e,!0),s&&s.forEach(o=>vo(n,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const a=_g[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const _g={data:iu,props:su,emits:su,methods:Hs,computed:Hs,beforeCreate:pe,created:pe,beforeMount:pe,mounted:pe,beforeUpdate:pe,updated:pe,beforeDestroy:pe,beforeUnmount:pe,destroyed:pe,unmounted:pe,activated:pe,deactivated:pe,errorCaptured:pe,serverPrefetch:pe,components:Hs,directives:Hs,watch:wg,provide:iu,inject:bg};function iu(n,t){return t?n?function(){return de(lt(n)?n.call(this,this):n,lt(t)?t.call(this,this):t)}:t:n}function bg(n,t){return Hs(Xa(n),Xa(t))}function Xa(n){if(at(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function pe(n,t){return n?[...new Set([].concat(n,t))]:t}function Hs(n,t){return n?de(Object.create(null),n,t):t}function su(n,t){return n?at(n)&&at(t)?[...new Set([...n,...t])]:de(Object.create(null),eu(n),eu(t??{})):t}function wg(n,t){if(!n)return t;if(!t)return n;const e=de(Object.create(null),n);for(const i in t)e[i]=pe(n[i],t[i]);return e}function ep(){return{app:null,config:{isNativeTag:cv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yg=0;function xg(n,t){return function(i,s=null){lt(i)||(i=de({},i)),s!=null&&!Ot(s)&&(s=null);const r=ep(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:yg++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:r_,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&lt(u.install)?(o.add(u),u.install(c,...h)):lt(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,d){if(!l){const p=c._ceVNode||Ie(i,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),n(p,u,d),l=!0,c._container=u,u.__vue_app__=c,ql(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(_n(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=cs;cs=c;try{return u()}finally{cs=h}}};return c}}let cs=null;function eo(n,t){if(ae){let e=ae.provides;const i=ae.parent&&ae.parent.provides;i===e&&(e=ae.provides=Object.create(i)),e[n]=t}}function tn(n,t,e=!1){const i=ae||Ze;if(i||cs){const s=cs?cs._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return e&&lt(t)?t.call(i&&i.proxy):t}}const np={},ip=()=>Object.create(np),sp=n=>Object.getPrototypeOf(n)===np;function Cg(n,t,e,i=!1){const s={},r=ip();n.propsDefaults=Object.create(null),rp(n,t,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);e?n.props=i?s:Ld(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function Eg(n,t,e,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=yt(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Uo(n.emitsOptions,d))continue;const p=t[d];if(l)if(xt(r,d))p!==r[d]&&(r[d]=p,c=!0);else{const m=qe(d);s[m]=Za(l,a,m,p,n,!1)}else p!==r[d]&&(r[d]=p,c=!0)}}}else{rp(n,t,s,r)&&(c=!0);let u;for(const h in a)(!t||!xt(t,h)&&((u=Gi(h))===h||!xt(t,u)))&&(l?e&&(e[h]!==void 0||e[u]!==void 0)&&(s[h]=Za(l,a,h,void 0,n,!0)):delete s[h]);if(r!==a)for(const h in r)(!t||!xt(t,h))&&(delete r[h],c=!0)}c&&On(n.attrs,"set","")}function rp(n,t,e,i){const[s,r]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if($s(l))continue;const c=t[l];let u;s&&xt(s,u=qe(l))?!r||!r.includes(u)?e[u]=c:(a||(a={}))[u]=c:Uo(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=yt(e),c=a||Mt;for(let u=0;u<r.length;u++){const h=r[u];e[h]=Za(s,l,h,c[h],n,!xt(c,h))}}return o}function Za(n,t,e,i,s,r){const o=n[e];if(o!=null){const a=xt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&lt(l)){const{propsDefaults:c}=s;if(e in c)i=c[e];else{const u=Pr(s);i=c[e]=l.call(null,t),u()}}else i=l;s.ce&&s.ce._setProp(e,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Gi(e))&&(i=!0))}return i}const Sg=new WeakMap;function op(n,t,e=!1){const i=e?Sg:t.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!lt(n)){const u=h=>{l=!0;const[d,p]=op(h,t,!0);de(o,d),p&&a.push(...p)};!e&&t.mixins.length&&t.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return Ot(n)&&i.set(n,ss),ss;if(at(r))for(let u=0;u<r.length;u++){const h=qe(r[u]);ru(h)&&(o[h]=Mt)}else if(r)for(const u in r){const h=qe(u);if(ru(h)){const d=r[u],p=o[h]=at(d)||lt(d)?{type:d}:de({},d),m=p.type;let f=!1,v=!0;if(at(m))for(let C=0;C<m.length;++C){const g=m[C],E=lt(g)&&g.name;if(E==="Boolean"){f=!0;break}else E==="String"&&(v=!1)}else f=lt(m)&&m.name==="Boolean";p[0]=f,p[1]=v,(f||xt(p,"default"))&&a.push(h)}}const c=[o,a];return Ot(n)&&i.set(n,c),c}function ru(n){return n[0]!=="$"&&!$s(n)}const ap=n=>n[0]==="_"||n==="$stable",Hl=n=>at(n)?n.map(hn):[hn(n)],Pg=(n,t,e)=>{if(t._n)return t;const i=tg((...s)=>Hl(t(...s)),e);return i._c=!1,i},lp=(n,t,e)=>{const i=n._ctx;for(const s in n){if(ap(s))continue;const r=n[s];if(lt(r))t[s]=Pg(s,r,i);else if(r!=null){const o=Hl(r);t[s]=()=>o}}},cp=(n,t)=>{const e=Hl(t);n.slots.default=()=>e},up=(n,t,e)=>{for(const i in t)(e||i!=="_")&&(n[i]=t[i])},Tg=(n,t,e)=>{const i=n.slots=ip();if(n.vnode.shapeFlag&32){const s=t._;s?(up(i,t,e),e&&gd(i,"_",s,!0)):lp(t,i)}else t&&cp(n,t)},Mg=(n,t,e)=>{const{vnode:i,slots:s}=n;let r=!0,o=Mt;if(i.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:up(s,t,e):(r=!t.$stable,lp(t,s)),o=t}else t&&(cp(n,t),o={default:1});if(r)for(const a in s)!ap(a)&&o[a]==null&&delete s[a]},Te=jg;function Ag(n){return Rg(n)}function Rg(n,t){const e=zo();e.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=vn,insertStaticContent:m}=n,f=(S,M,O,N=null,H=null,G=null,X=void 0,Y=null,K=!!M.dynamicChildren)=>{if(S===M)return;S&&!Rs(S,M)&&(N=q(S),J(S,H,G,!0),S=null),M.patchFlag===-2&&(K=!1,M.dynamicChildren=null);const{type:W,ref:tt,shapeFlag:Q}=M;switch(W){case jo:v(S,M,O,N);break;case Di:C(S,M,O,N);break;case ua:S==null&&g(M,O,N,X);break;case In:B(S,M,O,N,H,G,X,Y,K);break;default:Q&1?k(S,M,O,N,H,G,X,Y,K):Q&6?z(S,M,O,N,H,G,X,Y,K):(Q&64||Q&128)&&W.process(S,M,O,N,H,G,X,Y,K,A)}tt!=null&&H&&mo(tt,S&&S.ref,G,M||S,!M)},v=(S,M,O,N)=>{if(S==null)i(M.el=a(M.children),O,N);else{const H=M.el=S.el;M.children!==S.children&&c(H,M.children)}},C=(S,M,O,N)=>{S==null?i(M.el=l(M.children||""),O,N):M.el=S.el},g=(S,M,O,N)=>{[S.el,S.anchor]=m(S.children,M,O,N,S.el,S.anchor)},E=({el:S,anchor:M},O,N)=>{let H;for(;S&&S!==M;)H=d(S),i(S,O,N),S=H;i(M,O,N)},T=({el:S,anchor:M})=>{let O;for(;S&&S!==M;)O=d(S),s(S),S=O;s(M)},k=(S,M,O,N,H,G,X,Y,K)=>{M.type==="svg"?X="svg":M.type==="math"&&(X="mathml"),S==null?P(M,O,N,H,G,X,Y,K):w(S,M,H,G,X,Y,K)},P=(S,M,O,N,H,G,X,Y)=>{let K,W;const{props:tt,shapeFlag:Q,transition:st,dirs:rt}=S;if(K=S.el=o(S.type,G,tt&&tt.is,tt),Q&8?u(K,S.children):Q&16&&_(S.children,K,null,N,H,ca(S,G),X,Y),rt&&_i(S,null,N,"created"),R(K,S,S.scopeId,X,N),tt){for(const vt in tt)vt!=="value"&&!$s(vt)&&r(K,vt,null,tt[vt],G,N);"value"in tt&&r(K,"value",null,tt.value,G),(W=tt.onVnodeBeforeMount)&&rn(W,N,S)}rt&&_i(S,null,N,"beforeMount");const ct=kg(H,st);ct&&st.beforeEnter(K),i(K,M,O),((W=tt&&tt.onVnodeMounted)||ct||rt)&&Te(()=>{W&&rn(W,N,S),ct&&st.enter(K),rt&&_i(S,null,N,"mounted")},H)},R=(S,M,O,N,H)=>{if(O&&p(S,O),N)for(let G=0;G<N.length;G++)p(S,N[G]);if(H){let G=H.subTree;if(M===G||vp(G.type)&&(G.ssContent===M||G.ssFallback===M)){const X=H.vnode;R(S,X,X.scopeId,X.slotScopeIds,H.parent)}}},_=(S,M,O,N,H,G,X,Y,K=0)=>{for(let W=K;W<S.length;W++){const tt=S[W]=Y?Qn(S[W]):hn(S[W]);f(null,tt,M,O,N,H,G,X,Y)}},w=(S,M,O,N,H,G,X)=>{const Y=M.el=S.el;let{patchFlag:K,dynamicChildren:W,dirs:tt}=M;K|=S.patchFlag&16;const Q=S.props||Mt,st=M.props||Mt;let rt;if(O&&bi(O,!1),(rt=st.onVnodeBeforeUpdate)&&rn(rt,O,M,S),tt&&_i(M,S,O,"beforeUpdate"),O&&bi(O,!0),(Q.innerHTML&&st.innerHTML==null||Q.textContent&&st.textContent==null)&&u(Y,""),W?b(S.dynamicChildren,W,Y,O,N,ca(M,H),G):X||$(S,M,Y,null,O,N,ca(M,H),G,!1),K>0){if(K&16)I(Y,Q,st,O,H);else if(K&2&&Q.class!==st.class&&r(Y,"class",null,st.class,H),K&4&&r(Y,"style",Q.style,st.style,H),K&8){const ct=M.dynamicProps;for(let vt=0;vt<ct.length;vt++){const pt=ct[vt],Xt=Q[pt],Wt=st[pt];(Wt!==Xt||pt==="value")&&r(Y,pt,Xt,Wt,H,O)}}K&1&&S.children!==M.children&&u(Y,M.children)}else!X&&W==null&&I(Y,Q,st,O,H);((rt=st.onVnodeUpdated)||tt)&&Te(()=>{rt&&rn(rt,O,M,S),tt&&_i(M,S,O,"updated")},N)},b=(S,M,O,N,H,G,X)=>{for(let Y=0;Y<M.length;Y++){const K=S[Y],W=M[Y],tt=K.el&&(K.type===In||!Rs(K,W)||K.shapeFlag&70)?h(K.el):O;f(K,W,tt,null,N,H,G,X,!0)}},I=(S,M,O,N,H)=>{if(M!==O){if(M!==Mt)for(const G in M)!$s(G)&&!(G in O)&&r(S,G,M[G],null,H,N);for(const G in O){if($s(G))continue;const X=O[G],Y=M[G];X!==Y&&G!=="value"&&r(S,G,Y,X,H,N)}"value"in O&&r(S,"value",M.value,O.value,H)}},B=(S,M,O,N,H,G,X,Y,K)=>{const W=M.el=S?S.el:a(""),tt=M.anchor=S?S.anchor:a("");let{patchFlag:Q,dynamicChildren:st,slotScopeIds:rt}=M;rt&&(Y=Y?Y.concat(rt):rt),S==null?(i(W,O,N),i(tt,O,N),_(M.children||[],O,tt,H,G,X,Y,K)):Q>0&&Q&64&&st&&S.dynamicChildren?(b(S.dynamicChildren,st,O,H,G,X,Y),(M.key!=null||H&&M===H.subTree)&&hp(S,M,!0)):$(S,M,O,tt,H,G,X,Y,K)},z=(S,M,O,N,H,G,X,Y,K)=>{M.slotScopeIds=Y,S==null?M.shapeFlag&512?H.ctx.activate(M,O,N,X,K):F(M,O,N,H,G,X,K):V(S,M,K)},F=(S,M,O,N,H,G,X)=>{const Y=S.component=Qg(S,N,H);if($d(S)&&(Y.ctx.renderer=A),Jg(Y,!1,X),Y.asyncDep){if(H&&H.registerDep(Y,L,X),!S.el){const K=Y.subTree=Ie(Di);C(null,K,M,O)}}else L(Y,S,M,O,H,G,X)},V=(S,M,O)=>{const N=M.component=S.component;if(Ng(S,M,O))if(N.asyncDep&&!N.asyncResolved){U(N,M,O);return}else N.next=M,N.update();else M.el=S.el,N.vnode=M},L=(S,M,O,N,H,G,X)=>{const Y=()=>{if(S.isMounted){let{next:Q,bu:st,u:rt,parent:ct,vnode:vt}=S;{const ie=dp(S);if(ie){Q&&(Q.el=vt.el,U(S,Q,X)),ie.asyncDep.then(()=>{S.isUnmounted||Y()});return}}let pt=Q,Xt;bi(S,!1),Q?(Q.el=vt.el,U(S,Q,X)):Q=vt,st&&ia(st),(Xt=Q.props&&Q.props.onVnodeBeforeUpdate)&&rn(Xt,ct,Q,vt),bi(S,!0);const Wt=au(S),ne=S.subTree;S.subTree=Wt,f(ne,Wt,h(ne.el),q(ne),S,H,G),Q.el=Wt.el,pt===null&&Ug(S,Wt.el),rt&&Te(rt,H),(Xt=Q.props&&Q.props.onVnodeUpdated)&&Te(()=>rn(Xt,ct,Q,vt),H)}else{let Q;const{el:st,props:rt}=M,{bm:ct,m:vt,parent:pt,root:Xt,type:Wt}=S,ne=Xs(M);bi(S,!1),ct&&ia(ct),!ne&&(Q=rt&&rt.onVnodeBeforeMount)&&rn(Q,pt,M),bi(S,!0);{Xt.ce&&Xt.ce._injectChildStyle(Wt);const ie=S.subTree=au(S);f(null,ie,O,N,S,H,G),M.el=ie.el}if(vt&&Te(vt,H),!ne&&(Q=rt&&rt.onVnodeMounted)){const ie=M;Te(()=>rn(Q,pt,ie),H)}(M.shapeFlag&256||pt&&Xs(pt.vnode)&&pt.vnode.shapeFlag&256)&&S.a&&Te(S.a,H),S.isMounted=!0,M=O=N=null}};S.scope.on();const K=S.effect=new yd(Y);S.scope.off();const W=S.update=K.run.bind(K),tt=S.job=K.runIfDirty.bind(K);tt.i=S,tt.id=S.uid,K.scheduler=()=>Ul(tt),bi(S,!0),W()},U=(S,M,O)=>{M.component=S;const N=S.vnode.props;S.vnode=M,S.next=null,Eg(S,M.props,N,O),Mg(S,M.children,O),mi(),Jc(S),vi()},$=(S,M,O,N,H,G,X,Y,K=!1)=>{const W=S&&S.children,tt=S?S.shapeFlag:0,Q=M.children,{patchFlag:st,shapeFlag:rt}=M;if(st>0){if(st&128){nt(W,Q,O,N,H,G,X,Y,K);return}else if(st&256){Z(W,Q,O,N,H,G,X,Y,K);return}}rt&8?(tt&16&&Dt(W,H,G),Q!==W&&u(O,Q)):tt&16?rt&16?nt(W,Q,O,N,H,G,X,Y,K):Dt(W,H,G,!0):(tt&8&&u(O,""),rt&16&&_(Q,O,N,H,G,X,Y,K))},Z=(S,M,O,N,H,G,X,Y,K)=>{S=S||ss,M=M||ss;const W=S.length,tt=M.length,Q=Math.min(W,tt);let st;for(st=0;st<Q;st++){const rt=M[st]=K?Qn(M[st]):hn(M[st]);f(S[st],rt,O,null,H,G,X,Y,K)}W>tt?Dt(S,H,G,!0,!1,Q):_(M,O,N,H,G,X,Y,K,Q)},nt=(S,M,O,N,H,G,X,Y,K)=>{let W=0;const tt=M.length;let Q=S.length-1,st=tt-1;for(;W<=Q&&W<=st;){const rt=S[W],ct=M[W]=K?Qn(M[W]):hn(M[W]);if(Rs(rt,ct))f(rt,ct,O,null,H,G,X,Y,K);else break;W++}for(;W<=Q&&W<=st;){const rt=S[Q],ct=M[st]=K?Qn(M[st]):hn(M[st]);if(Rs(rt,ct))f(rt,ct,O,null,H,G,X,Y,K);else break;Q--,st--}if(W>Q){if(W<=st){const rt=st+1,ct=rt<tt?M[rt].el:N;for(;W<=st;)f(null,M[W]=K?Qn(M[W]):hn(M[W]),O,ct,H,G,X,Y,K),W++}}else if(W>st)for(;W<=Q;)J(S[W],H,G,!0),W++;else{const rt=W,ct=W,vt=new Map;for(W=ct;W<=st;W++){const ht=M[W]=K?Qn(M[W]):hn(M[W]);ht.key!=null&&vt.set(ht.key,W)}let pt,Xt=0;const Wt=st-ct+1;let ne=!1,ie=0;const $e=new Array(Wt);for(W=0;W<Wt;W++)$e[W]=0;for(W=rt;W<=Q;W++){const ht=S[W];if(Xt>=Wt){J(ht,H,G,!0);continue}let sn;if(ht.key!=null)sn=vt.get(ht.key);else for(pt=ct;pt<=st;pt++)if($e[pt-ct]===0&&Rs(ht,M[pt])){sn=pt;break}sn===void 0?J(ht,H,G,!0):($e[sn-ct]=W+1,sn>=ie?ie=sn:ne=!0,f(ht,M[sn],O,null,H,G,X,Y,K),Xt++)}const Hn=ne?Ig($e):ss;for(pt=Hn.length-1,W=Wt-1;W>=0;W--){const ht=ct+W,sn=M[ht],Hc=ht+1<tt?M[ht+1].el:N;$e[W]===0?f(null,sn,O,Hc,H,G,X,Y,K):ne&&(pt<0||W!==Hn[pt]?ot(sn,O,Hc,2):pt--)}}},ot=(S,M,O,N,H=null)=>{const{el:G,type:X,transition:Y,children:K,shapeFlag:W}=S;if(W&6){ot(S.component.subTree,M,O,N);return}if(W&128){S.suspense.move(M,O,N);return}if(W&64){X.move(S,M,O,A);return}if(X===In){i(G,M,O);for(let Q=0;Q<K.length;Q++)ot(K[Q],M,O,N);i(S.anchor,M,O);return}if(X===ua){E(S,M,O);return}if(N!==2&&W&1&&Y)if(N===0)Y.beforeEnter(G),i(G,M,O),Te(()=>Y.enter(G),H);else{const{leave:Q,delayLeave:st,afterLeave:rt}=Y,ct=()=>i(G,M,O),vt=()=>{Q(G,()=>{ct(),rt&&rt()})};st?st(G,ct,vt):vt()}else i(G,M,O)},J=(S,M,O,N=!1,H=!1)=>{const{type:G,props:X,ref:Y,children:K,dynamicChildren:W,shapeFlag:tt,patchFlag:Q,dirs:st,cacheIndex:rt}=S;if(Q===-2&&(H=!1),Y!=null&&mo(Y,null,O,S,!0),rt!=null&&(M.renderCache[rt]=void 0),tt&256){M.ctx.deactivate(S);return}const ct=tt&1&&st,vt=!Xs(S);let pt;if(vt&&(pt=X&&X.onVnodeBeforeUnmount)&&rn(pt,M,S),tt&6)zt(S.component,O,N);else{if(tt&128){S.suspense.unmount(O,N);return}ct&&_i(S,null,M,"beforeUnmount"),tt&64?S.type.remove(S,M,O,A,N):W&&!W.hasOnce&&(G!==In||Q>0&&Q&64)?Dt(W,M,O,!1,!0):(G===In&&Q&384||!H&&tt&16)&&Dt(K,M,O),N&&It(S)}(vt&&(pt=X&&X.onVnodeUnmounted)||ct)&&Te(()=>{pt&&rn(pt,M,S),ct&&_i(S,null,M,"unmounted")},O)},It=S=>{const{type:M,el:O,anchor:N,transition:H}=S;if(M===In){Et(O,N);return}if(M===ua){T(S);return}const G=()=>{s(O),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(S.shapeFlag&1&&H&&!H.persisted){const{leave:X,delayLeave:Y}=H,K=()=>X(O,G);Y?Y(S.el,G,K):K()}else G()},Et=(S,M)=>{let O;for(;S!==M;)O=d(S),s(S),S=O;s(M)},zt=(S,M,O)=>{const{bum:N,scope:H,job:G,subTree:X,um:Y,m:K,a:W}=S;ou(K),ou(W),N&&ia(N),H.stop(),G&&(G.flags|=8,J(X,S,M,O)),Y&&Te(Y,M),Te(()=>{S.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Dt=(S,M,O,N=!1,H=!1,G=0)=>{for(let X=G;X<S.length;X++)J(S[X],M,O,N,H)},q=S=>{if(S.shapeFlag&6)return q(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const M=d(S.anchor||S.el),O=M&&M[eg];return O?d(O):M};let j=!1;const y=(S,M,O)=>{S==null?M._vnode&&J(M._vnode,null,null,!0):f(M._vnode||null,S,M,null,null,null,O),M._vnode=S,j||(j=!0,Jc(),jd(),j=!1)},A={p:f,um:J,m:ot,r:It,mt:F,mc:_,pc:$,pbc:b,n:q,o:n};return{render:y,hydrate:void 0,createApp:xg(y)}}function ca({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function bi({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function kg(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function hp(n,t,e=!1){const i=n.children,s=t.children;if(at(i)&&at(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Qn(s[r]),a.el=o.el),!e&&a.patchFlag!==-2&&hp(o,a)),a.type===jo&&(a.el=o.el)}}function Ig(n){const t=n.slice(),e=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=e[e.length-1],n[s]<c){t[i]=s,e.push(i);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<c?r=a+1:o=a;c<n[e[r]]&&(r>0&&(t[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function dp(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:dp(t)}function ou(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const Bg=Symbol.for("v-scx"),Og=()=>tn(Bg);function no(n,t,e){return pp(n,t,e)}function pp(n,t,e=Mt){const{immediate:i,deep:s,flush:r,once:o}=e,a=de({},e),l=t&&i||!t&&r!=="post";let c;if(lr){if(r==="sync"){const p=Og();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=vn,p.resume=vn,p.pause=vn,p}}const u=ae;a.call=(p,m,f)=>_n(p,u,m,f);let h=!1;r==="post"?a.scheduler=p=>{Te(p,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(p,m)=>{m?p():Ul(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=Xv(n,t,a);return lr&&(c?c.push(d):l&&d()),d}function Lg(n,t,e){const i=this.proxy,s=qt(n)?n.includes(".")?fp(i,n):()=>i[n]:n.bind(i,i);let r;lt(t)?r=t:(r=t.handler,e=t);const o=Pr(this),a=pp(s,r.bind(i),e);return o(),a}function fp(n,t){const e=t.split(".");return()=>{let i=n;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}const zg=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${qe(t)}Modifiers`]||n[`${Gi(t)}Modifiers`];function Dg(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||Mt;let s=e;const r=t.startsWith("update:"),o=r&&zg(i,t.slice(7));o&&(o.trim&&(s=e.map(u=>qt(u)?u.trim():u)),o.number&&(s=e.map(fv)));let a,l=i[a=na(t)]||i[a=na(qe(t))];!l&&r&&(l=i[a=na(Gi(t))]),l&&_n(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,_n(c,n,6,s)}}function mp(n,t,e=!1){const i=t.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!lt(n)){const l=c=>{const u=mp(c,t,!0);u&&(a=!0,de(o,u))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Ot(n)&&i.set(n,null),null):(at(r)?r.forEach(l=>o[l]=null):de(o,r),Ot(n)&&i.set(n,o),o)}function Uo(n,t){return!n||!Io(t)?!1:(t=t.slice(2).replace(/Once$/,""),xt(n,t[0].toLowerCase()+t.slice(1))||xt(n,Gi(t))||xt(n,t))}function au(n){const{type:t,vnode:e,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:d,setupState:p,ctx:m,inheritAttrs:f}=n,v=fo(n);let C,g;try{if(e.shapeFlag&4){const T=s||i,k=T;C=hn(c.call(k,T,u,h,p,d,m)),g=a}else{const T=t;C=hn(T.length>1?T(h,{attrs:a,slots:o,emit:l}):T(h,null)),g=t.props?a:Fg(a)}}catch(T){Qs.length=0,Vo(T,n,1),C=Ie(Di)}let E=C;if(g&&f!==!1){const T=Object.keys(g),{shapeFlag:k}=E;T.length&&k&7&&(r&&T.some(Al)&&(g=Vg(g,r)),E=ms(E,g,!1,!0))}return e.dirs&&(E=ms(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(e.dirs):e.dirs),e.transition&&jl(E,e.transition),C=E,fo(v),C}const Fg=n=>{let t;for(const e in n)(e==="class"||e==="style"||Io(e))&&((t||(t={}))[e]=n[e]);return t},Vg=(n,t)=>{const e={};for(const i in n)(!Al(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function Ng(n,t,e){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?lu(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!Uo(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?lu(i,o,c):!0:!!o;return!1}function lu(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==n[r]&&!Uo(e,r))return!0}return!1}function Ug({vnode:n,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=t.vnode).el=e,t=t.parent;else break}}const vp=n=>n.__isSuspense;function jg(n,t){t&&t.pendingBranch?at(n)?t.effects.push(...n):t.effects.push(n):Jv(n)}const In=Symbol.for("v-fgt"),jo=Symbol.for("v-txt"),Di=Symbol.for("v-cmt"),ua=Symbol.for("v-stc"),Qs=[];let ke=null;function Hg(n=!1){Qs.push(ke=n?null:[])}function Gg(){Qs.pop(),ke=Qs[Qs.length-1]||null}let ar=1;function cu(n,t=!1){ar+=n,n<0&&ke&&t&&(ke.hasOnce=!0)}function gp(n){return n.dynamicChildren=ar>0?ke||ss:null,Gg(),ar>0&&ke&&ke.push(n),n}function eT(n,t,e,i,s,r){return gp(bp(n,t,e,i,s,r,!0))}function qg(n,t,e,i,s){return gp(Ie(n,t,e,i,s,!0))}function go(n){return n?n.__v_isVNode===!0:!1}function Rs(n,t){return n.type===t.type&&n.key===t.key}const _p=({key:n})=>n??null,io=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?qt(n)||ce(n)||lt(n)?{i:Ze,r:n,k:t,f:!!e}:n:null);function bp(n,t=null,e=null,i=0,s=null,r=n===In?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&_p(t),ref:t&&io(t),scopeId:Gd,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ze};return a?(Gl(l,e),r&128&&n.normalize(l)):e&&(l.shapeFlag|=qt(e)?8:16),ar>0&&!o&&ke&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ke.push(l),l}const Ie=Wg;function Wg(n,t=null,e=null,i=0,s=null,r=!1){if((!n||n===Zd)&&(n=Di),go(n)){const a=ms(n,t,!0);return e&&Gl(a,e),ar>0&&!r&&ke&&(a.shapeFlag&6?ke[ke.indexOf(n)]=a:ke.push(a)),a.patchFlag=-2,a}if(s_(n)&&(n=n.__vccOpts),t){t=$g(t);let{class:a,style:l}=t;a&&!qt(a)&&(t.class=Bl(a)),Ot(l)&&(Nl(l)&&!at(l)&&(l=de({},l)),t.style=Il(l))}const o=qt(n)?1:vp(n)?128:ng(n)?64:Ot(n)?4:lt(n)?2:0;return bp(n,t,e,i,s,o,r,!0)}function $g(n){return n?Nl(n)||sp(n)?de({},n):n:null}function ms(n,t,e=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=n,c=t?Yg(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&_p(c),ref:t&&t.ref?e&&r?at(r)?r.concat(io(t)):[r,io(t)]:io(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==In?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ms(n.ssContent),ssFallback:n.ssFallback&&ms(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&jl(u,l.clone(u)),u}function Kg(n=" ",t=0){return Ie(jo,null,n,t)}function nT(n="",t=!1){return t?(Hg(),qg(Di,null,n)):Ie(Di,null,n)}function hn(n){return n==null||typeof n=="boolean"?Ie(Di):at(n)?Ie(In,null,n.slice()):go(n)?Qn(n):Ie(jo,null,String(n))}function Qn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ms(n)}function Gl(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(at(t))e=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Gl(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!sp(t)?t._ctx=Ze:s===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:Ze},e=32):(t=String(t),i&64?(e=16,t=[Kg(t)]):e=8);n.children=t,n.shapeFlag|=e}function Yg(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Bl([t.class,i.class]));else if(s==="style")t.style=Il([t.style,i.style]);else if(Io(s)){const r=t[s],o=i[s];o&&r!==o&&!(at(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function rn(n,t,e,i=null){_n(n,t,7,[e,i])}const Xg=ep();let Zg=0;function Qg(n,t,e){const i=n.type,s=(t?t.appContext:n.appContext)||Xg,r={uid:Zg++,vnode:n,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:op(i,s),emitsOptions:mp(i,s),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:i.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Dg.bind(null,r),n.ce&&n.ce(r),r}let ae=null,_o,Qa;{const n=zo(),t=(e,i)=>{let s;return(s=n[e])||(s=n[e]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};_o=t("__VUE_INSTANCE_SETTERS__",e=>ae=e),Qa=t("__VUE_SSR_SETTERS__",e=>lr=e)}const Pr=n=>{const t=ae;return _o(n),n.scope.on(),()=>{n.scope.off(),_o(t)}},uu=()=>{ae&&ae.scope.off(),_o(null)};function wp(n){return n.vnode.shapeFlag&4}let lr=!1;function Jg(n,t=!1,e=!1){t&&Qa(t);const{props:i,children:s}=n.vnode,r=wp(n);Cg(n,i,r,t),Tg(n,s,e);const o=r?t_(n,t):void 0;return t&&Qa(!1),o}function t_(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,mg);const{setup:i}=e;if(i){mi();const s=n.setupContext=i.length>1?n_(n):null,r=Pr(n),o=Sr(i,n,0,[n.props,s]),a=fd(o);if(vi(),r(),(a||n.sp)&&!Xs(n)&&Wd(n),a){if(o.then(uu,uu),t)return o.then(l=>{hu(n,l)}).catch(l=>{Vo(l,n,0)});n.asyncDep=o}else hu(n,o)}else yp(n)}function hu(n,t,e){lt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Ot(t)&&(n.setupState=Fd(t)),yp(n)}function yp(n,t,e){const i=n.type;n.render||(n.render=i.render||vn);{const s=Pr(n);mi();try{vg(n)}finally{vi(),s()}}}const e_={get(n,t){return se(n,"get",""),n[t]}};function n_(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,e_),slots:n.slots,emit:n.emit,expose:t}}function ql(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Fd(jv(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Zs)return Zs[e](n)},has(t,e){return e in t||e in Zs}})):n.proxy}function i_(n,t=!0){return lt(n)?n.displayName||n.name:n.name||t&&n.__name}function s_(n){return lt(n)&&"__vccOpts"in n}const Xe=(n,t)=>Kv(n,t,lr);function xp(n,t,e){const i=arguments.length;return i===2?Ot(t)&&!at(t)?go(t)?Ie(n,null,[t]):Ie(n,t):Ie(n,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&go(e)&&(e=[e]),Ie(n,t,e))}const r_="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ja;const du=typeof window<"u"&&window.trustedTypes;if(du)try{Ja=du.createPolicy("vue",{createHTML:n=>n})}catch{}const Cp=Ja?n=>Ja.createHTML(n):n=>n,o_="http://www.w3.org/2000/svg",a_="http://www.w3.org/1998/Math/MathML",Rn=typeof document<"u"?document:null,pu=Rn&&Rn.createElement("template"),l_={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const s=t==="svg"?Rn.createElementNS(o_,n):t==="mathml"?Rn.createElementNS(a_,n):e?Rn.createElement(n,{is:e}):Rn.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>Rn.createTextNode(n),createComment:n=>Rn.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Rn.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,s,r){const o=e?e.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===r||!(s=s.nextSibling)););else{pu.innerHTML=Cp(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=pu.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},c_=Symbol("_vtc");function u_(n,t,e){const i=n[c_];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const fu=Symbol("_vod"),h_=Symbol("_vsh"),d_=Symbol(""),p_=/(^|;)\s*display\s*:/;function f_(n,t,e){const i=n.style,s=qt(e);let r=!1;if(e&&!s){if(t)if(qt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&so(i,a,"")}else for(const o in t)e[o]==null&&so(i,o,"");for(const o in e)o==="display"&&(r=!0),so(i,o,e[o])}else if(s){if(t!==e){const o=i[d_];o&&(e+=";"+o),i.cssText=e,r=p_.test(e)}}else t&&n.removeAttribute("style");fu in n&&(n[fu]=r?i.display:"",n[h_]&&(i.display="none"))}const mu=/\s*!important$/;function so(n,t,e){if(at(e))e.forEach(i=>so(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=m_(n,t);mu.test(e)?n.setProperty(Gi(i),e.replace(mu,""),"important"):n[i]=e}}const vu=["Webkit","Moz","ms"],ha={};function m_(n,t){const e=ha[t];if(e)return e;let i=qe(t);if(i!=="filter"&&i in n)return ha[t]=i;i=Lo(i);for(let s=0;s<vu.length;s++){const r=vu[s]+i;if(r in n)return ha[t]=r}return t}const gu="http://www.w3.org/1999/xlink";function _u(n,t,e,i,s,r=wv(t)){i&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(gu,t.slice(6,t.length)):n.setAttributeNS(gu,t,e):e==null||r&&!_d(e)?n.removeAttribute(t):n.setAttribute(t,r?"":fi(e)?String(e):e)}function bu(n,t,e,i,s){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Cp(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=_d(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(s||t)}function v_(n,t,e,i){n.addEventListener(t,e,i)}function g_(n,t,e,i){n.removeEventListener(t,e,i)}const wu=Symbol("_vei");function __(n,t,e,i,s=null){const r=n[wu]||(n[wu]={}),o=r[t];if(i&&o)o.value=i;else{const[a,l]=b_(t);if(i){const c=r[t]=x_(i,s);v_(n,a,c,l)}else o&&(g_(n,a,o,l),r[t]=void 0)}}const yu=/(?:Once|Passive|Capture)$/;function b_(n){let t;if(yu.test(n)){t={};let i;for(;i=n.match(yu);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Gi(n.slice(2)),t]}let da=0;const w_=Promise.resolve(),y_=()=>da||(w_.then(()=>da=0),da=Date.now());function x_(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;_n(C_(i,e.value),t,5,[i])};return e.value=n,e.attached=y_(),e}function C_(n,t){if(at(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const xu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,E_=(n,t,e,i,s,r)=>{const o=s==="svg";t==="class"?u_(n,i,o):t==="style"?f_(n,e,i):Io(t)?Al(t)||__(n,t,e,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):S_(n,t,i,o))?(bu(n,t,i),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&_u(n,t,i,o,r,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!qt(i))?bu(n,qe(t),i,r,t):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),_u(n,t,i,o))};function S_(n,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in n&&xu(t)&&lt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return xu(t)&&qt(e)?!1:t in n}const P_=de({patchProp:E_},l_);let Cu;function T_(){return Cu||(Cu=Ag(P_))}const iT=(...n)=>{const t=T_().createApp(...n),{mount:e}=t;return t.mount=i=>{const s=A_(i);if(!s)return;const r=t._component;!lt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=e(s,!1,M_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function M_(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function A_(n){return qt(n)?document.querySelector(n):n}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const es=typeof document<"u";function Ep(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function R_(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Ep(n.default)}const wt=Object.assign;function pa(n,t){const e={};for(const i in t){const s=t[i];e[i]=en(s)?s.map(n):n(s)}return e}const Js=()=>{},en=Array.isArray,Sp=/#/g,k_=/&/g,I_=/\//g,B_=/=/g,O_=/\?/g,Pp=/\+/g,L_=/%5B/g,z_=/%5D/g,Tp=/%5E/g,D_=/%60/g,Mp=/%7B/g,F_=/%7C/g,Ap=/%7D/g,V_=/%20/g;function Wl(n){return encodeURI(""+n).replace(F_,"|").replace(L_,"[").replace(z_,"]")}function N_(n){return Wl(n).replace(Mp,"{").replace(Ap,"}").replace(Tp,"^")}function tl(n){return Wl(n).replace(Pp,"%2B").replace(V_,"+").replace(Sp,"%23").replace(k_,"%26").replace(D_,"`").replace(Mp,"{").replace(Ap,"}").replace(Tp,"^")}function U_(n){return tl(n).replace(B_,"%3D")}function j_(n){return Wl(n).replace(Sp,"%23").replace(O_,"%3F")}function H_(n){return n==null?"":j_(n).replace(I_,"%2F")}function cr(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const G_=/\/$/,q_=n=>n.replace(G_,"");function fa(n,t,e="/"){let i,s={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),s=n(r)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=Y_(i??t,e),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:cr(o)}}function W_(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Eu(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function $_(n,t,e){const i=t.matched.length-1,s=e.matched.length-1;return i>-1&&i===s&&vs(t.matched[i],e.matched[s])&&Rp(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function vs(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function Rp(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!K_(n[e],t[e]))return!1;return!0}function K_(n,t){return en(n)?Su(n,t):en(t)?Su(t,n):n===t}function Su(n,t){return en(t)?n.length===t.length&&n.every((e,i)=>e===t[i]):n.length===1&&n[0]===t}function Y_(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=e.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ur;(function(n){n.pop="pop",n.push="push"})(ur||(ur={}));var tr;(function(n){n.back="back",n.forward="forward",n.unknown=""})(tr||(tr={}));function X_(n){if(!n)if(es){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),q_(n)}const Z_=/^[^#]+#/;function Q_(n,t){return n.replace(Z_,"#")+t}function J_(n,t){const e=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const Ho=()=>({left:window.scrollX,top:window.scrollY});function t0(n){let t;if("el"in n){const e=n.el,i=typeof e=="string"&&e.startsWith("#"),s=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!s)return;t=J_(s,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Pu(n,t){return(history.state?history.state.position-t:-1)+n}const el=new Map;function e0(n,t){el.set(n,t)}function n0(n){const t=el.get(n);return el.delete(n),t}let i0=()=>location.protocol+"//"+location.host;function kp(n,t){const{pathname:e,search:i,hash:s}=t,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Eu(l,"")}return Eu(e,n)+i+s}function s0(n,t,e,i){let s=[],r=[],o=null;const a=({state:d})=>{const p=kp(n,location),m=e.value,f=t.value;let v=0;if(d){if(e.value=p,t.value=d,o&&o===m){o=null;return}v=f?d.position-f.position:0}else i(p);s.forEach(C=>{C(e.value,m,{delta:v,type:ur.pop,direction:v?v>0?tr.forward:tr.back:tr.unknown})})};function l(){o=e.value}function c(d){s.push(d);const p=()=>{const m=s.indexOf(d);m>-1&&s.splice(m,1)};return r.push(p),p}function u(){const{history:d}=window;d.state&&d.replaceState(wt({},d.state,{scroll:Ho()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Tu(n,t,e,i=!1,s=!1){return{back:n,current:t,forward:e,replaced:i,position:window.history.length,scroll:s?Ho():null}}function r0(n){const{history:t,location:e}=window,i={value:kp(n,e)},s={value:t.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=n.indexOf("#"),d=h>-1?(e.host&&document.querySelector("base")?n:n.slice(h))+l:i0()+n+l;try{t[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(p){console.error(p),e[u?"replace":"assign"](d)}}function o(l,c){const u=wt({},t.state,Tu(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=wt({},s.value,t.state,{forward:l,scroll:Ho()});r(u.current,u,!0);const h=wt({},Tu(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function o0(n){n=X_(n);const t=r0(n),e=s0(n,t.state,t.location,t.replace);function i(r,o=!0){o||e.pauseListeners(),history.go(r)}const s=wt({location:"",base:n,go:i,createHref:Q_.bind(null,n)},t,e);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function sT(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),o0(n)}function a0(n){return typeof n=="string"||n&&typeof n=="object"}function Ip(n){return typeof n=="string"||typeof n=="symbol"}const Bp=Symbol("");var Mu;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Mu||(Mu={}));function gs(n,t){return wt(new Error,{type:n,[Bp]:!0},t)}function Cn(n,t){return n instanceof Error&&Bp in n&&(t==null||!!(n.type&t))}const Au="[^/]+?",l0={sensitive:!1,strict:!1,start:!0,end:!0},c0=/[.+*?^${}()[\]/\\]/g;function u0(n,t){const e=wt({},l0,t),i=[];let s=e.start?"^":"";const r=[];for(const c of n){const u=c.length?[]:[90];e.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let p=40+(e.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(c0,"\\$&"),p+=40;else if(d.type===1){const{value:m,repeatable:f,optional:v,regexp:C}=d;r.push({name:m,repeatable:f,optional:v});const g=C||Au;if(g!==Au){p+=10;try{new RegExp(`(${g})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${m}" (${g}): `+T.message)}}let E=f?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;h||(E=v&&c.length<2?`(?:/${E})`:"/"+E),v&&(E+="?"),s+=E,p+=20,v&&(p+=-8),f&&(p+=-20),g===".*"&&(p+=-50)}u.push(p)}i.push(u)}if(e.strict&&e.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}e.strict||(s+="/?"),e.end?s+="$":e.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,e.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",m=r[d-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const d of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of d)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:f,optional:v}=p,C=m in c?c[m]:"";if(en(C)&&!f)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const g=en(C)?C.join("/"):C;if(!g)if(v)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=g}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function h0(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=t[e]-n[e];if(i)return i;e++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Op(n,t){let e=0;const i=n.score,s=t.score;for(;e<i.length&&e<s.length;){const r=h0(i[e],s[e]);if(r)return r;e++}if(Math.abs(s.length-i.length)===1){if(Ru(i))return 1;if(Ru(s))return-1}return s.length-i.length}function Ru(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const d0={type:0,value:""},p0=/[a-zA-Z0-9_]/;function f0(n){if(!n)return[[]];if(n==="/")return[[d0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(p){throw new Error(`ERR (${e})/"${c}": ${p}`)}let e=0,i=e;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(e===0?r.push({type:0,value:c}):e===1||e===2||e===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),e=1):d();break;case 4:d(),e=i;break;case 1:l==="("?e=2:p0.test(l)?d():(h(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:e=3:u+=l;break;case 3:h(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function m0(n,t,e){const i=u0(f0(n.path),e),s=wt(i,{record:n,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function v0(n,t){const e=[],i=new Map;t=Ou({strict:!1,end:!0,sensitive:!1},t);function s(h){return i.get(h)}function r(h,d,p){const m=!p,f=Iu(h);f.aliasOf=p&&p.record;const v=Ou(t,h),C=[f];if("alias"in h){const T=typeof h.alias=="string"?[h.alias]:h.alias;for(const k of T)C.push(Iu(wt({},f,{components:p?p.record.components:f.components,path:k,aliasOf:p?p.record:f})))}let g,E;for(const T of C){const{path:k}=T;if(d&&k[0]!=="/"){const P=d.record.path,R=P[P.length-1]==="/"?"":"/";T.path=d.record.path+(k&&R+k)}if(g=m0(T,d,v),p?p.alias.push(g):(E=E||g,E!==g&&E.alias.push(g),m&&h.name&&!Bu(g)&&o(h.name)),Lp(g)&&l(g),f.children){const P=f.children;for(let R=0;R<P.length;R++)r(P[R],g,p&&p.children[R])}p=p||g}return E?()=>{o(E)}:Js}function o(h){if(Ip(h)){const d=i.get(h);d&&(i.delete(h),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(h);d>-1&&(e.splice(d,1),h.record.name&&i.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return e}function l(h){const d=b0(h,e);e.splice(d,0,h),h.record.name&&!Bu(h)&&i.set(h.record.name,h)}function c(h,d){let p,m={},f,v;if("name"in h&&h.name){if(p=i.get(h.name),!p)throw gs(1,{location:h});v=p.record.name,m=wt(ku(d.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),h.params&&ku(h.params,p.keys.map(E=>E.name))),f=p.stringify(m)}else if(h.path!=null)f=h.path,p=e.find(E=>E.re.test(f)),p&&(m=p.parse(f),v=p.record.name);else{if(p=d.name?i.get(d.name):e.find(E=>E.re.test(d.path)),!p)throw gs(1,{location:h,currentLocation:d});v=p.record.name,m=wt({},d.params,h.params),f=p.stringify(m)}const C=[];let g=p;for(;g;)C.unshift(g.record),g=g.parent;return{name:v,path:f,params:m,matched:C,meta:_0(C)}}n.forEach(h=>r(h));function u(){e.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function ku(n,t){const e={};for(const i of t)i in n&&(e[i]=n[i]);return e}function Iu(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:g0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function g0(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const i in n.components)t[i]=typeof e=="object"?e[i]:e;return t}function Bu(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function _0(n){return n.reduce((t,e)=>wt(t,e.meta),{})}function Ou(n,t){const e={};for(const i in n)e[i]=i in t?t[i]:n[i];return e}function b0(n,t){let e=0,i=t.length;for(;e!==i;){const r=e+i>>1;Op(n,t[r])<0?i=r:e=r+1}const s=w0(n);return s&&(i=t.lastIndexOf(s,i-1)),i}function w0(n){let t=n;for(;t=t.parent;)if(Lp(t)&&Op(n,t)===0)return t}function Lp({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function y0(n){const t={};if(n===""||n==="?")return t;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(Pp," "),o=r.indexOf("="),a=cr(o<0?r:r.slice(0,o)),l=o<0?null:cr(r.slice(o+1));if(a in t){let c=t[a];en(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Lu(n){let t="";for(let e in n){const i=n[e];if(e=U_(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(en(i)?i.map(r=>r&&tl(r)):[i&&tl(i)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function x0(n){const t={};for(const e in n){const i=n[e];i!==void 0&&(t[e]=en(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const C0=Symbol(""),zu=Symbol(""),Go=Symbol(""),$l=Symbol(""),nl=Symbol("");function ks(){let n=[];function t(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function Jn(n,t,e,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(gs(4,{from:e,to:t})):d instanceof Error?l(d):a0(d)?l(gs(2,{from:t,to:d})):(o&&i.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},u=r(()=>n.call(i&&i.instances[s],t,e,c));let h=Promise.resolve(u);n.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function ma(n,t,e,i,s=r=>r()){const r=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Ep(l)){const u=(l.__vccOpts||l)[t];u&&r.push(Jn(u,e,i,o,a,s))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=R_(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const p=(h.__vccOpts||h)[t];return p&&Jn(p,e,i,o,a,s)()}))}}return r}function Du(n){const t=tn(Go),e=tn($l),i=Xe(()=>{const l=as(n.to);return t.resolve(l)}),s=Xe(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=e.matched;if(!u||!h.length)return-1;const d=h.findIndex(vs.bind(null,u));if(d>-1)return d;const p=Fu(l[c-2]);return c>1&&Fu(u)===p&&h[h.length-1].path!==p?h.findIndex(vs.bind(null,l[c-2])):d}),r=Xe(()=>s.value>-1&&M0(e.params,i.value.params)),o=Xe(()=>s.value>-1&&s.value===e.matched.length-1&&Rp(e.params,i.value.params));function a(l={}){if(T0(l)){const c=t[as(n.replace)?"replace":"push"](as(n.to)).catch(Js);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:Xe(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}function E0(n){return n.length===1?n[0]:n}const S0=qd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Du,setup(n,{slots:t}){const e=Fo(Du(n)),{options:i}=tn(Go),s=Xe(()=>({[Vu(n.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[Vu(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&E0(t.default(e));return n.custom?r:xp("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:s.value},r)}}}),P0=S0;function T0(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function M0(n,t){for(const e in t){const i=t[e],s=n[e];if(typeof i=="string"){if(i!==s)return!1}else if(!en(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Fu(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Vu=(n,t,e)=>n??t??e,A0=qd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const i=tn(nl),s=Xe(()=>n.route||i.value),r=tn(zu,0),o=Xe(()=>{let c=as(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Xe(()=>s.value.matched[o.value]);eo(zu,Xe(()=>o.value+1)),eo(C0,a),eo(nl,s);const l=Hv();return no(()=>[l.value,a.value,n.name],([c,u,h],[d,p,m])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!vs(u,p)||!d)&&(u.enterCallbacks[h]||[]).forEach(f=>f(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,h=a.value,d=h&&h.components[u];if(!d)return Nu(e.default,{Component:d,route:c});const p=h.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=xp(d,wt({},m,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Nu(e.default,{Component:v,route:c})||v}}});function Nu(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const R0=A0;function rT(n){const t=v0(n.routes,n),e=n.parseQuery||y0,i=n.stringifyQuery||Lu,s=n.history,r=ks(),o=ks(),a=ks(),l=Gv(Gn);let c=Gn;es&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=pa.bind(null,q=>""+q),h=pa.bind(null,H_),d=pa.bind(null,cr);function p(q,j){let y,A;return Ip(q)?(y=t.getRecordMatcher(q),A=j):A=q,t.addRoute(A,y)}function m(q){const j=t.getRecordMatcher(q);j&&t.removeRoute(j)}function f(){return t.getRoutes().map(q=>q.record)}function v(q){return!!t.getRecordMatcher(q)}function C(q,j){if(j=wt({},j||l.value),typeof q=="string"){const O=fa(e,q,j.path),N=t.resolve({path:O.path},j),H=s.createHref(O.fullPath);return wt(O,N,{params:d(N.params),hash:cr(O.hash),redirectedFrom:void 0,href:H})}let y;if(q.path!=null)y=wt({},q,{path:fa(e,q.path,j.path).path});else{const O=wt({},q.params);for(const N in O)O[N]==null&&delete O[N];y=wt({},q,{params:h(O)}),j.params=h(j.params)}const A=t.resolve(y,j),D=q.hash||"";A.params=u(d(A.params));const S=W_(i,wt({},q,{hash:N_(D),path:A.path})),M=s.createHref(S);return wt({fullPath:S,hash:D,query:i===Lu?x0(q.query):q.query||{}},A,{redirectedFrom:void 0,href:M})}function g(q){return typeof q=="string"?fa(e,q,l.value.path):wt({},q)}function E(q,j){if(c!==q)return gs(8,{from:j,to:q})}function T(q){return R(q)}function k(q){return T(wt(g(q),{replace:!0}))}function P(q){const j=q.matched[q.matched.length-1];if(j&&j.redirect){const{redirect:y}=j;let A=typeof y=="function"?y(q):y;return typeof A=="string"&&(A=A.includes("?")||A.includes("#")?A=g(A):{path:A},A.params={}),wt({query:q.query,hash:q.hash,params:A.path!=null?{}:q.params},A)}}function R(q,j){const y=c=C(q),A=l.value,D=q.state,S=q.force,M=q.replace===!0,O=P(y);if(O)return R(wt(g(O),{state:typeof O=="object"?wt({},D,O.state):D,force:S,replace:M}),j||y);const N=y;N.redirectedFrom=j;let H;return!S&&$_(i,A,y)&&(H=gs(16,{to:N,from:A}),ot(A,A,!0,!1)),(H?Promise.resolve(H):b(N,A)).catch(G=>Cn(G)?Cn(G,2)?G:nt(G):$(G,N,A)).then(G=>{if(G){if(Cn(G,2))return R(wt({replace:M},g(G.to),{state:typeof G.to=="object"?wt({},D,G.to.state):D,force:S}),j||N)}else G=B(N,A,!0,M,D);return I(N,A,G),G})}function _(q,j){const y=E(q,j);return y?Promise.reject(y):Promise.resolve()}function w(q){const j=Et.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(q):q()}function b(q,j){let y;const[A,D,S]=k0(q,j);y=ma(A.reverse(),"beforeRouteLeave",q,j);for(const O of A)O.leaveGuards.forEach(N=>{y.push(Jn(N,q,j))});const M=_.bind(null,q,j);return y.push(M),Dt(y).then(()=>{y=[];for(const O of r.list())y.push(Jn(O,q,j));return y.push(M),Dt(y)}).then(()=>{y=ma(D,"beforeRouteUpdate",q,j);for(const O of D)O.updateGuards.forEach(N=>{y.push(Jn(N,q,j))});return y.push(M),Dt(y)}).then(()=>{y=[];for(const O of S)if(O.beforeEnter)if(en(O.beforeEnter))for(const N of O.beforeEnter)y.push(Jn(N,q,j));else y.push(Jn(O.beforeEnter,q,j));return y.push(M),Dt(y)}).then(()=>(q.matched.forEach(O=>O.enterCallbacks={}),y=ma(S,"beforeRouteEnter",q,j,w),y.push(M),Dt(y))).then(()=>{y=[];for(const O of o.list())y.push(Jn(O,q,j));return y.push(M),Dt(y)}).catch(O=>Cn(O,8)?O:Promise.reject(O))}function I(q,j,y){a.list().forEach(A=>w(()=>A(q,j,y)))}function B(q,j,y,A,D){const S=E(q,j);if(S)return S;const M=j===Gn,O=es?history.state:{};y&&(A||M?s.replace(q.fullPath,wt({scroll:M&&O&&O.scroll},D)):s.push(q.fullPath,D)),l.value=q,ot(q,j,y,M),nt()}let z;function F(){z||(z=s.listen((q,j,y)=>{if(!zt.listening)return;const A=C(q),D=P(A);if(D){R(wt(D,{replace:!0,force:!0}),A).catch(Js);return}c=A;const S=l.value;es&&e0(Pu(S.fullPath,y.delta),Ho()),b(A,S).catch(M=>Cn(M,12)?M:Cn(M,2)?(R(wt(g(M.to),{force:!0}),A).then(O=>{Cn(O,20)&&!y.delta&&y.type===ur.pop&&s.go(-1,!1)}).catch(Js),Promise.reject()):(y.delta&&s.go(-y.delta,!1),$(M,A,S))).then(M=>{M=M||B(A,S,!1),M&&(y.delta&&!Cn(M,8)?s.go(-y.delta,!1):y.type===ur.pop&&Cn(M,20)&&s.go(-1,!1)),I(A,S,M)}).catch(Js)}))}let V=ks(),L=ks(),U;function $(q,j,y){nt(q);const A=L.list();return A.length?A.forEach(D=>D(q,j,y)):console.error(q),Promise.reject(q)}function Z(){return U&&l.value!==Gn?Promise.resolve():new Promise((q,j)=>{V.add([q,j])})}function nt(q){return U||(U=!q,F(),V.list().forEach(([j,y])=>q?y(q):j()),V.reset()),q}function ot(q,j,y,A){const{scrollBehavior:D}=n;if(!es||!D)return Promise.resolve();const S=!y&&n0(Pu(q.fullPath,0))||(A||!y)&&history.state&&history.state.scroll||null;return Nd().then(()=>D(q,j,S)).then(M=>M&&t0(M)).catch(M=>$(M,q,j))}const J=q=>s.go(q);let It;const Et=new Set,zt={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:f,resolve:C,options:n,push:T,replace:k,go:J,back:()=>J(-1),forward:()=>J(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:L.add,isReady:Z,install(q){const j=this;q.component("RouterLink",P0),q.component("RouterView",R0),q.config.globalProperties.$router=j,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>as(l)}),es&&!It&&l.value===Gn&&(It=!0,T(s.location).catch(D=>{}));const y={};for(const D in Gn)Object.defineProperty(y,D,{get:()=>l.value[D],enumerable:!0});q.provide(Go,j),q.provide($l,Ld(y)),q.provide(nl,l);const A=q.unmount;Et.add(q),q.unmount=function(){Et.delete(q),Et.size<1&&(c=Gn,z&&z(),z=null,l.value=Gn,It=!1,U=!1),A()}}};function Dt(q){return q.reduce((j,y)=>j.then(()=>w(y)),Promise.resolve())}return zt}function k0(n,t){const e=[],i=[],s=[],r=Math.max(t.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(n.matched.find(c=>vs(c,a))?i.push(a):e.push(a));const l=n.matched[o];l&&(t.matched.find(c=>vs(c,l))||s.push(l))}return[e,i,s]}function oT(){return tn(Go)}function aT(n){return tn($l)}(function(t,e){var i=e.documentElement,s=t.devicePixelRatio||1;function r(){e.body?e.body.style.fontSize=12*s+"px":e.addEventListener("DOMContentLoaded",r)}r();function o(){var c=i.clientWidth/10;i.style.fontSize=c+"px"}if(o(),t.addEventListener("resize",o),t.addEventListener("pageshow",function(c){c.persisted&&o()}),s>=2){var a=e.createElement("body"),l=e.createElement("div");l.style.border=".5px solid transparent",a.appendChild(l),i.appendChild(a),l.offsetHeight===1&&i.classList.add("hairlines"),i.removeChild(a)}})(window,document);/**
 * postprocessing v6.36.4 build Tue Nov 05 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rüschen
 * @license Zlib
 */var va=1/1e3,I0=1e3,B0=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*va}get fixedDelta(){return this._fixedDelta*va}set fixedDelta(n){this._fixedDelta=n*I0}get elapsed(){return this._elapsed*va}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},O0=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),e=new to;return e.setAttribute("position",new qc(n,3)),e.setAttribute("uv",new qc(t,2)),e})(),nn=class il{static get fullscreenGeometry(){return O0}constructor(t="Pass",e=new Gc,i=new iv){this.name=t,this.renderer=null,this.scene=e,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new An(il.fullscreenGeometry,t),e.frustumCulled=!1,this.scene===null&&(this.scene=new Gc),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=ko){}render(t,e,i,s,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,i){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof pi||e instanceof hd||e instanceof dd||e instanceof il)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},L0=class extends nn{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,t,e,i,s){const r=n.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},z0=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,zp="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Dp=class extends Hi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Pt(null),opacity:new Pt(1)},blending:Es,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:z0,vertexShader:zp})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},D0=class extends nn{constructor(n,t=!0){super("CopyPass"),this.fullscreenMaterial=new Dp,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new pi(1,1,{minFilter:uo,magFilter:uo,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,t,e,i,s){this.fullscreenMaterial.inputBuffer=t.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,t){this.autoResize&&this.renderTarget.setSize(n,t)}initialize(n,t,e){e!==void 0&&(this.renderTarget.texture.type=e,e!==Li?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===oe&&(this.renderTarget.texture.colorSpace=oe))}},Uu=new ov,Fp=class extends nn{constructor(n=!0,t=!0,e=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=t,this.stencil=e,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,t,e){this.color=n,this.depth=t,this.stencil=e}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,t,e,i,s){const r=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=r!==null,c=o>=0;l?(n.getClearColor(Uu),n.setClearColor(r,c?o:a)):c&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:t),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(Uu,a):c&&n.setClearAlpha(a)}},F0=class extends nn{constructor(n,t){super("MaskPass",n,t),this.needsSwap=!1,this.clearPass=new Fp(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,t,e,i,s){const r=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.stencil.setFunc(r.ALWAYS,u,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,t),c.render(n,e))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(t),n.render(a,l),n.setRenderTarget(e),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(r.EQUAL,1,4294967295),o.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.stencil.setLocked(!0)}},lT=class{constructor(n=null,{depthBuffer:t=!0,stencilBuffer:e=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,e,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new D0,this.depthTexture=null,this.passes=[],this.timer=new B0,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const t=this.inputBuffer,e=this.multisampling;e>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):e!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const t=n.getSize(new be),e=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Li&&n.outputColorSpace===oe&&(this.inputBuffer.texture.colorSpace=oe,this.outputBuffer.texture.colorSpace=oe,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(n,e,i)}}replaceRenderer(n,t=!0){const e=this.renderer,i=e.domElement.parentNode;return this.setRenderer(n),t&&i!==null&&(i.removeChild(e.domElement),i.appendChild(n.domElement)),e}createDepthTexture(){const n=this.depthTexture=new Jm;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=tv,n.type=ev):n.type=nv,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,t,e,i){const s=this.renderer,r=s===null?new be:s.getDrawingBufferSize(new be),o={minFilter:uo,magFilter:uo,stencilBuffer:t,depthBuffer:n,type:e},a=new pi(r.width,r.height,o);return i>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=i),e===Li&&s!==null&&s.outputColorSpace===oe&&(a.texture.colorSpace=oe),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}setMainScene(n){for(const t of this.passes)t.mainScene=n}setMainCamera(n){for(const t of this.passes)t.mainCamera=n}addPass(n,t){const e=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new be),r=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,r,o),this.autoRenderToScreen&&(e.length>0&&(e[e.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?e.splice(t,0,n):e.push(n),this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(n of e)n.setDepthTexture(a)}else n.setDepthTexture(this.depthTexture)}removePass(n){const t=this.passes,e=t.indexOf(n);if(e!==-1&&t.splice(e,1).length>0){if(this.depthTexture!==null){const r=(a,l)=>a||l.needsDepthTexture;t.reduce(r,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&e===t.length&&(n.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const t=this.renderer,e=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,r=!1,o,a,l;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(t,i,s,n,r),c.needsSwap&&(r&&(e.renderToScreen=c.renderToScreen,o=t.getContext(),a=t.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),e.render(t,i,s,n,r),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=s,s=l),c instanceof F0?r=!0:c instanceof L0&&(r=!1))}setSize(n,t,e){const i=this.renderer,s=i.getSize(new be);(n===void 0||t===void 0)&&(n=s.width,t=s.height),(s.width!==n||s.height!==t)&&i.setSize(n,t,e);const r=i.getDrawingBufferSize(new be);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const o of this.passes)o.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),nn.fullscreenGeometry.dispose()}},Ai={NONE:0,DEPTH:1,CONVOLUTION:2},_t={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},V0=class{constructor(){this.shaderParts=new Map([[_t.FRAGMENT_HEAD,null],[_t.FRAGMENT_MAIN_UV,null],[_t.FRAGMENT_MAIN_IMAGE,null],[_t.VERTEX_HEAD,null],[_t.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Ai.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ld}},ga=!1,ju=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case Nr:e=this.materialsFlatShadedDoubleSide;break;case Vr:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded;break}else switch(t.material.side){case Nr:e=this.materialsDoubleSide;break;case Vr:e=this.materialsBackSide;break;default:e=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Hi))return n.clone();const t=n.uniforms,e=new Map;for(const s in t){const r=t[s].value;r.isRenderTargetTexture&&(t[s].value=null,e.set(s,r))}const i=n.clone();for(const s of e)t[s[0]].value=s[1],i.uniforms[s[0]].value=s[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const t=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const e of t)e.uniforms=Object.assign({},n.uniforms),e.side=sv;t[2].skinning=!0,this.materialsBackSide=t.map(e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},n.uniforms),i.side=Vr,i}),this.materialsDoubleSide=t.map(e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},n.uniforms),i.side=Nr,i}),this.materialsFlatShaded=t.map(e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Vr,i}),this.materialsFlatShadedDoubleSide=t.map(e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Nr,i})}}render(n,t,e){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,ga){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),n.render(t,e);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,n.render(t,e),t.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of n)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return ga}static set workaroundEnabled(n){ga=n}},qn=-1,pn=class extends Tl{constructor(n,t=qn,e=qn,i=1){super(),this.resizable=n,this.baseSize=new be(1,1),this.preferredSize=new be(t,e),this.target=this.preferredSize,this.s=i,this.effectiveSize=new be,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,t=this.preferredSize,e=this.effectiveSize,i=this.scale;t.width!==qn?e.width=t.width:t.height!==qn?e.width=Math.round(t.height*(n.width/Math.max(n.height,1))):e.width=Math.round(n.width*i),t.height!==qn?e.height=t.height:t.width!==qn?e.height=Math.round(t.width/Math.max(n.width/Math.max(n.height,1),1)):e.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(qn),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,t){(this.baseSize.width!==n||this.baseSize.height!==t)&&(this.baseSize.set(n,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,t){(this.preferredSize.width!==n||this.preferredSize.height!==t)&&(this.preferredSize.set(n,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return qn}},dt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},N0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",U0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",j0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",H0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",G0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",q0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",W0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",$0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",K0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Y0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",X0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Z0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Q0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",J0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",tb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",eb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",nb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",ib="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",sb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",rb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",ob="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",ab="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",lb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",cb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",ub="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",hb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",db="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",pb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",fb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",mb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",vb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",gb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",_b=new Map([[dt.ADD,N0],[dt.ALPHA,U0],[dt.AVERAGE,j0],[dt.COLOR,H0],[dt.COLOR_BURN,G0],[dt.COLOR_DODGE,q0],[dt.DARKEN,W0],[dt.DIFFERENCE,$0],[dt.DIVIDE,K0],[dt.DST,null],[dt.EXCLUSION,Y0],[dt.HARD_LIGHT,X0],[dt.HARD_MIX,Z0],[dt.HUE,Q0],[dt.INVERT,J0],[dt.INVERT_RGB,tb],[dt.LIGHTEN,eb],[dt.LINEAR_BURN,nb],[dt.LINEAR_DODGE,ib],[dt.LINEAR_LIGHT,sb],[dt.LUMINOSITY,rb],[dt.MULTIPLY,ob],[dt.NEGATION,ab],[dt.NORMAL,lb],[dt.OVERLAY,cb],[dt.PIN_LIGHT,ub],[dt.REFLECT,hb],[dt.SATURATION,db],[dt.SCREEN,pb],[dt.SOFT_LIGHT,fb],[dt.SRC,mb],[dt.SUBTRACT,vb],[dt.VIVID_LIGHT,gb]]),bb=class extends Tl{constructor(n,t=1){super(),this._blendFunction=n,this.opacity=new Pt(t)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return _b.get(this.blendFunction)}},Kl={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},wb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,yb="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",xb=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Cb=class extends Hi{constructor(n=new Wc){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Pt(null),texelSize:new Pt(new Wc),scale:new Pt(1),kernel:new Pt(0)},blending:Es,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:wb,vertexShader:yb}),this.setTexelSize(n.x,n.y),this.kernelSize=Kl.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return xb[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,t){this.uniforms.texelSize.value.set(n,t,n*.5,t*.5)}setSize(n,t){const e=1/n,i=1/t;this.uniforms.texelSize.value.set(e,i,e*.5,i*.5)}},Eb=class extends nn{constructor({kernelSize:n=Kl.MEDIUM,resolutionScale:t=.5,width:e=pn.AUTO_SIZE,height:i=pn.AUTO_SIZE,resolutionX:s=e,resolutionY:r=i}={}){super("KawaseBlurPass"),this.renderTargetA=new pi(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new pn(this,s,r,t);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new Cb,this._blurMaterial.kernelSize=n,this.copyMaterial=new Dp}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,t,e,i,s){const r=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let h=t;this.fullscreenMaterial=c;for(let d=0,p=u.length;d<p;++d){const m=d&1?l:a;c.kernel=u[d],c.inputBuffer=h.texture,n.setRenderTarget(m),n.render(r,o),h=m}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,n.setRenderTarget(this.renderToScreen?null:e),n.render(r,o)}setSize(n,t){const e=this.resolution;e.setBaseSize(n,t);const i=e.width,s=e.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,t)}initialize(n,t,e){e!==void 0&&(this.renderTargetA.texture.type=e,this.renderTargetB.texture.type=e,e!==Li?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===oe&&(this.renderTargetA.texture.colorSpace=oe,this.renderTargetB.texture.colorSpace=oe))}static get AUTO_SIZE(){return pn.AUTO_SIZE}},Sb=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Pb=class extends Hi{constructor(n=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ud.replace(/\D+/g,"")},uniforms:{inputBuffer:new Pt(null),threshold:new Pt(0),smoothing:new Pt(1),range:new Pt(null)},blending:Es,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Sb,vertexShader:zp}),this.colorOutput=n,this.luminanceRange=t}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},Tb=class extends nn{constructor({renderTarget:n,luminanceRange:t,colorOutput:e,resolutionScale:i=1,width:s=pn.AUTO_SIZE,height:r=pn.AUTO_SIZE,resolutionX:o=s,resolutionY:a=r}={}){super("LuminancePass"),this.fullscreenMaterial=new Pb(e,t),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new pi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new pn(this,o,a,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,t,e,i,s){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,t){const e=this.resolution;e.setBaseSize(n,t),this.renderTarget.setSize(e.width,e.height)}initialize(n,t,e){e!==void 0&&e!==Li&&(this.renderTarget.texture.type=e,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Mb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Ab="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Rb=class extends Hi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Pt(null),texelSize:new Pt(new be)},blending:Es,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Mb,vertexShader:Ab})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,t){this.uniforms.texelSize.value.set(1/n,1/t)}},kb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Ib="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Bb=class extends Hi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Pt(null),supportBuffer:new Pt(null),texelSize:new Pt(new be),radius:new Pt(.85)},blending:Es,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kb,vertexShader:Ib})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,t){this.uniforms.texelSize.value.set(1/n,1/t)}},Ob=class extends nn{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new pi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Rb,this.upsamplingMaterial=new Bb,this.resolution=new be}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let e=0;e<n;++e){const i=t.clone();i.texture.name="Downsampling.Mipmap"+e,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(t);for(let e=1,i=n-1;e<i;++e){const s=t.clone();s.texture.name="Upsampling.Mipmap"+e,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,t,e,i,s){const{scene:r,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let h=t;this.fullscreenMaterial=a;for(let d=0,p=c.length;d<p;++d){const m=c[d];a.setSize(h.width,h.height),a.inputBuffer=h.texture,n.setRenderTarget(m),n.render(r,o),h=m}this.fullscreenMaterial=l;for(let d=u.length-1;d>=0;--d){const p=u[d];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=c[d].texture,n.setRenderTarget(p),n.render(r,o),h=p}}setSize(n,t){const e=this.resolution;e.set(n,t);let i=e.width,s=e.height;for(let r=0,o=this.downsamplingMipmaps.length;r<o;++r)i=Math.round(i*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(i,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(i,s)}initialize(n,t,e){if(e!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of i)s.texture.type=e;if(e!==Li)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===oe)for(const s of i)s.texture.colorSpace=oe}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},Lb=class extends Tl{constructor(n,t,{attributes:e=Ai.NONE,blendFunction:i=dt.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=e,this.fragmentShader=t,this.vertexShader=a,this.defines=s,this.uniforms=r,this.extensions=o,this.blendMode=new bb(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=ld,this._outputColorSpace=cd}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,t=ko){}update(n,t,e){}setSize(n,t){}initialize(n,t,e){}dispose(){for(const n of Object.keys(this)){const t=this[n];(t instanceof pi||t instanceof hd||t instanceof dd||t instanceof nn)&&this[n].dispose()}}},zb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,cT=class extends Lb{constructor({blendFunction:n=dt.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:e=.025,mipmapBlur:i=!1,intensity:s=1,radius:r=.85,levels:o=8,kernelSize:a=Kl.LARGE,resolutionScale:l=.5,width:c=pn.AUTO_SIZE,height:u=pn.AUTO_SIZE,resolutionX:h=c,resolutionY:d=u}={}){super("BloomEffect",zb,{blendFunction:n,uniforms:new Map([["map",new Pt(null)],["intensity",new Pt(s)]])}),this.renderTarget=new pi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Eb({kernelSize:a}),this.luminancePass=new Tb({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=e,this.mipmapBlurPass=new Ob,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new pn(this,h,d,l);p.addEventListener("change",m=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,t,e){const i=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(n,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,s.renderTarget):this.blurPass.render(n,s.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,t):this.blurPass.render(n,t,i)}setSize(n,t){const e=this.resolution;e.setBaseSize(n,t),this.renderTarget.setSize(e.width,e.height),this.blurPass.resolution.copy(e),this.luminancePass.setSize(n,t),this.mipmapBlurPass.setSize(n,t)}initialize(n,t,e){this.blurPass.initialize(n,t,e),this.luminancePass.initialize(n,t,e),this.mipmapBlurPass.initialize(n,t,e),e!==void 0&&(this.renderTarget.texture.type=e,n!==null&&n.outputColorSpace===oe&&(this.renderTarget.texture.colorSpace=oe))}},uT=class extends nn{constructor(n,t,e=null){super("RenderPass",n,t),this.needsSwap=!1,this.clearPass=new Fp,this.overrideMaterialManager=e===null?null:new ju(e),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const t=this.overrideMaterialManager;n!==null?t!==null?t.setMaterial(n):this.overrideMaterialManager=new ju(n):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,t,e,i,s){const r=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=r.background,u=n.shadowMap.autoUpdate,h=this.renderToScreen?null:t;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(n,t),n.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,r,o):n.render(r,o),o.layers.mask=l,r.background=c,n.shadowMap.autoUpdate=u}},Db=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Fb="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Vb=class extends Hi{constructor(n,t,e,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ud.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Pt(null),depthBuffer:new Pt(null),resolution:new Pt(new be),texelSize:new Pt(new be),cameraNear:new Pt(.3),cameraFar:new Pt(1e3),aspect:new Pt(1),time:new Pt(0)},blending:Es,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),n&&this.setShaderParts(n),t&&this.setDefines(t),e&&this.setUniforms(e),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,t=ko){this.depthBuffer=n,this.depthPacking=t}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=Db.replace(_t.FRAGMENT_HEAD,n.get(_t.FRAGMENT_HEAD)||"").replace(_t.FRAGMENT_MAIN_UV,n.get(_t.FRAGMENT_MAIN_UV)||"").replace(_t.FRAGMENT_MAIN_IMAGE,n.get(_t.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Fb.replace(_t.VERTEX_HEAD,n.get(_t.VERTEX_HEAD)||"").replace(_t.VERTEX_MAIN_SUPPORT,n.get(_t.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const t of n.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(n){for(const t of n.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(n){this.extensions={};for(const t of n)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof rv?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,t){const e=this.uniforms;e.resolution.value.set(n,t),e.texelSize.value.set(1/n,1/t),e.aspect.value=n/t}static get Section(){return _t}};function Hu(n,t,e){for(const i of t){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),r=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of e.entries())o[1]!==null&&e.set(o[0],o[1].replace(r,s))}}function Nb(n,t,e){let i=t.getFragmentShader(),s=t.getVertexShader();const r=i!==void 0&&/mainImage/.test(i),o=i!==void 0&&/mainUv/.test(i);if(e.attributes|=t.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(o&&e.attributes&Ai.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!r&&!o)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=e.shaderParts;let c=l.get(_t.FRAGMENT_HEAD)||"",u=l.get(_t.FRAGMENT_MAIN_UV)||"",h=l.get(_t.FRAGMENT_MAIN_IMAGE)||"",d=l.get(_t.VERTEX_HEAD)||"",p=l.get(_t.VERTEX_MAIN_SUPPORT)||"";const m=new Set,f=new Set;if(o&&(u+=`	${n}MainUv(UV);
`,e.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const g=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);p+=`	${n}MainSupport(`,p+=g?`vUv);
`:`);
`;for(const E of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const T of E[1].split(/\s*,\s*/))e.varyings.add(T),m.add(T),f.add(T);for(const E of s.matchAll(a))f.add(E[1])}for(const g of i.matchAll(a))f.add(g[1]);for(const g of t.defines.keys())f.add(g.replace(/\([\w\s,]*\)/g,""));for(const g of t.uniforms.keys())f.add(g);f.delete("while"),f.delete("for"),f.delete("if"),t.uniforms.forEach((g,E)=>e.uniforms.set(n+E.charAt(0).toUpperCase()+E.slice(1),g)),t.defines.forEach((g,E)=>e.defines.set(n+E.charAt(0).toUpperCase()+E.slice(1),g));const v=new Map([["fragment",i],["vertex",s]]);Hu(n,f,e.defines),Hu(n,f,v),i=v.get("fragment"),s=v.get("vertex");const C=t.blendMode;if(e.blendModes.set(C.blendFunction,C),r){t.inputColorSpace!==null&&t.inputColorSpace!==e.colorSpace&&(h+=t.inputColorSpace===oe?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==cd?e.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(e.colorSpace=t.inputColorSpace);const g=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${n}MainImage(color0, UV, `,e.attributes&Ai.DEPTH&&g.test(i)&&(h+="depth, ",e.readDepth=!0),h+=`color1);
	`;const E=n+"BlendOpacity";e.uniforms.set(E,C.opacity),h+=`color0 = blend${C.blendFunction}(color0, color1, ${E});

	`,c+=`uniform float ${E};

`}if(c+=i+`
`,s!==null&&(d+=s+`
`),l.set(_t.FRAGMENT_HEAD,c),l.set(_t.FRAGMENT_MAIN_UV,u),l.set(_t.FRAGMENT_MAIN_IMAGE,h),l.set(_t.VERTEX_HEAD,d),l.set(_t.VERTEX_MAIN_SUPPORT,p),t.extensions!==null)for(const g of t.extensions)e.extensions.add(g)}}var hT=class extends nn{constructor(n,...t){super("EffectPass"),this.fullscreenMaterial=new Vb(null,null,null,n),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const t of this.effects)t.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const t of this.effects)t.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const t=this.fullscreenMaterial;t.dithering=n,t.needsUpdate=!0}setEffects(n){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=n.sort((t,e)=>e.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const n=new V0;let t=0;for(const o of this.effects)if(o.blendMode.blendFunction===dt.DST)n.attributes|=o.getAttributes()&Ai.DEPTH;else{if(n.attributes&o.getAttributes()&Ai.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);Nb("e"+t++,o,n)}let e=n.shaderParts.get(_t.FRAGMENT_HEAD),i=n.shaderParts.get(_t.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(_t.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const o of n.blendModes.values())e+=o.getShaderCode().replace(r,`blend${o.blendFunction}`)+`
`;n.attributes&Ai.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===oe&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(_t.FRAGMENT_HEAD,e),n.shaderParts.set(_t.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(_t.FRAGMENT_MAIN_UV,s);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,t=ko){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=t;for(const e of this.effects)e.setDepthTexture(n,t)}render(n,t,e,i,s){for(const r of this.effects)r.update(n,t,i);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,r.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:e),n.render(this.scene,this.camera)}}setSize(n,t){this.fullscreenMaterial.setSize(n,t);for(const e of this.effects)e.setSize(n,t)}initialize(n,t,e){this.renderer=n;for(const i of this.effects)i.initialize(n,t,e);this.updateMaterial(),e!==void 0&&e!==Li&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}};function qo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Gr(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vp={exports:{}};(function(n,t){(function(e){n.exports=e()})(function(){return function e(i,s,r){function o(c,u){if(!s[c]){if(!i[c]){var h=typeof Gr=="function"&&Gr;if(!u&&h)return h(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}u=s[c]={exports:{}},i[c][0].call(u.exports,function(d){var p=i[c][1][d];return o(p||d)},u,u.exports,e,i,s,r)}return s[c].exports}for(var a=typeof Gr=="function"&&Gr,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){var m=e("crypto");function f(P,R){R=g(P,R);var _;return(_=R.algorithm!=="passthrough"?m.createHash(R.algorithm):new k).write===void 0&&(_.write=_.update,_.end=_.update),T(R,_).dispatch(P),_.update||_.end(""),_.digest?_.digest(R.encoding==="buffer"?void 0:R.encoding):(P=_.read(),R.encoding!=="buffer"?P.toString(R.encoding):P)}(s=i.exports=f).sha1=function(P){return f(P)},s.keys=function(P){return f(P,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(P){return f(P,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(P){return f(P,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=m.getHashes?m.getHashes().slice():["sha1","md5"],C=(v.push("passthrough"),["buffer","hex","binary","base64"]);function g(P,R){var _={};if(_.algorithm=(R=R||{}).algorithm||"sha1",_.encoding=R.encoding||"hex",_.excludeValues=!!R.excludeValues,_.algorithm=_.algorithm.toLowerCase(),_.encoding=_.encoding.toLowerCase(),_.ignoreUnknown=R.ignoreUnknown===!0,_.respectType=R.respectType!==!1,_.respectFunctionNames=R.respectFunctionNames!==!1,_.respectFunctionProperties=R.respectFunctionProperties!==!1,_.unorderedArrays=R.unorderedArrays===!0,_.unorderedSets=R.unorderedSets!==!1,_.unorderedObjects=R.unorderedObjects!==!1,_.replacer=R.replacer||void 0,_.excludeKeys=R.excludeKeys||void 0,P===void 0)throw new Error("Object argument required.");for(var w=0;w<v.length;++w)v[w].toLowerCase()===_.algorithm.toLowerCase()&&(_.algorithm=v[w]);if(v.indexOf(_.algorithm)===-1)throw new Error('Algorithm "'+_.algorithm+'"  not supported. supported values: '+v.join(", "));if(C.indexOf(_.encoding)===-1&&_.algorithm!=="passthrough")throw new Error('Encoding "'+_.encoding+'"  not supported. supported values: '+C.join(", "));return _}function E(P){if(typeof P=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(P))!=null}function T(P,R,_){_=_||[];function w(b){return R.update?R.update(b,"utf8"):R.write(b,"utf8")}return{dispatch:function(b){return this["_"+((b=P.replacer?P.replacer(b):b)===null?"null":typeof b)](b)},_object:function(b){var I,B=Object.prototype.toString.call(b),z=/\[object (.*)\]/i.exec(B);if(z=(z=z?z[1]:"unknown:["+B+"]").toLowerCase(),0<=(B=_.indexOf(b)))return this.dispatch("[CIRCULAR:"+B+"]");if(_.push(b),a!==void 0&&a.isBuffer&&a.isBuffer(b))return w("buffer:"),w(b);if(z==="object"||z==="function"||z==="asyncfunction")return B=Object.keys(b),P.unorderedObjects&&(B=B.sort()),P.respectType===!1||E(b)||B.splice(0,0,"prototype","__proto__","constructor"),P.excludeKeys&&(B=B.filter(function(F){return!P.excludeKeys(F)})),w("object:"+B.length+":"),I=this,B.forEach(function(F){I.dispatch(F),w(":"),P.excludeValues||I.dispatch(b[F]),w(",")});if(!this["_"+z]){if(P.ignoreUnknown)return w("["+z+"]");throw new Error('Unknown object type "'+z+'"')}this["_"+z](b)},_array:function(b,F){F=F!==void 0?F:P.unorderedArrays!==!1;var B=this;if(w("array:"+b.length+":"),!F||b.length<=1)return b.forEach(function(V){return B.dispatch(V)});var z=[],F=b.map(function(V){var L=new k,U=_.slice();return T(P,L,U).dispatch(V),z=z.concat(U.slice(_.length)),L.read().toString()});return _=_.concat(z),F.sort(),this._array(F,!1)},_date:function(b){return w("date:"+b.toJSON())},_symbol:function(b){return w("symbol:"+b.toString())},_error:function(b){return w("error:"+b.toString())},_boolean:function(b){return w("bool:"+b.toString())},_string:function(b){w("string:"+b.length+":"),w(b.toString())},_function:function(b){w("fn:"),E(b)?this.dispatch("[native]"):this.dispatch(b.toString()),P.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(b.name)),P.respectFunctionProperties&&this._object(b)},_number:function(b){return w("number:"+b.toString())},_xml:function(b){return w("xml:"+b.toString())},_null:function(){return w("Null")},_undefined:function(){return w("Undefined")},_regexp:function(b){return w("regex:"+b.toString())},_uint8array:function(b){return w("uint8array:"),this.dispatch(Array.prototype.slice.call(b))},_uint8clampedarray:function(b){return w("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(b))},_int8array:function(b){return w("int8array:"),this.dispatch(Array.prototype.slice.call(b))},_uint16array:function(b){return w("uint16array:"),this.dispatch(Array.prototype.slice.call(b))},_int16array:function(b){return w("int16array:"),this.dispatch(Array.prototype.slice.call(b))},_uint32array:function(b){return w("uint32array:"),this.dispatch(Array.prototype.slice.call(b))},_int32array:function(b){return w("int32array:"),this.dispatch(Array.prototype.slice.call(b))},_float32array:function(b){return w("float32array:"),this.dispatch(Array.prototype.slice.call(b))},_float64array:function(b){return w("float64array:"),this.dispatch(Array.prototype.slice.call(b))},_arraybuffer:function(b){return w("arraybuffer:"),this.dispatch(new Uint8Array(b))},_url:function(b){return w("url:"+b.toString())},_map:function(b){return w("map:"),b=Array.from(b),this._array(b,P.unorderedSets!==!1)},_set:function(b){return w("set:"),b=Array.from(b),this._array(b,P.unorderedSets!==!1)},_file:function(b){return w("file:"),this.dispatch([b.name,b.size,b.type,b.lastModfied])},_blob:function(){if(P.ignoreUnknown)return w("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return w("domwindow")},_bigint:function(b){return w("bigint:"+b.toString())},_process:function(){return w("process")},_timer:function(){return w("timer")},_pipe:function(){return w("pipe")},_tcp:function(){return w("tcp")},_udp:function(){return w("udp")},_tty:function(){return w("tty")},_statwatcher:function(){return w("statwatcher")},_securecontext:function(){return w("securecontext")},_connection:function(){return w("connection")},_zlib:function(){return w("zlib")},_context:function(){return w("context")},_nodescript:function(){return w("nodescript")},_httpparser:function(){return w("httpparser")},_dataview:function(){return w("dataview")},_signal:function(){return w("signal")},_fsevent:function(){return w("fsevent")},_tlswrap:function(){return w("tlswrap")}}}function k(){return{buf:"",write:function(P){this.buf+=P},end:function(P){this.buf+=P},read:function(){return this.buf}}}s.writeToStream=function(P,R,_){return _===void 0&&(_=R,R={}),T(R=g(P,R),_).dispatch(P)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){(function(m){var f=typeof Uint8Array<"u"?Uint8Array:Array,v=43,C=47,g=48,E=97,T=65,k=45,P=95;function R(_){return _=_.charCodeAt(0),_===v||_===k?62:_===C||_===P?63:_<g?-1:_<g+10?_-g+26+26:_<T+26?_-T:_<E+26?_-E+26:void 0}m.toByteArray=function(_){var w,b;if(0<_.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var I=_.length,I=_.charAt(I-2)==="="?2:_.charAt(I-1)==="="?1:0,B=new f(3*_.length/4-I),z=0<I?_.length-4:_.length,F=0;function V(L){B[F++]=L}for(w=0;w<z;w+=4,0)V((16711680&(b=R(_.charAt(w))<<18|R(_.charAt(w+1))<<12|R(_.charAt(w+2))<<6|R(_.charAt(w+3))))>>16),V((65280&b)>>8),V(255&b);return I==2?V(255&(b=R(_.charAt(w))<<2|R(_.charAt(w+1))>>4)):I==1&&(V((b=R(_.charAt(w))<<10|R(_.charAt(w+1))<<4|R(_.charAt(w+2))>>2)>>8&255),V(255&b)),B},m.fromByteArray=function(_){var w,b,I,B,z=_.length%3,F="";function V(L){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(L)}for(w=0,I=_.length-z;w<I;w+=3)b=(_[w]<<16)+(_[w+1]<<8)+_[w+2],F+=V((B=b)>>18&63)+V(B>>12&63)+V(B>>6&63)+V(63&B);switch(z){case 1:F=(F+=V((b=_[_.length-1])>>2))+V(b<<4&63)+"==";break;case 2:F=(F=(F+=V((b=(_[_.length-2]<<8)+_[_.length-1])>>10))+V(b>>4&63))+V(b<<2&63)+"="}return F}})(s===void 0?this.base64js={}:s)}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(e,i,s){(function(r,o,v,l,c,u,h,d,p){var m=e("base64-js"),f=e("ieee754");function v(y,A,D){if(!(this instanceof v))return new v(y,A,D);var S,M,O,N,H=typeof y;if(A==="base64"&&H=="string")for(y=(N=y).trim?N.trim():N.replace(/^\s+|\s+$/g,"");y.length%4!=0;)y+="=";if(H=="number")S=$(y);else if(H=="string")S=v.byteLength(y,A);else{if(H!="object")throw new Error("First argument needs to be a number, array or string.");S=$(y.length)}if(v._useTypedArrays?M=v._augment(new Uint8Array(S)):((M=this).length=S,M._isBuffer=!0),v._useTypedArrays&&typeof y.byteLength=="number")M._set(y);else if(Z(N=y)||v.isBuffer(N)||N&&typeof N=="object"&&typeof N.length=="number")for(O=0;O<S;O++)v.isBuffer(y)?M[O]=y.readUInt8(O):M[O]=y[O];else if(H=="string")M.write(y,0,A);else if(H=="number"&&!v._useTypedArrays&&!D)for(O=0;O<S;O++)M[O]=0;return M}function C(y,A,D,S){return v._charsWritten=It(function(M){for(var O=[],N=0;N<M.length;N++)O.push(255&M.charCodeAt(N));return O}(A),y,D,S)}function g(y,A,D,S){return v._charsWritten=It(function(M){for(var O,N,H=[],G=0;G<M.length;G++)N=M.charCodeAt(G),O=N>>8,N=N%256,H.push(N),H.push(O);return H}(A),y,D,S)}function E(y,A,D){var S="";D=Math.min(y.length,D);for(var M=A;M<D;M++)S+=String.fromCharCode(y[M]);return S}function T(y,A,D,O){O||(j(typeof D=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+1<y.length,"Trying to read beyond buffer length"));var M,O=y.length;if(!(O<=A))return D?(M=y[A],A+1<O&&(M|=y[A+1]<<8)):(M=y[A]<<8,A+1<O&&(M|=y[A+1])),M}function k(y,A,D,O){O||(j(typeof D=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+3<y.length,"Trying to read beyond buffer length"));var M,O=y.length;if(!(O<=A))return D?(A+2<O&&(M=y[A+2]<<16),A+1<O&&(M|=y[A+1]<<8),M|=y[A],A+3<O&&(M+=y[A+3]<<24>>>0)):(A+1<O&&(M=y[A+1]<<16),A+2<O&&(M|=y[A+2]<<8),A+3<O&&(M|=y[A+3]),M+=y[A]<<24>>>0),M}function P(y,A,D,S){if(S||(j(typeof D=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+1<y.length,"Trying to read beyond buffer length")),!(y.length<=A))return S=T(y,A,D,!0),32768&S?-1*(65535-S+1):S}function R(y,A,D,S){if(S||(j(typeof D=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+3<y.length,"Trying to read beyond buffer length")),!(y.length<=A))return S=k(y,A,D,!0),2147483648&S?-1*(4294967295-S+1):S}function _(y,A,D,S){return S||(j(typeof D=="boolean","missing or invalid endian"),j(A+3<y.length,"Trying to read beyond buffer length")),f.read(y,A,D,23,4)}function w(y,A,D,S){return S||(j(typeof D=="boolean","missing or invalid endian"),j(A+7<y.length,"Trying to read beyond buffer length")),f.read(y,A,D,52,8)}function b(y,A,D,S,M){if(M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+1<y.length,"trying to write beyond buffer length"),zt(A,65535)),M=y.length,!(M<=D))for(var O=0,N=Math.min(M-D,2);O<N;O++)y[D+O]=(A&255<<8*(S?O:1-O))>>>8*(S?O:1-O)}function I(y,A,D,S,M){if(M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+3<y.length,"trying to write beyond buffer length"),zt(A,4294967295)),M=y.length,!(M<=D))for(var O=0,N=Math.min(M-D,4);O<N;O++)y[D+O]=A>>>8*(S?O:3-O)&255}function B(y,A,D,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+1<y.length,"Trying to write beyond buffer length"),Dt(A,32767,-32768)),y.length<=D||b(y,0<=A?A:65535+A+1,D,S,M)}function z(y,A,D,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+3<y.length,"Trying to write beyond buffer length"),Dt(A,2147483647,-2147483648)),y.length<=D||I(y,0<=A?A:4294967295+A+1,D,S,M)}function F(y,A,D,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+3<y.length,"Trying to write beyond buffer length"),q(A,34028234663852886e22,-34028234663852886e22)),y.length<=D||f.write(y,A,D,S,23,4)}function V(y,A,D,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+7<y.length,"Trying to write beyond buffer length"),q(A,17976931348623157e292,-17976931348623157e292)),y.length<=D||f.write(y,A,D,S,52,8)}s.Buffer=v,s.SlowBuffer=v,s.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var y=new ArrayBuffer(0),A=new Uint8Array(y);return A.foo=function(){return 42},A.foo()===42&&typeof A.subarray=="function"}catch{return!1}}(),v.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(y){return!(y==null||!y._isBuffer)},v.byteLength=function(y,A){var D;switch(y+="",A||"utf8"){case"hex":D=y.length/2;break;case"utf8":case"utf-8":D=ot(y).length;break;case"ascii":case"binary":case"raw":D=y.length;break;case"base64":D=J(y).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":D=2*y.length;break;default:throw new Error("Unknown encoding")}return D},v.concat=function(y,A){if(j(Z(y),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),y.length===0)return new v(0);if(y.length===1)return y[0];if(typeof A!="number")for(M=A=0;M<y.length;M++)A+=y[M].length;for(var D=new v(A),S=0,M=0;M<y.length;M++){var O=y[M];O.copy(D,S),S+=O.length}return D},v.prototype.write=function(y,A,D,S){isFinite(A)?isFinite(D)||(S=D,D=void 0):(G=S,S=A,A=D,D=G),A=Number(A)||0;var M,O,N,H,G=this.length-A;switch((!D||G<(D=Number(D)))&&(D=G),S=String(S||"utf8").toLowerCase()){case"hex":M=function(X,Y,K,W){K=Number(K)||0;var tt=X.length-K;(!W||tt<(W=Number(W)))&&(W=tt),j((tt=Y.length)%2==0,"Invalid hex string"),tt/2<W&&(W=tt/2);for(var Q=0;Q<W;Q++){var st=parseInt(Y.substr(2*Q,2),16);j(!isNaN(st),"Invalid hex string"),X[K+Q]=st}return v._charsWritten=2*Q,Q}(this,y,A,D);break;case"utf8":case"utf-8":O=this,N=A,H=D,M=v._charsWritten=It(ot(y),O,N,H);break;case"ascii":case"binary":M=C(this,y,A,D);break;case"base64":O=this,N=A,H=D,M=v._charsWritten=It(J(y),O,N,H);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":M=g(this,y,A,D);break;default:throw new Error("Unknown encoding")}return M},v.prototype.toString=function(y,A,D){var S,M,O,N,H=this;if(y=String(y||"utf8").toLowerCase(),A=Number(A)||0,(D=D!==void 0?Number(D):H.length)===A)return"";switch(y){case"hex":S=function(G,X,Y){var K=G.length;(!X||X<0)&&(X=0),(!Y||Y<0||K<Y)&&(Y=K);for(var W="",tt=X;tt<Y;tt++)W+=nt(G[tt]);return W}(H,A,D);break;case"utf8":case"utf-8":S=function(G,X,Y){var K="",W="";Y=Math.min(G.length,Y);for(var tt=X;tt<Y;tt++)G[tt]<=127?(K+=Et(W)+String.fromCharCode(G[tt]),W=""):W+="%"+G[tt].toString(16);return K+Et(W)}(H,A,D);break;case"ascii":case"binary":S=E(H,A,D);break;case"base64":M=H,N=D,S=(O=A)===0&&N===M.length?m.fromByteArray(M):m.fromByteArray(M.slice(O,N));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":S=function(G,X,Y){for(var K=G.slice(X,Y),W="",tt=0;tt<K.length;tt+=2)W+=String.fromCharCode(K[tt]+256*K[tt+1]);return W}(H,A,D);break;default:throw new Error("Unknown encoding")}return S},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(y,A,D,S){if(A=A||0,(S=S||S===0?S:this.length)!==(D=D||0)&&y.length!==0&&this.length!==0){j(D<=S,"sourceEnd < sourceStart"),j(0<=A&&A<y.length,"targetStart out of bounds"),j(0<=D&&D<this.length,"sourceStart out of bounds"),j(0<=S&&S<=this.length,"sourceEnd out of bounds"),S>this.length&&(S=this.length);var M=(S=y.length-A<S-D?y.length-A+D:S)-D;if(M<100||!v._useTypedArrays)for(var O=0;O<M;O++)y[O+A]=this[O+D];else y._set(this.subarray(D,D+M),A)}},v.prototype.slice=function(y,A){var D=this.length;if(y=U(y,D,0),A=U(A,D,D),v._useTypedArrays)return v._augment(this.subarray(y,A));for(var S=A-y,M=new v(S,void 0,!0),O=0;O<S;O++)M[O]=this[O+y];return M},v.prototype.get=function(y){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(y)},v.prototype.set=function(y,A){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(y,A)},v.prototype.readUInt8=function(y,A){if(A||(j(y!=null,"missing offset"),j(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return this[y]},v.prototype.readUInt16LE=function(y,A){return T(this,y,!0,A)},v.prototype.readUInt16BE=function(y,A){return T(this,y,!1,A)},v.prototype.readUInt32LE=function(y,A){return k(this,y,!0,A)},v.prototype.readUInt32BE=function(y,A){return k(this,y,!1,A)},v.prototype.readInt8=function(y,A){if(A||(j(y!=null,"missing offset"),j(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return 128&this[y]?-1*(255-this[y]+1):this[y]},v.prototype.readInt16LE=function(y,A){return P(this,y,!0,A)},v.prototype.readInt16BE=function(y,A){return P(this,y,!1,A)},v.prototype.readInt32LE=function(y,A){return R(this,y,!0,A)},v.prototype.readInt32BE=function(y,A){return R(this,y,!1,A)},v.prototype.readFloatLE=function(y,A){return _(this,y,!0,A)},v.prototype.readFloatBE=function(y,A){return _(this,y,!1,A)},v.prototype.readDoubleLE=function(y,A){return w(this,y,!0,A)},v.prototype.readDoubleBE=function(y,A){return w(this,y,!1,A)},v.prototype.writeUInt8=function(y,A,D){D||(j(y!=null,"missing value"),j(A!=null,"missing offset"),j(A<this.length,"trying to write beyond buffer length"),zt(y,255)),A>=this.length||(this[A]=y)},v.prototype.writeUInt16LE=function(y,A,D){b(this,y,A,!0,D)},v.prototype.writeUInt16BE=function(y,A,D){b(this,y,A,!1,D)},v.prototype.writeUInt32LE=function(y,A,D){I(this,y,A,!0,D)},v.prototype.writeUInt32BE=function(y,A,D){I(this,y,A,!1,D)},v.prototype.writeInt8=function(y,A,D){D||(j(y!=null,"missing value"),j(A!=null,"missing offset"),j(A<this.length,"Trying to write beyond buffer length"),Dt(y,127,-128)),A>=this.length||(0<=y?this.writeUInt8(y,A,D):this.writeUInt8(255+y+1,A,D))},v.prototype.writeInt16LE=function(y,A,D){B(this,y,A,!0,D)},v.prototype.writeInt16BE=function(y,A,D){B(this,y,A,!1,D)},v.prototype.writeInt32LE=function(y,A,D){z(this,y,A,!0,D)},v.prototype.writeInt32BE=function(y,A,D){z(this,y,A,!1,D)},v.prototype.writeFloatLE=function(y,A,D){F(this,y,A,!0,D)},v.prototype.writeFloatBE=function(y,A,D){F(this,y,A,!1,D)},v.prototype.writeDoubleLE=function(y,A,D){V(this,y,A,!0,D)},v.prototype.writeDoubleBE=function(y,A,D){V(this,y,A,!1,D)},v.prototype.fill=function(y,A,D){if(A=A||0,D=D||this.length,j(typeof(y=typeof(y=y||0)=="string"?y.charCodeAt(0):y)=="number"&&!isNaN(y),"value is not a number"),j(A<=D,"end < start"),D!==A&&this.length!==0){j(0<=A&&A<this.length,"start out of bounds"),j(0<=D&&D<=this.length,"end out of bounds");for(var S=A;S<D;S++)this[S]=y}},v.prototype.inspect=function(){for(var y=[],A=this.length,D=0;D<A;D++)if(y[D]=nt(this[D]),D===s.INSPECT_MAX_BYTES){y[D+1]="...";break}return"<Buffer "+y.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var y=new Uint8Array(this.length),A=0,D=y.length;A<D;A+=1)y[A]=this[A];return y.buffer};var L=v.prototype;function U(y,A,D){return typeof y!="number"?D:A<=(y=~~y)?A:0<=y||0<=(y+=A)?y:0}function $(y){return(y=~~Math.ceil(+y))<0?0:y}function Z(y){return(Array.isArray||function(A){return Object.prototype.toString.call(A)==="[object Array]"})(y)}function nt(y){return y<16?"0"+y.toString(16):y.toString(16)}function ot(y){for(var A=[],D=0;D<y.length;D++){var S=y.charCodeAt(D);if(S<=127)A.push(y.charCodeAt(D));else for(var M=D,O=(55296<=S&&S<=57343&&D++,encodeURIComponent(y.slice(M,D+1)).substr(1).split("%")),N=0;N<O.length;N++)A.push(parseInt(O[N],16))}return A}function J(y){return m.toByteArray(y)}function It(y,A,D,S){for(var M=0;M<S&&!(M+D>=A.length||M>=y.length);M++)A[M+D]=y[M];return M}function Et(y){try{return decodeURIComponent(y)}catch{return"�"}}function zt(y,A){j(typeof y=="number","cannot write a non-number as a number"),j(0<=y,"specified a negative value for writing an unsigned value"),j(y<=A,"value is larger than maximum value for type"),j(Math.floor(y)===y,"value has a fractional component")}function Dt(y,A,D){j(typeof y=="number","cannot write a non-number as a number"),j(y<=A,"value larger than maximum allowed value"),j(D<=y,"value smaller than minimum allowed value"),j(Math.floor(y)===y,"value has a fractional component")}function q(y,A,D){j(typeof y=="number","cannot write a non-number as a number"),j(y<=A,"value larger than maximum allowed value"),j(D<=y,"value smaller than minimum allowed value")}function j(y,A){if(!y)throw new Error(A||"Failed assertion")}v._augment=function(y){return y._isBuffer=!0,y._get=y.get,y._set=y.set,y.get=L.get,y.set=L.set,y.write=L.write,y.toString=L.toString,y.toLocaleString=L.toString,y.toJSON=L.toJSON,y.copy=L.copy,y.slice=L.slice,y.readUInt8=L.readUInt8,y.readUInt16LE=L.readUInt16LE,y.readUInt16BE=L.readUInt16BE,y.readUInt32LE=L.readUInt32LE,y.readUInt32BE=L.readUInt32BE,y.readInt8=L.readInt8,y.readInt16LE=L.readInt16LE,y.readInt16BE=L.readInt16BE,y.readInt32LE=L.readInt32LE,y.readInt32BE=L.readInt32BE,y.readFloatLE=L.readFloatLE,y.readFloatBE=L.readFloatBE,y.readDoubleLE=L.readDoubleLE,y.readDoubleBE=L.readDoubleBE,y.writeUInt8=L.writeUInt8,y.writeUInt16LE=L.writeUInt16LE,y.writeUInt16BE=L.writeUInt16BE,y.writeUInt32LE=L.writeUInt32LE,y.writeUInt32BE=L.writeUInt32BE,y.writeInt8=L.writeInt8,y.writeInt16LE=L.writeInt16LE,y.writeInt16BE=L.writeInt16BE,y.writeInt32LE=L.writeInt32LE,y.writeInt32BE=L.writeInt32BE,y.writeFloatLE=L.writeFloatLE,y.writeFloatBE=L.writeFloatBE,y.writeDoubleLE=L.writeDoubleLE,y.writeDoubleBE=L.writeDoubleBE,y.fill=L.fill,y.inspect=L.inspect,y.toArrayBuffer=L.toArrayBuffer,y}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,i,s){(function(r,o,m,l,c,u,h,d,p){var m=e("buffer").Buffer,f=4,v=new m(f);v.fill(0),i.exports={hash:function(C,g,E,T){for(var k=g(function(b,I){b.length%f!=0&&(B=b.length+(f-b.length%f),b=m.concat([b,v],B));for(var B,z=[],F=I?b.readInt32BE:b.readInt32LE,V=0;V<b.length;V+=f)z.push(F.call(b,V));return z}(C=m.isBuffer(C)?C:new m(C),T),8*C.length),g=T,P=new m(E),R=g?P.writeInt32BE:P.writeInt32LE,_=0;_<k.length;_++)R.call(P,k[_],4*_,!0);return P}}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(e,i,s){(function(r,o,m,l,c,u,h,d,p){var m=e("buffer").Buffer,f=e("./sha"),v=e("./sha256"),C=e("./rng"),g={sha1:f,sha256:v,md5:e("./md5")},E=64,T=new m(E);function k(b,I){var B=g[b=b||"sha1"],z=[];return B||P("algorithm:",b,"is not yet supported"),{update:function(F){return m.isBuffer(F)||(F=new m(F)),z.push(F),F.length,this},digest:function(F){var V=m.concat(z),V=I?function(L,U,$){m.isBuffer(U)||(U=new m(U)),m.isBuffer($)||($=new m($)),U.length>E?U=L(U):U.length<E&&(U=m.concat([U,T],E));for(var Z=new m(E),nt=new m(E),ot=0;ot<E;ot++)Z[ot]=54^U[ot],nt[ot]=92^U[ot];return $=L(m.concat([Z,$])),L(m.concat([nt,$]))}(B,I,V):B(V);return z=null,F?V.toString(F):V}}}function P(){var b=[].slice.call(arguments).join(" ");throw new Error([b,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}T.fill(0),s.createHash=function(b){return k(b)},s.createHmac=k,s.randomBytes=function(b,I){if(!I||!I.call)return new m(C(b));try{I.call(this,void 0,new m(C(b)))}catch(B){I(B)}};var R,_=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],w=function(b){s[b]=function(){P("sorry,",b,"is not implemented yet")}};for(R in _)w(_[R])}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){var m=e("./helpers");function f(P,R){P[R>>5]|=128<<R%32,P[14+(R+64>>>9<<4)]=R;for(var _=1732584193,w=-271733879,b=-1732584194,I=271733878,B=0;B<P.length;B+=16){var z=_,F=w,V=b,L=I,_=C(_,w,b,I,P[B+0],7,-680876936),I=C(I,_,w,b,P[B+1],12,-389564586),b=C(b,I,_,w,P[B+2],17,606105819),w=C(w,b,I,_,P[B+3],22,-1044525330);_=C(_,w,b,I,P[B+4],7,-176418897),I=C(I,_,w,b,P[B+5],12,1200080426),b=C(b,I,_,w,P[B+6],17,-1473231341),w=C(w,b,I,_,P[B+7],22,-45705983),_=C(_,w,b,I,P[B+8],7,1770035416),I=C(I,_,w,b,P[B+9],12,-1958414417),b=C(b,I,_,w,P[B+10],17,-42063),w=C(w,b,I,_,P[B+11],22,-1990404162),_=C(_,w,b,I,P[B+12],7,1804603682),I=C(I,_,w,b,P[B+13],12,-40341101),b=C(b,I,_,w,P[B+14],17,-1502002290),_=g(_,w=C(w,b,I,_,P[B+15],22,1236535329),b,I,P[B+1],5,-165796510),I=g(I,_,w,b,P[B+6],9,-1069501632),b=g(b,I,_,w,P[B+11],14,643717713),w=g(w,b,I,_,P[B+0],20,-373897302),_=g(_,w,b,I,P[B+5],5,-701558691),I=g(I,_,w,b,P[B+10],9,38016083),b=g(b,I,_,w,P[B+15],14,-660478335),w=g(w,b,I,_,P[B+4],20,-405537848),_=g(_,w,b,I,P[B+9],5,568446438),I=g(I,_,w,b,P[B+14],9,-1019803690),b=g(b,I,_,w,P[B+3],14,-187363961),w=g(w,b,I,_,P[B+8],20,1163531501),_=g(_,w,b,I,P[B+13],5,-1444681467),I=g(I,_,w,b,P[B+2],9,-51403784),b=g(b,I,_,w,P[B+7],14,1735328473),_=E(_,w=g(w,b,I,_,P[B+12],20,-1926607734),b,I,P[B+5],4,-378558),I=E(I,_,w,b,P[B+8],11,-2022574463),b=E(b,I,_,w,P[B+11],16,1839030562),w=E(w,b,I,_,P[B+14],23,-35309556),_=E(_,w,b,I,P[B+1],4,-1530992060),I=E(I,_,w,b,P[B+4],11,1272893353),b=E(b,I,_,w,P[B+7],16,-155497632),w=E(w,b,I,_,P[B+10],23,-1094730640),_=E(_,w,b,I,P[B+13],4,681279174),I=E(I,_,w,b,P[B+0],11,-358537222),b=E(b,I,_,w,P[B+3],16,-722521979),w=E(w,b,I,_,P[B+6],23,76029189),_=E(_,w,b,I,P[B+9],4,-640364487),I=E(I,_,w,b,P[B+12],11,-421815835),b=E(b,I,_,w,P[B+15],16,530742520),_=T(_,w=E(w,b,I,_,P[B+2],23,-995338651),b,I,P[B+0],6,-198630844),I=T(I,_,w,b,P[B+7],10,1126891415),b=T(b,I,_,w,P[B+14],15,-1416354905),w=T(w,b,I,_,P[B+5],21,-57434055),_=T(_,w,b,I,P[B+12],6,1700485571),I=T(I,_,w,b,P[B+3],10,-1894986606),b=T(b,I,_,w,P[B+10],15,-1051523),w=T(w,b,I,_,P[B+1],21,-2054922799),_=T(_,w,b,I,P[B+8],6,1873313359),I=T(I,_,w,b,P[B+15],10,-30611744),b=T(b,I,_,w,P[B+6],15,-1560198380),w=T(w,b,I,_,P[B+13],21,1309151649),_=T(_,w,b,I,P[B+4],6,-145523070),I=T(I,_,w,b,P[B+11],10,-1120210379),b=T(b,I,_,w,P[B+2],15,718787259),w=T(w,b,I,_,P[B+9],21,-343485551),_=k(_,z),w=k(w,F),b=k(b,V),I=k(I,L)}return Array(_,w,b,I)}function v(P,R,_,w,b,I){return k((R=k(k(R,P),k(w,I)))<<b|R>>>32-b,_)}function C(P,R,_,w,b,I,B){return v(R&_|~R&w,P,R,b,I,B)}function g(P,R,_,w,b,I,B){return v(R&w|_&~w,P,R,b,I,B)}function E(P,R,_,w,b,I,B){return v(R^_^w,P,R,b,I,B)}function T(P,R,_,w,b,I,B){return v(_^(R|~w),P,R,b,I,B)}function k(P,R){var _=(65535&P)+(65535&R);return(P>>16)+(R>>16)+(_>>16)<<16|65535&_}i.exports=function(P){return m.hash(P,f,16)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){i.exports=function(m){for(var f,v=new Array(m),C=0;C<m;C++)!(3&C)&&(f=4294967296*Math.random()),v[C]=f>>>((3&C)<<3)&255;return v}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){var m=e("./helpers");function f(g,E){g[E>>5]|=128<<24-E%32,g[15+(E+64>>9<<4)]=E;for(var T,k,P,R=Array(80),_=1732584193,w=-271733879,b=-1732584194,I=271733878,B=-1009589776,z=0;z<g.length;z+=16){for(var F=_,V=w,L=b,U=I,$=B,Z=0;Z<80;Z++){R[Z]=Z<16?g[z+Z]:C(R[Z-3]^R[Z-8]^R[Z-14]^R[Z-16],1);var nt=v(v(C(_,5),(nt=w,k=b,P=I,(T=Z)<20?nt&k|~nt&P:!(T<40)&&T<60?nt&k|nt&P|k&P:nt^k^P)),v(v(B,R[Z]),(T=Z)<20?1518500249:T<40?1859775393:T<60?-1894007588:-899497514)),B=I,I=b,b=C(w,30),w=_,_=nt}_=v(_,F),w=v(w,V),b=v(b,L),I=v(I,U),B=v(B,$)}return Array(_,w,b,I,B)}function v(g,E){var T=(65535&g)+(65535&E);return(g>>16)+(E>>16)+(T>>16)<<16|65535&T}function C(g,E){return g<<E|g>>>32-E}i.exports=function(g){return m.hash(g,f,20,!0)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){function m(E,T){var k=(65535&E)+(65535&T);return(E>>16)+(T>>16)+(k>>16)<<16|65535&k}function f(E,T){var k,P=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),R=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);E[T>>5]|=128<<24-T%32,E[15+(T+64>>9<<4)]=T;for(var w,b,I=0;I<E.length;I+=16){for(var B=R[0],z=R[1],F=R[2],V=R[3],L=R[4],U=R[5],$=R[6],Z=R[7],nt=0;nt<64;nt++)_[nt]=nt<16?E[nt+I]:m(m(m((b=_[nt-2],C(b,17)^C(b,19)^g(b,10)),_[nt-7]),(b=_[nt-15],C(b,7)^C(b,18)^g(b,3))),_[nt-16]),k=m(m(m(m(Z,C(b=L,6)^C(b,11)^C(b,25)),L&U^~L&$),P[nt]),_[nt]),w=m(C(w=B,2)^C(w,13)^C(w,22),B&z^B&F^z&F),Z=$,$=U,U=L,L=m(V,k),V=F,F=z,z=B,B=m(k,w);R[0]=m(B,R[0]),R[1]=m(z,R[1]),R[2]=m(F,R[2]),R[3]=m(V,R[3]),R[4]=m(L,R[4]),R[5]=m(U,R[5]),R[6]=m($,R[6]),R[7]=m(Z,R[7])}return R}var v=e("./helpers"),C=function(E,T){return E>>>T|E<<32-T},g=function(E,T){return E>>>T};i.exports=function(E){return v.hash(E,f,32,!0)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){s.read=function(m,f,v,C,I){var E,T,k=8*I-C-1,P=(1<<k)-1,R=P>>1,_=-7,w=v?I-1:0,b=v?-1:1,I=m[f+w];for(w+=b,E=I&(1<<-_)-1,I>>=-_,_+=k;0<_;E=256*E+m[f+w],w+=b,_-=8);for(T=E&(1<<-_)-1,E>>=-_,_+=C;0<_;T=256*T+m[f+w],w+=b,_-=8);if(E===0)E=1-R;else{if(E===P)return T?NaN:1/0*(I?-1:1);T+=Math.pow(2,C),E-=R}return(I?-1:1)*T*Math.pow(2,E-C)},s.write=function(m,f,v,C,g,B){var T,k,P=8*B-g-1,R=(1<<P)-1,_=R>>1,w=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=C?0:B-1,I=C?1:-1,B=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(k=isNaN(f)?1:0,T=R):(T=Math.floor(Math.log(f)/Math.LN2),f*(C=Math.pow(2,-T))<1&&(T--,C*=2),2<=(f+=1<=T+_?w/C:w*Math.pow(2,1-_))*C&&(T++,C/=2),R<=T+_?(k=0,T=R):1<=T+_?(k=(f*C-1)*Math.pow(2,g),T+=_):(k=f*Math.pow(2,_-1)*Math.pow(2,g),T=0));8<=g;m[v+b]=255&k,b+=I,k/=256,g-=8);for(T=T<<g|k,P+=g;0<P;m[v+b]=255&T,b+=I,T/=256,P-=8);m[v+b-I]|=128*B}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(e,i,s){(function(r,o,a,l,c,u,h,d,p){var m,f,v;function C(){}(r=i.exports={}).nextTick=(f=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,f?function(g){return window.setImmediate(g)}:v?(m=[],window.addEventListener("message",function(g){var E=g.source;E!==window&&E!==null||g.data!=="process-tick"||(g.stopPropagation(),0<m.length&&m.shift()())},!0),function(g){m.push(g),window.postMessage("process-tick","*")}):function(g){setTimeout(g,0)}),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=C,r.addListener=C,r.once=C,r.off=C,r.removeListener=C,r.removeAllListeners=C,r.emit=C,r.binding=function(g){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(g){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Vp);var Ub=Vp.exports;const dT=qo(Ub);var Np=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],jb=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],Up=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],Hb=Np,Gb=Hb.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),sl=Up;sl=sl.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});var qb=sl.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),Wb=nw,$b=Np,Gu=jb,Kb=Up,Yb=Gb,Xb=qb,Ke=999,qu=9999,_a=0,ba=1,Wu=2,$u=3,Ku=4,Is=5,Zb=6,Qb=7,Jb=8,Yu=9,tw=10,Xu=11,ew=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function nw(n){var t=0,e=0,i=Ke,s,r,o=[],a=[],l=1,c=0,u=0,h=!1,d=!1,p="",m;n=n||{};var f=Kb,v=$b;n.version==="300 es"&&(f=Xb,v=Yb);for(var C={},g={},t=0;t<f.length;t++)C[f[t]]=!0;for(var t=0;t<v.length;t++)g[v[t]]=!0;return function(U){return a=[],U!==null?T(U):k()};function E(U){U.length&&a.push({type:ew[i],data:U,position:u,line:l,column:c})}function T(U){t=0,U.toString&&(U=U.toString()),p+=U.replace(/\r\n/g,`
`),m=p.length;for(var $;s=p[t],t<m;){switch($=t,i){case _a:t=b();break;case ba:t=w();break;case Wu:t=_();break;case $u:t=I();break;case Ku:t=F();break;case Xu:t=z();break;case Is:t=V();break;case qu:t=L();break;case Yu:t=R();break;case Ke:t=P();break}if($!==t)switch(p[$]){case`
`:c=0,++l;break;default:++c;break}}return e+=t,p=p.slice(t),a}function k(U){return o.length&&E(o.join("")),i=tw,E("(eof)"),a}function P(){return o=o.length?[]:o,r==="/"&&s==="*"?(u=e+t-1,i=_a,r=s,t+1):r==="/"&&s==="/"?(u=e+t-1,i=ba,r=s,t+1):s==="#"?(i=Wu,u=e+t,t):/\s/.test(s)?(i=Yu,u=e+t,t):(h=/\d/.test(s),d=/[^\w_]/.test(s),u=e+t,i=h?Ku:d?$u:qu,t)}function R(){return/[^\s]/g.test(s)?(E(o.join("")),i=Ke,t):(o.push(s),r=s,t+1)}function _(){return(s==="\r"||s===`
`)&&r!=="\\"?(E(o.join("")),i=Ke,t):(o.push(s),r=s,t+1)}function w(){return _()}function b(){return s==="/"&&r==="*"?(o.push(s),E(o.join("")),i=Ke,t+1):(o.push(s),r=s,t+1)}function I(){if(r==="."&&/\d/.test(s))return i=Is,t;if(r==="/"&&s==="*")return i=_a,t;if(r==="/"&&s==="/")return i=ba,t;if(s==="."&&o.length){for(;B(o););return i=Is,t}if(s===";"||s===")"||s==="("){if(o.length)for(;B(o););return E(s),i=Ke,t+1}var U=o.length===2&&s!=="=";if(/[\w_\d\s]/.test(s)||U){for(;B(o););return i=Ke,t}return o.push(s),r=s,t+1}function B(U){var $=0,Z,nt;do{if(Z=Gu.indexOf(U.slice(0,U.length+$).join("")),nt=Gu[Z],Z===-1){if($--+U.length>0)continue;nt=U.slice(0,1).join("")}return E(nt),u+=nt.length,o=o.slice(nt.length),o.length}while(!0)}function z(){return/[^a-fA-F0-9]/.test(s)?(E(o.join("")),i=Ke,t):(o.push(s),r=s,t+1)}function F(){return s==="."||/[eE]/.test(s)?(o.push(s),i=Is,r=s,t+1):s==="x"&&o.length===1&&o[0]==="0"?(i=Xu,o.push(s),r=s,t+1):/[^\d]/.test(s)?(E(o.join("")),i=Ke,t):(o.push(s),r=s,t+1)}function V(){return s==="f"&&(o.push(s),r=s,t+=1),/[eE]/.test(s)||(s==="-"||s==="+")&&/[eE]/.test(r)?(o.push(s),r=s,t+1):/[^\d]/.test(s)?(E(o.join("")),i=Ke,t):(o.push(s),r=s,t+1)}function L(){if(/[^\d\w_]/.test(s)){var U=o.join("");return g[U]?i=Jb:C[U]?i=Qb:i=Zb,E(o.join("")),i=Ke,t}return o.push(s),r=s,t+1}}var iw=Wb,sw=rw;function rw(n,t){var e=iw(t),i=[];return i=i.concat(e(n)),i=i.concat(e(null)),i}const pT=qo(sw);var ow=aw;function aw(n){for(var t=[],e=0;e<n.length;e++)n[e].type!=="eof"&&t.push(n[e].data);return t.join("")}const fT=qo(ow);var lw=cw;function cw(n){var t=null,e=null,i=0,s=0,r=0,o=0,a=0,l=[],c,u,h;for(c=0,u;c<n.length;c++)if(h=n[c],h.data==="{"){if(i&&i++||(u=p(c,Wn(")"),Wn()),u<0)||(o=u,u=p(u,Wn("("),Wn(")")),u<0)||(a=u,u=p(u,Bs),u<0)||n[u].type!=="ident"||(e=n[u].data,u=p(u,Bs),u<0))continue;i=1,s=c,t=n[u].data,r=u;var d=p(u,Bs);switch(n[d]&&n[d].data){case"lowp":case"highp":case"mediump":r=d}}else if(i&&h.data==="}"){if(--i)continue;l.push({name:e,type:t,body:[s+1,c],args:[a,o+1],outer:[r,c+1]})}for(c=0;c<n.length;c++)if(h=n[c],h.data===";"){if(u=p(c,Wn(")"),Wn()),u<0||(o=u,u=p(u,Wn("("),Wn(")")),u<0)||(a=u,u=p(u,Bs),u<0)||n[u].type!=="ident"||(e=n[u].data,u=p(u,Bs),u<0)||n[u].type==="operator"||n[u].data==="return")continue;t=n[u].data,l.push({name:e,type:t,body:!1,args:[a,o+1],outer:[u,c+1]})}return l.sort(function(m,f){return m.outer[0]-f.outer[0]});function p(m,f,v){for(var C=m-1;C>=0;C--){if(f(n[C]))return C;if(v&&v(n[C]))return-1}return-1}}function Wn(n){return function(t){return t.type==="operator"&&(!n||t.data===n)}}function Bs(n){return n.type!=="whitespace"}const mT=qo(lw);function kn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jp(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Oe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_s={duration:.5,overwrite:!1,delay:0},Yl,ue,Bt,Ue=1e8,At=1/Ue,rl=Math.PI*2,uw=rl/4,hw=0,Hp=Math.sqrt,dw=Math.cos,pw=Math.sin,te=function(t){return typeof t=="string"},Ht=function(t){return typeof t=="function"},Dn=function(t){return typeof t=="number"},Xl=function(t){return typeof t>"u"},bn=function(t){return typeof t=="object"},ye=function(t){return t!==!1},Zl=function(){return typeof window<"u"},qr=function(t){return Ht(t)||te(t)},Gp=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},he=Array.isArray,ol=/(?:-?\.?\d|\.)+/gi,qp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ns=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,wa=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Wp=/[+-]=-?[.\d]+/,$p=/[^,'"\[\]\s]+/gi,fw=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ft,un,al,Ql,Le={},bo={},Kp,Yp=function(t){return(bo=Fi(t,Le))&&Se},Jl=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},hr=function(t,e){return!e&&console.warn(t)},Xp=function(t,e){return t&&(Le[t]=e)&&bo&&(bo[t]=e)||Le},dr=function(){return 0},mw={suppressEvents:!0,isStart:!0,kill:!1},ro={suppressEvents:!0,kill:!1},vw={suppressEvents:!0},tc={},oi=[],ll={},Zp,Ae={},ya={},Zu=30,oo=[],ec="",nc=function(t){var e=t[0],i,s;if(bn(e)||Ht(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(s=oo.length;s--&&!oo[s].targetTest(e););i=oo[s]}for(s=t.length;s--;)t[s]&&(t[s]._gsap||(t[s]._gsap=new xf(t[s],i)))||t.splice(s,1);return t},Ri=function(t){return t._gsap||nc(je(t))[0]._gsap},Qp=function(t,e,i){return(i=t[e])&&Ht(i)?t[e]():Xl(i)&&t.getAttribute&&t.getAttribute(e)||i},xe=function(t,e){return(t=t.split(",")).forEach(e)||t},Gt=function(t){return Math.round(t*1e5)/1e5||0},Jt=function(t){return Math.round(t*1e7)/1e7||0},us=function(t,e){var i=e.charAt(0),s=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+s:i==="-"?t-s:i==="*"?t*s:t/s},gw=function(t,e){for(var i=e.length,s=0;t.indexOf(e[s])<0&&++s<i;);return s<i},wo=function(){var t=oi.length,e=oi.slice(0),i,s;for(ll={},oi.length=0,i=0;i<t;i++)s=e[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Jp=function(t,e,i,s){oi.length&&!ue&&wo(),t.render(e,i,ue&&e<0&&(t._initted||t._startAt)),oi.length&&!ue&&wo()},tf=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match($p).length<2?e:te(t)?t.trim():t},ef=function(t){return t},We=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},_w=function(t){return function(e,i){for(var s in i)s in e||s==="duration"&&t||s==="ease"||(e[s]=i[s])}},Fi=function(t,e){for(var i in e)t[i]=e[i];return t},Qu=function n(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=bn(e[i])?n(t[i]||(t[i]={}),e[i]):e[i]);return t},yo=function(t,e){var i={},s;for(s in t)s in e||(i[s]=t[s]);return i},er=function(t){var e=t.parent||Ft,i=t.keyframes?_w(he(t.keyframes)):We;if(ye(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},bw=function(t,e){for(var i=t.length,s=i===e.length;s&&i--&&t[i]===e[i];);return i<0},nf=function(t,e,i,s,r){var o=t[s],a;if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[s]=e,e._prev=o,e.parent=e._dp=t,e},Wo=function(t,e,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=e._prev,o=e._next;r?r._next=o:t[i]===e&&(t[i]=o),o?o._prev=r:t[s]===e&&(t[s]=r),e._next=e._prev=e.parent=null},ui=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ki=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},ww=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},cl=function(t,e,i,s){return t._startAt&&(ue?t._startAt.revert(ro):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,s))},yw=function n(t){return!t||t._ts&&n(t.parent)},Ju=function(t){return t._repeat?bs(t._tTime,t=t.duration()+t._rDelay)*t:0},bs=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},xo=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},$o=function(t){return t._end=Jt(t._start+(t._tDur/Math.abs(t._ts||t._rts||At)||0))},Ko=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Jt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),$o(t),i._dirty||ki(i,t)),t},sf=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=xo(t.rawTime(),e),(!e._dur||Tr(0,e.totalDuration(),i)-e._tTime>At)&&e.render(i,!0)),ki(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-At}},dn=function(t,e,i,s){return e.parent&&ui(e),e._start=Jt((Dn(i)?i:i||t!==Ft?Ne(t,i,e):t._time)+e._delay),e._end=Jt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),nf(t,e,"_first","_last",t._sort?"_start":0),ul(e)||(t._recent=e),s||sf(t,e),t._ts<0&&Ko(t,t._tTime),t},rf=function(t,e){return(Le.ScrollTrigger||Jl("scrollTrigger",e))&&Le.ScrollTrigger.create(e,t)},of=function(t,e,i,s,r){if(sc(t,e,r),!t._initted)return 1;if(!i&&t._pt&&!ue&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Zp!==Re.frame)return oi.push(t),t._lazy=[r,s],1},xw=function n(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},ul=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Cw=function(t,e,i,s){var r=t.ratio,o=e<0||!e&&(!t._start&&xw(t)&&!(!t._initted&&ul(t))||(t._ts<0||t._dp._ts<0)&&!ul(t))?0:1,a=t._rDelay,l=0,c,u,h;if(a&&t._repeat&&(l=Tr(0,t._tDur,e),u=bs(l,a),t._yoyo&&u&1&&(o=1-o),u!==bs(t._tTime,a)&&(r=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==r||ue||s||t._zTime===At||!e&&t._zTime){if(!t._initted&&of(t,e,s,i,l))return;for(h=t._zTime,t._zTime=e||(i?At:0),i||(i=e&&!h),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&cl(t,e,i,!0),t._onUpdate&&!i&&Be(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&Be(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&ui(t,1),!i&&!ue&&(Be(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Ew=function(t,e,i){var s;if(i>e)for(s=t._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>e)return s;s=s._next}else for(s=t._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<e)return s;s=s._prev}},ws=function(t,e,i,s){var r=t._repeat,o=Jt(e)||0,a=t._tTime/t._tDur;return a&&!s&&(t._time*=o/t._dur),t._dur=o,t._tDur=r?r<0?1e10:Jt(o*(r+1)+t._rDelay*r):o,a>0&&!s&&Ko(t,t._tTime=t._tDur*a),t.parent&&$o(t),i||ki(t.parent,t),t},th=function(t){return t instanceof me?ki(t):ws(t,t._dur)},Sw={_start:0,endTime:dr,totalDuration:dr},Ne=function n(t,e,i){var s=t.labels,r=t._recent||Sw,o=t.duration()>=Ue?r.endTime(!1):t._dur,a,l,c;return te(e)&&(isNaN(e)||e in s)?(l=e.charAt(0),c=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(a<0?r:i).totalDuration()/100:1)):a<0?(e in s||(s[e]=o),s[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),c&&i&&(l=l/100*(he(i)?i[0]:i).totalDuration()),a>1?n(t,e.substr(0,a-1),i)+l:o+l)):e==null?o:+e},nr=function(t,e,i){var s=Dn(e[1]),r=(s?2:1)+(t<2?0:1),o=e[r],a,l;if(s&&(o.duration=e[1]),o.parent=i,t){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=ye(l.vars.inherit)&&l.parent;o.immediateRender=ye(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[r-1]}return new Kt(e[0],o,e[r+1])},gi=function(t,e){return t||t===0?e(t):e},Tr=function(t,e,i){return i<t?t:i>e?e:i},le=function(t,e){return!te(t)||!(e=fw.exec(t))?"":e[1]},Pw=function(t,e,i){return gi(i,function(s){return Tr(t,e,s)})},hl=[].slice,af=function(t,e){return t&&bn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&bn(t[0]))&&!t.nodeType&&t!==un},Tw=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(s){var r;return te(s)&&!e||af(s,1)?(r=i).push.apply(r,je(s)):i.push(s)})||i},je=function(t,e,i){return Bt&&!e&&Bt.selector?Bt.selector(t):te(t)&&!i&&(al||!ys())?hl.call((e||Ql).querySelectorAll(t),0):he(t)?Tw(t,i):af(t)?hl.call(t,0):t?[t]:[]},dl=function(t){return t=je(t)[0]||hr("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return je(e,i.querySelectorAll?i:i===t?hr("Invalid scope")||Ql.createElement("div"):t)}},lf=function(t){return t.sort(function(){return .5-Math.random()})},cf=function(t){if(Ht(t))return t;var e=bn(t)?t:{each:t},i=Ii(e.ease),s=e.from||0,r=parseFloat(e.base)||0,o={},a=s>0&&s<1,l=isNaN(s)||a,c=e.axis,u=s,h=s;return te(s)?u=h={center:.5,edges:.5,end:1}[s]||0:!a&&l&&(u=s[0],h=s[1]),function(d,p,m){var f=(m||e).length,v=o[f],C,g,E,T,k,P,R,_,w;if(!v){if(w=e.grid==="auto"?0:(e.grid||[1,Ue])[1],!w){for(R=-Ue;R<(R=m[w++].getBoundingClientRect().left)&&w<f;);w<f&&w--}for(v=o[f]=[],C=l?Math.min(w,f)*u-.5:s%w,g=w===Ue?0:l?f*h/w-.5:s/w|0,R=0,_=Ue,P=0;P<f;P++)E=P%w-C,T=g-(P/w|0),v[P]=k=c?Math.abs(c==="y"?T:E):Hp(E*E+T*T),k>R&&(R=k),k<_&&(_=k);s==="random"&&lf(v),v.max=R-_,v.min=_,v.v=f=(parseFloat(e.amount)||parseFloat(e.each)*(w>f?f-1:c?c==="y"?f/w:w:Math.max(w,f/w))||0)*(s==="edges"?-1:1),v.b=f<0?r-f:r,v.u=le(e.amount||e.each)||0,i=i&&f<0?bf(i):i}return f=(v[d]-v.min)/v.max||0,Jt(v.b+(i?i(f):f)*v.v)+v.u}},pl=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var s=Jt(Math.round(parseFloat(i)/t)*t*e);return(s-s%1)/e+(Dn(i)?0:le(i))}},uf=function(t,e){var i=he(t),s,r;return!i&&bn(t)&&(s=i=t.radius||Ue,t.values?(t=je(t.values),(r=!Dn(t[0]))&&(s*=s)):t=pl(t.increment)),gi(e,i?Ht(t)?function(o){return r=t(o),Math.abs(r-o)<=s?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),c=Ue,u=0,h=t.length,d,p;h--;)r?(d=t[h].x-a,p=t[h].y-l,d=d*d+p*p):d=Math.abs(t[h]-a),d<c&&(c=d,u=h);return u=!s||c<=s?t[u]:o,r||u===o||Dn(o)?u:u+le(o)}:pl(t))},hf=function(t,e,i,s){return gi(he(t)?!e:i===!0?!!(i=0):!s,function(){return he(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*s)/s})},Mw=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(s){return e.reduce(function(r,o){return o(r)},s)}},Aw=function(t,e){return function(i){return t(parseFloat(i))+(e||le(i))}},Rw=function(t,e,i){return pf(t,e,0,1,i)},df=function(t,e,i){return gi(i,function(s){return t[~~e(s)]})},kw=function n(t,e,i){var s=e-t;return he(t)?df(t,n(0,t.length),e):gi(i,function(r){return(s+(r-t)%s)%s+t})},Iw=function n(t,e,i){var s=e-t,r=s*2;return he(t)?df(t,n(0,t.length-1),e):gi(i,function(o){return o=(r+(o-t)%r)%r||0,t+(o>s?r-o:o)})},pr=function(t){for(var e=0,i="",s,r,o,a;~(s=t.indexOf("random(",e));)o=t.indexOf(")",s),a=t.charAt(s+7)==="[",r=t.substr(s+7,o-s-7).match(a?$p:ol),i+=t.substr(e,s-e)+hf(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},pf=function(t,e,i,s,r){var o=e-t,a=s-i;return gi(r,function(l){return i+((l-t)/o*a||0)})},Bw=function n(t,e,i,s){var r=isNaN(t+e)?0:function(p){return(1-p)*t+p*e};if(!r){var o=te(t),a={},l,c,u,h,d;if(i===!0&&(s=1)&&(i=null),o)t={p:t},e={p:e};else if(he(t)&&!he(e)){for(u=[],h=t.length,d=h-2,c=1;c<h;c++)u.push(n(t[c-1],t[c]));h--,r=function(m){m*=h;var f=Math.min(d,~~m);return u[f](m-f)},i=e}else s||(t=Fi(he(t)?[]:{},t));if(!u){for(l in e)ic.call(a,t,l,"get",e[l]);r=function(m){return ac(m,a)||(o?t.p:t)}}}return gi(i,r)},eh=function(t,e,i){var s=t.labels,r=Ue,o,a,l;for(o in s)a=s[o]-e,a<0==!!i&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},Be=function(t,e,i){var s=t.vars,r=s[e],o=Bt,a=t._ctx,l,c,u;if(r)return l=s[e+"Params"],c=s.callbackScope||t,i&&oi.length&&wo(),a&&(Bt=a),u=l?r.apply(c,l):r.call(c),Bt=o,u},Gs=function(t){return ui(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ue),t.progress()<1&&Be(t,"onInterrupt"),t},is,ff=[],mf=function(t){if(t)if(t=!t.name&&t.default||t,Zl()||t.headless){var e=t.name,i=Ht(t),s=e&&!i&&t.init?function(){this._props=[]}:t,r={init:dr,render:ac,add:ic,kill:Yw,modifier:Kw,rawVars:0},o={targetTest:0,get:0,getSetter:oc,aliases:{},register:0};if(ys(),t!==s){if(Ae[e])return;We(s,We(yo(t,r),o)),Fi(s.prototype,Fi(r,yo(t,o))),Ae[s.prop=e]=s,t.targetTest&&(oo.push(s),tc[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Xp(e,s),t.register&&t.register(Se,s,Ce)}else ff.push(t)},St=255,qs={aqua:[0,St,St],lime:[0,St,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,St],navy:[0,0,128],white:[St,St,St],olive:[128,128,0],yellow:[St,St,0],orange:[St,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[St,0,0],pink:[St,192,203],cyan:[0,St,St],transparent:[St,St,St,0]},xa=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*St+.5|0},vf=function(t,e,i){var s=t?Dn(t)?[t>>16,t>>8&St,t&St]:0:qs.black,r,o,a,l,c,u,h,d,p,m;if(!s){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),qs[t])s=qs[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+r+r+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return s=parseInt(t.substr(1,6),16),[s>>16,s>>8&St,s&St,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),s=[t>>16,t>>8&St,t&St]}else if(t.substr(0,3)==="hsl"){if(s=m=t.match(ol),!e)l=+s[0]%360/360,c=+s[1]/100,u=+s[2]/100,o=u<=.5?u*(c+1):u+c-u*c,r=u*2-o,s.length>3&&(s[3]*=1),s[0]=xa(l+1/3,r,o),s[1]=xa(l,r,o),s[2]=xa(l-1/3,r,o);else if(~t.indexOf("="))return s=t.match(qp),i&&s.length<4&&(s[3]=1),s}else s=t.match(ol)||qs.transparent;s=s.map(Number)}return e&&!m&&(r=s[0]/St,o=s[1]/St,a=s[2]/St,h=Math.max(r,o,a),d=Math.min(r,o,a),u=(h+d)/2,h===d?l=c=0:(p=h-d,c=u>.5?p/(2-h-d):p/(h+d),l=h===r?(o-a)/p+(o<a?6:0):h===o?(a-r)/p+2:(r-o)/p+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(u*100+.5)),i&&s.length<4&&(s[3]=1),s},gf=function(t){var e=[],i=[],s=-1;return t.split(ai).forEach(function(r){var o=r.match(ns)||[];e.push.apply(e,o),i.push(s+=o.length+1)}),e.c=i,e},nh=function(t,e,i){var s="",r=(t+s).match(ai),o=e?"hsla(":"rgba(",a=0,l,c,u,h;if(!r)return t;if(r=r.map(function(d){return(d=vf(d,e,1))&&o+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(u=gf(t),l=i.c,l.join(s)!==u.c.join(s)))for(c=t.replace(ai,"1").split(ns),h=c.length-1;a<h;a++)s+=c[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!c)for(c=t.split(ai),h=c.length-1;a<h;a++)s+=c[a]+r[a];return s+c[h]},ai=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in qs)n+="|"+t+"\\b";return new RegExp(n+")","gi")}(),Ow=/hsl[a]?\(/,_f=function(t){var e=t.join(" "),i;if(ai.lastIndex=0,ai.test(e))return i=Ow.test(e),t[1]=nh(t[1],i),t[0]=nh(t[0],i,gf(t[1])),!0},fr,Re=function(){var n=Date.now,t=500,e=33,i=n(),s=i,r=1e3/240,o=r,a=[],l,c,u,h,d,p,m=function f(v){var C=n()-s,g=v===!0,E,T,k,P;if((C>t||C<0)&&(i+=C-e),s+=C,k=s-i,E=k-o,(E>0||g)&&(P=++h.frame,d=k-h.time*1e3,h.time=k=k/1e3,o+=E+(E>=r?4:r-E),T=1),g||(l=c(f)),T)for(p=0;p<a.length;p++)a[p](k,d,P,v)};return h={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(v){return d/(1e3/(v||60))},wake:function(){Kp&&(!al&&Zl()&&(un=al=window,Ql=un.document||{},Le.gsap=Se,(un.gsapVersions||(un.gsapVersions=[])).push(Se.version),Yp(bo||un.GreenSockGlobals||!un.gsap&&un||{}),ff.forEach(mf)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(v){return setTimeout(v,o-h.time*1e3+1|0)},fr=1,m(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),fr=0,c=dr},lagSmoothing:function(v,C){t=v||1/0,e=Math.min(C||33,t)},fps:function(v){r=1e3/(v||240),o=h.time*1e3+r},add:function(v,C,g){var E=C?function(T,k,P,R){v(T,k,P,R),h.remove(E)}:v;return h.remove(v),a[g?"unshift":"push"](E),ys(),E},remove:function(v,C){~(C=a.indexOf(v))&&a.splice(C,1)&&p>=C&&p--},_listeners:a},h}(),ys=function(){return!fr&&Re.wake()},ft={},Lw=/^[\d.\-M][\d.\-,\s]/,zw=/["']/g,Dw=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),s=i[0],r=1,o=i.length,a,l,c;r<o;r++)l=i[r],a=r!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),e[s]=isNaN(c)?c.replace(zw,"").trim():+c,s=l.substr(a+1).trim();return e},Fw=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),s=t.indexOf("(",e);return t.substring(e,~s&&s<i?t.indexOf(")",i+1):i)},Vw=function(t){var e=(t+"").split("("),i=ft[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[Dw(e[1])]:Fw(t).split(",").map(tf)):ft._CE&&Lw.test(t)?ft._CE("",t):i},bf=function(t){return function(e){return 1-t(1-e)}},wf=function n(t,e){for(var i=t._first,s;i;)i instanceof me?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=e)),i=i._next},Ii=function(t,e){return t&&(Ht(t)?t:ft[t]||Vw(t))||e},qi=function(t,e,i,s){i===void 0&&(i=function(l){return 1-e(1-l)}),s===void 0&&(s=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var r={easeIn:e,easeOut:i,easeInOut:s},o;return xe(t,function(a){ft[a]=Le[a]=r,ft[o=a.toLowerCase()]=i;for(var l in r)ft[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=ft[a+"."+l]=r[l]}),r},yf=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Ca=function n(t,e,i){var s=e>=1?e:1,r=(i||(t?.3:.45))/(e<1?e:1),o=r/rl*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*pw((u-o)*r)+1},l=t==="out"?a:t==="in"?function(c){return 1-a(1-c)}:yf(a);return r=rl/r,l.config=function(c,u){return n(t,c,u)},l},Ea=function n(t,e){e===void 0&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},s=t==="out"?i:t==="in"?function(r){return 1-i(1-r)}:yf(i);return s.config=function(r){return n(t,r)},s};xe("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,t){var e=t<5?t+1:t;qi(n+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});ft.Linear.easeNone=ft.none=ft.Linear.easeIn;qi("Elastic",Ca("in"),Ca("out"),Ca());(function(n,t){var e=1/t,i=2*e,s=2.5*e,r=function(a){return a<e?n*a*a:a<i?n*Math.pow(a-1.5/t,2)+.75:a<s?n*(a-=2.25/t)*a+.9375:n*Math.pow(a-2.625/t,2)+.984375};qi("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);qi("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});qi("Circ",function(n){return-(Hp(1-n*n)-1)});qi("Sine",function(n){return n===1?1:-dw(n*uw)+1});qi("Back",Ea("in"),Ea("out"),Ea());ft.SteppedEase=ft.steps=Le.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,s=t+(e?0:1),r=e?1:0,o=1-At;return function(a){return((s*Tr(0,o,a)|0)+r)*i}}};_s.ease=ft["quad.out"];xe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return ec+=n+","+n+"Params,"});var xf=function(t,e){this.id=hw++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Qp,this.set=e?e.getSetter:oc},mr=function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ws(this,+e.duration,1,1),this.data=e.data,Bt&&(this._ctx=Bt,Bt.data.push(this)),fr||Re.wake()}var t=n.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,ws(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,s){if(ys(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Ko(this,i),!r._dp||r.parent||sf(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&dn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===At||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Jp(this,i,s)),this},t.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Ju(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},t.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Ju(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?bs(this._tTime,r)+1:1},t.timeScale=function(i,s){if(!arguments.length)return this._rts===-At?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?xo(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-At?0:this._rts,this.totalTime(Tr(-Math.abs(this._delay),this._tDur,r),s!==!1),$o(this),ww(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ys(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==At&&(this._tTime-=At)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&dn(s,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(ye(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?xo(s.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=vw);var s=ue;return ue=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ue=s,this},t.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,th(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,th(this),s?this.time(s):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,s){return this.totalTime(Ne(this,i),ye(s))},t.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,ye(s))},t.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},t.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},t.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-At:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-At,this},t.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-At)},t.eventCallback=function(i,s,r){var o=this.vars;return arguments.length>1?(s?(o[i]=s,r&&(o[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete o[i],this):o[i]},t.then=function(i){var s=this;return new Promise(function(r){var o=Ht(i)?i:ef,a=function(){var c=s.then;s.then=null,Ht(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=c),r(o),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},t.kill=function(){Gs(this)},n}();We(mr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-At,_prom:0,_ps:!1,_rts:1});var me=function(n){jp(t,n);function t(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=ye(i.sortChildren),Ft&&dn(i.parent||Ft,kn(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&rf(kn(r),i.scrollTrigger),r}var e=t.prototype;return e.to=function(s,r,o){return nr(0,arguments,this),this},e.from=function(s,r,o){return nr(1,arguments,this),this},e.fromTo=function(s,r,o,a){return nr(2,arguments,this),this},e.set=function(s,r,o){return r.duration=0,r.parent=this,er(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new Kt(s,r,Ne(this,o),1),this},e.call=function(s,r,o){return dn(this,Kt.delayedCall(0,s,r),o)},e.staggerTo=function(s,r,o,a,l,c,u){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Kt(s,o,Ne(this,l)),this},e.staggerFrom=function(s,r,o,a,l,c,u){return o.runBackwards=1,er(o).immediateRender=ye(o.immediateRender),this.staggerTo(s,r,o,a,l,c,u)},e.staggerFromTo=function(s,r,o,a,l,c,u,h){return a.startAt=o,er(a).immediateRender=ye(a.immediateRender),this.staggerTo(s,r,a,l,c,u,h)},e.render=function(s,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=s<=0?0:Jt(s),h=this._zTime<0!=s<0&&(this._initted||!c),d,p,m,f,v,C,g,E,T,k,P,R;if(this!==Ft&&u>l&&s>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,s+=this._time-a),d=u,T=this._start,E=this._ts,C=!E,h&&(c||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(P=this._yoyo,v=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(v*100+s,r,o);if(d=Jt(u%v),u===l?(f=this._repeat,d=c):(f=~~(u/v),f&&f===u/v&&(d=c,f--),d>c&&(d=c)),k=bs(this._tTime,v),!a&&this._tTime&&k!==f&&this._tTime-k*v-this._dur<=0&&(k=f),P&&f&1&&(d=c-d,R=1),f!==k&&!this._lock){var _=P&&k&1,w=_===(P&&f&1);if(f<k&&(_=!_),a=_?0:u%c?c:u,this._lock=1,this.render(a||(R?0:Jt(f*v)),r,!c)._lock=0,this._tTime=u,!r&&this.parent&&Be(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,w&&(this._lock=2,a=_?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;wf(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=Ew(this,Jt(a),Jt(d)),g&&(u-=d-(d=g._start))),this._tTime=u,this._time=d,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&d&&!r&&!f&&(Be(this,"onStart"),this._tTime!==u))return this;if(d>=a&&s>=0)for(p=this._first;p;){if(m=p._next,(p._act||d>=p._start)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,r,o),d!==this._time||!this._ts&&!C){g=0,m&&(u+=this._zTime=-At);break}}p=m}else{p=this._last;for(var b=s<0?s:d;p;){if(m=p._prev,(p._act||b<=p._end)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(b-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(b-p._start)*p._ts,r,o||ue&&(p._initted||p._startAt)),d!==this._time||!this._ts&&!C){g=0,m&&(u+=this._zTime=b?-At:At);break}}p=m}}if(g&&!r&&(this.pause(),g.render(d>=a?0:-At)._zTime=d>=a?1:-1,this._ts))return this._start=T,$o(this),this.render(s,r,o);this._onUpdate&&!r&&Be(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(T===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&ui(this,1),!r&&!(s<0&&!a)&&(u||a||!l)&&(Be(this,u===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(s,r){var o=this;if(Dn(r)||(r=Ne(this,r,s)),!(s instanceof mr)){if(he(s))return s.forEach(function(a){return o.add(a,r)}),this;if(te(s))return this.addLabel(s,r);if(Ht(s))s=Kt.delayedCall(0,s);else return this}return this!==s?dn(this,s,r):this},e.getChildren=function(s,r,o,a){s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-Ue);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Kt?r&&l.push(c):(o&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,r,o)))),c=c._next;return l},e.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},e.remove=function(s){return te(s)?this.removeLabel(s):Ht(s)?this.killTweensOf(s):(Wo(this,s),s===this._recent&&(this._recent=this._last),ki(this))},e.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Jt(Re.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},e.addLabel=function(s,r){return this.labels[s]=Ne(this,r),this},e.removeLabel=function(s){return delete this.labels[s],this},e.addPause=function(s,r,o){var a=Kt.delayedCall(0,r||dr,o);return a.data="isPause",this._hasPause=1,dn(this,a,Ne(this,s))},e.removePause=function(s){var r=this._first;for(s=Ne(this,s);r;)r._start===s&&r.data==="isPause"&&ui(r),r=r._next},e.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),l=a.length;l--;)ei!==a[l]&&a[l].kill(s,r);return this},e.getTweensOf=function(s,r){for(var o=[],a=je(s),l=this._first,c=Dn(r),u;l;)l instanceof Kt?gw(l._targets,a)&&(c?(!ei||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(u=l.getTweensOf(a,r)).length&&o.push.apply(o,u),l=l._next;return o},e.tweenTo=function(s,r){r=r||{};var o=this,a=Ne(o,s),l=r,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,p,m=Kt.to(o,We({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||At,onStart:function(){if(o.pause(),!p){var v=r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());m._dur!==v&&ws(m,v,0,1).render(m._time,!0,!0),p=1}u&&u.apply(m,h||[])}},r));return d?m.render(0):m},e.tweenFromTo=function(s,r,o){return this.tweenTo(r,We({startAt:{time:Ne(this,s)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(s){return s===void 0&&(s=this._time),eh(this,Ne(this,s))},e.previousLabel=function(s){return s===void 0&&(s=this._time),eh(this,Ne(this,s),1)},e.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+At)},e.shiftChildren=function(s,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(c in l)l[c]>=o&&(l[c]+=s);return ki(this)},e.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},e.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),ki(this)},e.totalDuration=function(s){var r=0,o=this,a=o._last,l=Ue,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,dn(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(r-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=c;ws(o,o===Ft&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(s){if(Ft._ts&&(Jp(Ft,xo(s,Ft)),Zp=Re.frame),Re.frame>=Zu){Zu+=Oe.autoSleep||120;var r=Ft._first;if((!r||!r._ts)&&Oe.autoSleep&&Re._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Re.sleep()}}},t}(mr);We(me.prototype,{_lock:0,_hasPause:0,_forcing:0});var Nw=function(t,e,i,s,r,o,a){var l=new Ce(this._pt,t,e,0,1,Mf,null,r),c=0,u=0,h,d,p,m,f,v,C,g;for(l.b=i,l.e=s,i+="",s+="",(C=~s.indexOf("random("))&&(s=pr(s)),o&&(g=[i,s],o(g,t,e),i=g[0],s=g[1]),d=i.match(wa)||[];h=wa.exec(s);)m=h[0],f=s.substring(c,h.index),p?p=(p+1)%5:f.substr(-5)==="rgba("&&(p=1),m!==d[u++]&&(v=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:f||u===1?f:",",s:v,c:m.charAt(1)==="="?us(v,m)-v:parseFloat(m)-v,m:p&&p<4?Math.round:0},c=wa.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=a,(Wp.test(s)||C)&&(l.e=0),this._pt=l,l},ic=function(t,e,i,s,r,o,a,l,c,u){Ht(s)&&(s=s(r||0,t,o));var h=t[e],d=i!=="get"?i:Ht(h)?c?t[e.indexOf("set")||!Ht(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():h,p=Ht(h)?c?qw:Pf:rc,m;if(te(s)&&(~s.indexOf("random(")&&(s=pr(s)),s.charAt(1)==="="&&(m=us(d,s)+(le(d)||0),(m||m===0)&&(s=m))),!u||d!==s||fl)return!isNaN(d*s)&&s!==""?(m=new Ce(this._pt,t,e,+d||0,s-(d||0),typeof h=="boolean"?$w:Tf,0,p),c&&(m.fp=c),a&&m.modifier(a,this,t),this._pt=m):(!h&&!(e in t)&&Jl(e,s),Nw.call(this,t,e,d,s,p,l||Oe.stringFilter,c))},Uw=function(t,e,i,s,r){if(Ht(t)&&(t=ir(t,r,e,i,s)),!bn(t)||t.style&&t.nodeType||he(t)||Gp(t))return te(t)?ir(t,r,e,i,s):t;var o={},a;for(a in t)o[a]=ir(t[a],r,e,i,s);return o},Cf=function(t,e,i,s,r,o){var a,l,c,u;if(Ae[t]&&(a=new Ae[t]).init(r,a.rawVars?e[t]:Uw(e[t],s,r,o,i),i,s,o)!==!1&&(i._pt=l=new Ce(i._pt,r,t,0,1,a.render,a,0,a.priority),i!==is))for(c=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)c[a._props[u]]=l;return a},ei,fl,sc=function n(t,e,i){var s=t.vars,r=s.ease,o=s.startAt,a=s.immediateRender,l=s.lazy,c=s.onUpdate,u=s.runBackwards,h=s.yoyoEase,d=s.keyframes,p=s.autoRevert,m=t._dur,f=t._startAt,v=t._targets,C=t.parent,g=C&&C.data==="nested"?C.vars.targets:v,E=t._overwrite==="auto"&&!Yl,T=t.timeline,k,P,R,_,w,b,I,B,z,F,V,L,U;if(T&&(!d||!r)&&(r="none"),t._ease=Ii(r,_s.ease),t._yEase=h?bf(Ii(h===!0?r:h,_s.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!T&&!!s.runBackwards,!T||d&&!s.stagger){if(B=v[0]?Ri(v[0]).harness:0,L=B&&s[B.prop],k=yo(s,tc),f&&(f._zTime<0&&f.progress(1),e<0&&u&&a&&!p?f.render(-1,!0):f.revert(u&&m?ro:mw),f._lazy=0),o){if(ui(t._startAt=Kt.set(v,We({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!f&&ye(l),startAt:null,delay:0,onUpdate:c&&function(){return Be(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ue||!a&&!p)&&t._startAt.revert(ro),a&&m&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(u&&m&&!f){if(e&&(a=!1),R=We({overwrite:!1,data:"isFromStart",lazy:a&&!f&&ye(l),immediateRender:a,stagger:0,parent:C},k),L&&(R[B.prop]=L),ui(t._startAt=Kt.set(v,R)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ue?t._startAt.revert(ro):t._startAt.render(-1,!0)),t._zTime=e,!a)n(t._startAt,At,At);else if(!e)return}for(t._pt=t._ptCache=0,l=m&&ye(l)||l&&!m,P=0;P<v.length;P++){if(w=v[P],I=w._gsap||nc(v)[P]._gsap,t._ptLookup[P]=F={},ll[I.id]&&oi.length&&wo(),V=g===v?P:g.indexOf(w),B&&(z=new B).init(w,L||k,t,V,g)!==!1&&(t._pt=_=new Ce(t._pt,w,z.name,0,1,z.render,z,0,z.priority),z._props.forEach(function($){F[$]=_}),z.priority&&(b=1)),!B||L)for(R in k)Ae[R]&&(z=Cf(R,k,t,V,w,g))?z.priority&&(b=1):F[R]=_=ic.call(t,w,R,"get",k[R],V,g,0,s.stringFilter);t._op&&t._op[P]&&t.kill(w,t._op[P]),E&&t._pt&&(ei=t,Ft.killTweensOf(w,F,t.globalTime(e)),U=!t.parent,ei=0),t._pt&&l&&(ll[I.id]=1)}b&&Af(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!U,d&&e<=0&&T.render(Ue,!0,!0)},jw=function(t,e,i,s,r,o,a,l){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],u,h,d,p;if(!c)for(c=t._ptCache[e]=[],d=t._ptLookup,p=t._targets.length;p--;){if(u=d[p][e],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return fl=1,t.vars[e]="+=0",sc(t,a),fl=0,l?hr(e+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)h=c[p],u=h._pt||h,u.s=(s||s===0)&&!r?s:u.s+(s||0)+o*u.c,u.c=i-u.s,h.e&&(h.e=Gt(i)+le(h.e)),h.b&&(h.b=u.s+le(h.b))},Hw=function(t,e){var i=t[0]?Ri(t[0]).harness:0,s=i&&i.aliases,r,o,a,l;if(!s)return e;r=Fi({},e);for(o in s)if(o in r)for(l=s[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},Gw=function(t,e,i,s){var r=e.ease||s||"power1.inOut",o,a;if(he(e))a=i[t]||(i[t]=[]),e.forEach(function(l,c){return a.push({t:c/(e.length-1)*100,v:l,e:r})});else for(o in e)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:r})},ir=function(t,e,i,s,r){return Ht(t)?t.call(e,i,s,r):te(t)&&~t.indexOf("random(")?pr(t):t},Ef=ec+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Sf={};xe(Ef+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Sf[n]=1});var Kt=function(n){jp(t,n);function t(i,s,r,o){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=n.call(this,o?s:er(s))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,p=l.overwrite,m=l.keyframes,f=l.defaults,v=l.scrollTrigger,C=l.yoyoEase,g=s.parent||Ft,E=(he(i)||Gp(i)?Dn(i[0]):"length"in s)?[i]:je(i),T,k,P,R,_,w,b,I;if(a._targets=E.length?nc(E):hr("GSAP target "+i+" not found. https://gsap.com",!Oe.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,m||d||qr(c)||qr(u)){if(s=a.vars,T=a.timeline=new me({data:"nested",defaults:f||{},targets:g&&g.data==="nested"?g.vars.targets:E}),T.kill(),T.parent=T._dp=kn(a),T._start=0,d||qr(c)||qr(u)){if(R=E.length,b=d&&cf(d),bn(d))for(_ in d)~Ef.indexOf(_)&&(I||(I={}),I[_]=d[_]);for(k=0;k<R;k++)P=yo(s,Sf),P.stagger=0,C&&(P.yoyoEase=C),I&&Fi(P,I),w=E[k],P.duration=+ir(c,kn(a),k,w,E),P.delay=(+ir(u,kn(a),k,w,E)||0)-a._delay,!d&&R===1&&P.delay&&(a._delay=u=P.delay,a._start+=u,P.delay=0),T.to(w,P,b?b(k,w,E):0),T._ease=ft.none;T.duration()?c=u=0:a.timeline=0}else if(m){er(We(T.vars.defaults,{ease:"none"})),T._ease=Ii(m.ease||s.ease||"none");var B=0,z,F,V;if(he(m))m.forEach(function(L){return T.to(E,L,">")}),T.duration();else{P={};for(_ in m)_==="ease"||_==="easeEach"||Gw(_,m[_],P,m.easeEach);for(_ in P)for(z=P[_].sort(function(L,U){return L.t-U.t}),B=0,k=0;k<z.length;k++)F=z[k],V={ease:F.e,duration:(F.t-(k?z[k-1].t:0))/100*c},V[_]=F.v,T.to(E,V,B),B+=V.duration;T.duration()<c&&T.to({},{duration:c-T.duration()})}}c||a.duration(c=T.duration())}else a.timeline=0;return p===!0&&!Yl&&(ei=kn(a),Ft.killTweensOf(E),ei=0),dn(g,kn(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(h||!c&&!m&&a._start===Jt(g._time)&&ye(h)&&yw(kn(a))&&g.data!=="nested")&&(a._tTime=-At,a.render(Math.max(0,-u)||0)),v&&rf(kn(a),v),a}var e=t.prototype;return e.render=function(s,r,o){var a=this._time,l=this._tDur,c=this._dur,u=s<0,h=s>l-At&&!u?l:s<At?0:s,d,p,m,f,v,C,g,E,T;if(!c)Cw(this,s,r,o);else if(h!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,E=this.timeline,this._repeat){if(f=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(f*100+s,r,o);if(d=Jt(h%f),h===l?(m=this._repeat,d=c):(m=~~(h/f),m&&m===Jt(h/f)&&(d=c,m--),d>c&&(d=c)),C=this._yoyo&&m&1,C&&(T=this._yEase,d=c-d),v=bs(this._tTime,f),d===a&&!o&&this._initted&&m===v)return this._tTime=h,this;m!==v&&(E&&this._yEase&&wf(E,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==f&&this._initted&&(this._lock=o=1,this.render(Jt(f*m),!0).invalidate()._lock=0))}if(!this._initted){if(of(this,u?s:d,o,r,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&m!==v))return this;if(c!==this._dur)return this.render(s,r,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(T||this._ease)(d/c),this._from&&(this.ratio=g=1-g),d&&!a&&!r&&!m&&(Be(this,"onStart"),this._tTime!==h))return this;for(p=this._pt;p;)p.r(g,p.d),p=p._next;E&&E.render(s<0?s:E._dur*E._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&cl(this,s,r,o),Be(this,"onUpdate")),this._repeat&&m!==v&&this.vars.onRepeat&&!r&&this.parent&&Be(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&cl(this,s,!0,!0),(s||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&ui(this,1),!r&&!(u&&!a)&&(h||a||C)&&(Be(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},e.resetTo=function(s,r,o,a,l){fr||Re.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||sc(this,c),u=this._ease(c/this._dur),jw(this,s,r,o,a,u,c,l)?this.resetTo(s,r,o,a,1):(Ko(this,0),this.parent||nf(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Gs(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,ei&&ei.vars.overwrite!==!0)._first||Gs(this),this.parent&&o!==this.timeline.totalDuration()&&ws(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=s?je(s):a,c=this._ptLookup,u=this._pt,h,d,p,m,f,v,C;if((!r||r==="all")&&bw(a,l))return r==="all"&&(this._pt=0),Gs(this);for(h=this._op=this._op||[],r!=="all"&&(te(r)&&(f={},xe(r,function(g){return f[g]=1}),r=f),r=Hw(a,r)),C=a.length;C--;)if(~l.indexOf(a[C])){d=c[C],r==="all"?(h[C]=r,m=d,p={}):(p=h[C]=h[C]||{},m=r);for(f in m)v=d&&d[f],v&&((!("kill"in v.d)||v.d.kill(f)===!0)&&Wo(this,v,"_pt"),delete d[f]),p!=="all"&&(p[f]=1)}return this._initted&&!this._pt&&u&&Gs(this),this},t.to=function(s,r){return new t(s,r,arguments[2])},t.from=function(s,r){return nr(1,arguments)},t.delayedCall=function(s,r,o,a){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(s,r,o){return nr(2,arguments)},t.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(s,r)},t.killTweensOf=function(s,r,o){return Ft.killTweensOf(s,r,o)},t}(mr);We(Kt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});xe("staggerTo,staggerFrom,staggerFromTo",function(n){Kt[n]=function(){var t=new me,e=hl.call(arguments,0);return e.splice(n==="staggerFromTo"?5:4,0,0),t[n].apply(t,e)}});var rc=function(t,e,i){return t[e]=i},Pf=function(t,e,i){return t[e](i)},qw=function(t,e,i,s){return t[e](s.fp,i)},Ww=function(t,e,i){return t.setAttribute(e,i)},oc=function(t,e){return Ht(t[e])?Pf:Xl(t[e])&&t.setAttribute?Ww:rc},Tf=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},$w=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Mf=function(t,e){var i=e._pt,s="";if(!t&&e.b)s=e.b;else if(t===1&&e.e)s=e.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+s,i=i._next;s+=e.c}e.set(e.t,e.p,s,e)},ac=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},Kw=function(t,e,i,s){for(var r=this._pt,o;r;)o=r._next,r.p===s&&r.modifier(t,e,i),r=o},Yw=function(t){for(var e=this._pt,i,s;e;)s=e._next,e.p===t&&!e.op||e.op===t?Wo(this,e,"_pt"):e.dep||(i=1),e=s;return!i},Xw=function(t,e,i,s){s.mSet(t,e,s.m.call(s.tween,i,s.mt),s)},Af=function(t){for(var e=t._pt,i,s,r,o;e;){for(i=e._next,s=r;s&&s.pr>e.pr;)s=s._next;(e._prev=s?s._prev:o)?e._prev._next=e:r=e,(e._next=s)?s._prev=e:o=e,e=i}t._pt=r},Ce=function(){function n(e,i,s,r,o,a,l,c,u){this.t=i,this.s=r,this.c=o,this.p=s,this.r=a||Tf,this.d=l||this,this.set=c||rc,this.pr=u||0,this._next=e,e&&(e._prev=this)}var t=n.prototype;return t.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=Xw,this.m=i,this.mt=r,this.tween=s},n}();xe(ec+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return tc[n]=1});Le.TweenMax=Le.TweenLite=Kt;Le.TimelineLite=Le.TimelineMax=me;Ft=new me({sortChildren:!1,defaults:_s,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Oe.stringFilter=_f;var Bi=[],ao={},Zw=[],ih=0,Qw=0,Sa=function(t){return(ao[t]||Zw).map(function(e){return e()})},ml=function(){var t=Date.now(),e=[];t-ih>2&&(Sa("matchMediaInit"),Bi.forEach(function(i){var s=i.queries,r=i.conditions,o,a,l,c;for(a in s)o=un.matchMedia(s[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,c=1);c&&(i.revert(),l&&e.push(i))}),Sa("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),ih=t,Sa("matchMedia"))},Rf=function(){function n(e,i){this.selector=i&&dl(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Qw++,e&&this.add(e)}var t=n.prototype;return t.add=function(i,s,r){Ht(i)&&(r=s,s=i,i=Ht);var o=this,a=function(){var c=Bt,u=o.selector,h;return c&&c!==o&&c.data.push(o),r&&(o.selector=dl(r)),Bt=o,h=s.apply(o,arguments),Ht(h)&&o._r.push(h),Bt=c,o.selector=u,o.isReverted=!1,h};return o.last=a,i===Ht?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},t.ignore=function(i){var s=Bt;Bt=null,i(this),Bt=s},t.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof Kt&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,s){var r=this;if(i?function(){for(var a=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=r.data.length;l--;)c=r.data[l],c instanceof me?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Kt)&&c.revert&&c.revert(i);r._r.forEach(function(u){return u(i,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Bi.length;o--;)Bi[o].id===this.id&&Bi.splice(o,1)},t.revert=function(i){this.kill(i||{})},n}(),Jw=function(){function n(e){this.contexts=[],this.scope=e,Bt&&Bt.data.push(this)}var t=n.prototype;return t.add=function(i,s,r){bn(i)||(i={matches:i});var o=new Rf(0,r||this.scope),a=o.conditions={},l,c,u;Bt&&!o.selector&&(o.selector=Bt.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=i;for(c in i)c==="all"?u=1:(l=un.matchMedia(i[c]),l&&(Bi.indexOf(o)<0&&Bi.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(ml):l.addEventListener("change",ml)));return u&&s(o,function(h){return o.add(null,h)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),Co={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(s){return mf(s)})},timeline:function(t){return new me(t)},getTweensOf:function(t,e){return Ft.getTweensOf(t,e)},getProperty:function(t,e,i,s){te(t)&&(t=je(t)[0]);var r=Ri(t||{}).get,o=i?ef:tf;return i==="native"&&(i=""),t&&(e?o((Ae[e]&&Ae[e].get||r)(t,e,i,s)):function(a,l,c){return o((Ae[a]&&Ae[a].get||r)(t,a,l,c))})},quickSetter:function(t,e,i){if(t=je(t),t.length>1){var s=t.map(function(u){return Se.quickSetter(u,e,i)}),r=s.length;return function(u){for(var h=r;h--;)s[h](u)}}t=t[0]||{};var o=Ae[e],a=Ri(t),l=a.harness&&(a.harness.aliases||{})[e]||e,c=o?function(u){var h=new o;is._pt=0,h.init(t,i?u+i:u,is,0,[t]),h.render(1,h),is._pt&&ac(1,is)}:a.set(t,l);return o?c:function(u){return c(t,l,i?u+i:u,a,1)}},quickTo:function(t,e,i){var s,r=Se.to(t,Fi((s={},s[e]="+=0.1",s.paused=!0,s),i||{})),o=function(l,c,u){return r.resetTo(e,l,c,u)};return o.tween=r,o},isTweening:function(t){return Ft.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ii(t.ease,_s.ease)),Qu(_s,t||{})},config:function(t){return Qu(Oe,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,s=t.plugins,r=t.defaults,o=t.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Ae[a]&&!Le[a]&&hr(e+" effect requires "+a+" plugin.")}),ya[e]=function(a,l,c){return i(je(a),We(l||{},r),c)},o&&(me.prototype[e]=function(a,l,c){return this.add(ya[e](a,bn(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){ft[t]=Ii(e)},parseEase:function(t,e){return arguments.length?Ii(t,e):ft},getById:function(t){return Ft.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new me(t),s,r;for(i.smoothChildTiming=ye(t.smoothChildTiming),Ft.remove(i),i._dp=0,i._time=i._tTime=Ft._time,s=Ft._first;s;)r=s._next,(e||!(!s._dur&&s instanceof Kt&&s.vars.onComplete===s._targets[0]))&&dn(i,s,s._start-s._delay),s=r;return dn(Ft,i,0),i},context:function(t,e){return t?new Rf(t,e):Bt},matchMedia:function(t){return new Jw(t)},matchMediaRefresh:function(){return Bi.forEach(function(t){var e=t.conditions,i,s;for(s in e)e[s]&&(e[s]=!1,i=1);i&&t.revert()})||ml()},addEventListener:function(t,e){var i=ao[t]||(ao[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=ao[t],s=i&&i.indexOf(e);s>=0&&i.splice(s,1)},utils:{wrap:kw,wrapYoyo:Iw,distribute:cf,random:hf,snap:uf,normalize:Rw,getUnit:le,clamp:Pw,splitColor:vf,toArray:je,selector:dl,mapRange:pf,pipe:Mw,unitize:Aw,interpolate:Bw,shuffle:lf},install:Yp,effects:ya,ticker:Re,updateRoot:me.updateRoot,plugins:Ae,globalTimeline:Ft,core:{PropTween:Ce,globals:Xp,Tween:Kt,Timeline:me,Animation:mr,getCache:Ri,_removeLinkedListItem:Wo,reverting:function(){return ue},context:function(t){return t&&Bt&&(Bt.data.push(t),t._ctx=Bt),Bt},suppressOverwrites:function(t){return Yl=t}}};xe("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Co[n]=Kt[n]});Re.add(me.updateRoot);is=Co.to({},{duration:0});var ty=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},ey=function(t,e){var i=t._targets,s,r,o;for(s in e)for(r=i.length;r--;)o=t._ptLookup[r][s],o&&(o=o.d)&&(o._pt&&(o=ty(o,s)),o&&o.modifier&&o.modifier(e[s],t,i[r],s))},Pa=function(t,e){return{name:t,rawVars:1,init:function(s,r,o){o._onInit=function(a){var l,c;if(te(r)&&(l={},xe(r,function(u){return l[u]=1}),r=l),e){l={};for(c in r)l[c]=e(r[c]);r=l}ey(a,r)}}}},Se=Co.registerPlugin({name:"attr",init:function(t,e,i,s,r){var o,a,l;this.tween=i;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],s,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)ue?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Pa("roundProps",pl),Pa("modifiers"),Pa("snap",uf))||Co;Kt.version=me.version=Se.version="3.12.5";Kp=1;Zl()&&ys();ft.Power0;ft.Power1;ft.Power2;ft.Power3;ft.Power4;ft.Linear;ft.Quad;ft.Cubic;ft.Quart;ft.Quint;ft.Strong;ft.Elastic;ft.Back;ft.SteppedEase;ft.Bounce;ft.Sine;ft.Expo;ft.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var sh,ni,hs,lc,Ti,rh,cc,ny=function(){return typeof window<"u"},Fn={},Si=180/Math.PI,ds=Math.PI/180,Yi=Math.atan2,oh=1e8,uc=/([A-Z])/g,iy=/(left|right|width|margin|padding|x)/i,sy=/[\s,\(]\S/,fn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},vl=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},ry=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},oy=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},ay=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},kf=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},If=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},ly=function(t,e,i){return t.style[e]=i},cy=function(t,e,i){return t.style.setProperty(e,i)},uy=function(t,e,i){return t._gsap[e]=i},hy=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},dy=function(t,e,i,s,r){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},py=function(t,e,i,s,r){var o=t._gsap;o[e]=i,o.renderTransform(r,o)},Nt="transform",Ee=Nt+"Origin",fy=function n(t,e){var i=this,s=this.target,r=s.style,o=s._gsap;if(t in Fn&&r){if(this.tfm=this.tfm||{},t!=="transform")t=fn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=Bn(s,a)}):this.tfm[t]=o.x?o[t]:Bn(s,t),t===Ee&&(this.tfm.zOrigin=o.zOrigin);else return fn.transform.split(",").forEach(function(a){return n.call(i,a,e)});if(this.props.indexOf(Nt)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Ee,e,"")),t=Nt}(r||e)&&this.props.push(t,e,r[t])},Bf=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},my=function(){var t=this.props,e=this.target,i=e.style,s=e._gsap,r,o;for(r=0;r<t.length;r+=3)t[r+1]?e[t[r]]=t[r+2]:t[r+2]?i[t[r]]=t[r+2]:i.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(uc,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=cc(),(!r||!r.isStart)&&!i[Nt]&&(Bf(i),s.zOrigin&&i[Ee]&&(i[Ee]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Of=function(t,e){var i={target:t,props:[],revert:my,save:fy};return t._gsap||Se.core.getCache(t),e&&e.split(",").forEach(function(s){return i.save(s)}),i},Lf,gl=function(t,e){var i=ni.createElementNS?ni.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ni.createElement(t);return i&&i.style?i:ni.createElement(t)},gn=function n(t,e,i){var s=getComputedStyle(t);return s[e]||s.getPropertyValue(e.replace(uc,"-$1").toLowerCase())||s.getPropertyValue(e)||!i&&n(t,xs(e)||e,1)||""},ah="O,Moz,ms,Ms,Webkit".split(","),xs=function(t,e,i){var s=e||Ti,r=s.style,o=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(ah[o]+t in r););return o<0?null:(o===3?"ms":o>=0?ah[o]:"")+t},_l=function(){ny()&&window.document&&(sh=window,ni=sh.document,hs=ni.documentElement,Ti=gl("div")||{style:{}},gl("div"),Nt=xs(Nt),Ee=Nt+"Origin",Ti.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Lf=!!xs("perspective"),cc=Se.core.reverting,lc=1)},Ta=function n(t){var e=gl("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,o;if(hs.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),hs.removeChild(e),this.style.cssText=r,o},lh=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},zf=function(t){var e;try{e=t.getBBox()}catch{e=Ta.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Ta||(e=Ta.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+lh(t,["x","cx","x1"])||0,y:+lh(t,["y","cy","y1"])||0,width:0,height:0}:e},Df=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&zf(t))},Vi=function(t,e){if(e){var i=t.style,s;e in Fn&&e!==Ee&&(e=Nt),i.removeProperty?(s=e.substr(0,2),(s==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(s==="--"?e:e.replace(uc,"-$1").toLowerCase())):i.removeAttribute(e)}},ii=function(t,e,i,s,r,o){var a=new Ce(t._pt,e,i,0,1,o?If:kf);return t._pt=a,a.b=s,a.e=r,t._props.push(i),a},ch={deg:1,rad:1,turn:1},vy={grid:1,flex:1},hi=function n(t,e,i,s){var r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",a=Ti.style,l=iy.test(e),c=t.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=s==="px",p=s==="%",m,f,v,C;if(s===o||!r||ch[s]||ch[o])return r;if(o!=="px"&&!d&&(r=n(t,e,i,"px")),C=t.getCTM&&Df(t),(p||o==="%")&&(Fn[e]||~e.indexOf("adius")))return m=C?t.getBBox()[l?"width":"height"]:t[u],Gt(p?r/m*h:r/100*m);if(a[l?"width":"height"]=h+(d?o:s),f=~e.indexOf("adius")||s==="em"&&t.appendChild&&!c?t:t.parentNode,C&&(f=(t.ownerSVGElement||{}).parentNode),(!f||f===ni||!f.appendChild)&&(f=ni.body),v=f._gsap,v&&p&&v.width&&l&&v.time===Re.time&&!v.uncache)return Gt(r/v.width*h);if(p&&(e==="height"||e==="width")){var g=t.style[e];t.style[e]=h+s,m=t[u],g?t.style[e]=g:Vi(t,e)}else(p||o==="%")&&!vy[gn(f,"display")]&&(a.position=gn(t,"position")),f===t&&(a.position="static"),f.appendChild(Ti),m=Ti[u],f.removeChild(Ti),a.position="absolute";return l&&p&&(v=Ri(f),v.time=Re.time,v.width=f[u]),Gt(d?m*r/h:m&&r?h/m*r:0)},Bn=function(t,e,i,s){var r;return lc||_l(),e in fn&&e!=="transform"&&(e=fn[e],~e.indexOf(",")&&(e=e.split(",")[0])),Fn[e]&&e!=="transform"?(r=gr(t,s),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:So(gn(t,Ee))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Eo[e]&&Eo[e](t,e,i)||gn(t,e)||Qp(t,e)||(e==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?hi(t,e,r,i)+i:r},gy=function(t,e,i,s){if(!i||i==="none"){var r=xs(e,t,1),o=r&&gn(t,r,1);o&&o!==i?(e=r,i=o):e==="borderColor"&&(i=gn(t,"borderTopColor"))}var a=new Ce(this._pt,t.style,e,0,1,Mf),l=0,c=0,u,h,d,p,m,f,v,C,g,E,T,k;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(f=t.style[e],t.style[e]=s,s=gn(t,e)||s,f?t.style[e]=f:Vi(t,e)),u=[i,s],_f(u),i=u[0],s=u[1],d=i.match(ns)||[],k=s.match(ns)||[],k.length){for(;h=ns.exec(s);)v=h[0],g=s.substring(l,h.index),m?m=(m+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(m=1),v!==(f=d[c++]||"")&&(p=parseFloat(f)||0,T=f.substr((p+"").length),v.charAt(1)==="="&&(v=us(p,v)+T),C=parseFloat(v),E=v.substr((C+"").length),l=ns.lastIndex-E.length,E||(E=E||Oe.units[e]||T,l===s.length&&(s+=E,a.e+=E)),T!==E&&(p=hi(t,e,f,E)||0),a._pt={_next:a._pt,p:g||c===1?g:",",s:p,c:C-p,m:m&&m<4||e==="zIndex"?Math.round:0});a.c=l<s.length?s.substring(l,s.length):""}else a.r=e==="display"&&s==="none"?If:kf;return Wp.test(s)&&(a.e=0),this._pt=a,a},uh={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_y=function(t){var e=t.split(" "),i=e[0],s=e[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(t=i,i=s,s=t),e[0]=uh[i]||i,e[1]=uh[s]||s,e.join(" ")},by=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,s=i.style,r=e.u,o=i._gsap,a,l,c;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)a=r[c],Fn[a]&&(l=1,a=a==="transformOrigin"?Ee:Nt),Vi(i,a);l&&(Vi(i,Nt),o&&(o.svg&&i.removeAttribute("transform"),gr(i,1),o.uncache=1,Bf(s)))}},Eo={clearProps:function(t,e,i,s,r){if(r.data!=="isFromStart"){var o=t._pt=new Ce(t._pt,e,i,0,0,by);return o.u=s,o.pr=-10,o.tween=r,t._props.push(i),1}}},vr=[1,0,0,1,0,0],Ff={},Vf=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},hh=function(t){var e=gn(t,Nt);return Vf(e)?vr:e.substr(7).match(qp).map(Gt)},hc=function(t,e){var i=t._gsap||Ri(t),s=t.style,r=hh(t),o,a,l,c;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?vr:r):(r===vr&&!t.offsetParent&&t!==hs&&!i.svg&&(l=s.display,s.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,a=t.nextElementSibling,hs.appendChild(t)),r=hh(t),l?s.display=l:Vi(t,"display"),c&&(a?o.insertBefore(t,a):o?o.appendChild(t):hs.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},bl=function(t,e,i,s,r,o){var a=t._gsap,l=r||hc(t,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,p=l[0],m=l[1],f=l[2],v=l[3],C=l[4],g=l[5],E=e.split(" "),T=parseFloat(E[0])||0,k=parseFloat(E[1])||0,P,R,_,w;i?l!==vr&&(R=p*v-m*f)&&(_=T*(v/R)+k*(-f/R)+(f*g-v*C)/R,w=T*(-m/R)+k*(p/R)-(p*g-m*C)/R,T=_,k=w):(P=zf(t),T=P.x+(~E[0].indexOf("%")?T/100*P.width:T),k=P.y+(~(E[1]||E[0]).indexOf("%")?k/100*P.height:k)),s||s!==!1&&a.smooth?(C=T-c,g=k-u,a.xOffset=h+(C*p+g*f)-C,a.yOffset=d+(C*m+g*v)-g):a.xOffset=a.yOffset=0,a.xOrigin=T,a.yOrigin=k,a.smooth=!!s,a.origin=e,a.originIsAbsolute=!!i,t.style[Ee]="0px 0px",o&&(ii(o,a,"xOrigin",c,T),ii(o,a,"yOrigin",u,k),ii(o,a,"xOffset",h,a.xOffset),ii(o,a,"yOffset",d,a.yOffset)),t.setAttribute("data-svg-origin",T+" "+k)},gr=function(t,e){var i=t._gsap||new xf(t);if("x"in i&&!e&&!i.uncache)return i;var s=t.style,r=i.scaleX<0,o="px",a="deg",l=getComputedStyle(t),c=gn(t,Ee)||"0",u,h,d,p,m,f,v,C,g,E,T,k,P,R,_,w,b,I,B,z,F,V,L,U,$,Z,nt,ot,J,It,Et,zt;return u=h=d=f=v=C=g=E=T=0,p=m=1,i.svg=!!(t.getCTM&&Df(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[Nt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Nt]!=="none"?l[Nt]:"")),s.scale=s.rotate=s.translate="none"),R=hc(t,i.svg),i.svg&&(i.uncache?($=t.getBBox(),c=i.xOrigin-$.x+"px "+(i.yOrigin-$.y)+"px",U=""):U=!e&&t.getAttribute("data-svg-origin"),bl(t,U||c,!!U||i.originIsAbsolute,i.smooth!==!1,R)),k=i.xOrigin||0,P=i.yOrigin||0,R!==vr&&(I=R[0],B=R[1],z=R[2],F=R[3],u=V=R[4],h=L=R[5],R.length===6?(p=Math.sqrt(I*I+B*B),m=Math.sqrt(F*F+z*z),f=I||B?Yi(B,I)*Si:0,g=z||F?Yi(z,F)*Si+f:0,g&&(m*=Math.abs(Math.cos(g*ds))),i.svg&&(u-=k-(k*I+P*z),h-=P-(k*B+P*F))):(zt=R[6],It=R[7],nt=R[8],ot=R[9],J=R[10],Et=R[11],u=R[12],h=R[13],d=R[14],_=Yi(zt,J),v=_*Si,_&&(w=Math.cos(-_),b=Math.sin(-_),U=V*w+nt*b,$=L*w+ot*b,Z=zt*w+J*b,nt=V*-b+nt*w,ot=L*-b+ot*w,J=zt*-b+J*w,Et=It*-b+Et*w,V=U,L=$,zt=Z),_=Yi(-z,J),C=_*Si,_&&(w=Math.cos(-_),b=Math.sin(-_),U=I*w-nt*b,$=B*w-ot*b,Z=z*w-J*b,Et=F*b+Et*w,I=U,B=$,z=Z),_=Yi(B,I),f=_*Si,_&&(w=Math.cos(_),b=Math.sin(_),U=I*w+B*b,$=V*w+L*b,B=B*w-I*b,L=L*w-V*b,I=U,V=$),v&&Math.abs(v)+Math.abs(f)>359.9&&(v=f=0,C=180-C),p=Gt(Math.sqrt(I*I+B*B+z*z)),m=Gt(Math.sqrt(L*L+zt*zt)),_=Yi(V,L),g=Math.abs(_)>2e-4?_*Si:0,T=Et?1/(Et<0?-Et:Et):0),i.svg&&(U=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Vf(gn(t,Nt)),U&&t.setAttribute("transform",U))),Math.abs(g)>90&&Math.abs(g)<270&&(r?(p*=-1,g+=f<=0?180:-180,f+=f<=0?180:-180):(m*=-1,g+=g<=0?180:-180)),e=e||i.uncache,i.x=u-((i.xPercent=u&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-h)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=Gt(p),i.scaleY=Gt(m),i.rotation=Gt(f)+a,i.rotationX=Gt(v)+a,i.rotationY=Gt(C)+a,i.skewX=g+a,i.skewY=E+a,i.transformPerspective=T+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!e&&i.zOrigin||0)&&(s[Ee]=So(c)),i.xOffset=i.yOffset=0,i.force3D=Oe.force3D,i.renderTransform=i.svg?yy:Lf?Nf:wy,i.uncache=0,i},So=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ma=function(t,e,i){var s=le(e);return Gt(parseFloat(e)+parseFloat(hi(t,"x",i+"px",s)))+s},wy=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Nf(t,e)},wi="0deg",Os="0px",yi=") ",Nf=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,h=i.rotationX,d=i.skewX,p=i.skewY,m=i.scaleX,f=i.scaleY,v=i.transformPerspective,C=i.force3D,g=i.target,E=i.zOrigin,T="",k=C==="auto"&&t&&t!==1||C===!0;if(E&&(h!==wi||u!==wi)){var P=parseFloat(u)*ds,R=Math.sin(P),_=Math.cos(P),w;P=parseFloat(h)*ds,w=Math.cos(P),o=Ma(g,o,R*w*-E),a=Ma(g,a,-Math.sin(P)*-E),l=Ma(g,l,_*w*-E+E)}v!==Os&&(T+="perspective("+v+yi),(s||r)&&(T+="translate("+s+"%, "+r+"%) "),(k||o!==Os||a!==Os||l!==Os)&&(T+=l!==Os||k?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+yi),c!==wi&&(T+="rotate("+c+yi),u!==wi&&(T+="rotateY("+u+yi),h!==wi&&(T+="rotateX("+h+yi),(d!==wi||p!==wi)&&(T+="skew("+d+", "+p+yi),(m!==1||f!==1)&&(T+="scale("+m+", "+f+yi),g.style[Nt]=T||"translate(0, 0)"},yy=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,h=i.scaleX,d=i.scaleY,p=i.target,m=i.xOrigin,f=i.yOrigin,v=i.xOffset,C=i.yOffset,g=i.forceCSS,E=parseFloat(o),T=parseFloat(a),k,P,R,_,w;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=ds,c*=ds,k=Math.cos(l)*h,P=Math.sin(l)*h,R=Math.sin(l-c)*-d,_=Math.cos(l-c)*d,c&&(u*=ds,w=Math.tan(c-u),w=Math.sqrt(1+w*w),R*=w,_*=w,u&&(w=Math.tan(u),w=Math.sqrt(1+w*w),k*=w,P*=w)),k=Gt(k),P=Gt(P),R=Gt(R),_=Gt(_)):(k=h,_=d,P=R=0),(E&&!~(o+"").indexOf("px")||T&&!~(a+"").indexOf("px"))&&(E=hi(p,"x",o,"px"),T=hi(p,"y",a,"px")),(m||f||v||C)&&(E=Gt(E+m-(m*k+f*R)+v),T=Gt(T+f-(m*P+f*_)+C)),(s||r)&&(w=p.getBBox(),E=Gt(E+s/100*w.width),T=Gt(T+r/100*w.height)),w="matrix("+k+","+P+","+R+","+_+","+E+","+T+")",p.setAttribute("transform",w),g&&(p.style[Nt]=w)},xy=function(t,e,i,s,r){var o=360,a=te(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?Si:1),c=l-s,u=s+c+"deg",h,d;return a&&(h=r.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*oh)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*oh)%o-~~(c/o)*o)),t._pt=d=new Ce(t._pt,e,i,s,c,ry),d.e=u,d.u="deg",t._props.push(i),d},dh=function(t,e){for(var i in e)t[i]=e[i];return t},Cy=function(t,e,i){var s=dh({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,h,d,p,m;s.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[Nt]=e,a=gr(i,1),Vi(i,Nt),i.setAttribute("transform",c)):(c=getComputedStyle(i)[Nt],o[Nt]=e,a=gr(i,1),o[Nt]=c);for(l in Fn)c=s[l],u=a[l],c!==u&&r.indexOf(l)<0&&(p=le(c),m=le(u),h=p!==m?hi(i,l,c,m):parseFloat(c),d=parseFloat(u),t._pt=new Ce(t._pt,a,l,h,d-h,vl),t._pt.u=m||0,t._props.push(l));dh(a,s)};xe("padding,margin,Width,Radius",function(n,t){var e="Top",i="Right",s="Bottom",r="Left",o=(t<3?[e,i,s,r]:[e+r,e+i,s+i,s+r]).map(function(a){return t<2?n+a:"border"+a+n});Eo[t>1?"border"+n:n]=function(a,l,c,u,h){var d,p;if(arguments.length<4)return d=o.map(function(m){return Bn(a,m,c)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(u+"").split(" "),p={},o.forEach(function(m,f){return p[m]=d[f]=d[f]||d[(f-1)/2|0]}),a.init(l,p,h)}});var Uf={name:"css",register:_l,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,s,r){var o=this._props,a=t.style,l=i.vars.startAt,c,u,h,d,p,m,f,v,C,g,E,T,k,P,R,_;lc||_l(),this.styles=this.styles||Of(t),_=this.styles.props,this.tween=i;for(f in e)if(f!=="autoRound"&&(u=e[f],!(Ae[f]&&Cf(f,e,i,s,t,r)))){if(p=typeof u,m=Eo[f],p==="function"&&(u=u.call(i,s,t,r),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=pr(u)),m)m(this,t,f,u,i)&&(R=1);else if(f.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(f)+"").trim(),u+="",ai.lastIndex=0,ai.test(c)||(v=le(c),C=le(u)),C?v!==C&&(c=hi(t,f,c,C)+C):v&&(u+=v),this.add(a,"setProperty",c,u,s,r,0,0,f),o.push(f),_.push(f,0,a[f]);else if(p!=="undefined"){if(l&&f in l?(c=typeof l[f]=="function"?l[f].call(i,s,t,r):l[f],te(c)&&~c.indexOf("random(")&&(c=pr(c)),le(c+"")||c==="auto"||(c+=Oe.units[f]||le(Bn(t,f))||""),(c+"").charAt(1)==="="&&(c=Bn(t,f))):c=Bn(t,f),d=parseFloat(c),g=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),g&&(u=u.substr(2)),h=parseFloat(u),f in fn&&(f==="autoAlpha"&&(d===1&&Bn(t,"visibility")==="hidden"&&h&&(d=0),_.push("visibility",0,a.visibility),ii(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),f!=="scale"&&f!=="transform"&&(f=fn[f],~f.indexOf(",")&&(f=f.split(",")[0]))),E=f in Fn,E){if(this.styles.save(f),T||(k=t._gsap,k.renderTransform&&!e.parseTransform||gr(t,e.parseTransform),P=e.smoothOrigin!==!1&&k.smooth,T=this._pt=new Ce(this._pt,a,Nt,0,1,k.renderTransform,k,0,-1),T.dep=1),f==="scale")this._pt=new Ce(this._pt,k,"scaleY",k.scaleY,(g?us(k.scaleY,g+h):h)-k.scaleY||0,vl),this._pt.u=0,o.push("scaleY",f),f+="X";else if(f==="transformOrigin"){_.push(Ee,0,a[Ee]),u=_y(u),k.svg?bl(t,u,0,P,0,this):(C=parseFloat(u.split(" ")[2])||0,C!==k.zOrigin&&ii(this,k,"zOrigin",k.zOrigin,C),ii(this,a,f,So(c),So(u)));continue}else if(f==="svgOrigin"){bl(t,u,1,P,0,this);continue}else if(f in Ff){xy(this,k,f,d,g?us(d,g+u):u);continue}else if(f==="smoothOrigin"){ii(this,k,"smooth",k.smooth,u);continue}else if(f==="force3D"){k[f]=u;continue}else if(f==="transform"){Cy(this,u,t);continue}}else f in a||(f=xs(f)||f);if(E||(h||h===0)&&(d||d===0)&&!sy.test(u)&&f in a)v=(c+"").substr((d+"").length),h||(h=0),C=le(u)||(f in Oe.units?Oe.units[f]:v),v!==C&&(d=hi(t,f,c,C)),this._pt=new Ce(this._pt,E?k:a,f,d,(g?us(d,g+h):h)-d,!E&&(C==="px"||f==="zIndex")&&e.autoRound!==!1?ay:vl),this._pt.u=C||0,v!==C&&C!=="%"&&(this._pt.b=c,this._pt.r=oy);else if(f in a)gy.call(this,t,f,c,g?g+u:u);else if(f in t)this.add(t,f,c||t[f],g?g+u:u,s,r);else if(f!=="parseTransform"){Jl(f,u);continue}E||(f in a?_.push(f,0,a[f]):_.push(f,1,c||t[f])),o.push(f)}}R&&Af(this)},render:function(t,e){if(e.tween._time||!cc())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Bn,aliases:fn,getSetter:function(t,e,i){var s=fn[e];return s&&s.indexOf(",")<0&&(e=s),e in Fn&&e!==Ee&&(t._gsap.x||Bn(t,"x"))?i&&rh===i?e==="scale"?hy:uy:(rh=i||{})&&(e==="scale"?dy:py):t.style&&!Xl(t.style[e])?ly:~e.indexOf("-")?cy:oc(t,e)},core:{_removeProperty:Vi,_getMatrix:hc}};Se.utils.checkPrefix=xs;Se.core.getStyleSaver=Of;(function(n,t,e,i){var s=xe(n+","+t+","+e,function(r){Fn[r]=1});xe(t,function(r){Oe.units[r]="deg",Ff[r]=1}),fn[s[13]]=n+","+t,xe(i,function(r){var o=r.split(":");fn[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");xe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Oe.units[n]="px"});Se.registerPlugin(Uf);var Ey=Se.registerPlugin(Uf)||Se;Ey.core.Tween;/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function Rt(n){return n==null}function dc(n){return n!==null&&typeof n=="object"}function wl(n){return n!==null&&typeof n=="object"}function Sy(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Ni(n,t){return Array.from(new Set([...Object.keys(n),...Object.keys(t)])).reduce((i,s)=>{const r=n[s],o=t[s];return wl(r)&&wl(o)?Object.assign(Object.assign({},i),{[s]:Ni(r,o)}):Object.assign(Object.assign({},i),{[s]:s in t?o:r})},{})}function pc(n){return dc(n)?"target"in n:!1}const Py={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class jt{static alreadyDisposed(){return new jt({type:"alreadydisposed"})}static notBindable(){return new jt({type:"notbindable"})}static notCompatible(t,e){return new jt({type:"notcompatible",context:{id:`${t}.${e}`}})}static propertyNotFound(t){return new jt({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new jt({type:"shouldneverhappen"})}constructor(t){var e;this.message=(e=Py[t.type](t.context))!==null&&e!==void 0?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class Po{constructor(t,e){this.obj_=t,this.key=e}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,e){const i=this.read();if(!Po.isBindable(i))throw jt.notBindable();if(!(t in i))throw jt.propertyNotFound(t);i[t]=e}}class Yt{constructor(){this.observers_={}}on(t,e,i){var s;let r=this.observers_[t];return r||(r=this.observers_[t]=[]),r.push({handler:e,key:(s=i==null?void 0:i.key)!==null&&s!==void 0?s:e}),this}off(t,e){const i=this.observers_[t];return i&&(this.observers_[t]=i.filter(s=>s.key!==e)),this}emit(t,e){const i=this.observers_[t];i&&i.forEach(s=>{s.handler(e)})}}class Ty{constructor(t,e){var i;this.constraint_=e==null?void 0:e.constraint,this.equals_=(i=e==null?void 0:e.equals)!==null&&i!==void 0?i:(s,r)=>s===r,this.emitter=new Yt,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=e??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(t):t,r=this.rawValue_;this.equals_(r,s)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:s,sender:this}))}}class My{constructor(t){this.emitter=new Yt,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=e??{forceEmit:!1,last:!0},s=this.value_;s===t&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:this.value_,sender:this}))}}class Ay{constructor(t){this.emitter=new Yt,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Lt(n,t){const e=t==null?void 0:t.constraint,i=t==null?void 0:t.equals;return!e&&!i?new My(n):new Ty(n,t)}function Ry(n){return[new Ay(n),(t,e)=>{n.setRawValue(t,e)}]}class ut{constructor(t){this.emitter=new Yt,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",()=>{this.emitter.emit("change",{key:e,sender:this})})}static createCore(t){return Object.keys(t).reduce((i,s)=>Object.assign(i,{[s]:Lt(t[s])}),{})}static fromObject(t){const e=this.createCore(t);return new ut(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}class Mr{constructor(t){this.values=ut.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(t,i),e)}}class ky{constructor(t){this.values=ut.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),i=this.values.get("min");let s=t;return Rt(i)||(s=Math.max(s,i)),Rt(e)||(s=Math.min(s,e)),s}}class Iy{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step,i=Math.round((t-e)/this.step);return e+i*this.step}}class By{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Oy={"**":(n,t)=>Math.pow(n,t),"*":(n,t)=>n*t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,"+":(n,t)=>n+t,"-":(n,t)=>n-t,"<<":(n,t)=>n<<t,">>":(n,t)=>n>>t,">>>":(n,t)=>n>>>t,"&":(n,t)=>n&t,"^":(n,t)=>n^t,"|":(n,t)=>n|t};class Ly{constructor(t,e,i){this.left=e,this.operator=t,this.right=i}evaluate(){const t=Oy[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const zy={"+":n=>n,"-":n=>-n,"~":n=>~n};class Dy{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=zy[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function fc(n){return(t,e)=>{for(let i=0;i<n.length;i++){const s=n[i](t,e);if(s!=="")return s}return""}}function _r(n,t){var e;const i=n.substr(t).match(/^\s+/);return(e=i&&i[0])!==null&&e!==void 0?e:""}function Fy(n,t){const e=n.substr(t,1);return e.match(/^[1-9]$/)?e:""}function br(n,t){var e;const i=n.substr(t).match(/^[0-9]+/);return(e=i&&i[0])!==null&&e!==void 0?e:""}function Vy(n,t){const e=br(n,t);if(e!=="")return e;const i=n.substr(t,1);if(t+=1,i!=="-"&&i!=="+")return"";const s=br(n,t);return s===""?"":i+s}function mc(n,t){const e=n.substr(t,1);if(t+=1,e.toLowerCase()!=="e")return"";const i=Vy(n,t);return i===""?"":e+i}function jf(n,t){const e=n.substr(t,1);if(e==="0")return e;const i=Fy(n,t);return t+=i.length,i===""?"":i+br(n,t)}function Ny(n,t){const e=jf(n,t);if(t+=e.length,e==="")return"";const i=n.substr(t,1);if(t+=i.length,i!==".")return"";const s=br(n,t);return t+=s.length,e+i+s+mc(n,t)}function Uy(n,t){const e=n.substr(t,1);if(t+=e.length,e!==".")return"";const i=br(n,t);return t+=i.length,i===""?"":e+i+mc(n,t)}function jy(n,t){const e=jf(n,t);return t+=e.length,e===""?"":e+mc(n,t)}const Hy=fc([Ny,Uy,jy]);function Gy(n,t){var e;const i=n.substr(t).match(/^[01]+/);return(e=i&&i[0])!==null&&e!==void 0?e:""}function qy(n,t){const e=n.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0b")return"";const i=Gy(n,t);return i===""?"":e+i}function Wy(n,t){var e;const i=n.substr(t).match(/^[0-7]+/);return(e=i&&i[0])!==null&&e!==void 0?e:""}function $y(n,t){const e=n.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0o")return"";const i=Wy(n,t);return i===""?"":e+i}function Ky(n,t){var e;const i=n.substr(t).match(/^[0-9a-f]+/i);return(e=i&&i[0])!==null&&e!==void 0?e:""}function Yy(n,t){const e=n.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0x")return"";const i=Ky(n,t);return i===""?"":e+i}const Xy=fc([qy,$y,Yy]),Zy=fc([Xy,Hy]);function Qy(n,t){const e=Zy(n,t);return t+=e.length,e===""?null:{evaluable:new By(e),cursor:t}}function Jy(n,t){const e=n.substr(t,1);if(t+=e.length,e!=="(")return null;const i=Gf(n,t);if(!i)return null;t=i.cursor,t+=_r(n,t).length;const s=n.substr(t,1);return t+=s.length,s!==")"?null:{evaluable:i.evaluable,cursor:t}}function tx(n,t){var e;return(e=Qy(n,t))!==null&&e!==void 0?e:Jy(n,t)}function Hf(n,t){const e=tx(n,t);if(e)return e;const i=n.substr(t,1);if(t+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const s=Hf(n,t);return s?(t=s.cursor,{cursor:t,evaluable:new Dy(i,s.evaluable)}):null}function ex(n,t,e){e+=_r(t,e).length;const i=n.filter(s=>t.startsWith(s,e))[0];return i?(e+=i.length,e+=_r(t,e).length,{cursor:e,operator:i}):null}function nx(n,t){return(e,i)=>{const s=n(e,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const o=ex(t,e,i);if(!o)break;i=o.cursor;const a=n(e,i);if(!a)return null;i=a.cursor,r=new Ly(o.operator,r,a.evaluable)}return r?{cursor:i,evaluable:r}:null}}const ix=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,t)=>nx(n,t),Hf);function Gf(n,t){return t+=_r(n,t).length,ix(n,t)}function sx(n){const t=Gf(n,0);return!t||t.cursor+_r(n,t.cursor).length!==n.length?null:t.evaluable}function Vn(n){var t;const e=sx(n);return(t=e==null?void 0:e.evaluate())!==null&&t!==void 0?t:null}function qf(n){if(typeof n=="number")return n;if(typeof n=="string"){const t=Vn(n);if(!Rt(t))return t}return 0}function rx(n){return String(n)}function Pe(n){return t=>t.toFixed(Math.max(Math.min(n,20),0))}function Ct(n,t,e,i,s){const r=(n-t)/(e-t);return i+r*(s-i)}function ph(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Qt(n,t,e){return Math.min(Math.max(n,t),e)}function Wf(n,t){return(n%t+t)%t}function ox(n,t){return Rt(n.step)?Math.max(ph(t),2):ph(n.step)}function $f(n){var t;return(t=n.step)!==null&&t!==void 0?t:1}function Kf(n,t){var e;const i=Math.abs((e=n.step)!==null&&e!==void 0?e:t);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function Yf(n,t){return Rt(n.step)?null:new Iy(n.step,t)}function Xf(n){return!Rt(n.max)&&!Rt(n.min)?new Mr({max:n.max,min:n.min}):!Rt(n.max)||!Rt(n.min)?new ky({max:n.max,min:n.min}):null}function Zf(n,t){var e,i,s;return{formatter:(e=n.format)!==null&&e!==void 0?e:Pe(ox(n,t)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:$f(n),pointerScale:(s=n.pointerScale)!==null&&s!==void 0?s:Kf(n,t)}}function Qf(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function vc(n){return{constraint:n.constraint,textProps:ut.fromObject(Zf(n.params,n.initialValue))}}class Wi{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class Yo{constructor(t){this.target=t}}class Ar extends Yo{constructor(t,e,i){super(t),this.value=e,this.last=i??!0}}class ax extends Yo{constructor(t,e){super(t),this.expanded=e}}class lx extends Yo{constructor(t,e){super(t),this.index=e}}class cx extends Yo{constructor(t,e){super(t),this.native=e}}class wr extends Wi{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Yt,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,s=>{i(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const e=this.controller.value;this.emitter_.emit("change",new Ar(this,e.binding.target.read(),t.options.last))}}class ux{constructor(t,e){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Yt}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function hx(n){if(!("binding"in n))return!1;const t=n.binding;return pc(t)&&"read"in t&&"write"in t}function dx(n,t){const i=Object.keys(t).reduce((s,r)=>{if(s===void 0)return;const o=t[r],a=o(n[r]);return a.succeeded?Object.assign(Object.assign({},s),{[r]:a.value}):void 0},{});return i}function px(n,t){return n.reduce((e,i)=>{if(e===void 0)return;const s=t(i);if(!(!s.succeeded||s.value===void 0))return[...e,s.value]},[])}function fx(n){return n===null?!1:typeof n=="object"}function En(n){return t=>e=>{if(!t&&e===void 0)return{succeeded:!1,value:void 0};if(t&&e===void 0)return{succeeded:!0,value:void 0};const i=n(e);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function fh(n){return{custom:t=>En(t)(n),boolean:En(t=>typeof t=="boolean"?t:void 0)(n),number:En(t=>typeof t=="number"?t:void 0)(n),string:En(t=>typeof t=="string"?t:void 0)(n),function:En(t=>typeof t=="function"?t:void 0)(n),constant:t=>En(e=>e===t?t:void 0)(n),raw:En(t=>t)(n),object:t=>En(e=>{if(fx(e))return dx(e,t)})(n),array:t=>En(e=>{if(Array.isArray(e))return px(e,t)})(n)}}const yl={optional:fh(!0),required:fh(!1)};function Ut(n,t){const e=t(yl),i=yl.required.object(e)(n);return i.succeeded?i.value:void 0}function ze(n,t,e,i){if(t&&!t(n))return!1;const s=Ut(n,e);return s?i(s):!1}function De(n,t){var e;return Ni((e=n==null?void 0:n())!==null&&e!==void 0?e:{},t)}function Oi(n){return"value"in n}function Jf(n){if(!dc(n)||!("binding"in n))return!1;const t=n.binding;return pc(t)}const mn="http://www.w3.org/2000/svg";function To(n){n.offsetHeight}function mx(n,t){const e=n.style.transition;n.style.transition="none",t(),n.style.transition=e}function gc(n){return n.ontouchstart!==void 0}function vx(){return globalThis}function gx(){return vx().document}function _x(n){const t=n.ownerDocument.defaultView;return t&&"document"in t?n.getContext("2d",{willReadFrequently:!0}):null}const bx={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Xo(n,t){const e=n.createElementNS(mn,"svg");return e.innerHTML=bx[t],e}function tm(n,t,e){n.insertBefore(t,n.children[e])}function _c(n){n.parentElement&&n.parentElement.removeChild(n)}function em(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function wx(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function nm(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function zn(n,t){n.emitter.on("change",e=>{t(e.rawValue)}),t(n.rawValue)}function wn(n,t,e){zn(n.value(t),e)}const yx="tp";function mt(n){return(e,i)=>[yx,"-",n,"v",e?`_${e}`:"",i?`-${i}`:""].join("")}const Ls=mt("lbl");function xx(n,t){const e=n.createDocumentFragment();return t.split(`
`).map(s=>n.createTextNode(s)).forEach((s,r)=>{r>0&&e.appendChild(n.createElement("br")),e.appendChild(s)}),e}class im{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ls()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Ls("l")),wn(e.props,"label",r=>{Rt(r)?this.element.classList.add(Ls(void 0,"nol")):(this.element.classList.remove(Ls(void 0,"nol")),wx(i),i.appendChild(xx(t,r)))}),this.element.appendChild(i),this.labelElement=i;const s=t.createElement("div");s.classList.add(Ls("v")),this.element.appendChild(s),this.valueElement=s}}class sm{constructor(t,e){this.props=e.props,this.valueController=e.valueController,this.viewProps=e.valueController.viewProps,this.view=new im(t,{props:e.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return ze(t,null,e=>({label:e.optional.string}),e=>(this.props.set("label",e.label),!0))}exportProps(){return De(null,{label:this.props.get("label")})}}function Cx(){return["veryfirst","first","last","verylast"]}const mh=mt(""),vh={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Zo{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Cx().forEach(i=>{e.classList.remove(mh(void 0,vh[i]))}),this.blade.get("positions").forEach(i=>{e.classList.add(mh(void 0,vh[i]))})}),this.viewProps.handleDispose(()=>{_c(e)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return ze(t,null,e=>({disabled:e.required.boolean,hidden:e.required.boolean}),e=>(this.viewProps.importState(e),!0))}exportState(){return De(null,Object.assign({},this.viewProps.exportState()))}}class Ui extends Zo{constructor(t,e){if(e.value!==e.valueController.value)throw jt.shouldNeverHappen();const i=e.valueController.viewProps,s=new sm(t,{blade:e.blade,props:e.props,valueController:e.valueController});super(Object.assign(Object.assign({},e),{view:new im(t,{props:e.props,viewProps:i}),viewProps:i})),this.labelController=s,this.value=e.value,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return ze(t,e=>{var i,s,r;return super.importState(e)&&this.labelController.importProps(e)&&((r=(s=(i=this.valueController).importProps)===null||s===void 0?void 0:s.call(i,t))!==null&&r!==void 0?r:!0)},e=>({value:e.optional.raw}),e=>(e.value&&(this.value.rawValue=e.value),!0))}exportState(){var t,e,i;return De(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(e=(t=this.valueController).exportProps)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:{}))}}function gh(n){const t=Object.assign({},n);return delete t.value,t}class rm extends Ui{constructor(t,e){super(t,e),this.tag=e.tag}importState(t){return ze(t,e=>super.importState(gh(t)),e=>({tag:e.optional.string}),e=>(this.tag=e.tag,!0))}exportState(){return De(()=>gh(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Ex(n){return Oi(n)&&Jf(n.value)}class Sx extends rm{importState(t){return ze(t,e=>super.importState(e),e=>({binding:e.required.object({value:e.required.raw})}),e=>(this.value.binding.inject(e.binding.value),this.value.fetch(),!0))}}function Px(n){return Oi(n)&&hx(n.value)}function om(n,t){for(;n.length<t;)n.push(void 0)}function Tx(n){const t=[];return om(t,n),t}function Mx(n){const t=n.indexOf(void 0);return t<0?n:n.slice(0,t)}function Ax(n,t){const e=[...Mx(n),t];return e.length>n.length?e.splice(0,e.length-n.length):om(e,n.length),e}class Rx{constructor(t){this.emitter=new Yt,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=Lt(Tx(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=Ax(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function kx(n){if(!("binding"in n))return!1;const t=n.binding;return pc(t)&&"read"in t&&!("write"in t)}class Ix extends rm{exportState(){return De(()=>super.exportState(),{binding:{readonly:!0}})}}function Bx(n){return Oi(n)&&kx(n.value)}class Ox extends Wi{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,e){const i=e.bind(this);return this.controller.buttonController.emitter.on(t,r=>{i(new cx(this,r.nativeEvent))}),this}off(t,e){return this.controller.buttonController.emitter.off(t,e),this}}function Lx(n,t,e){e?n.classList.add(t):n.classList.remove(t)}function Ss(n,t){return e=>{Lx(n,t,e)}}function bc(n,t){zn(n,e=>{t.textContent=e??""})}const Aa=mt("btn");class zx{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Aa()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("button");i.classList.add(Aa("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=t.createElement("div");s.classList.add(Aa("t")),bc(e.props.value("title"),s),this.buttonElement.appendChild(s)}}class Dx{constructor(t,e){this.emitter=new Yt,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new zx(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return ze(t,null,e=>({title:e.optional.string}),e=>(this.props.set("title",e.title),!0))}exportProps(){return De(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class _h extends Zo{constructor(t,e){const i=new Dx(t,{props:e.buttonProps,viewProps:e.viewProps}),s=new sm(t,{blade:e.blade,props:e.labelProps,valueController:i});super({blade:e.blade,view:s.view,viewProps:e.viewProps}),this.buttonController=i,this.labelController=s}importState(t){return ze(t,e=>super.importState(e)&&this.buttonController.importProps(e)&&this.labelController.importProps(e),()=>({}),()=>!0)}exportState(){return De(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class am{constructor(t){const[e,i]=t.split("-"),s=e.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=i??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}const Ps=new am("2.0.5");function ge(n){return Object.assign({core:Ps},n)}const Fx=ge({id:"button",type:"blade",accept(n){const t=Ut(n,e=>({title:e.required.string,view:e.required.constant("button"),label:e.optional.string}));return t?{params:t}:null},controller(n){return new _h(n.document,{blade:n.blade,buttonProps:ut.fromObject({title:n.params.title}),labelProps:ut.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof _h?new Ox(n.controller):null}});function Vx(n,t){return n.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function Nx(n,t){return n.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function Ux(n,t){return n.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function jx(n){return dc(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Hx(n,t){if(!Po.isBindable(n))throw jt.notBindable();return new Po(n,t)}class Gx{constructor(t,e){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new Yt,this.pool_=e,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,e,i){const s=i??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,Hx(t,e),s),a=this.pool_.createBindingApi(o);return this.add(a,s.index)}addFolder(t){return Nx(this,t)}addButton(t){return Vx(this,t)}addTab(t){return Ux(this,t)}add(t,e){const i=t.controller;return this.controller_.rack.add(i,e),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const e=this.controller_.element.ownerDocument,i=this.pool_.createBlade(e,t),s=this.pool_.createApi(i);return this.add(s,t.index)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,s=>{i(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.children.forEach(t=>{jx(t)&&t.refresh()})}onRackValueChange_(t){const e=t.bladeController,i=this.pool_.createApi(e),s=Jf(e.value)?e.value.binding:null;this.emitter_.emit("change",new Ar(i,s?s.target.read():e.value.rawValue,t.options.last))}}class wc extends Wi{constructor(t,e){super(t),this.rackApi_=new Gx(t.rackController,e)}refresh(){this.rackApi_.refresh()}}class yc extends Zo{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return ze(t,e=>super.importState(e),e=>({children:e.required.array(e.required.raw)}),e=>this.rackController.rack.children.every((i,s)=>i.importState(e.children[s])))}exportState(){return De(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}}function xl(n){return"rackController"in n}class qx{constructor(t){this.emitter=new Yt,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw jt.shouldNeverHappen();const i=e!==void 0?e:this.items_.length;this.items_.splice(i,0,t),this.cache_.add(t);const s=this.extract_(t);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:i,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const i=this.extract_(t);i&&(i.allItems().forEach(s=>{this.cache_.delete(s)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function Wx(n,t){for(let e=0;e<n.length;e++){const i=n[e];if(Oi(i)&&i.value===t)return i}return null}function $x(n){return xl(n)?n.rackController.rack.bcSet_:null}class Kx{constructor(t){var e,i;this.emitter=new Yt,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(e=t.blade)!==null&&e!==void 0?e:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new qx($x),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var i;(i=t.parent)===null||i===void 0||i.remove(t),t.parent=this,this.bcSet_.add(t,e)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:e,sender:this}),!e)return;const i=t.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),Oi(i))i.value.emitter.on("change",this.onChildValueChange_);else if(xl(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:e,sender:this}),!e)return;const i=t.item;if(Oi(i))i.value.emitter.off("change",this.onChildValueChange_);else if(xl(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),e=t[0],i=t[t.length-1];this.bcSet_.items.forEach(s=>{const r=[];s===e&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),s===i&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),s.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(e=>e.viewProps.get("disposed")).forEach(e=>{this.bcSet_.remove(e)})}onChildValueChange_(t){const e=Wx(this.find(Oi),t.sender);if(!e)throw jt.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:e,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class xc{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const e=new Kx({blade:t.root?void 0:t.blade,viewProps:t.viewProps});e.emitter.on("add",this.onRackAdd_),e.emitter.on("remove",this.onRackRemove_),this.rack=e,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&tm(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&_c(t.bladeController.view.element)}}function Ts(){return new ut({positions:Lt([],{equals:Sy})})}class Rr extends ut{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=ut.createCore(e);return new Rr(i)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Rt(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const i=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};wn(this,"expanded",i),wn(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Yx(n,t){let e=0;return mx(t,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),To(t),e=t.clientHeight,n.set("temporaryExpanded",null),To(t)}),e}function bh(n,t){t.style.height=n.styleHeight}function Cc(n,t){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),Rt(n.get("expandedHeight"))){const e=Yx(n,t);e>0&&n.set("expandedHeight",e)}n.set("shouldFixHeight",!0),To(t)}),n.emitter.on("change",()=>{bh(n,t)}),bh(n,t),t.addEventListener("transitionend",e=>{e.propertyName==="height"&&n.cleanUpTransition()})}class lm extends wc{constructor(t,e){super(t,e),this.emitter_=new Yt,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new ax(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,e,i){return this.rackApi_.addBinding(t,e,i)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,s=>{i(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const cm=mt("cnt");class Xx{constructor(t,e){var i;this.className_=mt((i=e.viewName)!==null&&i!==void 0?i:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),cm()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),wn(this.foldable_,"completed",Ss(this.element,this.className_(void 0,"cpl")));const s=t.createElement("button");s.classList.add(this.className_("b")),wn(e.props,"title",c=>{Rt(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),e.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const r=t.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=t.createElement("div");o.classList.add(this.className_("t")),bc(e.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=t.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Cl extends yc{constructor(t,e){var i;const s=Rr.create((i=e.expanded)!==null&&i!==void 0?i:!0),r=new Xx(t,{foldable:s,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new xc({blade:e.blade,element:r.containerElement,root:e.root,viewProps:e.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=s,Cc(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return ze(t,e=>super.importState(e),e=>({expanded:e.required.boolean,title:e.optional.string}),e=>(this.foldable.set("expanded",e.expanded),this.props.set("title",e.title),!0))}exportState(){return De(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Zx=ge({id:"folder",type:"blade",accept(n){const t=Ut(n,e=>({title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean}));return t?{params:t}:null},controller(n){return new Cl(n.document,{blade:n.blade,expanded:n.params.expanded,props:ut.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Cl?new lm(n.controller,n.pool):null}}),Qx=mt("");function wh(n,t){return Ss(n,Qx(void 0,t))}class jn extends ut{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Ry(Lt(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,i,s;const r=t??{};return new jn(ut.createCore({disabled:(e=r.disabled)!==null&&e!==void 0?e:!1,disposed:!1,hidden:(i=r.hidden)!==null&&i!==void 0?i:!1,parent:(s=r.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){zn(this.globalDisabled_,wh(t,"disabled")),wn(this,"hidden",wh(t,"hidden"))}bindDisabled(t){zn(this.globalDisabled_,e=>{t.disabled=e})}bindTabIndex(t){zn(this.globalDisabled_,e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const i=t.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const yh=mt("tbp");class Jx{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(yh()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(yh("c")),this.element.appendChild(i),this.containerElement=i}}const zs=mt("tbi");class t1{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(zs()),e.viewProps.bindClassModifiers(this.element),wn(e.props,"selected",r=>{r?this.element.classList.add(zs(void 0,"sel")):this.element.classList.remove(zs(void 0,"sel"))});const i=t.createElement("button");i.classList.add(zs("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=t.createElement("div");s.classList.add(zs("t")),bc(e.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class e1{constructor(t,e){this.emitter=new Yt,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new t1(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class El extends yc{constructor(t,e){const i=new Jx(t,{viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new xc({blade:e.blade,element:i.containerElement,viewProps:e.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new e1(t,{props:e.itemProps,viewProps:jn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=e.props,wn(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(t){return ze(t,e=>super.importState(e),e=>({selected:e.required.boolean,title:e.required.string}),e=>(this.ic_.props.set("selected",e.selected),this.ic_.props.set("title",e.title),!0))}exportState(){return De(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class n1 extends wc{constructor(t,e){super(t,e),this.emitter_=new Yt,this.onSelect_=this.onSelect_.bind(this),this.pool_=e,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const e=this.controller.view.element.ownerDocument,i=new El(e,{blade:Ts(),itemProps:ut.fromObject({selected:!1,title:t.title}),props:ut.fromObject({selected:!1}),viewProps:jn.create()}),s=this.pool_.createApi(i);return this.rackApi_.add(s,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,e){const i=e.bind(this);return this.emitter_.on(t,s=>{i(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}onSelect_(t){this.emitter_.emit("select",new lx(this,t.rawValue))}}class i1 extends wc{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBinding(t,e,i){return this.rackApi_.addBinding(t,e,i)}addBlade(t){return this.rackApi_.addBlade(t)}}const xh=-1;class s1{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Lt(!0),this.selectedIndex=Lt(xh),this.items_=[]}add(t,e){const i=e??this.items_.length;this.items_.splice(i,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=xh,this.empty.rawValue=!0;return}const t=this.items_.findIndex(e=>e.rawValue);t<0?(this.items_.forEach((e,i)=>{e.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((e,i)=>{e.rawValue=i===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex(i=>i===t.sender);this.items_.forEach((i,s)=>{i.rawValue=s===e}),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const Ds=mt("tab");class r1{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ds(),cm()),e.viewProps.bindClassModifiers(this.element),zn(e.empty,Ss(this.element,Ds(void 0,"nop")));const i=t.createElement("div");i.classList.add(Ds("t")),this.element.appendChild(i),this.itemsElement=i;const s=t.createElement("div");s.classList.add(Ds("i")),this.element.appendChild(s);const r=t.createElement("div");r.classList.add(Ds("c")),this.element.appendChild(r),this.contentsElement=r}}class Ch extends yc{constructor(t,e){const i=new s1,s=new r1(t,{empty:i.empty,viewProps:e.viewProps});super({blade:e.blade,rackController:new xc({blade:e.blade,element:s.contentsElement,viewProps:e.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=i}add(t,e){this.rackController.rack.add(t,e)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const e=t.bladeController;tm(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.tab.add(e.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const e=t.bladeController;_c(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.tab.remove(e.props.value("selected"))}}const um=ge({id:"tab",type:"blade",accept(n){const t=Ut(n,e=>({pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(n){const t=new Ch(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(e=>{const i=new El(n.document,{blade:Ts(),itemProps:ut.fromObject({selected:!1,title:e.title}),props:ut.fromObject({selected:!1}),viewProps:jn.create()});t.add(i)}),t},api(n){return n.controller instanceof Ch?new n1(n.controller,n.pool):n.controller instanceof El?new i1(n.controller,n.pool):null}});function o1(n,t){const e=n.accept(t.params);if(!e)return null;const i=Ut(t.params,s=>({disabled:s.optional.boolean,hidden:s.optional.boolean}));return n.controller({blade:Ts(),document:t.document,params:Object.assign(Object.assign({},e.params),{disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden}),viewProps:jn.create({disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden})})}class Ec extends wr{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class a1{constructor(){this.disabled=!1,this.emitter=new Yt}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class l1{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new Yt,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class kr{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((e,i)=>i.constrain(e),t)}}function Mo(n,t){if(n instanceof t)return n;if(n instanceof kr){const e=n.constraints.reduce((i,s)=>i||(s instanceof t?s:null),null);if(e)return e}return null}class Ir{constructor(t){this.values=ut.fromObject({options:t})}constrain(t){const e=this.values.get("options");return e.length===0||e.filter(s=>s.value===t).length>0?t:e[0].value}}function Br(n){var t;const e=yl;if(Array.isArray(n))return(t=Ut({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof n=="object")return e.required.raw(n).value}function Sc(n){if(Array.isArray(n))return n;const t=[];return Object.keys(n).forEach(e=>{t.push({text:e,value:n[e]})}),t}function Pc(n){return Rt(n)?null:new Ir(Sc(n))}const Ra=mt("lst");class c1{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(Ra()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("select");i.classList.add(Ra("s")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const s=t.createElement("div");s.classList.add(Ra("m")),s.appendChild(Xo(t,"dropdown")),this.element.appendChild(s),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,wn(this.props_,"options",r=>{em(this.selectElement),r.forEach(o=>{const a=t.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const t=this.props_.get("options").map(e=>e.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class di{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new c1(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget;this.value.rawValue=this.props.get("options")[e.selectedIndex].value}importProps(t){return ze(t,null,e=>({options:e.required.custom(Br)}),e=>(this.props.set("options",Sc(e.options)),!0))}exportProps(){return De(null,{options:this.props.get("options")})}}const Eh=mt("pop");class u1{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Eh()),e.viewProps.bindClassModifiers(this.element),zn(e.shows,Ss(this.element,Eh(void 0,"v")))}}class hm{constructor(t,e){this.shows=Lt(!1),this.viewProps=e.viewProps,this.view=new u1(t,{shows:this.shows,viewProps:this.viewProps})}}const Sh=mt("txt");class h1{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Sh()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const i=t.createElement("input");i.classList.add(Sh("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class yr{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new h1(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const i=t.currentTarget.value,s=this.parser_(i);Rt(s)||(this.value.rawValue=s),this.view.refresh()}}function d1(n){return String(n)}function dm(n){return n==="false"?!1:!!n}function Ph(n){return d1(n)}function p1(n){return t=>n.reduce((e,i)=>e!==null?e:i(t),null)}const f1=Pe(0);function Ao(n){return f1(n)+"%"}function pm(n){return String(n)}function Sl(n){return n}function Ms({primary:n,secondary:t,forward:e,backward:i}){let s=!1;function r(o){s||(s=!0,o(),s=!1)}n.emitter.on("change",o=>{r(()=>{t.setRawValue(e(n.rawValue,t.rawValue),o.options)})}),t.emitter.on("change",o=>{r(()=>{n.setRawValue(i(n.rawValue,t.rawValue),o.options)}),r(()=>{t.setRawValue(e(n.rawValue,t.rawValue),o.options)})}),r(()=>{t.setRawValue(e(n.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function we(n,t){const e=n*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+e:t.downKey?-e:0}function xr(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function Nn(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function m1(n){return n==="ArrowUp"||n==="ArrowDown"}function fm(n){return m1(n)||n==="ArrowLeft"||n==="ArrowRight"}function ka(n,t){var e,i;const s=t.ownerDocument.defaultView,r=t.getBoundingClientRect();return{x:n.pageX-(((e=s&&s.scrollX)!==null&&e!==void 0?e:0)+r.left),y:n.pageY-(((i=s&&s.scrollY)!==null&&i!==void 0?i:0)+r.top)}}class $i{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new Yt,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),(e=t.currentTarget)===null||e===void 0||e.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(ka(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(ka(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(ka(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const i=(e=t.targetTouches.item(0))!==null&&e!==void 0?e:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(i?{x:i.clientX-s.left,y:i.clientY-s.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const Ve=mt("txt");class v1{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ve(),Ve(void 0,"num")),e.arrayPosition&&this.element.classList.add(Ve(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(Ve("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ve()),this.inputElement.classList.add(Ve("i"));const s=t.createElement("div");s.classList.add(Ve("k")),this.element.appendChild(s),this.knobElement=s;const r=t.createElementNS(mn,"svg");r.classList.add(Ve("g")),this.knobElement.appendChild(r);const o=t.createElementNS(mn,"path");o.classList.add(Ve("gb")),r.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(mn,"path");a.classList.add(Ve("gh")),r.appendChild(a),this.guideHeadElem_=a;const l=t.createElement("div");l.classList.add(mt("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(Ve(void 0,"drg"));return}this.element.classList.add(Ve(void 0,"drg"));const e=t.rawValue/this.props_.get("pointerScale"),i=e+(e>0?-1:e<0?1:0),s=Qt(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+s},0 L${i},4 L${i+s},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Or{constructor(t,e){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=e.parser,this.props=e.props,this.sliderProps_=(i=e.sliderProps)!==null&&i!==void 0?i:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=Lt(null),this.view=new v1(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new $i(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,i;const s=(e=this.sliderProps_)===null||e===void 0?void 0:e.get("min"),r=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=t;return s!==void 0&&(o=Math.max(o,s)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(t){const i=t.currentTarget.value,s=this.parser_(i);Rt(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(t){const e=we(this.props.get("keyScale"),xr(t));e!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){we(this.props.get("keyScale"),xr(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("pointerScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ia=mt("sld");class g1{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ia()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Ia("t")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const s=t.createElement("div");s.classList.add(Ia("k")),this.trackElement.appendChild(s),this.knobElement=s,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=Qt(Ct(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class _1{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new g1(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $i(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(Ct(Qt(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=we(this.props.get("keyScale"),Nn(t));e!==0&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){we(this.props.get("keyScale"),Nn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ba=mt("sldtxt");class b1{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ba());const i=t.createElement("div");i.classList.add(Ba("s")),this.sliderView_=e.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(Ba("t")),this.textView_=e.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class Ro{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new _1(t,{props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Or(t,{parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new b1(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return ze(t,null,e=>({max:e.required.number,min:e.required.number}),e=>{const i=this.sliderC_.props;return i.set("max",e.max),i.set("min",e.min),!0})}exportProps(){const t=this.sliderC_.props;return De(null,{max:t.get("max"),min:t.get("min")})}}function mm(n){return{sliderProps:new ut({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new ut({formatter:Lt(n.formatter),keyScale:n.keyScale,pointerScale:Lt(n.pointerScale)})}}const w1={containerUnitSize:"cnt-usz"};function vm(n){return`--${w1[n]}`}function Cr(n){return Qf(n)}function si(n){if(wl(n))return Ut(n,Cr)}function Ln(n,t){if(!n)return;const e=[],i=Yf(n,t);i&&e.push(i);const s=Xf(n);return s&&e.push(s),new kr(e)}function y1(n){return n?n.major===Ps.major:!1}function gm(n){if(n==="inline"||n==="popup")return n}function Lr(n,t){n.write(t)}const Wr=mt("ckb");class x1{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Wr()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("label");i.classList.add(Wr("l")),this.element.appendChild(i),this.labelElement=i;const s=t.createElement("input");s.classList.add(Wr("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,e.viewProps.bindDisabled(this.inputElement);const r=t.createElement("div");r.classList.add(Wr("w")),this.labelElement.appendChild(r);const o=Xo(t,"check");r.appendChild(o),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class C1{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new x1(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}function E1(n){const t=[],e=Pc(n.options);return e&&t.push(e),new kr(t)}const S1=ge({id:"input-bool",type:"input",accept:(n,t)=>{if(typeof n!="boolean")return null;const e=Ut(t,i=>({options:i.optional.custom(Br),readonly:i.optional.constant(!1)}));return e?{initialValue:n,params:e}:null},binding:{reader:n=>dm,constraint:n=>E1(n.params),writer:n=>Lr},controller:n=>{const t=n.document,e=n.value,i=n.constraint,s=i&&Mo(i,Ir);return s?new di(t,{props:new ut({options:s.values.value("options")}),value:e,viewProps:n.viewProps}):new C1(t,{value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof di?new Ec(n.controller):null}}),xi=mt("col");class P1{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(xi()),e.foldable.bindExpandedClass(this.element,xi(void 0,"expanded")),wn(e.foldable,"completed",Ss(this.element,xi(void 0,"cpl")));const i=t.createElement("div");i.classList.add(xi("h")),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(xi("s")),i.appendChild(s),this.swatchElement=s;const r=t.createElement("div");if(r.classList.add(xi("t")),i.appendChild(r),this.textElement=r,e.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(xi("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function T1(n,t,e){const i=Qt(n/255,0,1),s=Qt(t/255,0,1),r=Qt(e/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c=0,u=0;const h=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),i===o?c=(s-r)/l:s===o?c=2+(r-i)/l:c=4+(i-s)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function M1(n,t,e){const i=(n%360+360)%360,s=Qt(t/100,0,1),r=Qt(e/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o/2;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function A1(n,t,e){const i=Qt(n/255,0,1),s=Qt(t/255,0,1),r=Qt(e/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c;l===0?c=0:o===i?c=60*(((s-r)/l%6+6)%6):o===s?c=60*((r-i)/l+2):c=60*((i-s)/l+4);const u=o===0?0:l/o,h=o;return[c,u*100,h*100]}function _m(n,t,e){const i=Wf(n,360),s=Qt(t/100,0,1),r=Qt(e/100,0,1),o=r*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function R1(n,t,e){const i=e+t*(100-Math.abs(2*e-100))/200;return[n,i!==0?t*(100-Math.abs(2*e-100))/i:0,e+t*(100-Math.abs(2*e-100))/(2*100)]}function k1(n,t,e){const i=100-Math.abs(e*(200-t)/100-100);return[n,i!==0?t*e/i:0,e*(200-t)/(2*100)]}function yn(n){return[n[0],n[1],n[2]]}function Qo(n,t){return[n[0],n[1],n[2],t]}const I1={hsl:{hsl:(n,t,e)=>[n,t,e],hsv:R1,rgb:M1},hsv:{hsl:k1,hsv:(n,t,e)=>[n,t,e],rgb:_m},rgb:{hsl:T1,hsv:A1,rgb:(n,t,e)=>[n,t,e]}};function Cs(n,t){return[t==="float"?1:n==="rgb"?255:360,t==="float"?1:n==="rgb"?255:100,t==="float"?1:n==="rgb"?255:100]}function B1(n,t){return n===t?t:Wf(n,t)}function bm(n,t,e){var i;const s=Cs(t,e);return[t==="rgb"?Qt(n[0],0,s[0]):B1(n[0],s[0]),Qt(n[1],0,s[1]),Qt(n[2],0,s[2]),Qt((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function Th(n,t,e,i){const s=Cs(t,e),r=Cs(t,i);return n.map((o,a)=>o/s[a]*r[a])}function wm(n,t,e){const i=Th(n,t.mode,t.type,"int"),s=I1[t.mode][e.mode](...i);return Th(s,e.mode,"int",e.type)}class bt{static black(){return new bt([0,0,0],"rgb")}constructor(t,e){this.type="int",this.mode=e,this.comps_=bm(t,e,this.type)}getComponents(t){return Qo(wm(yn(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const $n=mt("colp");class O1{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add($n()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add($n("hsv"));const s=t.createElement("div");s.classList.add($n("sv")),this.svPaletteView_=e.svPaletteView,s.appendChild(this.svPaletteView_.element),i.appendChild(s);const r=t.createElement("div");r.classList.add($n("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const o=t.createElement("div");if(o.classList.add($n("rgb")),this.textsView_=e.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const a=t.createElement("div");a.classList.add($n("a"));const l=t.createElement("div");l.classList.add($n("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=t.createElement("div");c.classList.add($n("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(e=>e.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function L1(n){return n==="int"?"int":n==="float"?"float":void 0}function Tc(n){return Ut(n,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(L1)}),expanded:t.optional.boolean,picker:t.optional.custom(gm),readonly:t.optional.constant(!1)}))}function ji(n){return n?.1:1}function ym(n){var t;return(t=n.color)===null||t===void 0?void 0:t.type}class Mc{constructor(t,e){this.type="float",this.mode=e,this.comps_=bm(t,e,this.type)}getComponents(t){return Qo(wm(yn(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const z1={int:(n,t)=>new bt(n,t),float:(n,t)=>new Mc(n,t)};function Ac(n,t,e){return z1[e](n,t)}function D1(n){return n.type==="float"}function F1(n){return n.type==="int"}function V1(n){const t=n.getComponents(),e=Cs(n.mode,"int");return new bt([Math.round(Ct(t[0],0,1,0,e[0])),Math.round(Ct(t[1],0,1,0,e[1])),Math.round(Ct(t[2],0,1,0,e[2])),t[3]],n.mode)}function N1(n){const t=n.getComponents(),e=Cs(n.mode,"int");return new Mc([Ct(t[0],0,e[0],0,1),Ct(t[1],0,e[1],0,1),Ct(t[2],0,e[2],0,1),t[3]],n.mode)}function ve(n,t){if(n.type===t)return n;if(F1(n)&&t==="float")return N1(n);if(D1(n)&&t==="int")return V1(n);throw jt.shouldNeverHappen()}function U1(n,t){return n.alpha===t.alpha&&n.mode===t.mode&&n.notation===t.notation&&n.type===t.type}function He(n,t){const e=n.match(/^(.+)%$/);return Math.min(e?parseFloat(e[1])*.01*t:parseFloat(n),t)}const j1={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function xm(n){const t=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(n);const e=parseFloat(t[1]),i=t[2];return j1[i](e)}function Cm(n){const t=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[He(t[1],255),He(t[2],255),He(t[3],255)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function H1(n){const t=Cm(n);return t?new bt(t,"rgb"):null}function Em(n){const t=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[He(t[1],255),He(t[2],255),He(t[3],255),He(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function G1(n){const t=Em(n);return t?new bt(t,"rgb"):null}function Sm(n){const t=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[xm(t[1]),He(t[2],100),He(t[3],100)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function q1(n){const t=Sm(n);return t?new bt(t,"hsl"):null}function Pm(n){const t=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[xm(t[1]),He(t[2],100),He(t[3],100),He(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function W1(n){const t=Pm(n);return t?new bt(t,"hsl"):null}function Tm(n){const t=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const e=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}function $1(n){const t=Tm(n);return t?new bt(t,"rgb"):null}function Mm(n){const t=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),Ct(parseInt(t[4]+t[4],16),0,255,0,1)];const e=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),Ct(parseInt(e[4],16),0,255,0,1)]:null}function K1(n){const t=Mm(n);return t?new bt(t,"rgb"):null}function Am(n){const t=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const e=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function Y1(n){return t=>{const e=Am(t);return e?Ac(e,"rgb",n):null}}function Rm(n){const t=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const e=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function X1(n){return t=>{const e=Rm(t);return e?Ac(e,"rgb",n):null}}const Z1=[{parser:Tm,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Mm,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Cm,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Em,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Sm,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Pm,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Am,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Rm,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Q1(n){return Z1.reduce((t,{parser:e,result:i})=>t||(e(n)?i:null),null)}function J1(n,t="int"){const e=Q1(n);return e?e.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},e),{type:"int"}):e.notation==="func"?Object.assign(Object.assign({},e),{type:t}):null:null}function zr(n){const t=[$1,K1,H1,G1,q1,W1];t.push(Y1("int"),X1("int"));const e=p1(t);return i=>{const s=e(i);return s?ve(s,n):null}}function tC(n){const t=zr("int");if(typeof n!="string")return bt.black();const e=t(n);return e??bt.black()}function km(n){const t=Qt(Math.floor(n),0,255).toString(16);return t.length===1?`0${t}`:t}function Rc(n,t="#"){const e=yn(n.getComponents("rgb")).map(km).join("");return`${t}${e}`}function kc(n,t="#"){const e=n.getComponents("rgb"),i=[e[0],e[1],e[2],e[3]*255].map(km).join("");return`${t}${i}`}function Im(n){const t=Pe(0),e=ve(n,"int");return`rgb(${yn(e.getComponents("rgb")).map(s=>t(s)).join(", ")})`}function lo(n){const t=Pe(2),e=Pe(0);return`rgba(${ve(n,"int").getComponents("rgb").map((r,o)=>(o===3?t:e)(r)).join(", ")})`}function eC(n){const t=[Pe(0),Ao,Ao],e=ve(n,"int");return`hsl(${yn(e.getComponents("hsl")).map((s,r)=>t[r](s)).join(", ")})`}function nC(n){const t=[Pe(0),Ao,Ao,Pe(2)];return`hsla(${ve(n,"int").getComponents("hsl").map((s,r)=>t[r](s)).join(", ")})`}function Bm(n,t){const e=Pe(t==="float"?2:0),i=["r","g","b"],s=ve(n,t);return`{${yn(s.getComponents("rgb")).map((o,a)=>`${i[a]}: ${e(o)}`).join(", ")}}`}function iC(n){return t=>Bm(t,n)}function Om(n,t){const e=Pe(2),i=Pe(t==="float"?2:0),s=["r","g","b","a"];return`{${ve(n,t).getComponents("rgb").map((a,l)=>{const c=l===3?e:i;return`${s[l]}: ${c(a)}`}).join(", ")}}`}function sC(n){return t=>Om(t,n)}const rC=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Rc},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:kc},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Im},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:lo},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:eC},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:nC},...["int","float"].reduce((n,t)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:iC(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:sC(t)}],[])];function Lm(n){return rC.reduce((t,e)=>t||(U1(e.format,n)?e.stringifier:null),null)}const Fs=mt("apl");class oC{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Fs()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(Fs("b")),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(Fs("c")),i.appendChild(s),this.colorElem_=s;const r=t.createElement("div");r.classList.add(Fs("m")),this.element.appendChild(r),this.markerElem_=r;const o=t.createElement("div");o.classList.add(Fs("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),i=new bt([e[0],e[1],e[2],0],"rgb"),s=new bt([e[0],e[1],e[2],255],"rgb"),r=["to right",lo(i),lo(s)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=lo(t);const o=Ct(e[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class aC{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new oC(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $i(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=t.point.x/t.bounds.width,s=this.value.rawValue,[r,o,a]=s.getComponents("hsv");this.value.setRawValue(new bt([r,o,a,i],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=we(ji(!0),Nn(t));if(e===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new bt([s,r,o,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){we(ji(!0),Nn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Xi=mt("coltxt");function lC(n){const t=n.createElement("select"),e=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(e.reduce((i,s)=>{const r=n.createElement("option");return r.textContent=s.text,r.value=s.value,i.appendChild(r),i},n.createDocumentFragment())),t}class cC{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Xi()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Xi("m")),this.modeElem_=lC(t),this.modeElem_.classList.add(Xi("ms")),i.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const s=t.createElement("div");s.classList.add(Xi("mm")),s.appendChild(Xo(t,"dropdown")),i.appendChild(s),this.element.appendChild(i);const r=t.createElement("div");r.classList.add(Xi("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=e.inputViews,this.applyInputViews_(),zn(e.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){em(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(e=>{const i=t.createElement("div");i.classList.add(Xi("c")),i.appendChild(e.element),this.inputsElem_.appendChild(i)})}}function uC(n){return Pe(n==="float"?2:0)}function hC(n,t,e){const i=Cs(n,t)[e];return new Mr({min:0,max:i})}function dC(n,t,e){return new Or(n,{arrayPosition:e===0?"fst":e===2?"lst":"mid",parser:t.parser,props:ut.fromObject({formatter:uC(t.colorType),keyScale:ji(!1),pointerScale:t.colorType==="float"?.01:1}),value:Lt(0,{constraint:hC(t.colorMode,t.colorType,e)}),viewProps:t.viewProps})}function pC(n,t){const e={colorMode:t.colorMode,colorType:t.colorType,parser:Vn,viewProps:t.viewProps};return[0,1,2].map(i=>{const s=dC(n,e,i);return Ms({primary:t.value,secondary:s.value,forward(r){return ve(r,t.colorType).getComponents(t.colorMode)[i]},backward(r,o){const a=t.colorMode,c=ve(r,t.colorType).getComponents(a);c[i]=o;const u=Ac(Qo(yn(c),c[3]),a,t.colorType);return ve(u,"int")}}),s})}function fC(n,t){const e=new yr(n,{parser:zr("int"),props:ut.fromObject({formatter:Rc}),value:Lt(bt.black()),viewProps:t.viewProps});return Ms({primary:t.value,secondary:e.value,forward:i=>new bt(yn(i.getComponents()),i.mode),backward:(i,s)=>new bt(Qo(yn(s.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[e]}function mC(n){return n!=="hex"}class vC{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=Lt(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new cC(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e=this.colorMode.rawValue;return mC(e)?pC(t,{colorMode:e,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):fC(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const Oa=mt("hpl");class gC{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Oa()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(Oa("c")),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(Oa("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Im(new bt([e,100,100],"hsv"));const i=Ct(e,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class _C{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new gC(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $i(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=Ct(Qt(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),s=this.value.rawValue,[,r,o,a]=s.getComponents("hsv");this.value.setRawValue(new bt([i,r,o,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=we(ji(!1),Nn(t));if(e===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new bt([s+e,r,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){we(ji(!1),Nn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const La=mt("svp"),Mh=64;class bC{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(La()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("canvas");i.height=Mh,i.width=Mh,i.classList.add(La("c")),this.element.appendChild(i),this.canvasElement=i;const s=t.createElement("div");s.classList.add(La("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const t=_x(this.canvasElement);if(!t)return;const i=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,r=this.canvasElement.height,o=t.getImageData(0,0,s,r),a=o.data;for(let u=0;u<r;u++)for(let h=0;h<s;h++){const d=Ct(h,0,s,0,100),p=Ct(u,0,r,100,0),m=_m(i[0],d,p),f=(u*s+h)*4;a[f]=m[0],a[f+1]=m[1],a[f+2]=m[2],a[f+3]=255}t.putImageData(o,0,0);const l=Ct(i[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=Ct(i[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class wC{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new bC(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $i(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=Ct(t.point.x,0,t.bounds.width,0,100),s=Ct(t.point.y,0,t.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new bt([r,i,s,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){fm(t.key)&&t.preventDefault();const[e,i,s,r]=this.value.rawValue.getComponents("hsv"),o=ji(!1),a=we(o,Nn(t)),l=we(o,xr(t));a===0&&l===0||this.value.setRawValue(new bt([e,i+a,s+l,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=ji(!1),i=we(e,Nn(t)),s=we(e,xr(t));i===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class yC{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new _C(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new wC(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new aC(t,{value:this.value,viewProps:this.viewProps}),text:new Or(t,{parser:Vn,props:ut.fromObject({pointerScale:.01,keyScale:.1,formatter:Pe(2)}),value:Lt(0,{constraint:new Mr({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Ms({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,s)=>{const r=i.getComponents();return r[3]=s,new bt(r,i.mode)}}),this.textsC_=new vC(t,{colorType:e.colorType,value:this.value,viewProps:this.viewProps}),this.view=new O1(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const za=mt("colsw");class xC{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(za()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(za("sw")),this.element.appendChild(i),this.swatchElem_=i;const s=t.createElement("button");s.classList.add(za("b")),e.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=kc(t)}onValueChange_(){this.update_()}}class CC{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new xC(t,{value:this.value,viewProps:this.viewProps})}}class Ic{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Rr.create(e.expanded),this.swatchC_=new CC(t,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new yr(t,{parser:e.parser,props:ut.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new P1(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=e.pickerLayout==="popup"?new hm(t,{viewProps:this.viewProps}):null;const s=new yC(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),Ms({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Cc(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=t.relatedTarget;(!i||!e.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=nm(t);i&&e.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!gc(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function EC(n){return yn(n.getComponents("rgb")).reduce((t,e)=>t<<8|Math.floor(e)&255,0)}function SC(n){return n.getComponents("rgb").reduce((t,e,i)=>{const s=Math.floor(i===3?e*255:e)&255;return t<<8|s},0)>>>0}function PC(n){return new bt([n>>16&255,n>>8&255,n&255],"rgb")}function TC(n){return new bt([n>>24&255,n>>16&255,n>>8&255,Ct(n&255,0,255,0,1)],"rgb")}function MC(n){return typeof n!="number"?bt.black():PC(n)}function AC(n){return typeof n!="number"?bt.black():TC(n)}function co(n,t){return typeof n!="object"||Rt(n)?!1:t in n&&typeof n[t]=="number"}function zm(n){return co(n,"r")&&co(n,"g")&&co(n,"b")}function Dm(n){return zm(n)&&co(n,"a")}function Fm(n){return zm(n)}function Bc(n,t){if(n.mode!==t.mode||n.type!==t.type)return!1;const e=n.getComponents(),i=t.getComponents();for(let s=0;s<e.length;s++)if(e[s]!==i[s])return!1;return!0}function Ah(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function RC(n){const t=Lm(n);return t?(e,i)=>{Lr(e,t(i))}:null}function kC(n){const t=n?SC:EC;return(e,i)=>{Lr(e,t(i))}}function IC(n,t,e){const s=ve(t,e).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b),n.writeProperty("a",s.a)}function BC(n,t,e){const s=ve(t,e).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b)}function OC(n,t){return(e,i)=>{n?IC(e,i,t):BC(e,i,t)}}function LC(n){var t;return!!(!((t=n==null?void 0:n.color)===null||t===void 0)&&t.alpha)}function zC(n){return n?t=>kc(t,"0x"):t=>Rc(t,"0x")}function DC(n){return"color"in n||n.view==="color"}const FC=ge({id:"input-color-number",type:"input",accept:(n,t)=>{if(typeof n!="number"||!DC(t))return null;const e=Tc(t);return e?{initialValue:n,params:Object.assign(Object.assign({},e),{supportsAlpha:LC(t)})}:null},binding:{reader:n=>n.params.supportsAlpha?AC:MC,equals:Bc,writer:n=>kC(n.params.supportsAlpha)},controller:n=>{var t,e;return new Ic(n.document,{colorType:"int",expanded:(t=n.params.expanded)!==null&&t!==void 0?t:!1,formatter:zC(n.params.supportsAlpha),parser:zr("int"),pickerLayout:(e=n.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function VC(n,t){if(!Fm(n))return ve(bt.black(),t);if(t==="int"){const e=Ah(n);return new bt(e,"rgb")}if(t==="float"){const e=Ah(n);return new Mc(e,"rgb")}return ve(bt.black(),"int")}function NC(n){return Dm(n)}function UC(n){return t=>{const e=VC(t,n);return ve(e,"int")}}function jC(n,t){return e=>n?Om(e,t):Bm(e,t)}const HC=ge({id:"input-color-object",type:"input",accept:(n,t)=>{var e;if(!Fm(n))return null;const i=Tc(t);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(e=ym(t))!==null&&e!==void 0?e:"int"})}:null},binding:{reader:n=>UC(n.params.colorType),equals:Bc,writer:n=>OC(NC(n.initialValue),n.params.colorType)},controller:n=>{var t,e;const i=Dm(n.initialValue);return new Ic(n.document,{colorType:n.params.colorType,expanded:(t=n.params.expanded)!==null&&t!==void 0?t:!1,formatter:jC(i,n.params.colorType),parser:zr("int"),pickerLayout:(e=n.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}}),GC=ge({id:"input-color-string",type:"input",accept:(n,t)=>{if(typeof n!="string"||t.view==="text")return null;const e=J1(n,ym(t));if(!e)return null;const i=Lm(e);if(!i)return null;const s=Tc(t);return s?{initialValue:n,params:Object.assign(Object.assign({},s),{format:e,stringifier:i})}:null},binding:{reader:()=>tC,equals:Bc,writer:n=>{const t=RC(n.params.format);if(!t)throw jt.notBindable();return t}},controller:n=>{var t,e;return new Ic(n.document,{colorType:n.params.format.type,expanded:(t=n.params.expanded)!==null&&t!==void 0?t:!1,formatter:n.params.stringifier,parser:zr("int"),pickerLayout:(e=n.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class Oc{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((i,s)=>{var r,o;return(o=(r=this.components[s])===null||r===void 0?void 0:r.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(e)}}const Rh=mt("pndtxt");class qC{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Rh()),this.textViews.forEach(i=>{const s=t.createElement("div");s.classList.add(Rh("a")),s.appendChild(i.element),this.element.appendChild(s)})}}function WC(n,t,e){return new Or(n,{arrayPosition:e===0?"fst":e===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[e].textProps,value:Lt(0,{constraint:t.axes[e].constraint}),viewProps:t.viewProps})}class Lc{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((i,s)=>WC(t,e,s)),this.acs_.forEach((i,s)=>{Ms({primary:this.value,secondary:i.value,forward:r=>e.assembly.toComponents(r)[s],backward:(r,o)=>{const a=e.assembly.toComponents(r);return a[s]=o,e.assembly.fromComponents(a)}})}),this.view=new qC(t,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class $C extends wr{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}function KC(n,t){const e=[],i=Yf(n,t);i&&e.push(i);const s=Xf(n);s&&e.push(s);const r=Pc(n.options);return r&&e.push(r),new kr(e)}const YC=ge({id:"input-number",type:"input",accept:(n,t)=>{if(typeof n!="number")return null;const e=Ut(t,i=>Object.assign(Object.assign({},Qf(i)),{options:i.optional.custom(Br),readonly:i.optional.constant(!1)}));return e?{initialValue:n,params:e}:null},binding:{reader:n=>qf,constraint:n=>KC(n.params,n.initialValue),writer:n=>Lr},controller:n=>{const t=n.value,e=n.constraint,i=e&&Mo(e,Ir);if(i)return new di(n.document,{props:new ut({options:i.values.value("options")}),value:t,viewProps:n.viewProps});const s=Zf(n.params,t.rawValue),r=e&&Mo(e,Mr);return r?new Ro(n.document,Object.assign(Object.assign({},mm(Object.assign(Object.assign({},s),{keyScale:Lt(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:Vn,value:t,viewProps:n.viewProps})):new Or(n.document,{parser:Vn,props:ut.fromObject(s),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof Ro?new $C(n.controller):n.controller.valueController instanceof di?new Ec(n.controller):null}});class li{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(Rt(t))return!1;const e=t.x,i=t.y;return!(typeof e!="number"||typeof i!="number")}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Vm={toComponents:n=>n.getComponents(),fromComponents:n=>new li(...n)},Zi=mt("p2d");class XC{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Zi()),e.viewProps.bindClassModifiers(this.element),zn(e.expanded,Ss(this.element,Zi(void 0,"expanded")));const i=t.createElement("div");i.classList.add(Zi("h")),this.element.appendChild(i);const s=t.createElement("button");s.classList.add(Zi("b")),s.appendChild(Xo(t,"p2dpad")),e.viewProps.bindDisabled(s),i.appendChild(s),this.buttonElement=s;const r=t.createElement("div");if(r.classList.add(Zi("t")),i.appendChild(r),this.textElement=r,e.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(Zi("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const Kn=mt("p2dp");class ZC{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Kn()),e.layout==="popup"&&this.element.classList.add(Kn(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Kn("p")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const s=t.createElementNS(mn,"svg");s.classList.add(Kn("g")),this.padElement.appendChild(s),this.svgElem_=s;const r=t.createElementNS(mn,"line");r.classList.add(Kn("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=t.createElementNS(mn,"line");o.classList.add(Kn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=t.createElementNS(mn,"line");a.classList.add(Kn("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=t.createElement("div");l.classList.add(Kn("m")),this.padElement.appendChild(l),this.markerElem_=l,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),i=this.props_.get("max"),s=Ct(t,-i,+i,0,100),r=Ct(e,-i,+i,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function kh(n,t,e){return[we(t[0],Nn(n)),we(t[1],xr(n))*(e?1:-1)]}class QC{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ZC(t,{layout:e.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $i(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=this.props.get("max"),s=Ct(t.point.x,0,t.bounds.width,-i,+i),r=Ct(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-i,+i);this.value.setRawValue(new li(s,r),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){fm(t.key)&&t.preventDefault();const[e,i]=kh(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));e===0&&i===0||this.value.setRawValue(new li(this.value.rawValue.x+e,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,i]=kh(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));e===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class JC{constructor(t,e){var i,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Rr.create(e.expanded),this.popC_=e.pickerLayout==="popup"?new hm(t,{viewProps:this.viewProps}):null;const r=new QC(t,{layout:e.pickerLayout,props:new ut({invertsY:Lt(e.invertsY),max:Lt(e.max),xKeyScale:e.axes[0].textProps.value("keyScale"),yKeyScale:e.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new Lc(t,{assembly:Vm,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new XC(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Ms({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Cc(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=t.relatedTarget;(!i||!e.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=nm(t);i&&e.contains(i)||i&&i===this.view.buttonElement&&!gc(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function tE(n){return li.isObject(n)?new li(n.x,n.y):new li}function eE(n,t){n.writeProperty("x",t.x),n.writeProperty("y",t.y)}function nE(n,t){return new Oc({assembly:Vm,components:[Ln(Object.assign(Object.assign({},n),n.x),t.x),Ln(Object.assign(Object.assign({},n),n.y),t.y)]})}function Ih(n,t){var e,i;if(!Rt(n.min)||!Rt(n.max))return Math.max(Math.abs((e=n.min)!==null&&e!==void 0?e:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const s=$f(n);return Math.max(Math.abs(s)*10,Math.abs(t)*10)}function iE(n,t){var e,i;const s=Ih(Ni(n,(e=n.x)!==null&&e!==void 0?e:{}),t.x),r=Ih(Ni(n,(i=n.y)!==null&&i!==void 0?i:{}),t.y);return Math.max(s,r)}function sE(n){if(!("y"in n))return!1;const t=n.y;return t&&"inverted"in t?!!t.inverted:!1}const rE=ge({id:"input-point2d",type:"input",accept:(n,t)=>{if(!li.isObject(n))return null;const e=Ut(t,i=>Object.assign(Object.assign({},Cr(i)),{expanded:i.optional.boolean,picker:i.optional.custom(gm),readonly:i.optional.constant(!1),x:i.optional.custom(si),y:i.optional.object(Object.assign(Object.assign({},Cr(i)),{inverted:i.optional.boolean}))}));return e?{initialValue:n,params:e}:null},binding:{reader:()=>tE,constraint:n=>nE(n.params,n.initialValue),equals:li.equals,writer:()=>eE},controller:n=>{var t,e;const i=n.document,s=n.value,r=n.constraint,o=[n.params.x,n.params.y];return new JC(i,{axes:s.rawValue.getComponents().map((a,l)=>{var c;return vc({constraint:r.components[l],initialValue:a,params:Ni(n.params,(c=o[l])!==null&&c!==void 0?c:{})})}),expanded:(t=n.params.expanded)!==null&&t!==void 0?t:!1,invertsY:sE(n.params),max:iE(n.params,s.rawValue),parser:Vn,pickerLayout:(e=n.params.picker)!==null&&e!==void 0?e:"popup",value:s,viewProps:n.viewProps})}});class ps{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(Rt(t))return!1;const e=t.x,i=t.y,s=t.z;return!(typeof e!="number"||typeof i!="number"||typeof s!="number")}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Nm={toComponents:n=>n.getComponents(),fromComponents:n=>new ps(...n)};function oE(n){return ps.isObject(n)?new ps(n.x,n.y,n.z):new ps}function aE(n,t){n.writeProperty("x",t.x),n.writeProperty("y",t.y),n.writeProperty("z",t.z)}function lE(n,t){return new Oc({assembly:Nm,components:[Ln(Object.assign(Object.assign({},n),n.x),t.x),Ln(Object.assign(Object.assign({},n),n.y),t.y),Ln(Object.assign(Object.assign({},n),n.z),t.z)]})}const cE=ge({id:"input-point3d",type:"input",accept:(n,t)=>{if(!ps.isObject(n))return null;const e=Ut(t,i=>Object.assign(Object.assign({},Cr(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(si),y:i.optional.custom(si),z:i.optional.custom(si)}));return e?{initialValue:n,params:e}:null},binding:{reader:n=>oE,constraint:n=>lE(n.params,n.initialValue),equals:ps.equals,writer:n=>aE},controller:n=>{const t=n.value,e=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new Lc(n.document,{assembly:Nm,axes:t.rawValue.getComponents().map((s,r)=>{var o;return vc({constraint:e.components[r],initialValue:s,params:Ni(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Vn,value:t,viewProps:n.viewProps})}});class fs{constructor(t=0,e=0,i=0,s=0){this.x=t,this.y=e,this.z=i,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(Rt(t))return!1;const e=t.x,i=t.y,s=t.z,r=t.w;return!(typeof e!="number"||typeof i!="number"||typeof s!="number"||typeof r!="number")}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Um={toComponents:n=>n.getComponents(),fromComponents:n=>new fs(...n)};function uE(n){return fs.isObject(n)?new fs(n.x,n.y,n.z,n.w):new fs}function hE(n,t){n.writeProperty("x",t.x),n.writeProperty("y",t.y),n.writeProperty("z",t.z),n.writeProperty("w",t.w)}function dE(n,t){return new Oc({assembly:Um,components:[Ln(Object.assign(Object.assign({},n),n.x),t.x),Ln(Object.assign(Object.assign({},n),n.y),t.y),Ln(Object.assign(Object.assign({},n),n.z),t.z),Ln(Object.assign(Object.assign({},n),n.w),t.w)]})}const pE=ge({id:"input-point4d",type:"input",accept:(n,t)=>{if(!fs.isObject(n))return null;const e=Ut(t,i=>Object.assign(Object.assign({},Cr(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(si),x:i.optional.custom(si),y:i.optional.custom(si),z:i.optional.custom(si)}));return e?{initialValue:n,params:e}:null},binding:{reader:n=>uE,constraint:n=>dE(n.params,n.initialValue),equals:fs.equals,writer:n=>hE},controller:n=>{const t=n.value,e=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new Lc(n.document,{assembly:Um,axes:t.rawValue.getComponents().map((s,r)=>{var o;return vc({constraint:e.components[r],initialValue:s,params:Ni(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Vn,value:t,viewProps:n.viewProps})}});function fE(n){const t=[],e=Pc(n.options);return e&&t.push(e),new kr(t)}const mE=ge({id:"input-string",type:"input",accept:(n,t)=>{if(typeof n!="string")return null;const e=Ut(t,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(Br)}));return e?{initialValue:n,params:e}:null},binding:{reader:n=>pm,constraint:n=>fE(n.params),writer:n=>Lr},controller:n=>{const t=n.document,e=n.value,i=n.constraint,s=i&&Mo(i,Ir);return s?new di(t,{props:new ut({options:s.values.value("options")}),value:e,viewProps:n.viewProps}):new yr(t,{parser:r=>r,props:ut.fromObject({formatter:Sl}),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof di?new Ec(n.controller):null}}),Dr={monitor:{defaultInterval:200,defaultRows:3}},Bh=mt("mll");class vE{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Bh()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("textarea");i.classList.add(Bh("i")),i.style.height=`calc(var(${vm("containerUnitSize")}) * ${e.rows})`,i.readOnly=!0,e.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,i=[];this.value.rawValue.forEach(s=>{s!==void 0&&i.push(this.formatter_(s))}),t.textContent=i.join(`
`),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class zc{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new vE(t,{formatter:e.formatter,rows:e.rows,value:this.value,viewProps:this.viewProps})}}const Oh=mt("sgl");class gE{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Oh()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(Oh("i")),i.readOnly=!0,i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=e!==void 0?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Dc{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new gE(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const _E=ge({id:"monitor-bool",type:"monitor",accept:(n,t)=>{if(typeof n!="boolean")return null;const e=Ut(t,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return e?{initialValue:n,params:e}:null},binding:{reader:n=>dm},controller:n=>{var t;return n.value.rawValue.length===1?new Dc(n.document,{formatter:Ph,value:n.value,viewProps:n.viewProps}):new zc(n.document,{formatter:Ph,rows:(t=n.params.rows)!==null&&t!==void 0?t:Dr.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class bE extends wr{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const Yn=mt("grl");class wE{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Yn()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=t.createElementNS(mn,"svg");i.classList.add(Yn("g")),i.style.height=`calc(var(${vm("containerUnitSize")}) * ${e.rows})`,this.element.appendChild(i),this.svgElem_=i;const s=t.createElementNS(mn,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const r=t.createElement("div");r.classList.add(Yn("t"),mt("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:e}=this.element,i=this.value.rawValue.length-1,s=this.props_.get("min"),r=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,d)=>{if(h===void 0)return;const p=Ct(d,0,i,0,t),m=Ct(h,s,r,e,0);o.push([p,m].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(Yn("t","a"));return}const c=Ct(this.cursor_.rawValue,0,i,0,t),u=Ct(l,s,r,e,0);a.style.left=`${c}px`,a.style.top=`${u}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(Yn("t","a"))||(a.classList.add(Yn("t","a"),Yn("t","in")),To(a),a.classList.remove(Yn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class jm{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=Lt(-1),this.view=new wE(t,{cursor:this.cursor_,formatter:e.formatter,rows:e.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!gc(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new $i(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return ze(t,null,e=>({max:e.required.number,min:e.required.number}),e=>(this.props.set("max",e.max),this.props.set("min",e.min),!0))}exportProps(){return De(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:e}=this.view.element;this.cursor_.rawValue=Math.floor(Ct(t.offsetX,0,e,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ct(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Pl(n){return Rt(n.format)?Pe(2):n.format}function yE(n){var t;return n.value.rawValue.length===1?new Dc(n.document,{formatter:Pl(n.params),value:n.value,viewProps:n.viewProps}):new zc(n.document,{formatter:Pl(n.params),rows:(t=n.params.rows)!==null&&t!==void 0?t:Dr.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function xE(n){var t,e,i;return new jm(n.document,{formatter:Pl(n.params),rows:(t=n.params.rows)!==null&&t!==void 0?t:Dr.monitor.defaultRows,props:ut.fromObject({max:(e=n.params.max)!==null&&e!==void 0?e:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function Lh(n){return n.view==="graph"}const CE=ge({id:"monitor-number",type:"monitor",accept:(n,t)=>{if(typeof n!="number")return null;const e=Ut(t,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return e?{initialValue:n,params:e}:null},binding:{defaultBufferSize:n=>Lh(n)?64:1,reader:n=>qf},controller:n=>Lh(n.params)?xE(n):yE(n),api:n=>n.controller.valueController instanceof jm?new bE(n.controller):null}),EE=ge({id:"monitor-string",type:"monitor",accept:(n,t)=>{if(typeof n!="string")return null;const e=Ut(t,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return e?{initialValue:n,params:e}:null},binding:{reader:n=>pm},controller:n=>{var t;const e=n.value;return e.rawValue.length>1||n.params.multiline?new zc(n.document,{formatter:Sl,rows:(t=n.params.rows)!==null&&t!==void 0?t:Dr.monitor.defaultRows,value:e,viewProps:n.viewProps}):new Dc(n.document,{formatter:Sl,value:e,viewProps:n.viewProps})}});class SE{constructor(){this.map_=new Map}get(t){var e;return(e=this.map_.get(t))!==null&&e!==void 0?e:null}has(t){return this.map_.has(t)}add(t,e){return this.map_.set(t,e),t.viewProps.handleDispose(()=>{this.map_.delete(t)}),e}}class PE{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}function TE(n,t){var e;const i=n.accept(t.target.read(),t.params);if(Rt(i))return null;const s={target:t.target,initialValue:i.initialValue,params:i.params},r=Ut(t.params,h=>({disabled:h.optional.boolean,hidden:h.optional.boolean,label:h.optional.string,tag:h.optional.string})),o=n.binding.reader(s),a=n.binding.constraint?n.binding.constraint(s):void 0,l=new PE({reader:o,target:t.target,writer:n.binding.writer(s)}),c=new ux(Lt(o(i.initialValue),{constraint:a,equals:n.binding.equals}),l),u=n.controller({constraint:a,document:t.document,initialValue:i.initialValue,params:i.params,value:c,viewProps:jn.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})});return new Sx(t.document,{blade:Ts(),props:ut.fromObject({label:"label"in t.params?(e=r==null?void 0:r.label)!==null&&e!==void 0?e:null:t.target.key}),tag:r==null?void 0:r.tag,value:c,valueController:u})}class ME{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}function AE(n,t){return t===0?new a1:new l1(n,t??Dr.monitor.defaultInterval)}function RE(n,t){var e,i,s;const r=n.accept(t.target.read(),t.params);if(Rt(r))return null;const o={target:t.target,initialValue:r.initialValue,params:r.params},a=Ut(t.params,d=>({bufferSize:d.optional.number,disabled:d.optional.boolean,hidden:d.optional.boolean,interval:d.optional.number,label:d.optional.string})),l=n.binding.reader(o),c=(i=(e=a==null?void 0:a.bufferSize)!==null&&e!==void 0?e:n.binding.defaultBufferSize&&n.binding.defaultBufferSize(r.params))!==null&&i!==void 0?i:1,u=new Rx({binding:new ME({reader:l,target:t.target}),bufferSize:c,ticker:AE(t.document,a==null?void 0:a.interval)}),h=n.controller({document:t.document,params:r.params,value:u,viewProps:jn.create({disabled:a==null?void 0:a.disabled,hidden:a==null?void 0:a.hidden})});return h.viewProps.bindDisabled(u.ticker),h.viewProps.handleDispose(()=>{u.ticker.dispose()}),new Ix(t.document,{blade:Ts(),props:ut.fromObject({label:"label"in t.params?(s=a==null?void 0:a.label)!==null&&s!==void 0?s:null:t.target.key}),value:u,valueController:h})}class kE{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,e){if(!y1(e.core))throw jt.notCompatible(t,e.id);e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)}createInput_(t,e,i){return this.pluginsMap_.inputs.reduce((s,r)=>s??TE(r,{document:t,target:e,params:i}),null)}createMonitor_(t,e,i){return this.pluginsMap_.monitors.reduce((s,r)=>s??RE(r,{document:t,params:i,target:e}),null)}createBinding(t,e,i){const s=e.read();if(Rt(s))throw new jt({context:{key:e.key},type:"nomatchingcontroller"});const r=this.createInput_(t,e,i);if(r)return r;const o=this.createMonitor_(t,e,i);if(o)return o;throw new jt({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const i=this.pluginsMap_.blades.reduce((s,r)=>s??o1(r,{document:t,params:e}),null);if(!i)throw new jt({type:"nomatchingview",context:{params:e}});return i}createInputBindingApi_(t){const e=this.pluginsMap_.inputs.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,e??new wr(t))}createMonitorBindingApi_(t){const e=this.pluginsMap_.monitors.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,e??new wr(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(Px(t))return this.createInputBindingApi_(t);if(Bx(t))return this.createMonitorBindingApi_(t);throw jt.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(Ex(t))return this.createBindingApi(t);const e=this.pluginsMap_.blades.reduce((i,s)=>i??s.api({controller:t,pool:this}),null);if(!e)throw jt.shouldNeverHappen();return this.apiCache_.add(t,e)}}const IE=new SE;function BE(){const n=new kE(IE);return[rE,cE,pE,mE,YC,GC,HC,FC,S1,_E,EE,CE,Fx,Zx,um].forEach(t=>{n.register("core",t)}),n}class OE extends Wi{constructor(t){super(t),this.emitter_=new Yt,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Ar(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,s=>{i(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class LE extends Wi{}class zE extends Wi{constructor(t){super(t),this.emitter_=new Yt,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Ar(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,s=>{i(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class DE extends Wi{constructor(t){super(t),this.emitter_=new Yt,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Ar(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,s=>{i(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const FE=function(){return{id:"list",type:"blade",core:Ps,accept(n){const t=Ut(n,e=>({options:e.required.custom(Br),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string}));return t?{params:t}:null},controller(n){const t=new Ir(Sc(n.params.options)),e=Lt(n.params.value,{constraint:t}),i=new di(n.document,{props:new ut({options:t.values.value("options")}),value:e,viewProps:n.viewProps});return new Ui(n.document,{blade:n.blade,props:ut.fromObject({label:n.params.label}),value:e,valueController:i})},api(n){return!(n.controller instanceof Ui)||!(n.controller.valueController instanceof di)?null:new OE(n.controller)}}}();class VE extends lm{constructor(t,e){super(t,e)}get element(){return this.controller.view.element}}class NE extends Cl{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const zh=mt("spr");class UE{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(zh()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("hr");i.classList.add(zh("r")),this.element.appendChild(i)}}class Dh extends Zo{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new UE(t,{viewProps:e.viewProps})}))}}const jE={id:"separator",type:"blade",core:Ps,accept(n){const t=Ut(n,e=>({view:e.required.constant("separator")}));return t?{params:t}:null},controller(n){return new Dh(n.document,{blade:n.blade,viewProps:n.viewProps})},api(n){return n.controller instanceof Dh?new LE(n.controller):null}},HE={id:"slider",type:"blade",core:Ps,accept(n){const t=Ut(n,e=>({max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number}));return t?{params:t}:null},controller(n){var t,e;const i=(t=n.params.value)!==null&&t!==void 0?t:0,s=new Mr({max:n.params.max,min:n.params.min}),r=Lt(i,{constraint:s}),o=new Ro(n.document,Object.assign(Object.assign({},mm({formatter:(e=n.params.format)!==null&&e!==void 0?e:rx,keyScale:Lt(1),max:s.values.value("max"),min:s.values.value("min"),pointerScale:Kf(n.params,i)})),{parser:Vn,value:r,viewProps:n.viewProps}));return new Ui(n.document,{blade:n.blade,props:ut.fromObject({label:n.params.label}),value:r,valueController:o})},api(n){return!(n.controller instanceof Ui)||!(n.controller.valueController instanceof Ro)?null:new zE(n.controller)}},GE=function(){return{id:"text",type:"blade",core:Ps,accept(n){const t=Ut(n,e=>({parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string}));return t?{params:t}:null},controller(n){var t;const e=Lt(n.params.value),i=new yr(n.document,{parser:n.params.parse,props:ut.fromObject({formatter:(t=n.params.format)!==null&&t!==void 0?t:s=>String(s)}),value:e,viewProps:n.viewProps});return new Ui(n.document,{blade:n.blade,props:ut.fromObject({label:n.params.label}),value:e,valueController:i})},api(n){return!(n.controller instanceof Ui)||!(n.controller.valueController instanceof yr)?null:new DE(n.controller)}}}();function qE(n){const t=n.createElement("div");return t.classList.add(mt("dfw")()),n.body&&n.body.appendChild(t),t}function WE(n,t,e){if(n.querySelector(`style[data-tp-style=${t}]`))return;const i=n.createElement("style");i.dataset.tpStyle=t,i.textContent=e,n.head.appendChild(i)}class vT extends VE{constructor(t){var e,i;const s=t??{},r=(e=s.document)!==null&&e!==void 0?e:gx(),o=BE(),a=new NE(r,{expanded:s.expanded,blade:Ts(),props:ut.fromObject({title:s.title}),viewProps:jn.create()});super(a,o),this.pool_=o,this.containerElem_=(i=s.container)!==null&&i!==void 0?i:qE(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!s.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw jt.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw jt.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&WE(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(i=>{this.pool_.register(t.id,i)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[FE,jE,HE,um,GE]})}}new am("4.0.5");class Qe{constructor(t){t===void 0&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z}getTrace(t){t===void 0&&(t=new x);const e=this.elements;return t.x=e[0],t.y=e[4],t.z=e[8],t}vmult(t,e){e===void 0&&(e=new x);const i=this.elements,s=t.x,r=t.y,o=t.z;return e.x=i[0]*s+i[1]*r+i[2]*o,e.y=i[3]*s+i[4]*r+i[5]*o,e.z=i[6]*s+i[7]*r+i[8]*o,e}smult(t){for(let e=0;e<this.elements.length;e++)this.elements[e]*=t}mmult(t,e){e===void 0&&(e=new Qe);const i=this.elements,s=t.elements,r=e.elements,o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],d=i[6],p=i[7],m=i[8],f=s[0],v=s[1],C=s[2],g=s[3],E=s[4],T=s[5],k=s[6],P=s[7],R=s[8];return r[0]=o*f+a*g+l*k,r[1]=o*v+a*E+l*P,r[2]=o*C+a*T+l*R,r[3]=c*f+u*g+h*k,r[4]=c*v+u*E+h*P,r[5]=c*C+u*T+h*R,r[6]=d*f+p*g+m*k,r[7]=d*v+p*E+m*P,r[8]=d*C+p*T+m*R,e}scale(t,e){e===void 0&&(e=new Qe);const i=this.elements,s=e.elements;for(let r=0;r!==3;r++)s[3*r+0]=t.x*i[3*r+0],s[3*r+1]=t.y*i[3*r+1],s[3*r+2]=t.z*i[3*r+2];return e}solve(t,e){e===void 0&&(e=new x);const i=3,s=4,r=[];let o,a;for(o=0;o<i*s;o++)r.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)r[o+s*a]=this.elements[o+3*a];r[3+4*0]=t.x,r[3+4*1]=t.y,r[3+4*2]=t.z;let l=3;const c=l;let u;const h=4;let d;do{if(o=c-l,r[o+s*o]===0){for(a=o+1;a<c;a++)if(r[o+s*a]!==0){u=h;do d=h-u,r[d+s*o]+=r[d+s*a];while(--u);break}}if(r[o+s*o]!==0)for(a=o+1;a<c;a++){const p=r[o+s*a]/r[o+s*o];u=h;do d=h-u,r[d+s*a]=d<=o?0:r[d+s*a]-r[d+s*o]*p;while(--u)}}while(--l);if(e.z=r[2*s+3]/r[2*s+2],e.y=(r[1*s+3]-r[1*s+2]*e.z)/r[1*s+1],e.x=(r[0*s+3]-r[0*s+2]*e.z-r[0*s+1]*e.y)/r[0*s+0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw`Could not solve equation! Got x=[${e.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return e}e(t,e,i){if(i===void 0)return this.elements[e+3*t];this.elements[e+3*t]=i}copy(t){for(let e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this}toString(){let t="";const e=",";for(let i=0;i<9;i++)t+=this.elements[i]+e;return t}reverse(t){t===void 0&&(t=new Qe);const e=3,i=6,s=$E;let r,o;for(r=0;r<3;r++)for(o=0;o<3;o++)s[r+i*o]=this.elements[r+3*o];s[3+6*0]=1,s[3+6*1]=0,s[3+6*2]=0,s[4+6*0]=0,s[4+6*1]=1,s[4+6*2]=0,s[5+6*0]=0,s[5+6*1]=0,s[5+6*2]=1;let a=3;const l=a;let c;const u=i;let h;do{if(r=l-a,s[r+i*r]===0){for(o=r+1;o<l;o++)if(s[r+i*o]!==0){c=u;do h=u-c,s[h+i*r]+=s[h+i*o];while(--c);break}}if(s[r+i*r]!==0)for(o=r+1;o<l;o++){const d=s[r+i*o]/s[r+i*r];c=u;do h=u-c,s[h+i*o]=h<=r?0:s[h+i*o]-s[h+i*r]*d;while(--c)}}while(--a);r=2;do{o=r-1;do{const d=s[r+i*o]/s[r+i*r];c=i;do h=i-c,s[h+i*o]=s[h+i*o]-s[h+i*r]*d;while(--c)}while(o--)}while(--r);r=2;do{const d=1/s[r+i*r];c=i;do h=i-c,s[h+i*r]=s[h+i*r]*d;while(--c)}while(r--);r=2;do{o=2;do{if(h=s[e+o+i*r],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(r,o,h)}while(o--)}while(r--);return t}setRotationFromQuaternion(t){const e=t.x,i=t.y,s=t.z,r=t.w,o=e+e,a=i+i,l=s+s,c=e*o,u=e*a,h=e*l,d=i*a,p=i*l,m=s*l,f=r*o,v=r*a,C=r*l,g=this.elements;return g[3*0+0]=1-(d+m),g[3*0+1]=u-C,g[3*0+2]=h+v,g[3*1+0]=u+C,g[3*1+1]=1-(c+m),g[3*1+2]=p-f,g[3*2+0]=h-v,g[3*2+1]=p+f,g[3*2+2]=1-(c+d),this}transpose(t){t===void 0&&(t=new Qe);const e=this.elements,i=t.elements;let s;return i[0]=e[0],i[4]=e[4],i[8]=e[8],s=e[1],i[1]=e[3],i[3]=s,s=e[2],i[2]=e[6],i[6]=s,s=e[5],i[5]=e[7],i[7]=s,t}}const $E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class x{constructor(t,e,i){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=t,this.y=e,this.z=i}cross(t,e){e===void 0&&(e=new x);const i=t.x,s=t.y,r=t.z,o=this.x,a=this.y,l=this.z;return e.x=a*r-l*s,e.y=l*i-o*r,e.z=o*s-a*i,e}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(t,e){if(e)e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z;else return new x(this.x+t.x,this.y+t.y,this.z+t.z)}vsub(t,e){if(e)e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z;else return new x(this.x-t.x,this.y-t.y,this.z-t.z)}crossmat(){return new Qe([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,e=this.y,i=this.z,s=Math.sqrt(t*t+e*e+i*i);if(s>0){const r=1/s;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return s}unit(t){t===void 0&&(t=new x);const e=this.x,i=this.y,s=this.z;let r=Math.sqrt(e*e+i*i+s*s);return r>0?(r=1/r,t.x=e*r,t.y=i*r,t.z=s*r):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)}lengthSquared(){return this.dot(this)}distanceTo(t){const e=this.x,i=this.y,s=this.z,r=t.x,o=t.y,a=t.z;return Math.sqrt((r-e)*(r-e)+(o-i)*(o-i)+(a-s)*(a-s))}distanceSquared(t){const e=this.x,i=this.y,s=this.z,r=t.x,o=t.y,a=t.z;return(r-e)*(r-e)+(o-i)*(o-i)+(a-s)*(a-s)}scale(t,e){e===void 0&&(e=new x);const i=this.x,s=this.y,r=this.z;return e.x=t*i,e.y=t*s,e.z=t*r,e}vmul(t,e){return e===void 0&&(e=new x),e.x=t.x*this.x,e.y=t.y*this.y,e.z=t.z*this.z,e}addScaledVector(t,e,i){return i===void 0&&(i=new x),i.x=this.x+t*e.x,i.y=this.y+t*e.y,i.z=this.z+t*e.z,i}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(t){return t===void 0&&(t=new x),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,e){const i=this.length();if(i>0){const s=KE,r=1/i;s.set(this.x*r,this.y*r,this.z*r);const o=YE;Math.abs(s.x)<.9?(o.set(1,0,0),s.cross(o,t)):(o.set(0,1,0),s.cross(o,t)),s.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,e,i){const s=this.x,r=this.y,o=this.z;i.x=s+(t.x-s)*e,i.y=r+(t.y-r)*e,i.z=o+(t.z-o)*e}almostEquals(t,e){return e===void 0&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)}almostZero(t){return t===void 0&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,e){return this.negate(Fh),Fh.almostEquals(t,e)}clone(){return new x(this.x,this.y,this.z)}}x.ZERO=new x(0,0,0);x.UNIT_X=new x(1,0,0);x.UNIT_Y=new x(0,1,0);x.UNIT_Z=new x(0,0,1);const KE=new x,YE=new x,Fh=new x;class Fe{constructor(t){t===void 0&&(t={}),this.lowerBound=new x,this.upperBound=new x,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,e,i,s){const r=this.lowerBound,o=this.upperBound,a=i;r.copy(t[0]),a&&a.vmult(r,r),o.copy(r);for(let l=1;l<t.length;l++){let c=t[l];a&&(a.vmult(c,Vh),c=Vh),c.x>o.x&&(o.x=c.x),c.x<r.x&&(r.x=c.x),c.y>o.y&&(o.y=c.y),c.y<r.y&&(r.y=c.y),c.z>o.z&&(o.z=c.z),c.z<r.z&&(r.z=c.z)}return e&&(e.vadd(r,r),e.vadd(o,o)),s&&(r.x-=s,r.y-=s,r.z-=s,o.x+=s,o.y+=s,o.z+=s),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return new Fe().copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const e=this.lowerBound,i=this.upperBound,s=t.lowerBound,r=t.upperBound,o=s.x<=i.x&&i.x<=r.x||e.x<=r.x&&r.x<=i.x,a=s.y<=i.y&&i.y<=r.y||e.y<=r.y&&r.y<=i.y,l=s.z<=i.z&&i.z<=r.z||e.z<=r.z&&r.z<=i.z;return o&&a&&l}volume(){const t=this.lowerBound,e=this.upperBound;return(e.x-t.x)*(e.y-t.y)*(e.z-t.z)}contains(t){const e=this.lowerBound,i=this.upperBound,s=t.lowerBound,r=t.upperBound;return e.x<=s.x&&i.x>=r.x&&e.y<=s.y&&i.y>=r.y&&e.z<=s.z&&i.z>=r.z}getCorners(t,e,i,s,r,o,a,l){const c=this.lowerBound,u=this.upperBound;t.copy(c),e.set(u.x,c.y,c.z),i.set(u.x,u.y,c.z),s.set(c.x,u.y,u.z),r.set(u.x,c.y,u.z),o.set(c.x,u.y,c.z),a.set(c.x,c.y,u.z),l.copy(u)}toLocalFrame(t,e){const i=Nh,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(s,r,o,a,l,c,u,h);for(let d=0;d!==8;d++){const p=i[d];t.pointToLocal(p,p)}return e.setFromPoints(i)}toWorldFrame(t,e){const i=Nh,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(s,r,o,a,l,c,u,h);for(let d=0;d!==8;d++){const p=i[d];t.pointToWorld(p,p)}return e.setFromPoints(i)}overlapsRay(t){const{direction:e,from:i}=t,s=1/e.x,r=1/e.y,o=1/e.z,a=(this.lowerBound.x-i.x)*s,l=(this.upperBound.x-i.x)*s,c=(this.lowerBound.y-i.y)*r,u=(this.upperBound.y-i.y)*r,h=(this.lowerBound.z-i.z)*o,d=(this.upperBound.z-i.z)*o,p=Math.max(Math.max(Math.min(a,l),Math.min(c,u)),Math.min(h,d)),m=Math.min(Math.min(Math.max(a,l),Math.max(c,u)),Math.max(h,d));return!(m<0||p>m)}}const Vh=new x,Nh=[new x,new x,new x,new x,new x,new x,new x,new x];class Uh{constructor(){this.matrix=[]}get(t,e){let{index:i}=t,{index:s}=e;if(s>i){const r=s;s=i,i=r}return this.matrix[(i*(i+1)>>1)+s-1]}set(t,e,i){let{index:s}=t,{index:r}=e;if(r>s){const o=r;r=s,s=o}this.matrix[(s*(s+1)>>1)+r-1]=i?1:0}reset(){for(let t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}class Hm{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;return i[t]===void 0&&(i[t]=[]),i[t].includes(e)||i[t].push(e),this}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return!!(i[t]!==void 0&&i[t].includes(e))}hasAnyEventListener(t){return this._listeners===void 0?!1:this._listeners[t]!==void 0}removeEventListener(t,e){if(this._listeners===void 0)return this;const i=this._listeners;if(i[t]===void 0)return this;const s=i[t].indexOf(e);return s!==-1&&i[t].splice(s,1),this}dispatchEvent(t){if(this._listeners===void 0)return this;const i=this._listeners[t.type];if(i!==void 0){t.target=this;for(let s=0,r=i.length;s<r;s++)i[s].call(this,t)}return this}}class Vt{constructor(t,e,i,s){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),s===void 0&&(s=1),this.x=t,this.y=e,this.z=i,this.w=s}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,e){const i=Math.sin(e*.5);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(e*.5),this}toAxisAngle(t){t===void 0&&(t=new x),this.normalize();const e=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/i,t.y=this.y/i,t.z=this.z/i),[t,e]}setFromVectors(t,e){if(t.isAntiparallelTo(e)){const i=XE,s=ZE;t.tangents(i,s),this.setFromAxisAngle(i,Math.PI)}else{const i=t.cross(e);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(t.length()**2*e.length()**2)+t.dot(e),this.normalize()}return this}mult(t,e){e===void 0&&(e=new Vt);const i=this.x,s=this.y,r=this.z,o=this.w,a=t.x,l=t.y,c=t.z,u=t.w;return e.x=i*u+o*a+s*c-r*l,e.y=s*u+o*l+r*a-i*c,e.z=r*u+o*c+i*l-s*a,e.w=o*u-i*a-s*l-r*c,e}inverse(t){t===void 0&&(t=new Vt);const e=this.x,i=this.y,s=this.z,r=this.w;this.conjugate(t);const o=1/(e*e+i*i+s*s+r*r);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}conjugate(t){return t===void 0&&(t=new Vt),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,e){e===void 0&&(e=new x);const i=t.x,s=t.y,r=t.z,o=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*r-l*s,h=c*s+l*i-o*r,d=c*r+o*s-a*i,p=-o*i-a*s-l*r;return e.x=u*c+p*-o+h*-l-d*-a,e.y=h*c+p*-a+d*-o-u*-l,e.z=d*c+p*-l+u*-a-h*-o,e}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,e){e===void 0&&(e="YZX");let i,s,r;const o=this.x,a=this.y,l=this.z,c=this.w;switch(e){case"YZX":const u=o*a+l*c;if(u>.499&&(i=2*Math.atan2(o,c),s=Math.PI/2,r=0),u<-.499&&(i=-2*Math.atan2(o,c),s=-Math.PI/2,r=0),i===void 0){const h=o*o,d=a*a,p=l*l;i=Math.atan2(2*a*c-2*o*l,1-2*d-2*p),s=Math.asin(2*u),r=Math.atan2(2*o*c-2*a*l,1-2*h-2*p)}break;default:throw new Error(`Euler order ${e} not supported yet.`)}t.y=i,t.z=s,t.x=r}setFromEuler(t,e,i,s){s===void 0&&(s="XYZ");const r=Math.cos(t/2),o=Math.cos(e/2),a=Math.cos(i/2),l=Math.sin(t/2),c=Math.sin(e/2),u=Math.sin(i/2);return s==="XYZ"?(this.x=l*o*a+r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a-l*c*u):s==="YXZ"?(this.x=l*o*a+r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a+l*c*u):s==="ZXY"?(this.x=l*o*a-r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a-l*c*u):s==="ZYX"?(this.x=l*o*a-r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a+l*c*u):s==="YZX"?(this.x=l*o*a+r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a-l*c*u):s==="XZY"&&(this.x=l*o*a-r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a+l*c*u),this}clone(){return new Vt(this.x,this.y,this.z,this.w)}slerp(t,e,i){i===void 0&&(i=new Vt);const s=this.x,r=this.y,o=this.z,a=this.w;let l=t.x,c=t.y,u=t.z,h=t.w,d,p,m,f,v;return p=s*l+r*c+o*u+a*h,p<0&&(p=-p,l=-l,c=-c,u=-u,h=-h),1-p>1e-6?(d=Math.acos(p),m=Math.sin(d),f=Math.sin((1-e)*d)/m,v=Math.sin(e*d)/m):(f=1-e,v=e),i.x=f*s+v*l,i.y=f*r+v*c,i.z=f*o+v*u,i.w=f*a+v*h,i}integrate(t,e,i,s){s===void 0&&(s=new Vt);const r=t.x*i.x,o=t.y*i.y,a=t.z*i.z,l=this.x,c=this.y,u=this.z,h=this.w,d=e*.5;return s.x+=d*(r*h+o*u-a*c),s.y+=d*(o*h+a*l-r*u),s.z+=d*(a*h+r*c-o*l),s.w+=d*(-r*l-o*c-a*u),s}}const XE=new x,ZE=new x,QE={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class et{constructor(t){t===void 0&&(t={}),this.id=et.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=t.collisionResponse?t.collisionResponse:!0,this.collisionFilterGroup=t.collisionFilterGroup!==void 0?t.collisionFilterGroup:1,this.collisionFilterMask=t.collisionFilterMask!==void 0?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,e){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,e,i,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}et.idCounter=0;et.types=QE;class gt{constructor(t){t===void 0&&(t={}),this.position=new x,this.quaternion=new Vt,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,e){return gt.pointToLocalFrame(this.position,this.quaternion,t,e)}pointToWorld(t,e){return gt.pointToWorldFrame(this.position,this.quaternion,t,e)}vectorToWorldFrame(t,e){return e===void 0&&(e=new x),this.quaternion.vmult(t,e),e}static pointToLocalFrame(t,e,i,s){return s===void 0&&(s=new x),i.vsub(t,s),e.conjugate(jh),jh.vmult(s,s),s}static pointToWorldFrame(t,e,i,s){return s===void 0&&(s=new x),e.vmult(i,s),s.vadd(t,s),s}static vectorToWorldFrame(t,e,i){return i===void 0&&(i=new x),t.vmult(e,i),i}static vectorToLocalFrame(t,e,i,s){return s===void 0&&(s=new x),e.w*=-1,e.vmult(i,s),e.w*=-1,s}}const jh=new Vt;class ci extends et{constructor(t){t===void 0&&(t={});const{vertices:e=[],faces:i=[],normals:s=[],axes:r,boundingSphereRadius:o}=t;super({type:et.types.CONVEXPOLYHEDRON}),this.vertices=e,this.faces=i,this.faceNormals=s,this.faceNormals.length===0&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=r?r.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,e=this.vertices,i=this.uniqueEdges;i.length=0;const s=new x;for(let r=0;r!==t.length;r++){const o=t[r],a=o.length;for(let l=0;l!==a;l++){const c=(l+1)%a;e[o[l]].vsub(e[o[c]],s),s.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(s)||i[h].almostEquals(s)){u=!0;break}u||i.push(s.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let s=0;s<this.faces[t].length;s++)if(!this.vertices[this.faces[t][s]])throw new Error(`Vertex ${this.faces[t][s]} not found!`);const e=this.faceNormals[t]||new x;this.getFaceNormal(t,e),e.negate(e),this.faceNormals[t]=e;const i=this.vertices[this.faces[t][0]];if(e.dot(i)<0){console.error(`.faceNormals[${t}] = Vec3(${e.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let s=0;s<this.faces[t].length;s++)console.warn(`.vertices[${this.faces[t][s]}] = Vec3(${this.vertices[this.faces[t][s]].toString()})`)}}}getFaceNormal(t,e){const i=this.faces[t],s=this.vertices[i[0]],r=this.vertices[i[1]],o=this.vertices[i[2]];ci.computeNormal(s,r,o,e)}static computeNormal(t,e,i,s){const r=new x,o=new x;e.vsub(t,o),i.vsub(e,r),r.cross(o,s),s.isZero()||s.normalize()}clipAgainstHull(t,e,i,s,r,o,a,l,c){const u=new x;let h=-1,d=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),r.vmult(u,u);const f=u.dot(o);f>d&&(d=f,h=m)}const p=[];for(let m=0;m<i.faces[h].length;m++){const f=i.vertices[i.faces[h][m]],v=new x;v.copy(f),r.vmult(v,v),s.vadd(v,v),p.push(v)}h>=0&&this.clipFaceAgainstHull(o,t,e,p,a,l,c)}findSeparatingAxis(t,e,i,s,r,o,a,l){const c=new x,u=new x,h=new x,d=new x,p=new x,m=new x;let f=Number.MAX_VALUE;const v=this;if(v.uniqueAxes)for(let C=0;C!==v.uniqueAxes.length;C++){i.vmult(v.uniqueAxes[C],c);const g=v.testSepAxis(c,t,e,i,s,r);if(g===!1)return!1;g<f&&(f=g,o.copy(c))}else{const C=a?a.length:v.faces.length;for(let g=0;g<C;g++){const E=a?a[g]:g;c.copy(v.faceNormals[E]),i.vmult(c,c);const T=v.testSepAxis(c,t,e,i,s,r);if(T===!1)return!1;T<f&&(f=T,o.copy(c))}}if(t.uniqueAxes)for(let C=0;C!==t.uniqueAxes.length;C++){r.vmult(t.uniqueAxes[C],u);const g=v.testSepAxis(u,t,e,i,s,r);if(g===!1)return!1;g<f&&(f=g,o.copy(u))}else{const C=l?l.length:t.faces.length;for(let g=0;g<C;g++){const E=l?l[g]:g;u.copy(t.faceNormals[E]),r.vmult(u,u);const T=v.testSepAxis(u,t,e,i,s,r);if(T===!1)return!1;T<f&&(f=T,o.copy(u))}}for(let C=0;C!==v.uniqueEdges.length;C++){i.vmult(v.uniqueEdges[C],d);for(let g=0;g!==t.uniqueEdges.length;g++)if(r.vmult(t.uniqueEdges[g],p),d.cross(p,m),!m.almostZero()){m.normalize();const E=v.testSepAxis(m,t,e,i,s,r);if(E===!1)return!1;E<f&&(f=E,o.copy(m))}}return s.vsub(e,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(t,e,i,s,r,o){const a=this;ci.project(a,t,i,s,Da),ci.project(e,t,r,o,Fa);const l=Da[0],c=Da[1],u=Fa[0],h=Fa[1];if(l<h||u<c)return!1;const d=l-h,p=u-c;return d<p?d:p}calculateLocalInertia(t,e){const i=new x,s=new x;this.computeLocalAABB(s,i);const r=i.x-s.x,o=i.y-s.y,a=i.z-s.z;e.x=1/12*t*(2*o*2*o+2*a*2*a),e.y=1/12*t*(2*r*2*r+2*a*2*a),e.z=1/12*t*(2*o*2*o+2*r*2*r)}getPlaneConstantOfFace(t){const e=this.faces[t],i=this.faceNormals[t],s=this.vertices[e[0]];return-i.dot(s)}clipFaceAgainstHull(t,e,i,s,r,o,a){const l=new x,c=new x,u=new x,h=new x,d=new x,p=new x,m=new x,f=new x,v=this,C=[],g=s,E=C;let T=-1,k=Number.MAX_VALUE;for(let b=0;b<v.faces.length;b++){l.copy(v.faceNormals[b]),i.vmult(l,l);const I=l.dot(t);I<k&&(k=I,T=b)}if(T<0)return;const P=v.faces[T];P.connectedFaces=[];for(let b=0;b<v.faces.length;b++)for(let I=0;I<v.faces[b].length;I++)P.indexOf(v.faces[b][I])!==-1&&b!==T&&P.connectedFaces.indexOf(b)===-1&&P.connectedFaces.push(b);const R=P.length;for(let b=0;b<R;b++){const I=v.vertices[P[b]],B=v.vertices[P[(b+1)%R]];I.vsub(B,c),u.copy(c),i.vmult(u,u),e.vadd(u,u),h.copy(this.faceNormals[T]),i.vmult(h,h),e.vadd(h,h),u.cross(h,d),d.negate(d),p.copy(I),i.vmult(p,p),e.vadd(p,p);const z=P.connectedFaces[b];m.copy(this.faceNormals[z]);const F=this.getPlaneConstantOfFace(z);f.copy(m),i.vmult(f,f);const V=F-f.dot(e);for(this.clipFaceAgainstPlane(g,E,f,V);g.length;)g.shift();for(;E.length;)g.push(E.shift())}m.copy(this.faceNormals[T]);const _=this.getPlaneConstantOfFace(T);f.copy(m),i.vmult(f,f);const w=_-f.dot(e);for(let b=0;b<g.length;b++){let I=f.dot(g[b])+w;if(I<=r&&(console.log(`clamped: depth=${I} to minDist=${r}`),I=r),I<=o){const B=g[b];if(I<=1e-6){const z={point:B,normal:f,depth:I};a.push(z)}}}}clipFaceAgainstPlane(t,e,i,s){let r,o;const a=t.length;if(a<2)return e;let l=t[t.length-1],c=t[0];r=i.dot(l)+s;for(let u=0;u<a;u++){if(c=t[u],o=i.dot(c)+s,r<0)if(o<0){const h=new x;h.copy(c),e.push(h)}else{const h=new x;l.lerp(c,r/(r-o),h),e.push(h)}else if(o<0){const h=new x;l.lerp(c,r/(r-o),h),e.push(h),e.push(c)}l=c,r=o}return e}computeWorldVertices(t,e){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new x);const i=this.vertices,s=this.worldVertices;for(let r=0;r!==this.vertices.length;r++)e.vmult(i[r],s[r]),t.vadd(s[r],s[r]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,e){const i=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let s=0;s<this.vertices.length;s++){const r=i[s];r.x<t.x?t.x=r.x:r.x>e.x&&(e.x=r.x),r.y<t.y?t.y=r.y:r.y>e.y&&(e.y=r.y),r.z<t.z?t.z=r.z:r.z>e.z&&(e.z=r.z)}}computeWorldFaceNormals(t){const e=this.faceNormals.length;for(;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new x);const i=this.faceNormals,s=this.worldFaceNormals;for(let r=0;r!==e;r++)t.vmult(i[r],s[r]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const e=this.vertices;for(let i=0;i!==e.length;i++){const s=e[i].lengthSquared();s>t&&(t=s)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,e,i,s){const r=this.vertices;let o,a,l,c,u,h,d=new x;for(let p=0;p<r.length;p++){d.copy(r[p]),e.vmult(d,d),t.vadd(d,d);const m=d;(o===void 0||m.x<o)&&(o=m.x),(c===void 0||m.x>c)&&(c=m.x),(a===void 0||m.y<a)&&(a=m.y),(u===void 0||m.y>u)&&(u=m.y),(l===void 0||m.z<l)&&(l=m.z),(h===void 0||m.z>h)&&(h=m.z)}i.set(o,a,l),s.set(c,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){t===void 0&&(t=new x);const e=this.vertices;for(let i=0;i<e.length;i++)t.vadd(e[i],t);return t.scale(1/e.length,t),t}transformAllPoints(t,e){const i=this.vertices.length,s=this.vertices;if(e){for(let r=0;r<i;r++){const o=s[r];e.vmult(o,o)}for(let r=0;r<this.faceNormals.length;r++){const o=this.faceNormals[r];e.vmult(o,o)}}if(t)for(let r=0;r<i;r++){const o=s[r];o.vadd(t,o)}}pointIsInside(t){const e=this.vertices,i=this.faces,s=this.faceNormals,r=null,o=new x;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let l=s[a];const c=e[i[a][0]],u=new x;t.vsub(c,u);const h=l.dot(u),d=new x;o.vsub(c,d);const p=l.dot(d);if(h<0&&p>0||h>0&&p<0)return!1}return r?1:-1}static project(t,e,i,s,r){const o=t.vertices.length,a=JE;let l=0,c=0;const u=tS,h=t.vertices;u.setZero(),gt.vectorToLocalFrame(i,s,e,a),gt.pointToLocalFrame(i,s,u,u);const d=u.dot(a);c=l=h[0].dot(a);for(let p=1;p<o;p++){const m=h[p].dot(a);m>l&&(l=m),m<c&&(c=m)}if(c-=d,l-=d,c>l){const p=c;c=l,l=p}r[0]=l,r[1]=c}}const Da=[],Fa=[];new x;const JE=new x,tS=new x;class Fc extends et{constructor(t){super({type:et.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,e=this.halfExtents.y,i=this.halfExtents.z,s=x,r=[new s(-t,-e,-i),new s(t,-e,-i),new s(t,e,-i),new s(-t,e,-i),new s(-t,-e,i),new s(t,-e,i),new s(t,e,i),new s(-t,e,i)],o=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],a=[new s(0,0,1),new s(0,1,0),new s(1,0,0)],l=new ci({vertices:r,faces:o,axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(t,e){return e===void 0&&(e=new x),Fc.calculateInertia(this.halfExtents,t,e),e}static calculateInertia(t,e,i){const s=t;i.x=1/12*e*(2*s.y*2*s.y+2*s.z*2*s.z),i.y=1/12*e*(2*s.x*2*s.x+2*s.z*2*s.z),i.z=1/12*e*(2*s.y*2*s.y+2*s.x*2*s.x)}getSideNormals(t,e){const i=t,s=this.halfExtents;if(i[0].set(s.x,0,0),i[1].set(0,s.y,0),i[2].set(0,0,s.z),i[3].set(-s.x,0,0),i[4].set(0,-s.y,0),i[5].set(0,0,-s.z),e!==void 0)for(let r=0;r!==i.length;r++)e.vmult(i[r],i[r]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,e,i){const s=this.halfExtents,r=[[s.x,s.y,s.z],[-s.x,s.y,s.z],[-s.x,-s.y,s.z],[-s.x,-s.y,-s.z],[s.x,-s.y,-s.z],[s.x,s.y,-s.z],[-s.x,s.y,-s.z],[s.x,-s.y,s.z]];for(let o=0;o<r.length;o++)Xn.set(r[o][0],r[o][1],r[o][2]),e.vmult(Xn,Xn),t.vadd(Xn,Xn),i(Xn.x,Xn.y,Xn.z)}calculateWorldAABB(t,e,i,s){const r=this.halfExtents;on[0].set(r.x,r.y,r.z),on[1].set(-r.x,r.y,r.z),on[2].set(-r.x,-r.y,r.z),on[3].set(-r.x,-r.y,-r.z),on[4].set(r.x,-r.y,-r.z),on[5].set(r.x,r.y,-r.z),on[6].set(-r.x,r.y,-r.z),on[7].set(r.x,-r.y,r.z);const o=on[0];e.vmult(o,o),t.vadd(o,o),s.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=on[a];e.vmult(l,l),t.vadd(l,l);const c=l.x,u=l.y,h=l.z;c>s.x&&(s.x=c),u>s.y&&(s.y=u),h>s.z&&(s.z=h),c<i.x&&(i.x=c),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const Xn=new x,on=[new x,new x,new x,new x,new x,new x,new x,new x],Vc={DYNAMIC:1,STATIC:2,KINEMATIC:4},Nc={AWAKE:0,SLEEPY:1,SLEEPING:2};class it extends Hm{constructor(t){t===void 0&&(t={}),super(),this.id=it.idCounter++,this.index=-1,this.world=null,this.vlambda=new x,this.collisionFilterGroup=typeof t.collisionFilterGroup=="number"?t.collisionFilterGroup:1,this.collisionFilterMask=typeof t.collisionFilterMask=="number"?t.collisionFilterMask:-1,this.collisionResponse=typeof t.collisionResponse=="boolean"?t.collisionResponse:!0,this.position=new x,this.previousPosition=new x,this.interpolatedPosition=new x,this.initPosition=new x,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new x,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new x,this.force=new x;const e=typeof t.mass=="number"?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping=typeof t.linearDamping=="number"?t.linearDamping:.01,this.type=e<=0?it.STATIC:it.DYNAMIC,typeof t.type==typeof it.STATIC&&(this.type=t.type),this.allowSleep=typeof t.allowSleep<"u"?t.allowSleep:!0,this.sleepState=it.AWAKE,this.sleepSpeedLimit=typeof t.sleepSpeedLimit<"u"?t.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof t.sleepTimeLimit<"u"?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new x,this.quaternion=new Vt,this.initQuaternion=new Vt,this.previousQuaternion=new Vt,this.interpolatedQuaternion=new Vt,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new x,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new x,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new x,this.invInertia=new x,this.invInertiaWorld=new Qe,this.invMassSolve=0,this.invInertiaSolve=new x,this.invInertiaWorldSolve=new Qe,this.fixedRotation=typeof t.fixedRotation<"u"?t.fixedRotation:!1,this.angularDamping=typeof t.angularDamping<"u"?t.angularDamping:.01,this.linearFactor=new x(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new x(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new Fe,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new x,this.isTrigger=!!t.isTrigger,t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=it.AWAKE,this.wakeUpAfterNarrowphase=!1,t===it.SLEEPING&&this.dispatchEvent(it.wakeupEvent)}sleep(){this.sleepState=it.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const e=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),s=this.sleepSpeedLimit**2;e===it.AWAKE&&i<s?(this.sleepState=it.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(it.sleepyEvent)):e===it.SLEEPY&&i>s?this.wakeUp():e===it.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(it.sleepEvent))}}updateSolveMassProperties(){this.sleepState===it.SLEEPING||this.type===it.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,e){return e===void 0&&(e=new x),t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e}vectorToLocalFrame(t,e){return e===void 0&&(e=new x),this.quaternion.conjugate().vmult(t,e),e}pointToWorldFrame(t,e){return e===void 0&&(e=new x),this.quaternion.vmult(t,e),e.vadd(this.position,e),e}vectorToWorldFrame(t,e){return e===void 0&&(e=new x),this.quaternion.vmult(t,e),e}addShape(t,e,i){const s=new x,r=new Vt;return e&&s.copy(e),i&&r.copy(i),this.shapes.push(t),this.shapeOffsets.push(s),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const e=this.shapes.indexOf(t);return e===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(e,1),this.shapeOffsets.splice(e,1),this.shapeOrientations.splice(e,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,e=this.shapeOffsets,i=t.length;let s=0;for(let r=0;r!==i;r++){const o=t[r];o.updateBoundingSphereRadius();const a=e[r].length(),l=o.boundingSphereRadius;a+l>s&&(s=a+l)}this.boundingRadius=s}updateAABB(){const t=this.shapes,e=this.shapeOffsets,i=this.shapeOrientations,s=t.length,r=eS,o=nS,a=this.quaternion,l=this.aabb,c=iS;for(let u=0;u!==s;u++){const h=t[u];a.vmult(e[u],r),r.vadd(this.position,r),a.mult(i[u],o),h.calculateWorldAABB(r,o,c.lowerBound,c.upperBound),u===0?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const e=this.invInertia;if(!(e.x===e.y&&e.y===e.z&&!t)){const i=sS,s=rS;i.setRotationFromQuaternion(this.quaternion),i.transpose(s),i.scale(e,i),i.mmult(s,this.invInertiaWorld)}}applyForce(t,e){if(e===void 0&&(e=new x),this.type!==it.DYNAMIC)return;this.sleepState===it.SLEEPING&&this.wakeUp();const i=aS;e.cross(t,i),this.force.vadd(t,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(t,e){if(e===void 0&&(e=new x),this.type!==it.DYNAMIC)return;const i=lS,s=cS;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,s),this.applyForce(i,s)}applyTorque(t){this.type===it.DYNAMIC&&(this.sleepState===it.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,e){if(e===void 0&&(e=new x),this.type!==it.DYNAMIC)return;this.sleepState===it.SLEEPING&&this.wakeUp();const i=e,s=uS;s.copy(t),s.scale(this.invMass,s),this.velocity.vadd(s,this.velocity);const r=hS;i.cross(t,r),this.invInertiaWorld.vmult(r,r),this.angularVelocity.vadd(r,this.angularVelocity)}applyLocalImpulse(t,e){if(e===void 0&&(e=new x),this.type!==it.DYNAMIC)return;const i=dS,s=pS;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,s),this.applyImpulse(i,s)}updateMassProperties(){const t=fS;this.invMass=this.mass>0?1/this.mass:0;const e=this.inertia,i=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Fc.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!i?1/e.x:0,e.y>0&&!i?1/e.y:0,e.z>0&&!i?1/e.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,e){const i=new x;return t.vsub(this.position,i),this.angularVelocity.cross(i,e),this.velocity.vadd(e,e),e}integrate(t,e,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===it.DYNAMIC||this.type===it.KINEMATIC)||this.sleepState===it.SLEEPING)return;const s=this.velocity,r=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,u=this.invMass,h=this.invInertiaWorld,d=this.linearFactor,p=u*t;s.x+=a.x*p*d.x,s.y+=a.y*p*d.y,s.z+=a.z*p*d.z;const m=h.elements,f=this.angularFactor,v=l.x*f.x,C=l.y*f.y,g=l.z*f.z;r.x+=t*(m[0]*v+m[1]*C+m[2]*g),r.y+=t*(m[3]*v+m[4]*C+m[5]*g),r.z+=t*(m[6]*v+m[7]*C+m[8]*g),o.x+=s.x*t,o.y+=s.y*t,o.z+=s.z*t,c.integrate(this.angularVelocity,t,this.angularFactor,c),e&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}it.idCounter=0;it.COLLIDE_EVENT_NAME="collide";it.DYNAMIC=Vc.DYNAMIC;it.STATIC=Vc.STATIC;it.KINEMATIC=Vc.KINEMATIC;it.AWAKE=Nc.AWAKE;it.SLEEPY=Nc.SLEEPY;it.SLEEPING=Nc.SLEEPING;it.wakeupEvent={type:"wakeup"};it.sleepyEvent={type:"sleepy"};it.sleepEvent={type:"sleep"};const eS=new x,nS=new Vt,iS=new Fe,sS=new Qe,rS=new Qe,oS=new Qe,aS=new x,lS=new x,cS=new x,uS=new x,hS=new x,dS=new x,pS=new x,fS=new x;class Gm{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,e,i){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,e){return!(!(t.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&t.collisionFilterMask)||(t.type&it.STATIC||t.sleepState===it.SLEEPING)&&(e.type&it.STATIC||e.sleepState===it.SLEEPING))}intersectionTest(t,e,i,s){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,i,s):this.doBoundingSphereBroadphase(t,e,i,s)}doBoundingSphereBroadphase(t,e,i,s){const r=mS;e.position.vsub(t.position,r);const o=(t.boundingRadius+e.boundingRadius)**2;r.lengthSquared()<o&&(i.push(t),s.push(e))}doBoundingBoxBroadphase(t,e,i,s){t.aabbNeedsUpdate&&t.updateAABB(),e.aabbNeedsUpdate&&e.updateAABB(),t.aabb.overlaps(e.aabb)&&(i.push(t),s.push(e))}makePairsUnique(t,e){const i=vS,s=gS,r=_S,o=t.length;for(let a=0;a!==o;a++)s[a]=t[a],r[a]=e[a];t.length=0,e.length=0;for(let a=0;a!==o;a++){const l=s[a].id,c=r[a].id,u=l<c?`${l},${c}`:`${c},${l}`;i[u]=a,i.keys.push(u)}for(let a=0;a!==i.keys.length;a++){const l=i.keys.pop(),c=i[l];t.push(s[c]),e.push(r[c]),delete i[l]}}setWorld(t){}static boundingSphereCheck(t,e){const i=new x;t.position.vsub(e.position,i);const s=t.shapes[0],r=e.shapes[0];return Math.pow(s.boundingSphereRadius+r.boundingSphereRadius,2)>i.lengthSquared()}aabbQuery(t,e,i){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const mS=new x;new x;new Vt;new x;const vS={keys:[]},gS=[],_S=[];new x;new x;new x;class bS extends Gm{constructor(){super()}collisionPairs(t,e,i){const s=t.bodies,r=s.length;let o,a;for(let l=0;l!==r;l++)for(let c=0;c!==l;c++)o=s[l],a=s[c],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,e,i)}aabbQuery(t,e,i){i===void 0&&(i=[]);for(let s=0;s<t.bodies.length;s++){const r=t.bodies[s];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&i.push(r)}return i}}class Er{constructor(){this.rayFromWorld=new x,this.rayToWorld=new x,this.hitNormalWorld=new x,this.hitPointWorld=new x,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,e,i,s,r,o,a){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(s),this.shape=r,this.body=o,this.distance=a}}let qm,Wm,$m,Km,Ym,Xm,Zm;const Uc={CLOSEST:1,ANY:2,ALL:4};qm=et.types.SPHERE;Wm=et.types.PLANE;$m=et.types.BOX;Km=et.types.CYLINDER;Ym=et.types.CONVEXPOLYHEDRON;Xm=et.types.HEIGHTFIELD;Zm=et.types.TRIMESH;class $t{get[qm](){return this._intersectSphere}get[Wm](){return this._intersectPlane}get[$m](){return this._intersectBox}get[Km](){return this._intersectConvex}get[Ym](){return this._intersectConvex}get[Xm](){return this._intersectHeightfield}get[Zm](){return this._intersectTrimesh}constructor(t,e){t===void 0&&(t=new x),e===void 0&&(e=new x),this.from=t.clone(),this.to=e.clone(),this.direction=new x,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=$t.ANY,this.result=new Er,this.hasHit=!1,this.callback=i=>{}}intersectWorld(t,e){return this.mode=e.mode||$t.ANY,this.result=e.result||new Er,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask=typeof e.collisionFilterMask<"u"?e.collisionFilterMask:-1,this.collisionFilterGroup=typeof e.collisionFilterGroup<"u"?e.collisionFilterGroup:-1,this.checkCollisionResponse=typeof e.checkCollisionResponse<"u"?e.checkCollisionResponse:!0,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Hh),Va.length=0,t.broadphase.aabbQuery(t,Hh,Va),this.intersectBodies(Va),this.hasHit}intersectBody(t,e){e&&(this.result=e,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!t.collisionResponse||!(this.collisionFilterGroup&t.collisionFilterMask)||!(t.collisionFilterGroup&this.collisionFilterMask))return;const s=wS,r=yS;for(let o=0,a=t.shapes.length;o<a;o++){const l=t.shapes[o];if(!(i&&!l.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[o],r),t.quaternion.vmult(t.shapeOffsets[o],s),s.vadd(t.position,s),this.intersectShape(l,r,s,t),this.result.shouldStop))break}}intersectBodies(t,e){e&&(this.result=e,this.updateDirection());for(let i=0,s=t.length;!this.result.shouldStop&&i<s;i++)this.intersectBody(t[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,e,i,s){const r=this.from;if(LS(r,this.direction,i)>t.boundingSphereRadius)return;const a=this[t.type];a&&a.call(this,t,e,i,s,t)}_intersectBox(t,e,i,s,r){return this._intersectConvex(t.convexPolyhedronRepresentation,e,i,s,r)}_intersectPlane(t,e,i,s,r){const o=this.from,a=this.to,l=this.direction,c=new x(0,0,1);e.vmult(c,c);const u=new x;o.vsub(i,u);const h=u.dot(c);a.vsub(i,u);const d=u.dot(c);if(h*d>0||o.distanceTo(a)<h)return;const p=c.dot(l);if(Math.abs(p)<this.precision)return;const m=new x,f=new x,v=new x;o.vsub(i,m);const C=-c.dot(m)/p;l.scale(C,f),o.vadd(f,v),this.reportIntersection(c,v,r,s,-1)}getAABB(t){const{lowerBound:e,upperBound:i}=t,s=this.to,r=this.from;e.x=Math.min(s.x,r.x),e.y=Math.min(s.y,r.y),e.z=Math.min(s.z,r.z),i.x=Math.max(s.x,r.x),i.y=Math.max(s.y,r.y),i.z=Math.max(s.z,r.z)}_intersectHeightfield(t,e,i,s,r){t.data,t.elementSize;const o=xS;o.from.copy(this.from),o.to.copy(this.to),gt.pointToLocalFrame(i,e,o.from,o.from),gt.pointToLocalFrame(i,e,o.to,o.to),o.updateDirection();const a=CS;let l,c,u,h;l=c=0,u=h=t.data.length-1;const d=new Fe;o.getAABB(d),t.getIndexOfPosition(d.lowerBound.x,d.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),t.getIndexOfPosition(d.upperBound.x,d.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let p=l;p<u;p++)for(let m=c;m<h;m++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(p,m,d),!!d.overlapsRay(o)){if(t.getConvexTrianglePillar(p,m,!1),gt.pointToWorldFrame(i,e,t.pillarOffset,$r),this._intersectConvex(t.pillarConvex,e,$r,s,r,Gh),this.result.shouldStop)return;t.getConvexTrianglePillar(p,m,!0),gt.pointToWorldFrame(i,e,t.pillarOffset,$r),this._intersectConvex(t.pillarConvex,e,$r,s,r,Gh)}}}_intersectSphere(t,e,i,s,r){const o=this.from,a=this.to,l=t.radius,c=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),h=(o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-l**2,d=u**2-4*c*h,p=ES,m=SS;if(!(d<0))if(d===0)o.lerp(a,d,p),p.vsub(i,m),m.normalize(),this.reportIntersection(m,p,r,s,-1);else{const f=(-u-Math.sqrt(d))/(2*c),v=(-u+Math.sqrt(d))/(2*c);if(f>=0&&f<=1&&(o.lerp(a,f,p),p.vsub(i,m),m.normalize(),this.reportIntersection(m,p,r,s,-1)),this.result.shouldStop)return;v>=0&&v<=1&&(o.lerp(a,v,p),p.vsub(i,m),m.normalize(),this.reportIntersection(m,p,r,s,-1))}}_intersectConvex(t,e,i,s,r,o){const a=PS,l=qh,c=o&&o.faceList||null,u=t.faces,h=t.vertices,d=t.faceNormals,p=this.direction,m=this.from,f=this.to,v=m.distanceTo(f),C=c?c.length:u.length,g=this.result;for(let E=0;!g.shouldStop&&E<C;E++){const T=c?c[E]:E,k=u[T],P=d[T],R=e,_=i;l.copy(h[k[0]]),R.vmult(l,l),l.vadd(_,l),l.vsub(m,l),R.vmult(P,a);const w=p.dot(a);if(Math.abs(w)<this.precision)continue;const b=a.dot(l)/w;if(!(b<0)){p.scale(b,_e),_e.vadd(m,_e),Ye.copy(h[k[0]]),R.vmult(Ye,Ye),_.vadd(Ye,Ye);for(let I=1;!g.shouldStop&&I<k.length-1;I++){an.copy(h[k[I]]),ln.copy(h[k[I+1]]),R.vmult(an,an),R.vmult(ln,ln),_.vadd(an,an),_.vadd(ln,ln);const B=_e.distanceTo(m);!($t.pointInTriangle(_e,Ye,an,ln)||$t.pointInTriangle(_e,an,Ye,ln))||B>v||this.reportIntersection(a,_e,r,s,T)}}}}_intersectTrimesh(t,e,i,s,r,o){const a=TS,l=BS,c=OS,u=qh,h=MS,d=AS,p=RS,m=IS,f=kS,v=t.indices;t.vertices;const C=this.from,g=this.to,E=this.direction;c.position.copy(i),c.quaternion.copy(e),gt.vectorToLocalFrame(i,e,E,h),gt.pointToLocalFrame(i,e,C,d),gt.pointToLocalFrame(i,e,g,p),p.x*=t.scale.x,p.y*=t.scale.y,p.z*=t.scale.z,d.x*=t.scale.x,d.y*=t.scale.y,d.z*=t.scale.z,p.vsub(d,h),h.normalize();const T=d.distanceSquared(p);t.tree.rayQuery(this,c,l);for(let k=0,P=l.length;!this.result.shouldStop&&k!==P;k++){const R=l[k];t.getNormal(R,a),t.getVertex(v[R*3],Ye),Ye.vsub(d,u);const _=h.dot(a),w=a.dot(u)/_;if(w<0)continue;h.scale(w,_e),_e.vadd(d,_e),t.getVertex(v[R*3+1],an),t.getVertex(v[R*3+2],ln);const b=_e.distanceSquared(d);!($t.pointInTriangle(_e,an,Ye,ln)||$t.pointInTriangle(_e,Ye,an,ln))||b>T||(gt.vectorToWorldFrame(e,a,f),gt.pointToWorldFrame(i,e,_e,m),this.reportIntersection(f,m,r,s,R))}l.length=0}reportIntersection(t,e,i,s,r){const o=this.from,a=this.to,l=o.distanceTo(e),c=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(c.hitFaceIndex=typeof r<"u"?r:-1,this.mode){case $t.ALL:this.hasHit=!0,c.set(o,a,t,e,i,s,l),c.hasHit=!0,this.callback(c);break;case $t.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,t,e,i,s,l));break;case $t.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,t,e,i,s,l),c.shouldStop=!0;break}}static pointInTriangle(t,e,i,s){s.vsub(e,Pi),i.vsub(e,Vs),t.vsub(e,Na);const r=Pi.dot(Pi),o=Pi.dot(Vs),a=Pi.dot(Na),l=Vs.dot(Vs),c=Vs.dot(Na);let u,h;return(u=l*a-o*c)>=0&&(h=r*c-o*a)>=0&&u+h<r*l-o*o}}$t.CLOSEST=Uc.CLOSEST;$t.ANY=Uc.ANY;$t.ALL=Uc.ALL;const Hh=new Fe,Va=[],Vs=new x,Na=new x,wS=new x,yS=new Vt,_e=new x,Ye=new x,an=new x,ln=new x;new x;new Er;const Gh={faceList:[0]},$r=new x,xS=new $t,CS=[],ES=new x,SS=new x,PS=new x;new x;new x;const qh=new x,TS=new x,MS=new x,AS=new x,RS=new x,kS=new x,IS=new x;new Fe;const BS=[],OS=new gt,Pi=new x,Kr=new x;function LS(n,t,e){e.vsub(n,Pi);const i=Pi.dot(t);return t.scale(i,Kr),Kr.vadd(n,Kr),e.distanceTo(Kr)}class Ws extends Gm{static checkBounds(t,e,i){let s,r;i===0?(s=t.position.x,r=e.position.x):i===1?(s=t.position.y,r=e.position.y):i===2&&(s=t.position.z,r=e.position.z);const o=t.boundingRadius,a=e.boundingRadius,l=s+o;return r-a<l}static insertionSortX(t){for(let e=1,i=t.length;e<i;e++){const s=t[e];let r;for(r=e-1;r>=0&&!(t[r].aabb.lowerBound.x<=s.aabb.lowerBound.x);r--)t[r+1]=t[r];t[r+1]=s}return t}static insertionSortY(t){for(let e=1,i=t.length;e<i;e++){const s=t[e];let r;for(r=e-1;r>=0&&!(t[r].aabb.lowerBound.y<=s.aabb.lowerBound.y);r--)t[r+1]=t[r];t[r+1]=s}return t}static insertionSortZ(t){for(let e=1,i=t.length;e<i;e++){const s=t[e];let r;for(r=e-1;r>=0&&!(t[r].aabb.lowerBound.z<=s.aabb.lowerBound.z);r--)t[r+1]=t[r];t[r+1]=s}return t}constructor(t){super(),this.axisList=[],this.world=null,this.axisIndex=0;const e=this.axisList;this._addBodyHandler=i=>{e.push(i.body)},this._removeBodyHandler=i=>{const s=e.indexOf(i.body);s!==-1&&e.splice(s,1)},t&&this.setWorld(t)}setWorld(t){this.axisList.length=0;for(let e=0;e<t.bodies.length;e++)this.axisList.push(t.bodies[e]);t.removeEventListener("addBody",this._addBodyHandler),t.removeEventListener("removeBody",this._removeBodyHandler),t.addEventListener("addBody",this._addBodyHandler),t.addEventListener("removeBody",this._removeBodyHandler),this.world=t,this.dirty=!0}collisionPairs(t,e,i){const s=this.axisList,r=s.length,o=this.axisIndex;let a,l;for(this.dirty&&(this.sortList(),this.dirty=!1),a=0;a!==r;a++){const c=s[a];for(l=a+1;l<r;l++){const u=s[l];if(this.needBroadphaseCollision(c,u)){if(!Ws.checkBounds(c,u,o))break;this.intersectionTest(c,u,e,i)}}}}sortList(){const t=this.axisList,e=this.axisIndex,i=t.length;for(let s=0;s!==i;s++){const r=t[s];r.aabbNeedsUpdate&&r.updateAABB()}e===0?Ws.insertionSortX(t):e===1?Ws.insertionSortY(t):e===2&&Ws.insertionSortZ(t)}autoDetectAxis(){let t=0,e=0,i=0,s=0,r=0,o=0;const a=this.axisList,l=a.length,c=1/l;for(let p=0;p!==l;p++){const m=a[p],f=m.position.x;t+=f,e+=f*f;const v=m.position.y;i+=v,s+=v*v;const C=m.position.z;r+=C,o+=C*C}const u=e-t*t*c,h=s-i*i*c,d=o-r*r*c;u>h?u>d?this.axisIndex=0:this.axisIndex=2:h>d?this.axisIndex=1:this.axisIndex=2}aabbQuery(t,e,i){i===void 0&&(i=[]),this.dirty&&(this.sortList(),this.dirty=!1);const s=this.axisIndex;let r="x";s===1&&(r="y"),s===2&&(r="z");const o=this.axisList;e.lowerBound[r],e.upperBound[r];for(let a=0;a<o.length;a++){const l=o[a];l.aabbNeedsUpdate&&l.updateAABB(),l.aabb.overlaps(e)&&i.push(l)}return i}}class jc{static defaults(t,e){t===void 0&&(t={});for(let i in e)i in t||(t[i]=e[i]);return t}}class Wh{constructor(){this.spatial=new x,this.rotational=new x}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}}class Fr{constructor(t,e,i,s){i===void 0&&(i=-1e6),s===void 0&&(s=1e6),this.id=Fr.idCounter++,this.minForce=i,this.maxForce=s,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new Wh,this.jacobianElementB=new Wh,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,e,i){const s=e,r=t,o=i;this.a=4/(o*(1+4*s)),this.b=4*s/(1+4*s),this.eps=4/(o*o*r*(1+4*s))}computeB(t,e,i){const s=this.computeGW(),r=this.computeGq(),o=this.computeGiMf();return-r*t-s*e-o*i}computeGq(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,s=this.bj,r=i.position,o=s.position;return t.spatial.dot(r)+e.spatial.dot(o)}computeGW(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,s=this.bj,r=i.velocity,o=s.velocity,a=i.angularVelocity,l=s.angularVelocity;return t.multiplyVectors(r,a)+e.multiplyVectors(o,l)}computeGWlambda(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,s=this.bj,r=i.vlambda,o=s.vlambda,a=i.wlambda,l=s.wlambda;return t.multiplyVectors(r,a)+e.multiplyVectors(o,l)}computeGiMf(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,s=this.bj,r=i.force,o=i.torque,a=s.force,l=s.torque,c=i.invMassSolve,u=s.invMassSolve;return r.scale(c,$h),a.scale(u,Kh),i.invInertiaWorldSolve.vmult(o,Yh),s.invInertiaWorldSolve.vmult(l,Xh),t.multiplyVectors($h,Yh)+e.multiplyVectors(Kh,Xh)}computeGiMGt(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,s=this.bj,r=i.invMassSolve,o=s.invMassSolve,a=i.invInertiaWorldSolve,l=s.invInertiaWorldSolve;let c=r+o;return a.vmult(t.rotational,Yr),c+=Yr.dot(t.rotational),l.vmult(e.rotational,Yr),c+=Yr.dot(e.rotational),c}addToWlambda(t){const e=this.jacobianElementA,i=this.jacobianElementB,s=this.bi,r=this.bj,o=zS;s.vlambda.addScaledVector(s.invMassSolve*t,e.spatial,s.vlambda),r.vlambda.addScaledVector(r.invMassSolve*t,i.spatial,r.vlambda),s.invInertiaWorldSolve.vmult(e.rotational,o),s.wlambda.addScaledVector(t,o,s.wlambda),r.invInertiaWorldSolve.vmult(i.rotational,o),r.wlambda.addScaledVector(t,o,r.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Fr.idCounter=0;const $h=new x,Kh=new x,Yh=new x,Xh=new x,Yr=new x,zS=new x;class DS extends Fr{constructor(t,e,i){i===void 0&&(i=1e6),super(t,e,0,i),this.restitution=0,this.ri=new x,this.rj=new x,this.ni=new x}computeB(t){const e=this.a,i=this.b,s=this.bi,r=this.bj,o=this.ri,a=this.rj,l=FS,c=VS,u=s.velocity,h=s.angularVelocity;s.force,s.torque;const d=r.velocity,p=r.angularVelocity;r.force,r.torque;const m=NS,f=this.jacobianElementA,v=this.jacobianElementB,C=this.ni;o.cross(C,l),a.cross(C,c),C.negate(f.spatial),l.negate(f.rotational),v.spatial.copy(C),v.rotational.copy(c),m.copy(r.position),m.vadd(a,m),m.vsub(s.position,m),m.vsub(o,m);const g=C.dot(m),E=this.restitution+1,T=E*d.dot(C)-E*u.dot(C)+p.dot(c)-h.dot(l),k=this.computeGiMf();return-g*e-T*i-t*k}getImpactVelocityAlongNormal(){const t=US,e=jS,i=HS,s=GS,r=qS;return this.bi.position.vadd(this.ri,i),this.bj.position.vadd(this.rj,s),this.bi.getVelocityAtWorldPoint(i,t),this.bj.getVelocityAtWorldPoint(s,e),t.vsub(e,r),this.ni.dot(r)}}const FS=new x,VS=new x,NS=new x,US=new x,jS=new x,HS=new x,GS=new x,qS=new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;class Zh extends Fr{constructor(t,e,i){super(t,e,-i,i),this.ri=new x,this.rj=new x,this.t=new x}computeB(t){this.a;const e=this.b;this.bi,this.bj;const i=this.ri,s=this.rj,r=WS,o=$S,a=this.t;i.cross(a,r),s.cross(a,o);const l=this.jacobianElementA,c=this.jacobianElementB;a.negate(l.spatial),r.negate(l.rotational),c.spatial.copy(a),c.rotational.copy(o);const u=this.computeGW(),h=this.computeGiMf();return-u*e-t*h}}const WS=new x,$S=new x;class Jo{constructor(t,e,i){i=jc.defaults(i,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=Jo.idCounter++,this.materials=[t,e],this.friction=i.friction,this.restitution=i.restitution,this.contactEquationStiffness=i.contactEquationStiffness,this.contactEquationRelaxation=i.contactEquationRelaxation,this.frictionEquationStiffness=i.frictionEquationStiffness,this.frictionEquationRelaxation=i.frictionEquationRelaxation}}Jo.idCounter=0;class ta{constructor(t){t===void 0&&(t={});let e="";typeof t=="string"&&(e=t,t={}),this.name=e,this.id=ta.idCounter++,this.friction=typeof t.friction<"u"?t.friction:-1,this.restitution=typeof t.restitution<"u"?t.restitution:-1}}ta.idCounter=0;new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;class KS{constructor(t){t===void 0&&(t={}),t=jc.defaults(t,{chassisConnectionPointLocal:new x,chassisConnectionPointWorld:new x,directionLocal:new x,directionWorld:new x,axleLocal:new x,axleWorld:new x,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:10.5,forwardAcceleration:1,sideAcceleration:1,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,slipInfo:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=t.maxSuspensionTravel,this.customSlidingRotationalSpeed=t.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=t.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=t.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=t.chassisConnectionPointWorld.clone(),this.directionLocal=t.directionLocal.clone(),this.directionWorld=t.directionWorld.clone(),this.axleLocal=t.axleLocal.clone(),this.axleWorld=t.axleWorld.clone(),this.suspensionRestLength=t.suspensionRestLength,this.suspensionMaxLength=t.suspensionMaxLength,this.radius=t.radius,this.suspensionStiffness=t.suspensionStiffness,this.dampingCompression=t.dampingCompression,this.dampingRelaxation=t.dampingRelaxation,this.frictionSlip=t.frictionSlip,this.forwardAcceleration=t.forwardAcceleration,this.sideAcceleration=t.sideAcceleration,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=t.rollInfluence,this.maxSuspensionForce=t.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=t.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.slipInfo=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new Er,this.worldTransform=new gt,this.isInContact=!1}updateWheel(t){const e=this.raycastResult;if(this.isInContact){const i=e.hitNormalWorld.dot(e.directionWorld);e.hitPointWorld.vsub(t.position,Jh),t.getVelocityAtWorldPoint(Jh,Qh);const s=e.hitNormalWorld.dot(Qh);if(i>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=1/.1;else{const r=-1/i;this.suspensionRelativeVelocity=s*r,this.clippedInvContactDotSuspension=r}}else e.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.hitNormalWorld),this.clippedInvContactDotSuspension=1}}const Qh=new x,Jh=new x;class gT{constructor(t){this.chassisBody=t.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=typeof t.indexRightAxis<"u"?t.indexRightAxis:2,this.indexForwardAxis=typeof t.indexForwardAxis<"u"?t.indexForwardAxis:0,this.indexUpAxis=typeof t.indexUpAxis<"u"?t.indexUpAxis:1,this.constraints=[],this.preStepCallback=()=>{},this.currentVehicleSpeedKmHour=0,this.numWheelsOnGround=0}addWheel(t){t===void 0&&(t={});const e=new KS(t),i=this.wheelInfos.length;return this.wheelInfos.push(e),i}setSteeringValue(t,e){const i=this.wheelInfos[e];i.steering=t}applyEngineForce(t,e){this.wheelInfos[e].engineForce=t}setBrake(t,e){this.wheelInfos[e].brake=t}addToWorld(t){t.addBody(this.chassisBody);const e=this;this.preStepCallback=()=>{e.updateVehicle(t.dt)},t.addEventListener("preStep",this.preStepCallback),this.world=t}getVehicleAxisWorld(t,e){e.set(t===0?1:0,t===1?1:0,t===2?1:0),this.chassisBody.vectorToWorldFrame(e,e)}updateVehicle(t){const e=this.wheelInfos,i=e.length,s=this.chassisBody;for(let h=0;h<i;h++)this.updateWheelTransform(h);this.currentVehicleSpeedKmHour=3.6*s.velocity.length();const r=new x;this.getVehicleAxisWorld(this.indexForwardAxis,r),r.dot(s.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(let h=0;h<i;h++)this.castRay(e[h]);this.updateSuspension(t);const o=new x,a=new x;for(let h=0;h<i;h++){const d=e[h];let p=d.suspensionForce;p>d.maxSuspensionForce&&(p=d.maxSuspensionForce),d.raycastResult.hitNormalWorld.scale(p*t,o),d.raycastResult.hitPointWorld.vsub(s.position,a),s.applyImpulse(o,a)}this.updateFriction(t);const l=new x,c=new x,u=new x;for(let h=0;h<i;h++){const d=e[h];s.getVelocityAtWorldPoint(d.chassisConnectionPointWorld,u);let p=1;switch(this.indexUpAxis){case 1:p=-1;break}if(d.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,c);const m=c.dot(d.raycastResult.hitNormalWorld);d.raycastResult.hitNormalWorld.scale(m,l),c.vsub(l,c);const f=c.dot(u);d.deltaRotation=p*f*t/d.radius}(d.sliding||!d.isInContact)&&d.engineForce!==0&&d.useCustomSlidingRotationalSpeed&&(d.deltaRotation=(d.engineForce>0?1:-1)*d.customSlidingRotationalSpeed*t),Math.abs(d.brake)>Math.abs(d.engineForce)&&(d.deltaRotation=0),d.rotation+=d.deltaRotation,d.deltaRotation*=.99}}updateSuspension(t){const i=this.chassisBody.mass,s=this.wheelInfos,r=s.length;for(let o=0;o<r;o++){const a=s[o];if(a.isInContact){let l;const c=a.suspensionRestLength,u=a.suspensionLength,h=c-u;l=a.suspensionStiffness*h*a.clippedInvContactDotSuspension;const d=a.suspensionRelativeVelocity;let p;d<0?p=a.dampingCompression:p=a.dampingRelaxation,l-=p*d,a.suspensionForce=l*i,a.suspensionForce<0&&(a.suspensionForce=0)}else a.suspensionForce=0}}removeFromWorld(t){this.constraints,t.removeBody(this.chassisBody),t.removeEventListener("preStep",this.preStepCallback),this.world=null}castRay(t){const e=QS,i=JS;this.updateWheelTransformWorld(t);const s=this.chassisBody;let r=-1;const o=t.suspensionRestLength+t.radius;t.directionWorld.scale(o,e);const a=t.chassisConnectionPointWorld;a.vadd(e,i);const l=t.raycastResult;l.reset();const c=s.collisionResponse;s.collisionResponse=!1,this.world.rayTest(a,i,l),s.collisionResponse=c;const u=l.body;if(t.raycastResult.groundObject=0,u){r=l.distance,t.raycastResult.hitNormalWorld=l.hitNormalWorld,t.isInContact=!0;const h=l.distance;t.suspensionLength=h-t.radius;const d=t.suspensionRestLength-t.maxSuspensionTravel,p=t.suspensionRestLength+t.maxSuspensionTravel;t.suspensionLength<d&&(t.suspensionLength=d),t.suspensionLength>p&&(t.suspensionLength=p,t.raycastResult.reset());const m=t.raycastResult.hitNormalWorld.dot(t.directionWorld),f=new x;s.getVelocityAtWorldPoint(t.raycastResult.hitPointWorld,f);const v=t.raycastResult.hitNormalWorld.dot(f);if(m>=-.1)t.suspensionRelativeVelocity=0,t.clippedInvContactDotSuspension=1/.1;else{const C=-1/m;t.suspensionRelativeVelocity=v*C,t.clippedInvContactDotSuspension=C}}else t.suspensionLength=t.suspensionRestLength+0*t.maxSuspensionTravel,t.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.raycastResult.hitNormalWorld),t.clippedInvContactDotSuspension=1;return r}updateWheelTransformWorld(t){t.isInContact=!1;const e=this.chassisBody;e.pointToWorldFrame(t.chassisConnectionPointLocal,t.chassisConnectionPointWorld),e.vectorToWorldFrame(t.directionLocal,t.directionWorld),e.vectorToWorldFrame(t.axleLocal,t.axleWorld)}updateWheelTransform(t){const e=YS,i=XS,s=ZS,r=this.wheelInfos[t];this.updateWheelTransformWorld(r),r.directionLocal.scale(-1,e),i.copy(r.axleLocal),e.cross(i,s),s.normalize(),i.normalize();const o=r.steering,a=new Vt;a.setFromAxisAngle(e,o);const l=new Vt;l.setFromAxisAngle(i,r.rotation);const c=r.worldTransform.quaternion;this.chassisBody.quaternion.mult(a,c),c.mult(l,c),c.normalize();const u=r.worldTransform.position;u.copy(r.directionWorld),u.scale(r.suspensionLength,u),u.vadd(r.chassisConnectionPointWorld,u)}getWheelTransformWorld(t){return this.wheelInfos[t].worldTransform}updateFriction(t){const e=eP,i=this.wheelInfos,s=i.length,r=this.chassisBody,o=iP,a=nP;this.numWheelsOnGround=0;for(let u=0;u<s;u++){const h=i[u];h.raycastResult.body&&this.numWheelsOnGround++,h.sideImpulse=0,h.forwardImpulse=0,o[u]||(o[u]=new x),a[u]||(a[u]=new x)}for(let u=0;u<s;u++){const h=i[u],d=h.raycastResult.body;if(d){const p=a[u];this.getWheelTransformWorld(u).vectorToWorldFrame(tP[this.indexRightAxis],p);const f=h.raycastResult.hitNormalWorld,v=p.dot(f);f.scale(v,e),p.vsub(e,p),p.normalize(),f.cross(p,o[u]),o[u].normalize(),h.sideImpulse=vP(r,h.raycastResult.hitPointWorld,d,h.raycastResult.hitPointWorld,p),h.sideImpulse*=sP}}const l=1,c=.5;this.sliding=!1;for(let u=0;u<s;u++){const h=i[u],d=h.raycastResult.body;let p=0;if(h.slipInfo=1,d){const f=h.brake?h.brake:0;p=lP(r,d,h.raycastResult.hitPointWorld,o[u],f),p+=h.engineForce*t;const v=f/p;h.slipInfo*=v}if(h.forwardImpulse=0,h.skidInfo=1,d){h.skidInfo=1;const m=h.suspensionForce*t*h.frictionSlip,v=m*m;h.forwardImpulse=p;const C=h.forwardImpulse*c/h.forwardAcceleration,g=h.sideImpulse*l/h.sideAcceleration,E=C*C+g*g;if(h.sliding=!1,E>v){this.sliding=!0,h.sliding=!0;const T=m/Math.sqrt(E);h.skidInfo*=T}}}if(this.sliding)for(let u=0;u<s;u++){const h=i[u];h.sideImpulse!==0&&h.skidInfo<1&&(h.forwardImpulse*=h.skidInfo,h.sideImpulse*=h.skidInfo)}for(let u=0;u<s;u++){const h=i[u],d=new x;if(h.raycastResult.hitPointWorld.vsub(r.position,d),h.forwardImpulse!==0){const p=new x;o[u].scale(h.forwardImpulse,p),r.applyImpulse(p,d)}if(h.sideImpulse!==0){const p=h.raycastResult.body,m=new x;h.raycastResult.hitPointWorld.vsub(p.position,m);const f=new x;a[u].scale(h.sideImpulse,f),r.vectorToLocalFrame(d,d),d["xyz"[this.indexUpAxis]]*=h.rollInfluence,r.vectorToWorldFrame(d,d),r.applyImpulse(f,d),f.scale(-1,f),p.applyImpulse(f,m)}}}}new x;new x;new x;const YS=new x,XS=new x,ZS=new x;new $t;new x;const QS=new x,JS=new x,tP=[new x(1,0,0),new x(0,1,0),new x(0,0,1)],eP=new x,nP=[],iP=[],sP=1,rP=new x,oP=new x,aP=new x;function lP(n,t,e,i,s){let r=0;const o=e,a=rP,l=oP,c=aP;n.getVelocityAtWorldPoint(o,a),t.getVelocityAtWorldPoint(o,l),a.vsub(l,c);const u=i.dot(c),h=td(n,e,i),d=td(t,e,i),m=1/(h+d);return r=-u*m,s<r&&(r=s),r<-s&&(r=-s),r}const cP=new x,uP=new x,hP=new x,dP=new x;function td(n,t,e){const i=cP,s=uP,r=hP,o=dP;return t.vsub(n.position,i),i.cross(e,s),n.invInertiaWorld.vmult(s,o),o.cross(i,r),n.invMass+e.dot(r)}const pP=new x,fP=new x,mP=new x;function vP(n,t,e,i,s){if(s.lengthSquared()>1.1)return 0;const o=pP,a=fP,l=mP;n.getVelocityAtWorldPoint(t,o),e.getVelocityAtWorldPoint(i,a),o.vsub(a,l);const c=s.dot(l),u=.2,h=1/(n.invMass+e.invMass);return-u*c*h}new x;new x;new x;new x;new x;new x;new x;new x;new x;class _T extends ci{constructor(t,e,i,s){if(t===void 0&&(t=1),e===void 0&&(e=1),i===void 0&&(i=1),s===void 0&&(s=8),t<0)throw new Error("The cylinder radiusTop cannot be negative.");if(e<0)throw new Error("The cylinder radiusBottom cannot be negative.");const r=s,o=[],a=[],l=[],c=[],u=[],h=Math.cos,d=Math.sin;o.push(new x(-e*d(0),-i*.5,e*h(0))),c.push(0),o.push(new x(-t*d(0),i*.5,t*h(0))),u.push(1);for(let m=0;m<r;m++){const f=2*Math.PI/r*(m+1),v=2*Math.PI/r*(m+.5);m<r-1?(o.push(new x(-e*d(f),-i*.5,e*h(f))),c.push(2*m+2),o.push(new x(-t*d(f),i*.5,t*h(f))),u.push(2*m+3),l.push([2*m,2*m+1,2*m+3,2*m+2])):l.push([2*m,2*m+1,1,0]),(r%2===1||m<r/2)&&a.push(new x(-d(v),0,h(v)))}l.push(c),a.push(new x(0,1,0));const p=[];for(let m=0;m<u.length;m++)p.push(u[u.length-m-1]);l.push(p),super({vertices:o,faces:l,axes:a}),this.type=et.types.CYLINDER,this.radiusTop=t,this.radiusBottom=e,this.height=i,this.numSegments=s}}new x;class bT extends et{constructor(t,e){e===void 0&&(e={}),e=jc.defaults(e,{maxValue:null,minValue:null,elementSize:1}),super({type:et.types.HEIGHTFIELD}),this.data=t,this.maxValue=e.maxValue,this.minValue=e.minValue,this.elementSize=e.elementSize,e.minValue===null&&this.updateMinValue(),e.maxValue===null&&this.updateMaxValue(),this.cacheEnabled=!0,this.pillarConvex=new ci,this.pillarOffset=new x,this.updateBoundingSphereRadius(),this._cachedPillars={}}update(){this._cachedPillars={}}updateMinValue(){const t=this.data;let e=t[0][0];for(let i=0;i!==t.length;i++)for(let s=0;s!==t[i].length;s++){const r=t[i][s];r<e&&(e=r)}this.minValue=e}updateMaxValue(){const t=this.data;let e=t[0][0];for(let i=0;i!==t.length;i++)for(let s=0;s!==t[i].length;s++){const r=t[i][s];r>e&&(e=r)}this.maxValue=e}setHeightValueAtIndex(t,e,i){const s=this.data;s[t][e]=i,this.clearCachedConvexTrianglePillar(t,e,!1),t>0&&(this.clearCachedConvexTrianglePillar(t-1,e,!0),this.clearCachedConvexTrianglePillar(t-1,e,!1)),e>0&&(this.clearCachedConvexTrianglePillar(t,e-1,!0),this.clearCachedConvexTrianglePillar(t,e-1,!1)),e>0&&t>0&&this.clearCachedConvexTrianglePillar(t-1,e-1,!0)}getRectMinMax(t,e,i,s,r){r===void 0&&(r=[]);const o=this.data;let a=this.minValue;for(let l=t;l<=i;l++)for(let c=e;c<=s;c++){const u=o[l][c];u>a&&(a=u)}r[0]=this.minValue,r[1]=a}getIndexOfPosition(t,e,i,s){const r=this.elementSize,o=this.data;let a=Math.floor(t/r),l=Math.floor(e/r);return i[0]=a,i[1]=l,s&&(a<0&&(a=0),l<0&&(l=0),a>=o.length-1&&(a=o.length-1),l>=o[0].length-1&&(l=o[0].length-1)),!(a<0||l<0||a>=o.length-1||l>=o[0].length-1)}getTriangleAt(t,e,i,s,r,o){const a=ed;this.getIndexOfPosition(t,e,a,i);let l=a[0],c=a[1];const u=this.data;i&&(l=Math.min(u.length-2,Math.max(0,l)),c=Math.min(u[0].length-2,Math.max(0,c)));const h=this.elementSize,d=(t/h-l)**2+(e/h-c)**2,p=(t/h-(l+1))**2+(e/h-(c+1))**2,m=d>p;return this.getTriangle(l,c,m,s,r,o),m}getNormalAt(t,e,i,s){const r=wP,o=yP,a=xP,l=CP,c=EP;this.getTriangleAt(t,e,i,r,o,a),o.vsub(r,l),a.vsub(r,c),l.cross(c,s),s.normalize()}getAabbAtIndex(t,e,i){let{lowerBound:s,upperBound:r}=i;const o=this.data,a=this.elementSize;s.set(t*a,e*a,o[t][e]),r.set((t+1)*a,(e+1)*a,o[t+1][e+1])}getHeightAt(t,e,i){const s=this.data,r=gP,o=_P,a=bP,l=ed;this.getIndexOfPosition(t,e,l,i);let c=l[0],u=l[1];i&&(c=Math.min(s.length-2,Math.max(0,c)),u=Math.min(s[0].length-2,Math.max(0,u)));const h=this.getTriangleAt(t,e,i,r,o,a);SP(t,e,r.x,r.y,o.x,o.y,a.x,a.y,nd);const d=nd;return h?s[c+1][u+1]*d.x+s[c][u+1]*d.y+s[c+1][u]*d.z:s[c][u]*d.x+s[c+1][u]*d.y+s[c][u+1]*d.z}getCacheConvexTrianglePillarKey(t,e,i){return`${t}_${e}_${i?1:0}`}getCachedConvexTrianglePillar(t,e,i){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]}setCachedConvexTrianglePillar(t,e,i,s,r){this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]={convex:s,offset:r}}clearCachedConvexTrianglePillar(t,e,i){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]}getTriangle(t,e,i,s,r,o){const a=this.data,l=this.elementSize;i?(s.set((t+1)*l,(e+1)*l,a[t+1][e+1]),r.set(t*l,(e+1)*l,a[t][e+1]),o.set((t+1)*l,e*l,a[t+1][e])):(s.set(t*l,e*l,a[t][e]),r.set((t+1)*l,e*l,a[t+1][e]),o.set(t*l,(e+1)*l,a[t][e+1]))}getConvexTrianglePillar(t,e,i){let s=this.pillarConvex,r=this.pillarOffset;if(this.cacheEnabled){const h=this.getCachedConvexTrianglePillar(t,e,i);if(h){this.pillarConvex=h.convex,this.pillarOffset=h.offset;return}s=new ci,r=new x,this.pillarConvex=s,this.pillarOffset=r}const o=this.data,a=this.elementSize,l=s.faces;s.vertices.length=6;for(let h=0;h<6;h++)s.vertices[h]||(s.vertices[h]=new x);l.length=5;for(let h=0;h<5;h++)l[h]||(l[h]=[]);const c=s.vertices,u=(Math.min(o[t][e],o[t+1][e],o[t][e+1],o[t+1][e+1])-this.minValue)/2+this.minValue;i?(r.set((t+.75)*a,(e+.75)*a,u),c[0].set(.25*a,.25*a,o[t+1][e+1]-u),c[1].set(-.75*a,.25*a,o[t][e+1]-u),c[2].set(.25*a,-.75*a,o[t+1][e]-u),c[3].set(.25*a,.25*a,-Math.abs(u)-1),c[4].set(-.75*a,.25*a,-Math.abs(u)-1),c[5].set(.25*a,-.75*a,-Math.abs(u)-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=2,l[2][1]=5,l[2][2]=3,l[2][3]=0,l[3][0]=3,l[3][1]=4,l[3][2]=1,l[3][3]=0,l[4][0]=1,l[4][1]=4,l[4][2]=5,l[4][3]=2):(r.set((t+.25)*a,(e+.25)*a,u),c[0].set(-.25*a,-.25*a,o[t][e]-u),c[1].set(.75*a,-.25*a,o[t+1][e]-u),c[2].set(-.25*a,.75*a,o[t][e+1]-u),c[3].set(-.25*a,-.25*a,-Math.abs(u)-1),c[4].set(.75*a,-.25*a,-Math.abs(u)-1),c[5].set(-.25*a,.75*a,-Math.abs(u)-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=0,l[2][1]=2,l[2][2]=5,l[2][3]=3,l[3][0]=1,l[3][1]=0,l[3][2]=3,l[3][3]=4,l[4][0]=4,l[4][1]=5,l[4][2]=2,l[4][3]=1),s.computeNormals(),s.computeEdges(),s.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(t,e,i,s,r)}calculateLocalInertia(t,e){return e===void 0&&(e=new x),e.set(0,0,0),e}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,e,i,s){i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),s.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)}updateBoundingSphereRadius(){const t=this.data,e=this.elementSize;this.boundingSphereRadius=new x(t.length*e,t[0].length*e,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).length()}setHeightsFromImage(t,e){const{x:i,z:s,y:r}=e,o=document.createElement("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d");a.drawImage(t,0,0);const l=a.getImageData(0,0,t.width,t.height),c=this.data;c.length=0,this.elementSize=Math.abs(i)/l.width;for(let u=0;u<l.height;u++){const h=[];for(let d=0;d<l.width;d++){const p=l.data[(u*l.height+d)*4],m=l.data[(u*l.height+d)*4+1],f=l.data[(u*l.height+d)*4+2],v=(p+m+f)/4/255*s;i<0?h.push(v):h.unshift(v)}r<0?c.unshift(h):c.push(h)}this.updateMaxValue(),this.updateMinValue(),this.update()}}const ed=[],nd=new x,gP=new x,_P=new x,bP=new x,wP=new x,yP=new x,xP=new x,CP=new x,EP=new x;function SP(n,t,e,i,s,r,o,a,l){l.x=((r-a)*(n-o)+(o-s)*(t-a))/((r-a)*(e-o)+(o-s)*(i-a)),l.y=((a-i)*(n-o)+(e-o)*(t-a))/((r-a)*(e-o)+(o-s)*(i-a)),l.z=1-l.x-l.y}new x;new Fe;new x;new Fe;new x;new x;new x;new x;new x;new x;new x;new Fe;new x;new gt;new Fe;class PP{constructor(){this.equations=[]}solve(t,e){return 0}addEquation(t){t.enabled&&!t.bi.isTrigger&&!t.bj.isTrigger&&this.equations.push(t)}removeEquation(t){const e=this.equations,i=e.indexOf(t);i!==-1&&e.splice(i,1)}removeAllEquations(){this.equations.length=0}}class TP extends PP{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,e){let i=0;const s=this.iterations,r=this.tolerance*this.tolerance,o=this.equations,a=o.length,l=e.bodies,c=l.length,u=t;let h,d,p,m,f,v;if(a!==0)for(let T=0;T!==c;T++)l[T].updateSolveMassProperties();const C=AP,g=RP,E=MP;C.length=a,g.length=a,E.length=a;for(let T=0;T!==a;T++){const k=o[T];E[T]=0,g[T]=k.computeB(u),C[T]=1/k.computeC()}if(a!==0){for(let P=0;P!==c;P++){const R=l[P],_=R.vlambda,w=R.wlambda;_.set(0,0,0),w.set(0,0,0)}for(i=0;i!==s;i++){m=0;for(let P=0;P!==a;P++){const R=o[P];h=g[P],d=C[P],v=E[P],f=R.computeGWlambda(),p=d*(h-f-R.eps*v),v+p<R.minForce?p=R.minForce-v:v+p>R.maxForce&&(p=R.maxForce-v),E[P]+=p,m+=p>0?p:-p,R.addToWlambda(p)}if(m*m<r)break}for(let P=0;P!==c;P++){const R=l[P],_=R.velocity,w=R.angularVelocity;R.vlambda.vmul(R.linearFactor,R.vlambda),_.vadd(R.vlambda,_),R.wlambda.vmul(R.angularFactor,R.wlambda),w.vadd(R.wlambda,w)}let T=o.length;const k=1/u;for(;T--;)o[T].multiplier=E[T]*k}return i}}const MP=[],AP=[],RP=[];it.STATIC;class kP{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let e=0;e!==t;e++)this.objects.push(e<0||arguments.length<=e?void 0:arguments[e]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const e=this.objects;for(;e.length>t;)e.pop();for(;e.length<t;)e.push(this.constructObject());return this}}class IP extends kP{constructor(){super(...arguments),this.type=x}constructObject(){return new x}}const kt={sphereSphere:et.types.SPHERE,spherePlane:et.types.SPHERE|et.types.PLANE,boxBox:et.types.BOX|et.types.BOX,sphereBox:et.types.SPHERE|et.types.BOX,planeBox:et.types.PLANE|et.types.BOX,convexConvex:et.types.CONVEXPOLYHEDRON,sphereConvex:et.types.SPHERE|et.types.CONVEXPOLYHEDRON,planeConvex:et.types.PLANE|et.types.CONVEXPOLYHEDRON,boxConvex:et.types.BOX|et.types.CONVEXPOLYHEDRON,sphereHeightfield:et.types.SPHERE|et.types.HEIGHTFIELD,boxHeightfield:et.types.BOX|et.types.HEIGHTFIELD,convexHeightfield:et.types.CONVEXPOLYHEDRON|et.types.HEIGHTFIELD,sphereParticle:et.types.PARTICLE|et.types.SPHERE,planeParticle:et.types.PLANE|et.types.PARTICLE,boxParticle:et.types.BOX|et.types.PARTICLE,convexParticle:et.types.PARTICLE|et.types.CONVEXPOLYHEDRON,cylinderCylinder:et.types.CYLINDER,sphereCylinder:et.types.SPHERE|et.types.CYLINDER,planeCylinder:et.types.PLANE|et.types.CYLINDER,boxCylinder:et.types.BOX|et.types.CYLINDER,convexCylinder:et.types.CONVEXPOLYHEDRON|et.types.CYLINDER,heightfieldCylinder:et.types.HEIGHTFIELD|et.types.CYLINDER,particleCylinder:et.types.PARTICLE|et.types.CYLINDER,sphereTrimesh:et.types.SPHERE|et.types.TRIMESH,planeTrimesh:et.types.PLANE|et.types.TRIMESH};class BP{get[kt.sphereSphere](){return this.sphereSphere}get[kt.spherePlane](){return this.spherePlane}get[kt.boxBox](){return this.boxBox}get[kt.sphereBox](){return this.sphereBox}get[kt.planeBox](){return this.planeBox}get[kt.convexConvex](){return this.convexConvex}get[kt.sphereConvex](){return this.sphereConvex}get[kt.planeConvex](){return this.planeConvex}get[kt.boxConvex](){return this.boxConvex}get[kt.sphereHeightfield](){return this.sphereHeightfield}get[kt.boxHeightfield](){return this.boxHeightfield}get[kt.convexHeightfield](){return this.convexHeightfield}get[kt.sphereParticle](){return this.sphereParticle}get[kt.planeParticle](){return this.planeParticle}get[kt.boxParticle](){return this.boxParticle}get[kt.convexParticle](){return this.convexParticle}get[kt.cylinderCylinder](){return this.convexConvex}get[kt.sphereCylinder](){return this.sphereConvex}get[kt.planeCylinder](){return this.planeConvex}get[kt.boxCylinder](){return this.boxConvex}get[kt.convexCylinder](){return this.convexConvex}get[kt.heightfieldCylinder](){return this.heightfieldCylinder}get[kt.particleCylinder](){return this.particleCylinder}get[kt.sphereTrimesh](){return this.sphereTrimesh}get[kt.planeTrimesh](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new IP,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,e,i,s,r,o){let a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=t,a.bj=e):a=new DS(t,e),a.enabled=t.collisionResponse&&e.collisionResponse&&i.collisionResponse&&s.collisionResponse;const l=this.currentContactMaterial;a.restitution=l.restitution,a.setSpookParams(l.contactEquationStiffness,l.contactEquationRelaxation,this.world.dt);const c=i.material||t.material,u=s.material||e.material;return c&&u&&c.restitution>=0&&u.restitution>=0&&(a.restitution=c.restitution*u.restitution),a.si=r||i,a.sj=o||s,a}createFrictionEquationsFromContact(t,e){const i=t.bi,s=t.bj,r=t.si,o=t.sj,a=this.world,l=this.currentContactMaterial;let c=l.friction;const u=r.material||i.material,h=o.material||s.material;if(u&&h&&u.friction>=0&&h.friction>=0&&(c=u.friction*h.friction),c>0){const d=c*(a.frictionGravity||a.gravity).length();let p=i.invMass+s.invMass;p>0&&(p=1/p);const m=this.frictionEquationPool,f=m.length?m.pop():new Zh(i,s,d*p),v=m.length?m.pop():new Zh(i,s,d*p);return f.bi=v.bi=i,f.bj=v.bj=s,f.minForce=v.minForce=-d*p,f.maxForce=v.maxForce=d*p,f.ri.copy(t.ri),f.rj.copy(t.rj),v.ri.copy(t.ri),v.rj.copy(t.rj),t.ni.tangents(f.t,v.t),f.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,a.dt),v.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,a.dt),f.enabled=v.enabled=t.enabled,e.push(f,v),!0}return!1}createFrictionFromAverage(t){let e=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(e,this.frictionResult)||t===1)return;const i=this.frictionResult[this.frictionResult.length-2],s=this.frictionResult[this.frictionResult.length-1];Ci.setZero(),Qi.setZero(),Ji.setZero();const r=e.bi;e.bj;for(let a=0;a!==t;a++)e=this.result[this.result.length-1-a],e.bi!==r?(Ci.vadd(e.ni,Ci),Qi.vadd(e.ri,Qi),Ji.vadd(e.rj,Ji)):(Ci.vsub(e.ni,Ci),Qi.vadd(e.rj,Qi),Ji.vadd(e.ri,Ji));const o=1/t;Qi.scale(o,i.ri),Ji.scale(o,i.rj),s.ri.copy(i.ri),s.rj.copy(i.rj),Ci.normalize(),Ci.tangents(i.t,s.t)}getContacts(t,e,i,s,r,o,a){this.contactPointPool=r,this.frictionEquationPool=a,this.result=s,this.frictionResult=o;const l=zP,c=DP,u=OP,h=LP;for(let d=0,p=t.length;d!==p;d++){const m=t[d],f=e[d];let v=null;m.material&&f.material&&(v=i.getContactMaterial(m.material,f.material)||null);const C=m.type&it.KINEMATIC&&f.type&it.STATIC||m.type&it.STATIC&&f.type&it.KINEMATIC||m.type&it.KINEMATIC&&f.type&it.KINEMATIC;for(let g=0;g<m.shapes.length;g++){m.quaternion.mult(m.shapeOrientations[g],l),m.quaternion.vmult(m.shapeOffsets[g],u),u.vadd(m.position,u);const E=m.shapes[g];for(let T=0;T<f.shapes.length;T++){f.quaternion.mult(f.shapeOrientations[T],c),f.quaternion.vmult(f.shapeOffsets[T],h),h.vadd(f.position,h);const k=f.shapes[T];if(!(E.collisionFilterMask&k.collisionFilterGroup&&k.collisionFilterMask&E.collisionFilterGroup)||u.distanceTo(h)>E.boundingSphereRadius+k.boundingSphereRadius)continue;let P=null;E.material&&k.material&&(P=i.getContactMaterial(E.material,k.material)||null),this.currentContactMaterial=P||v||i.defaultContactMaterial;const R=E.type|k.type,_=this[R];if(_){let w=!1;E.type<k.type?w=_.call(this,E,k,u,h,l,c,m,f,E,k,C):w=_.call(this,k,E,h,u,c,l,f,m,E,k,C),w&&C&&(i.shapeOverlapKeeper.set(E.id,k.id),i.bodyOverlapKeeper.set(m.id,f.id))}}}}}sphereSphere(t,e,i,s,r,o,a,l,c,u,h){if(h)return i.distanceSquared(s)<(t.radius+e.radius)**2;const d=this.createContactEquation(a,l,t,e,c,u);s.vsub(i,d.ni),d.ni.normalize(),d.ri.copy(d.ni),d.rj.copy(d.ni),d.ri.scale(t.radius,d.ri),d.rj.scale(-e.radius,d.rj),d.ri.vadd(i,d.ri),d.ri.vsub(a.position,d.ri),d.rj.vadd(s,d.rj),d.rj.vsub(l.position,d.rj),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}spherePlane(t,e,i,s,r,o,a,l,c,u,h){const d=this.createContactEquation(a,l,t,e,c,u);if(d.ni.set(0,0,1),o.vmult(d.ni,d.ni),d.ni.negate(d.ni),d.ni.normalize(),d.ni.scale(t.radius,d.ri),i.vsub(s,Xr),d.ni.scale(d.ni.dot(Xr),id),Xr.vsub(id,d.rj),-Xr.dot(d.ni)<=t.radius){if(h)return!0;const p=d.ri,m=d.rj;p.vadd(i,p),p.vsub(a.position,p),m.vadd(s,m),m.vsub(l.position,m),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}}boxBox(t,e,i,s,r,o,a,l,c,u,h){return t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,i,s,r,o,a,l,t,e,h)}sphereBox(t,e,i,s,r,o,a,l,c,u,h){const d=this.v3pool,p=c2;i.vsub(s,Zr),e.getSideNormals(p,o);const m=t.radius;let f=!1;const v=h2,C=d2,g=p2;let E=null,T=0,k=0,P=0,R=null;for(let L=0,U=p.length;L!==U&&f===!1;L++){const $=o2;$.copy(p[L]);const Z=$.length();$.normalize();const nt=Zr.dot($);if(nt<Z+m&&nt>0){const ot=a2,J=l2;ot.copy(p[(L+1)%3]),J.copy(p[(L+2)%3]);const It=ot.length(),Et=J.length();ot.normalize(),J.normalize();const zt=Zr.dot(ot),Dt=Zr.dot(J);if(zt<It&&zt>-It&&Dt<Et&&Dt>-Et){const q=Math.abs(nt-Z-m);if((R===null||q<R)&&(R=q,k=zt,P=Dt,E=Z,v.copy($),C.copy(ot),g.copy(J),T++,h))return!0}}}if(T){f=!0;const L=this.createContactEquation(a,l,t,e,c,u);v.scale(-m,L.ri),L.ni.copy(v),L.ni.negate(L.ni),v.scale(E,v),C.scale(k,C),v.vadd(C,v),g.scale(P,g),v.vadd(g,L.rj),L.ri.vadd(i,L.ri),L.ri.vsub(a.position,L.ri),L.rj.vadd(s,L.rj),L.rj.vsub(l.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}let _=d.get();const w=u2;for(let L=0;L!==2&&!f;L++)for(let U=0;U!==2&&!f;U++)for(let $=0;$!==2&&!f;$++)if(_.set(0,0,0),L?_.vadd(p[0],_):_.vsub(p[0],_),U?_.vadd(p[1],_):_.vsub(p[1],_),$?_.vadd(p[2],_):_.vsub(p[2],_),s.vadd(_,w),w.vsub(i,w),w.lengthSquared()<m*m){if(h)return!0;f=!0;const Z=this.createContactEquation(a,l,t,e,c,u);Z.ri.copy(w),Z.ri.normalize(),Z.ni.copy(Z.ri),Z.ri.scale(m,Z.ri),Z.rj.copy(_),Z.ri.vadd(i,Z.ri),Z.ri.vsub(a.position,Z.ri),Z.rj.vadd(s,Z.rj),Z.rj.vsub(l.position,Z.rj),this.result.push(Z),this.createFrictionEquationsFromContact(Z,this.frictionResult)}d.release(_),_=null;const b=d.get(),I=d.get(),B=d.get(),z=d.get(),F=d.get(),V=p.length;for(let L=0;L!==V&&!f;L++)for(let U=0;U!==V&&!f;U++)if(L%3!==U%3){p[U].cross(p[L],b),b.normalize(),p[L].vadd(p[U],I),B.copy(i),B.vsub(I,B),B.vsub(s,B);const $=B.dot(b);b.scale($,z);let Z=0;for(;Z===L%3||Z===U%3;)Z++;F.copy(i),F.vsub(z,F),F.vsub(I,F),F.vsub(s,F);const nt=Math.abs($),ot=F.length();if(nt<p[Z].length()&&ot<m){if(h)return!0;f=!0;const J=this.createContactEquation(a,l,t,e,c,u);I.vadd(z,J.rj),J.rj.copy(J.rj),F.negate(J.ni),J.ni.normalize(),J.ri.copy(J.rj),J.ri.vadd(s,J.ri),J.ri.vsub(i,J.ri),J.ri.normalize(),J.ri.scale(m,J.ri),J.ri.vadd(i,J.ri),J.ri.vsub(a.position,J.ri),J.rj.vadd(s,J.rj),J.rj.vsub(l.position,J.rj),this.result.push(J),this.createFrictionEquationsFromContact(J,this.frictionResult)}}d.release(b,I,B,z,F)}planeBox(t,e,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,e.convexPolyhedronRepresentation.id=e.id,this.planeConvex(t,e.convexPolyhedronRepresentation,i,s,r,o,a,l,t,e,h)}convexConvex(t,e,i,s,r,o,a,l,c,u,h,d,p){const m=M2;if(!(i.distanceTo(s)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,i,r,s,o,m,d,p)){const f=[],v=A2;t.clipAgainstHull(i,r,e,s,o,m,-100,100,f);let C=0;for(let g=0;g!==f.length;g++){if(h)return!0;const E=this.createContactEquation(a,l,t,e,c,u),T=E.ri,k=E.rj;m.negate(E.ni),f[g].normal.negate(v),v.scale(f[g].depth,v),f[g].point.vadd(v,T),k.copy(f[g].point),T.vsub(i,T),k.vsub(s,k),T.vadd(i,T),T.vsub(a.position,T),k.vadd(s,k),k.vsub(l.position,k),this.result.push(E),C++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(E,this.frictionResult)}this.enableFrictionReduction&&C&&this.createFrictionFromAverage(C)}}sphereConvex(t,e,i,s,r,o,a,l,c,u,h){const d=this.v3pool;i.vsub(s,f2);const p=e.faceNormals,m=e.faces,f=e.vertices,v=t.radius;let C=!1;for(let g=0;g!==f.length;g++){const E=f[g],T=_2;o.vmult(E,T),s.vadd(T,T);const k=g2;if(T.vsub(i,k),k.lengthSquared()<v*v){if(h)return!0;C=!0;const P=this.createContactEquation(a,l,t,e,c,u);P.ri.copy(k),P.ri.normalize(),P.ni.copy(P.ri),P.ri.scale(v,P.ri),T.vsub(s,P.rj),P.ri.vadd(i,P.ri),P.ri.vsub(a.position,P.ri),P.rj.vadd(s,P.rj),P.rj.vsub(l.position,P.rj),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult);return}}for(let g=0,E=m.length;g!==E&&C===!1;g++){const T=p[g],k=m[g],P=b2;o.vmult(T,P);const R=w2;o.vmult(f[k[0]],R),R.vadd(s,R);const _=y2;P.scale(-v,_),i.vadd(_,_);const w=x2;_.vsub(R,w);const b=w.dot(P),I=C2;if(i.vsub(R,I),b<0&&I.dot(P)>0){const B=[];for(let z=0,F=k.length;z!==F;z++){const V=d.get();o.vmult(f[k[z]],V),s.vadd(V,V),B.push(V)}if(r2(B,P,i)){if(h)return!0;C=!0;const z=this.createContactEquation(a,l,t,e,c,u);P.scale(-v,z.ri),P.negate(z.ni);const F=d.get();P.scale(-b,F);const V=d.get();P.scale(-v,V),i.vsub(s,z.rj),z.rj.vadd(V,z.rj),z.rj.vadd(F,z.rj),z.rj.vadd(s,z.rj),z.rj.vsub(l.position,z.rj),z.ri.vadd(i,z.ri),z.ri.vsub(a.position,z.ri),d.release(F),d.release(V),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult);for(let L=0,U=B.length;L!==U;L++)d.release(B[L]);return}else for(let z=0;z!==k.length;z++){const F=d.get(),V=d.get();o.vmult(f[k[(z+1)%k.length]],F),o.vmult(f[k[(z+2)%k.length]],V),s.vadd(F,F),s.vadd(V,V);const L=m2;V.vsub(F,L);const U=v2;L.unit(U);const $=d.get(),Z=d.get();i.vsub(F,Z);const nt=Z.dot(U);U.scale(nt,$),$.vadd(F,$);const ot=d.get();if($.vsub(i,ot),nt>0&&nt*nt<L.lengthSquared()&&ot.lengthSquared()<v*v){if(h)return!0;const J=this.createContactEquation(a,l,t,e,c,u);$.vsub(s,J.rj),$.vsub(i,J.ni),J.ni.normalize(),J.ni.scale(v,J.ri),J.rj.vadd(s,J.rj),J.rj.vsub(l.position,J.rj),J.ri.vadd(i,J.ri),J.ri.vsub(a.position,J.ri),this.result.push(J),this.createFrictionEquationsFromContact(J,this.frictionResult);for(let It=0,Et=B.length;It!==Et;It++)d.release(B[It]);d.release(F),d.release(V),d.release($),d.release(ot),d.release(Z);return}d.release(F),d.release(V),d.release($),d.release(ot),d.release(Z)}for(let z=0,F=B.length;z!==F;z++)d.release(B[z])}}}planeConvex(t,e,i,s,r,o,a,l,c,u,h){const d=E2,p=S2;p.set(0,0,1),r.vmult(p,p);let m=0;const f=P2;for(let v=0;v!==e.vertices.length;v++)if(d.copy(e.vertices[v]),o.vmult(d,d),s.vadd(d,d),d.vsub(i,f),p.dot(f)<=0){if(h)return!0;const g=this.createContactEquation(a,l,t,e,c,u),E=T2;p.scale(p.dot(f),E),d.vsub(E,E),E.vsub(i,g.ri),g.ni.copy(p),d.vsub(s,g.rj),g.ri.vadd(i,g.ri),g.ri.vsub(a.position,g.ri),g.rj.vadd(s,g.rj),g.rj.vsub(l.position,g.rj),this.result.push(g),m++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult)}this.enableFrictionReduction&&m&&this.createFrictionFromAverage(m)}boxConvex(t,e,i,s,r,o,a,l,c,u,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,i,s,r,o,a,l,t,e,h)}sphereHeightfield(t,e,i,s,r,o,a,l,c,u,h){const d=e.data,p=t.radius,m=e.elementSize,f=U2,v=N2;gt.pointToLocalFrame(s,o,i,v);let C=Math.floor((v.x-p)/m)-1,g=Math.ceil((v.x+p)/m)+1,E=Math.floor((v.y-p)/m)-1,T=Math.ceil((v.y+p)/m)+1;if(g<0||T<0||C>d.length||E>d[0].length)return;C<0&&(C=0),g<0&&(g=0),E<0&&(E=0),T<0&&(T=0),C>=d.length&&(C=d.length-1),g>=d.length&&(g=d.length-1),T>=d[0].length&&(T=d[0].length-1),E>=d[0].length&&(E=d[0].length-1);const k=[];e.getRectMinMax(C,E,g,T,k);const P=k[0],R=k[1];if(v.z-p>R||v.z+p<P)return;const _=this.result;for(let w=C;w<g;w++)for(let b=E;b<T;b++){const I=_.length;let B=!1;if(e.getConvexTrianglePillar(w,b,!1),gt.pointToWorldFrame(s,o,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(B=this.sphereConvex(t,e.pillarConvex,i,f,r,o,a,l,t,e,h)),h&&B||(e.getConvexTrianglePillar(w,b,!0),gt.pointToWorldFrame(s,o,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(B=this.sphereConvex(t,e.pillarConvex,i,f,r,o,a,l,t,e,h)),h&&B))return!0;if(_.length-I>2)return}}boxHeightfield(t,e,i,s,r,o,a,l,c,u,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,i,s,r,o,a,l,t,e,h)}convexHeightfield(t,e,i,s,r,o,a,l,c,u,h){const d=e.data,p=e.elementSize,m=t.boundingSphereRadius,f=F2,v=V2,C=D2;gt.pointToLocalFrame(s,o,i,C);let g=Math.floor((C.x-m)/p)-1,E=Math.ceil((C.x+m)/p)+1,T=Math.floor((C.y-m)/p)-1,k=Math.ceil((C.y+m)/p)+1;if(E<0||k<0||g>d.length||T>d[0].length)return;g<0&&(g=0),E<0&&(E=0),T<0&&(T=0),k<0&&(k=0),g>=d.length&&(g=d.length-1),E>=d.length&&(E=d.length-1),k>=d[0].length&&(k=d[0].length-1),T>=d[0].length&&(T=d[0].length-1);const P=[];e.getRectMinMax(g,T,E,k,P);const R=P[0],_=P[1];if(!(C.z-m>_||C.z+m<R))for(let w=g;w<E;w++)for(let b=T;b<k;b++){let I=!1;if(e.getConvexTrianglePillar(w,b,!1),gt.pointToWorldFrame(s,o,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(I=this.convexConvex(t,e.pillarConvex,i,f,r,o,a,l,null,null,h,v,null)),h&&I||(e.getConvexTrianglePillar(w,b,!0),gt.pointToWorldFrame(s,o,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(I=this.convexConvex(t,e.pillarConvex,i,f,r,o,a,l,null,null,h,v,null)),h&&I))return!0}}sphereParticle(t,e,i,s,r,o,a,l,c,u,h){const d=B2;if(d.set(0,0,1),s.vsub(i,d),d.lengthSquared()<=t.radius*t.radius){if(h)return!0;const m=this.createContactEquation(l,a,e,t,c,u);d.normalize(),m.rj.copy(d),m.rj.scale(t.radius,m.rj),m.ni.copy(d),m.ni.negate(m.ni),m.ri.set(0,0,0),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult)}}planeParticle(t,e,i,s,r,o,a,l,c,u,h){const d=R2;d.set(0,0,1),a.quaternion.vmult(d,d);const p=k2;if(s.vsub(a.position,p),d.dot(p)<=0){if(h)return!0;const f=this.createContactEquation(l,a,e,t,c,u);f.ni.copy(d),f.ni.negate(f.ni),f.ri.set(0,0,0);const v=I2;d.scale(d.dot(s),v),s.vsub(v,v),f.rj.copy(v),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}}boxParticle(t,e,i,s,r,o,a,l,c,u,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,i,s,r,o,a,l,t,e,h)}convexParticle(t,e,i,s,r,o,a,l,c,u,h){let d=-1;const p=L2,m=z2;let f=null;const v=O2;if(v.copy(s),v.vsub(i,v),r.conjugate(sd),sd.vmult(v,v),t.pointIsInside(v)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(i,r),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(r);for(let C=0,g=t.faces.length;C!==g;C++){const E=[t.worldVertices[t.faces[C][0]]],T=t.worldFaceNormals[C];s.vsub(E[0],rd);const k=-T.dot(rd);if(f===null||Math.abs(k)<Math.abs(f)){if(h)return!0;f=k,d=C,p.copy(T)}}if(d!==-1){const C=this.createContactEquation(l,a,e,t,c,u);p.scale(f,m),m.vadd(s,m),m.vsub(i,m),C.rj.copy(m),p.negate(C.ni),C.ri.set(0,0,0);const g=C.ri,E=C.rj;g.vadd(s,g),g.vsub(l.position,g),E.vadd(i,E),E.vsub(a.position,E),this.result.push(C),this.createFrictionEquationsFromContact(C,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,e,i,s,r,o,a,l,c,u,h){return this.convexHeightfield(e,t,s,i,o,r,l,a,c,u,h)}particleCylinder(t,e,i,s,r,o,a,l,c,u,h){return this.convexParticle(e,t,s,i,o,r,l,a,c,u,h)}sphereTrimesh(t,e,i,s,r,o,a,l,c,u,h){const d=qP,p=WP,m=$P,f=KP,v=YP,C=XP,g=t2,E=GP,T=jP,k=e2;gt.pointToLocalFrame(s,o,i,v);const P=t.radius;g.lowerBound.set(v.x-P,v.y-P,v.z-P),g.upperBound.set(v.x+P,v.y+P,v.z+P),e.getTrianglesInAABB(g,k);const R=HP,_=t.radius*t.radius;for(let z=0;z<k.length;z++)for(let F=0;F<3;F++)if(e.getVertex(e.indices[k[z]*3+F],R),R.vsub(v,T),T.lengthSquared()<=_){if(E.copy(R),gt.pointToWorldFrame(s,o,E,R),R.vsub(i,T),h)return!0;let V=this.createContactEquation(a,l,t,e,c,u);V.ni.copy(T),V.ni.normalize(),V.ri.copy(V.ni),V.ri.scale(t.radius,V.ri),V.ri.vadd(i,V.ri),V.ri.vsub(a.position,V.ri),V.rj.copy(R),V.rj.vsub(l.position,V.rj),this.result.push(V),this.createFrictionEquationsFromContact(V,this.frictionResult)}for(let z=0;z<k.length;z++)for(let F=0;F<3;F++){e.getVertex(e.indices[k[z]*3+F],d),e.getVertex(e.indices[k[z]*3+(F+1)%3],p),p.vsub(d,m),v.vsub(p,C);const V=C.dot(m);v.vsub(d,C);let L=C.dot(m);if(L>0&&V<0&&(v.vsub(d,C),f.copy(m),f.normalize(),L=C.dot(f),f.scale(L,C),C.vadd(d,C),C.distanceTo(v)<t.radius)){if(h)return!0;const $=this.createContactEquation(a,l,t,e,c,u);C.vsub(v,$.ni),$.ni.normalize(),$.ni.scale(t.radius,$.ri),$.ri.vadd(i,$.ri),$.ri.vsub(a.position,$.ri),gt.pointToWorldFrame(s,o,C,C),C.vsub(l.position,$.rj),gt.vectorToWorldFrame(o,$.ni,$.ni),gt.vectorToWorldFrame(o,$.ri,$.ri),this.result.push($),this.createFrictionEquationsFromContact($,this.frictionResult)}}const w=ZP,b=QP,I=JP,B=UP;for(let z=0,F=k.length;z!==F;z++){e.getTriangleVertices(k[z],w,b,I),e.getNormal(k[z],B),v.vsub(w,C);let V=C.dot(B);if(B.scale(V,C),v.vsub(C,C),V=C.distanceTo(v),$t.pointInTriangle(C,w,b,I)&&V<t.radius){if(h)return!0;let L=this.createContactEquation(a,l,t,e,c,u);C.vsub(v,L.ni),L.ni.normalize(),L.ni.scale(t.radius,L.ri),L.ri.vadd(i,L.ri),L.ri.vsub(a.position,L.ri),gt.pointToWorldFrame(s,o,C,C),C.vsub(l.position,L.rj),gt.vectorToWorldFrame(o,L.ni,L.ni),gt.vectorToWorldFrame(o,L.ri,L.ri),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}}k.length=0}planeTrimesh(t,e,i,s,r,o,a,l,c,u,h){const d=new x,p=FP;p.set(0,0,1),r.vmult(p,p);for(let m=0;m<e.vertices.length/3;m++){e.getVertex(m,d);const f=new x;f.copy(d),gt.pointToWorldFrame(s,o,f,d);const v=VP;if(d.vsub(i,v),p.dot(v)<=0){if(h)return!0;const g=this.createContactEquation(a,l,t,e,c,u);g.ni.copy(p);const E=NP;p.scale(v.dot(p),E),d.vsub(E,E),g.ri.copy(E),g.ri.vsub(a.position,g.ri),g.rj.copy(d),g.rj.vsub(l.position,g.rj),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult)}}}}const Ci=new x,Qi=new x,Ji=new x,OP=new x,LP=new x,zP=new Vt,DP=new Vt,FP=new x,VP=new x,NP=new x,UP=new x,jP=new x;new x;const HP=new x,GP=new x,qP=new x,WP=new x,$P=new x,KP=new x,YP=new x,XP=new x,ZP=new x,QP=new x,JP=new x,t2=new Fe,e2=[],Xr=new x,id=new x,n2=new x,i2=new x,s2=new x;function r2(n,t,e){let i=null;const s=n.length;for(let r=0;r!==s;r++){const o=n[r],a=n2;n[(r+1)%s].vsub(o,a);const l=i2;a.cross(t,l);const c=s2;e.vsub(o,c);const u=l.dot(c);if(i===null||u>0&&i===!0||u<=0&&i===!1){i===null&&(i=u>0);continue}else return!1}return!0}const Zr=new x,o2=new x,a2=new x,l2=new x,c2=[new x,new x,new x,new x,new x,new x],u2=new x,h2=new x,d2=new x,p2=new x,f2=new x,m2=new x,v2=new x,g2=new x,_2=new x,b2=new x,w2=new x,y2=new x,x2=new x,C2=new x;new x;new x;const E2=new x,S2=new x,P2=new x,T2=new x,M2=new x,A2=new x,R2=new x,k2=new x,I2=new x,B2=new x,sd=new Vt,O2=new x;new x;const L2=new x,rd=new x,z2=new x,D2=new x,F2=new x,V2=[0],N2=new x,U2=new x;class od{constructor(){this.current=[],this.previous=[]}getKey(t,e){if(e<t){const i=e;e=t,t=i}return t<<16|e}set(t,e){const i=this.getKey(t,e),s=this.current;let r=0;for(;i>s[r];)r++;if(i!==s[r]){for(let o=s.length-1;o>=r;o--)s[o+1]=s[o];s[r]=i}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,e){const i=this.current,s=this.previous,r=i.length,o=s.length;let a=0;for(let l=0;l<r;l++){let c=!1;const u=i[l];for(;u>s[a];)a++;c=u===s[a],c||ad(t,u)}a=0;for(let l=0;l<o;l++){let c=!1;const u=s[l];for(;u>i[a];)a++;c=i[a]===u,c||ad(e,u)}}}function ad(n,t){n.push((t&4294901760)>>16,t&65535)}const Ua=(n,t)=>n<t?`${n}-${t}`:`${t}-${n}`;class j2{constructor(){this.data={keys:[]}}get(t,e){const i=Ua(t,e);return this.data[i]}set(t,e,i){const s=Ua(t,e);this.get(t,e)||this.data.keys.push(s),this.data[s]=i}delete(t,e){const i=Ua(t,e),s=this.data.keys.indexOf(i);s!==-1&&this.data.keys.splice(s,1),delete this.data[i]}reset(){const t=this.data,e=t.keys;for(;e.length>0;){const i=e.pop();delete t[i]}}}class wT extends Hm{constructor(t){t===void 0&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=t.quatNormalizeSkip!==void 0?t.quatNormalizeSkip:0,this.quatNormalizeFast=t.quatNormalizeFast!==void 0?t.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new x,t.gravity&&this.gravity.copy(t.gravity),t.frictionGravity&&(this.frictionGravity=new x,this.frictionGravity.copy(t.frictionGravity)),this.broadphase=t.broadphase!==void 0?t.broadphase:new bS,this.bodies=[],this.hasActiveBodies=!1,this.solver=t.solver!==void 0?t.solver:new TP,this.constraints=[],this.narrowphase=new BP(this),this.collisionMatrix=new Uh,this.collisionMatrixPrevious=new Uh,this.bodyOverlapKeeper=new od,this.shapeOverlapKeeper=new od,this.contactmaterials=[],this.contactMaterialTable=new j2,this.defaultMaterial=new ta("default"),this.defaultContactMaterial=new Jo(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,e){return this.contactMaterialTable.get(t.id,e.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const e=this.constraints.indexOf(t);e!==-1&&this.constraints.splice(e,1)}rayTest(t,e,i){i instanceof Er?this.raycastClosest(t,e,{skipBackfaces:!0},i):this.raycastAll(t,e,{skipBackfaces:!0},i)}raycastAll(t,e,i,s){return i===void 0&&(i={}),i.mode=$t.ALL,i.from=t,i.to=e,i.callback=s,ja.intersectWorld(this,i)}raycastAny(t,e,i,s){return i===void 0&&(i={}),i.mode=$t.ANY,i.from=t,i.to=e,i.result=s,ja.intersectWorld(this,i)}raycastClosest(t,e,i,s){return i===void 0&&(i={}),i.mode=$t.CLOSEST,i.from=t,i.to=e,i.result=s,ja.intersectWorld(this,i)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof it&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const e=this.bodies.length-1,i=this.bodies,s=i.indexOf(t);if(s!==-1){i.splice(s,1);for(let r=0;r!==i.length;r++)i[r].index=r;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const e=this.bodies;for(let i=0;i<e.length;i++){const s=e[i].shapes;for(let r=0;r<s.length;r++){const o=s[r];if(o.id===t)return o}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const e=this.contactmaterials.indexOf(t);e!==-1&&(this.contactmaterials.splice(e,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,e){t===void 0&&(t=1/60),e===void 0&&(e=10);const i=Zt.now()/1e3;if(!this.lastCallTime)this.step(t,void 0,e);else{const s=i-this.lastCallTime;this.step(t,s,e)}this.lastCallTime=i}step(t,e,i){if(i===void 0&&(i=10),e===void 0)this.internalStep(t),this.time+=t;else{this.accumulator+=e;const s=Zt.now();let r=0;for(;this.accumulator>=t&&r<i&&(this.internalStep(t),this.accumulator-=t,r++,!(Zt.now()-s>t*1e3)););this.accumulator=this.accumulator%t;const o=this.accumulator/t;for(let a=0;a!==this.bodies.length;a++){const l=this.bodies[a];l.previousPosition.lerp(l.position,o,l.interpolatedPosition),l.previousQuaternion.slerp(l.quaternion,o,l.interpolatedQuaternion),l.previousQuaternion.normalize()}this.time+=e}}internalStep(t){this.dt=t;const e=this.contacts,i=$2,s=K2,r=this.bodies.length,o=this.bodies,a=this.solver,l=this.gravity,c=this.doProfiling,u=this.profile,h=it.DYNAMIC;let d=-1/0;const p=this.constraints,m=W2;l.length();const f=l.x,v=l.y,C=l.z;let g=0;for(c&&(d=Zt.now()),g=0;g!==r;g++){const z=o[g];if(z.type===h){const F=z.force,V=z.mass;F.x+=V*f,F.y+=V*v,F.z+=V*C}}for(let z=0,F=this.subsystems.length;z!==F;z++)this.subsystems[z].update();c&&(d=Zt.now()),i.length=0,s.length=0,this.broadphase.collisionPairs(this,i,s),c&&(u.broadphase=Zt.now()-d);let E=p.length;for(g=0;g!==E;g++){const z=p[g];if(!z.collideConnected)for(let F=i.length-1;F>=0;F-=1)(z.bodyA===i[F]&&z.bodyB===s[F]||z.bodyB===i[F]&&z.bodyA===s[F])&&(i.splice(F,1),s.splice(F,1))}this.collisionMatrixTick(),c&&(d=Zt.now());const T=q2,k=e.length;for(g=0;g!==k;g++)T.push(e[g]);e.length=0;const P=this.frictionEquations.length;for(g=0;g!==P;g++)m.push(this.frictionEquations[g]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,s,this,e,T,this.frictionEquations,m),c&&(u.narrowphase=Zt.now()-d),c&&(d=Zt.now()),g=0;g<this.frictionEquations.length;g++)a.addEquation(this.frictionEquations[g]);const R=e.length;for(let z=0;z!==R;z++){const F=e[z],V=F.bi,L=F.bj,U=F.si,$=F.sj;let Z;if(V.material&&L.material?Z=this.getContactMaterial(V.material,L.material)||this.defaultContactMaterial:Z=this.defaultContactMaterial,Z.friction,V.material&&L.material&&(V.material.friction>=0&&L.material.friction>=0&&V.material.friction*L.material.friction,V.material.restitution>=0&&L.material.restitution>=0&&(F.restitution=V.material.restitution*L.material.restitution)),a.addEquation(F),V.allowSleep&&V.type===it.DYNAMIC&&V.sleepState===it.SLEEPING&&L.sleepState===it.AWAKE&&L.type!==it.STATIC){const nt=L.velocity.lengthSquared()+L.angularVelocity.lengthSquared(),ot=L.sleepSpeedLimit**2;nt>=ot*2&&(V.wakeUpAfterNarrowphase=!0)}if(L.allowSleep&&L.type===it.DYNAMIC&&L.sleepState===it.SLEEPING&&V.sleepState===it.AWAKE&&V.type!==it.STATIC){const nt=V.velocity.lengthSquared()+V.angularVelocity.lengthSquared(),ot=V.sleepSpeedLimit**2;nt>=ot*2&&(L.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(V,L,!0),this.collisionMatrixPrevious.get(V,L)||(Ns.body=L,Ns.contact=F,V.dispatchEvent(Ns),Ns.body=V,L.dispatchEvent(Ns)),this.bodyOverlapKeeper.set(V.id,L.id),this.shapeOverlapKeeper.set(U.id,$.id)}for(this.emitContactEvents(),c&&(u.makeContactConstraints=Zt.now()-d,d=Zt.now()),g=0;g!==r;g++){const z=o[g];z.wakeUpAfterNarrowphase&&(z.wakeUp(),z.wakeUpAfterNarrowphase=!1)}for(E=p.length,g=0;g!==E;g++){const z=p[g];z.update();for(let F=0,V=z.equations.length;F!==V;F++){const L=z.equations[F];a.addEquation(L)}}a.solve(t,this),c&&(u.solve=Zt.now()-d),a.removeAllEquations();const _=Math.pow;for(g=0;g!==r;g++){const z=o[g];if(z.type&h){const F=_(1-z.linearDamping,t),V=z.velocity;V.scale(F,V);const L=z.angularVelocity;if(L){const U=_(1-z.angularDamping,t);L.scale(U,L)}}}this.dispatchEvent(G2),c&&(d=Zt.now());const b=this.stepnumber%(this.quatNormalizeSkip+1)===0,I=this.quatNormalizeFast;for(g=0;g!==r;g++)o[g].integrate(t,b,I);this.clearForces(),this.broadphase.dirty=!0,c&&(u.integrate=Zt.now()-d),this.stepnumber+=1,this.dispatchEvent(H2);let B=!0;if(this.allowSleep)for(B=!1,g=0;g!==r;g++){const z=o[g];z.sleepTick(this.time),z.sleepState!==it.SLEEPING&&(B=!0)}this.hasActiveBodies=B}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),e=this.hasAnyEventListener("endContact");if((t||e)&&this.bodyOverlapKeeper.getDiff(Sn,Pn),t){for(let r=0,o=Sn.length;r<o;r+=2)Us.bodyA=this.getBodyById(Sn[r]),Us.bodyB=this.getBodyById(Sn[r+1]),this.dispatchEvent(Us);Us.bodyA=Us.bodyB=null}if(e){for(let r=0,o=Pn.length;r<o;r+=2)js.bodyA=this.getBodyById(Pn[r]),js.bodyB=this.getBodyById(Pn[r+1]),this.dispatchEvent(js);js.bodyA=js.bodyB=null}Sn.length=Pn.length=0;const i=this.hasAnyEventListener("beginShapeContact"),s=this.hasAnyEventListener("endShapeContact");if((i||s)&&this.shapeOverlapKeeper.getDiff(Sn,Pn),i){for(let r=0,o=Sn.length;r<o;r+=2){const a=this.getShapeById(Sn[r]),l=this.getShapeById(Sn[r+1]);Tn.shapeA=a,Tn.shapeB=l,a&&(Tn.bodyA=a.body),l&&(Tn.bodyB=l.body),this.dispatchEvent(Tn)}Tn.bodyA=Tn.bodyB=Tn.shapeA=Tn.shapeB=null}if(s){for(let r=0,o=Pn.length;r<o;r+=2){const a=this.getShapeById(Pn[r]),l=this.getShapeById(Pn[r+1]);Mn.shapeA=a,Mn.shapeB=l,a&&(Mn.bodyA=a.body),l&&(Mn.bodyB=l.body),this.dispatchEvent(Mn)}Mn.bodyA=Mn.bodyB=Mn.shapeA=Mn.shapeB=null}}clearForces(){const t=this.bodies,e=t.length;for(let i=0;i!==e;i++){const s=t[i];s.force,s.torque,s.force.set(0,0,0),s.torque.set(0,0,0)}}}new Fe;const ja=new $t,Zt=globalThis.performance||{};if(!Zt.now){let n=Date.now();Zt.timing&&Zt.timing.navigationStart&&(n=Zt.timing.navigationStart),Zt.now=()=>Date.now()-n}new x;const H2={type:"postStep"},G2={type:"preStep"},Ns={type:it.COLLIDE_EVENT_NAME,body:null,contact:null},q2=[],W2=[],$2=[],K2=[],Sn=[],Pn=[],Us={type:"beginContact",bodyA:null,bodyB:null},js={type:"endContact",bodyA:null,bodyB:null},Tn={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Mn={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};function yT(n,t,e){let{color:i=65280,scale:s=1,onInit:r,onUpdate:o}=e===void 0?{}:e;const a=[],l=new av({color:i??65280,wireframe:!0}),c=new x,u=new x,h=new x,d=new Vt,p=new $c(1),m=new Kc(1,1,1),f=new Yc(10,10,10,10);f.translate(0,0,1e-4);function v(_){const w=new to,b=[];for(let B=0;B<_.vertices.length;B++){const z=_.vertices[B];b.push(z.x,z.y,z.z)}w.setAttribute("position",new ea(b,3));const I=[];for(let B=0;B<_.faces.length;B++){const z=_.faces[B],F=z[0];for(let V=1;V<z.length-1;V++){const L=z[V],U=z[V+1];I.push(F,L,U)}}return w.setIndex(I),w.computeBoundingSphere(),w.computeVertexNormals(),w}function C(_){const w=new to,b=[],I=c,B=u,z=h;for(let F=0;F<_.indices.length/3;F++)_.getTriangleVertices(F,I,B,z),b.push(I.x,I.y,I.z),b.push(B.x,B.y,B.z),b.push(z.x,z.y,z.z);return w.setAttribute("position",new ea(b,3)),w.computeBoundingSphere(),w.computeVertexNormals(),w}function g(_){const w=new to,b=_.elementSize||1,I=_.data.flatMap((z,F)=>z.flatMap((V,L)=>[F*b,L*b,V])),B=[];for(let z=0;z<_.data.length-1;z++)for(let F=0;F<_.data[z].length-1;F++){const V=_.data[z].length,L=z*V+F;B.push(L+1,L+V,L+V+1),B.push(L+V,L+1,L)}return w.setIndex(B),w.setAttribute("position",new ea(I,3)),w.computeBoundingSphere(),w.computeVertexNormals(),w}function E(_){let w=new An;const{SPHERE:b,BOX:I,PLANE:B,CYLINDER:z,CONVEXPOLYHEDRON:F,TRIMESH:V,HEIGHTFIELD:L}=et.types;switch(_.type){case b:{w=new An(p,l);break}case I:{w=new An(m,l);break}case B:{w=new An(f,l);break}case z:{const U=new lv(_.radiusTop,_.radiusBottom,_.height,_.numSegments);w=new An(U,l),_.geometryId=U.id;break}case F:{const U=v(_);w=new An(U,l),_.geometryId=U.id;break}case V:{const U=C(_);w=new An(U,l),_.geometryId=U.id;break}case L:{const U=g(_);w=new An(U,l),_.geometryId=U.id;break}}return n.add(w),w}function T(_,w){const{SPHERE:b,BOX:I,PLANE:B,CYLINDER:z,CONVEXPOLYHEDRON:F,TRIMESH:V,HEIGHTFIELD:L}=et.types;switch(w.type){case b:{const{radius:U}=w;_.scale.set(U*s,U*s,U*s);break}case I:{_.scale.copy(w.halfExtents),_.scale.multiplyScalar(2*s);break}case B:break;case z:{_.scale.set(1*s,1*s,1*s);break}case F:{_.scale.set(1*s,1*s,1*s);break}case V:{_.scale.copy(w.scale).multiplyScalar(s);break}case L:{_.scale.set(1*s,1*s,1*s);break}}}function k(_,w){if(!_)return!1;const{geometry:b}=_;return b instanceof $c&&w.type===et.types.SPHERE||b instanceof Kc&&w.type===et.types.BOX||b instanceof Yc&&w.type===et.types.PLANE||b.id===w.geometryId&&w.type===et.types.CYLINDER||b.id===w.geometryId&&w.type===et.types.CONVEXPOLYHEDRON||b.id===w.geometryId&&w.type===et.types.TRIMESH||b.id===w.geometryId&&w.type===et.types.HEIGHTFIELD}function P(_,w){let b=a[_],I=!1;return k(b,w)||(b&&n.remove(b),a[_]=b=E(w),I=!0),T(b,w),I}function R(){const _=a,w=c,b=d;let I=0;for(const B of t.bodies)for(let z=0;z!==B.shapes.length;z++){const F=B.shapes[z],V=P(I,F),L=_[I];L&&(B.quaternion.vmult(B.shapeOffsets[z],w),B.position.vadd(w,w),B.quaternion.mult(B.shapeOrientations[z],b),L.position.copy(w),L.quaternion.copy(b),V&&r instanceof Function&&r(B,L,F),!V&&o instanceof Function&&o(B,L,F)),I++}for(let B=I;B<_.length;B++){const z=_[B];z&&n.remove(z)}_.length=I}return{update:R}}const Qm=Math.sqrt(5),Y2=(Qm-1)/4,ee=(5-Qm)/20,Qr=n=>Math.floor(n)|0,Jr=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function xT(n=Math.random){const t=X2(n),e=new Float64Array(t).map(o=>Jr[o%32*4]),i=new Float64Array(t).map(o=>Jr[o%32*4+1]),s=new Float64Array(t).map(o=>Jr[o%32*4+2]),r=new Float64Array(t).map(o=>Jr[o%32*4+3]);return function(a,l,c,u){let h,d,p,m,f;const v=(a+l+c+u)*Y2,C=Qr(a+v),g=Qr(l+v),E=Qr(c+v),T=Qr(u+v),k=(C+g+E+T)*ee,P=C-k,R=g-k,_=E-k,w=T-k,b=a-P,I=l-R,B=c-_,z=u-w;let F=0,V=0,L=0,U=0;b>I?F++:V++,b>B?F++:L++,b>z?F++:U++,I>B?V++:L++,I>z?V++:U++,B>z?L++:U++;const $=F>=3?1:0,Z=V>=3?1:0,nt=L>=3?1:0,ot=U>=3?1:0,J=F>=2?1:0,It=V>=2?1:0,Et=L>=2?1:0,zt=U>=2?1:0,Dt=F>=1?1:0,q=V>=1?1:0,j=L>=1?1:0,y=U>=1?1:0,A=b-$+ee,D=I-Z+ee,S=B-nt+ee,M=z-ot+ee,O=b-J+2*ee,N=I-It+2*ee,H=B-Et+2*ee,G=z-zt+2*ee,X=b-Dt+3*ee,Y=I-q+3*ee,K=B-j+3*ee,W=z-y+3*ee,tt=b-1+4*ee,Q=I-1+4*ee,st=B-1+4*ee,rt=z-1+4*ee,ct=C&255,vt=g&255,pt=E&255,Xt=T&255;let Wt=.6-b*b-I*I-B*B-z*z;if(Wt<0)h=0;else{const ht=ct+t[vt+t[pt+t[Xt]]];Wt*=Wt,h=Wt*Wt*(e[ht]*b+i[ht]*I+s[ht]*B+r[ht]*z)}let ne=.6-A*A-D*D-S*S-M*M;if(ne<0)d=0;else{const ht=ct+$+t[vt+Z+t[pt+nt+t[Xt+ot]]];ne*=ne,d=ne*ne*(e[ht]*A+i[ht]*D+s[ht]*S+r[ht]*M)}let ie=.6-O*O-N*N-H*H-G*G;if(ie<0)p=0;else{const ht=ct+J+t[vt+It+t[pt+Et+t[Xt+zt]]];ie*=ie,p=ie*ie*(e[ht]*O+i[ht]*N+s[ht]*H+r[ht]*G)}let $e=.6-X*X-Y*Y-K*K-W*W;if($e<0)m=0;else{const ht=ct+Dt+t[vt+q+t[pt+j+t[Xt+y]]];$e*=$e,m=$e*$e*(e[ht]*X+i[ht]*Y+s[ht]*K+r[ht]*W)}let Hn=.6-tt*tt-Q*Q-st*st-rt*rt;if(Hn<0)f=0;else{const ht=ct+1+t[vt+1+t[pt+1+t[Xt+1]]];Hn*=Hn,f=Hn*Hn*(e[ht]*tt+i[ht]*Q+s[ht]*st+r[ht]*rt)}return 27*(h+d+p+m+f)}}function X2(n){const e=new Uint8Array(512);for(let i=0;i<512/2;i++)e[i]=i;for(let i=0;i<512/2-1;i++){const s=i+~~(n()*(256-i)),r=e[i];e[i]=e[s],e[s]=r}for(let i=256;i<512;i++)e[i]=e[i-256];return e}export{sT as A,iT as B,yT as C,Jo as D,Fc as E,In as F,it as G,_T as H,bT as I,et as J,Nd as K,lT as L,ta as M,uT as N,cT as O,vT as P,Vt as Q,gT as R,Ws as S,dt as T,hT as U,x as V,wT as W,mT as a,ag as b,eT as c,bp as d,yv as e,qg as f,aT as g,Q2 as h,Hg as i,oT as j,xT as k,Hv as l,Yd as m,tT as n,dT as o,Il as p,Bl as q,Fo as r,fT as s,pT as t,as as u,Ey as v,tg as w,J2 as x,nT as y,rT as z};
