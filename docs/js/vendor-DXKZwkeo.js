import{V as xt,U as Hi,S as ct,D as Vv,a as Uv,b as jv,c as Hv,W as wi,d as Ie,B as $o,e as uu,C as Gv,M as On,L as To,f as Qr,g as Jr,h as Zi,F as qv,E as Gl,i as zd,N as Dd,R as Fd,j as Bs,P as Wv,k as vo,l as hu,m as Nd,T as Vd,n as $v,o as du,p as Kv,q as pu,r as fu,s as mu,t as Yv,u as ga}from"./threejs-X_Qec1pD.js";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ql(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Be={},ds=[],yn=()=>{},Xv=()=>!1,Ko=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Wl=n=>n.startsWith("onUpdate:"),mt=Object.assign,$l=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Zv=Object.prototype.hasOwnProperty,Te=(n,e)=>Zv.call(n,e),ae=Array.isArray,ps=n=>Yo(n)==="[object Map]",Ud=n=>Yo(n)==="[object Set]",le=n=>typeof n=="function",$e=n=>typeof n=="string",yi=n=>typeof n=="symbol",Fe=n=>n!==null&&typeof n=="object",jd=n=>(Fe(n)||le(n))&&le(n.then)&&le(n.catch),Hd=Object.prototype.toString,Yo=n=>Hd.call(n),Qv=n=>Yo(n).slice(8,-1),Gd=n=>Yo(n)==="[object Object]",Kl=n=>$e(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,sr=ql(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xo=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Jv=/-(\w)/g,Yt=Xo(n=>n.replace(Jv,(e,t)=>t?t.toUpperCase():"")),eg=/\B([A-Z])/g,Qi=Xo(n=>n.replace(eg,"-$1").toLowerCase()),Zo=Xo(n=>n.charAt(0).toUpperCase()+n.slice(1)),_a=Xo(n=>n?`on${Zo(n)}`:""),di=(n,e)=>!Object.is(n,e),ba=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},qd=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},tg=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let vu;const Qo=()=>vu||(vu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yl(n){if(ae(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=$e(i)?rg(i):Yl(i);if(s)for(const r in s)e[r]=s[r]}return e}else if($e(n)||Fe(n))return n}const ng=/;(?![^(]*\))/g,ig=/:([^]+)/,sg=/\/\*[^]*?\*\//g;function rg(n){const e={};return n.replace(sg,"").split(ng).forEach(t=>{if(t){const i=t.split(ig);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Xl(n){let e="";if($e(n))e=n;else if(ae(n))for(let t=0;t<n.length;t++){const i=Xl(n[t]);i&&(e+=i+" ")}else if(Fe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const og="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ag=ql(og);function Wd(n){return!!n||n===""}const $d=n=>!!(n&&n.__v_isRef===!0),lg=n=>$e(n)?n:n==null?"":ae(n)||Fe(n)&&(n.toString===Hd||!le(n.toString))?$d(n)?lg(n.value):JSON.stringify(n,Kd,2):String(n),Kd=(n,e)=>$d(e)?Kd(n,e.value):ps(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s],r)=>(t[wa(i,r)+" =>"]=s,t),{})}:Ud(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>wa(t))}:yi(e)?wa(e):Fe(e)&&!ae(e)&&!Gd(e)?String(e):e,wa=(n,e="")=>{var t;return yi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kt;class cg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kt,!e&&kt&&(this.index=(kt.scopes||(kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=kt;try{return kt=this,e()}finally{kt=t}}}on(){kt=this}off(){kt=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function ug(){return kt}let ke;const ya=new WeakSet;class Yd{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kt&&kt.active&&kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ya.has(this)&&(ya.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Zd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gu(this),Qd(this);const e=ke,t=sn;ke=this,sn=!0;try{return this.fn()}finally{Jd(this),ke=e,sn=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Jl(e);this.deps=this.depsTail=void 0,gu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ya.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ol(this)&&this.run()}get dirty(){return ol(this)}}let Xd=0,rr,or;function Zd(n,e=!1){if(n.flags|=8,e){n.next=or,or=n;return}n.next=rr,rr=n}function Zl(){Xd++}function Ql(){if(--Xd>0)return;if(or){let e=or;for(or=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;rr;){let e=rr;for(rr=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function Qd(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Jd(n){let e,t=n.depsTail,i=t;for(;i;){const s=i.prevDep;i.version===-1?(i===t&&(t=s),Jl(i),hg(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=e,n.depsTail=t}function ol(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ep(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function ep(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===vr))return;n.globalVersion=vr;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!ol(n)){n.flags&=-3;return}const t=ke,i=sn;ke=n,sn=!0;try{Qd(n);const s=n.fn(n._value);(e.version===0||di(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{ke=t,sn=i,Jd(n),n.flags&=-3}}function Jl(n,e=!1){const{dep:t,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),t.subs===n&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Jl(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function hg(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let sn=!0;const tp=[];function xi(){tp.push(sn),sn=!1}function Ci(){const n=tp.pop();sn=n===void 0?!0:n}function gu(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ke;ke=void 0;try{e()}finally{ke=t}}}let vr=0;class dg{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ec{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ke||!sn||ke===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ke)t=this.activeLink=new dg(ke,this),ke.deps?(t.prevDep=ke.depsTail,ke.depsTail.nextDep=t,ke.depsTail=t):ke.deps=ke.depsTail=t,np(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=ke.depsTail,t.nextDep=void 0,ke.depsTail.nextDep=t,ke.depsTail=t,ke.deps===t&&(ke.deps=i)}return t}trigger(e){this.version++,vr++,this.notify(e)}notify(e){Zl();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Ql()}}}function np(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)np(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const al=new WeakMap,zi=Symbol(""),ll=Symbol(""),gr=Symbol("");function at(n,e,t){if(sn&&ke){let i=al.get(n);i||al.set(n,i=new Map);let s=i.get(t);s||(i.set(t,s=new ec),s.map=i,s.key=t),s.track()}}function Nn(n,e,t,i,s,r){const o=al.get(n);if(!o){vr++;return}const a=l=>{l&&l.trigger()};if(Zl(),e==="clear")o.forEach(a);else{const l=ae(n),c=l&&Kl(t);if(l&&t==="length"){const u=Number(i);o.forEach((h,d)=>{(d==="length"||d===gr||!yi(d)&&d>=u)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(gr)),e){case"add":l?c&&a(o.get("length")):(a(o.get(zi)),ps(n)&&a(o.get(ll)));break;case"delete":l||(a(o.get(zi)),ps(n)&&a(o.get(ll)));break;case"set":ps(n)&&a(o.get(zi));break}}Ql()}function ns(n){const e=Pe(n);return e===n?e:(at(e,"iterate",gr),Kt(n)?e:e.map(lt))}function Jo(n){return at(n=Pe(n),"iterate",gr),n}const pg={__proto__:null,[Symbol.iterator](){return xa(this,Symbol.iterator,lt)},concat(...n){return ns(this).concat(...n.map(e=>ae(e)?ns(e):e))},entries(){return xa(this,"entries",n=>(n[1]=lt(n[1]),n))},every(n,e){return Tn(this,"every",n,e,void 0,arguments)},filter(n,e){return Tn(this,"filter",n,e,t=>t.map(lt),arguments)},find(n,e){return Tn(this,"find",n,e,lt,arguments)},findIndex(n,e){return Tn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Tn(this,"findLast",n,e,lt,arguments)},findLastIndex(n,e){return Tn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Tn(this,"forEach",n,e,void 0,arguments)},includes(...n){return Ca(this,"includes",n)},indexOf(...n){return Ca(this,"indexOf",n)},join(n){return ns(this).join(n)},lastIndexOf(...n){return Ca(this,"lastIndexOf",n)},map(n,e){return Tn(this,"map",n,e,void 0,arguments)},pop(){return Ns(this,"pop")},push(...n){return Ns(this,"push",n)},reduce(n,...e){return _u(this,"reduce",n,e)},reduceRight(n,...e){return _u(this,"reduceRight",n,e)},shift(){return Ns(this,"shift")},some(n,e){return Tn(this,"some",n,e,void 0,arguments)},splice(...n){return Ns(this,"splice",n)},toReversed(){return ns(this).toReversed()},toSorted(n){return ns(this).toSorted(n)},toSpliced(...n){return ns(this).toSpliced(...n)},unshift(...n){return Ns(this,"unshift",n)},values(){return xa(this,"values",lt)}};function xa(n,e,t){const i=Jo(n),s=i[e]();return i!==n&&!Kt(n)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=t(r.value)),r}),s}const fg=Array.prototype;function Tn(n,e,t,i,s,r){const o=Jo(n),a=o!==n&&!Kt(n),l=o[e];if(l!==fg[e]){const h=l.apply(n,r);return a?lt(h):h}let c=t;o!==n&&(a?c=function(h,d){return t.call(this,lt(h),d,n)}:t.length>2&&(c=function(h,d){return t.call(this,h,d,n)}));const u=l.call(o,c,i);return a&&s?s(u):u}function _u(n,e,t,i){const s=Jo(n);let r=t;return s!==n&&(Kt(n)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,n)}):r=function(o,a,l){return t.call(this,o,lt(a),l,n)}),s[e](r,...i)}function Ca(n,e,t){const i=Pe(n);at(i,"iterate",gr);const s=i[e](...t);return(s===-1||s===!1)&&ic(t[0])?(t[0]=Pe(t[0]),i[e](...t)):s}function Ns(n,e,t=[]){xi(),Zl();const i=Pe(n)[e].apply(n,t);return Ql(),Ci(),i}const mg=ql("__proto__,__v_isRef,__isVue"),ip=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(yi));function vg(n){yi(n)||(n=String(n));const e=Pe(this);return at(e,"has",n),e.hasOwnProperty(n)}class sp{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(s?r?Pg:lp:r?ap:op).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=ae(e);if(!s){let l;if(o&&(l=pg[t]))return l;if(t==="hasOwnProperty")return vg}const a=Reflect.get(e,t,dt(e)?e:i);return(yi(t)?ip.has(t):mg(t))||(s||at(e,"get",t),r)?a:dt(a)?o&&Kl(t)?a:a.value:Fe(a)?s?up(a):ea(a):a}}class rp extends sp{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const l=Gi(r);if(!Kt(i)&&!Gi(i)&&(r=Pe(r),i=Pe(i)),!ae(e)&&dt(r)&&!dt(i))return l?!1:(r.value=i,!0)}const o=ae(e)&&Kl(t)?Number(t)<e.length:Te(e,t),a=Reflect.set(e,t,i,dt(e)?e:s);return e===Pe(s)&&(o?di(i,r)&&Nn(e,"set",t,i):Nn(e,"add",t,i)),a}deleteProperty(e,t){const i=Te(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Nn(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!yi(t)||!ip.has(t))&&at(e,"has",t),i}ownKeys(e){return at(e,"iterate",ae(e)?"length":zi),Reflect.ownKeys(e)}}class gg extends sp{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const _g=new rp,bg=new gg,wg=new rp(!0);const cl=n=>n,eo=n=>Reflect.getPrototypeOf(n);function yg(n,e,t){return function(...i){const s=this.__v_raw,r=Pe(s),o=ps(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=t?cl:e?ul:lt;return!e&&at(r,"iterate",l?ll:zi),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function to(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function xg(n,e){const t={get(s){const r=this.__v_raw,o=Pe(r),a=Pe(s);n||(di(s,a)&&at(o,"get",s),at(o,"get",a));const{has:l}=eo(o),c=e?cl:n?ul:lt;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!n&&at(Pe(s),"iterate",zi),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=Pe(r),a=Pe(s);return n||(di(s,a)&&at(o,"has",s),at(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=Pe(a),c=e?cl:n?ul:lt;return!n&&at(l,"iterate",zi),a.forEach((u,h)=>s.call(r,c(u),c(h),o))}};return mt(t,n?{add:to("add"),set:to("set"),delete:to("delete"),clear:to("clear")}:{add(s){!e&&!Kt(s)&&!Gi(s)&&(s=Pe(s));const r=Pe(this);return eo(r).has.call(r,s)||(r.add(s),Nn(r,"add",s,s)),this},set(s,r){!e&&!Kt(r)&&!Gi(r)&&(r=Pe(r));const o=Pe(this),{has:a,get:l}=eo(o);let c=a.call(o,s);c||(s=Pe(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,r),c?di(r,u)&&Nn(o,"set",s,r):Nn(o,"add",s,r),this},delete(s){const r=Pe(this),{has:o,get:a}=eo(r);let l=o.call(r,s);l||(s=Pe(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&Nn(r,"delete",s,void 0),c},clear(){const s=Pe(this),r=s.size!==0,o=s.clear();return r&&Nn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=yg(s,n,e)}),t}function tc(n,e){const t=xg(n,e);return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Te(t,s)&&s in i?t:i,s,r)}const Cg={get:tc(!1,!1)},Eg={get:tc(!1,!0)},Sg={get:tc(!0,!1)};const op=new WeakMap,ap=new WeakMap,lp=new WeakMap,Pg=new WeakMap;function Tg(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mg(n){return n.__v_skip||!Object.isExtensible(n)?0:Tg(Qv(n))}function ea(n){return Gi(n)?n:nc(n,!1,_g,Cg,op)}function cp(n){return nc(n,!1,wg,Eg,ap)}function up(n){return nc(n,!0,bg,Sg,lp)}function nc(n,e,t,i,s){if(!Fe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=Mg(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function fs(n){return Gi(n)?fs(n.__v_raw):!!(n&&n.__v_isReactive)}function Gi(n){return!!(n&&n.__v_isReadonly)}function Kt(n){return!!(n&&n.__v_isShallow)}function ic(n){return n?!!n.__v_raw:!1}function Pe(n){const e=n&&n.__v_raw;return e?Pe(e):n}function Ag(n){return!Te(n,"__v_skip")&&Object.isExtensible(n)&&qd(n,"__v_skip",!0),n}const lt=n=>Fe(n)?ea(n):n,ul=n=>Fe(n)?up(n):n;function dt(n){return n?n.__v_isRef===!0:!1}function Rg(n){return hp(n,!1)}function Ig(n){return hp(n,!0)}function hp(n,e){return dt(n)?n:new kg(n,e)}class kg{constructor(e,t){this.dep=new ec,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Pe(e),this._value=t?e:lt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Kt(e)||Gi(e);e=i?e:Pe(e),di(e,t)&&(this._rawValue=e,this._value=i?e:lt(e),this.dep.trigger())}}function ms(n){return dt(n)?n.value:n}const Bg={get:(n,e,t)=>e==="__v_raw"?n:ms(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return dt(s)&&!dt(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function dp(n){return fs(n)?n:new Proxy(n,Bg)}class Og{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ec(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return Zd(this,!0),!0}get value(){const e=this.dep.track();return ep(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Lg(n,e,t=!1){let i,s;return le(n)?i=n:(i=n.get,s=n.set),new Og(i,s,t)}const no={},Mo=new WeakMap;let Ii;function zg(n,e=!1,t=Ii){if(t){let i=Mo.get(t);i||Mo.set(t,i=[]),i.push(n)}}function Dg(n,e,t=Be){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=t,c=P=>s?P:Kt(P)||s===!1||s===0?ai(P,1):ai(P);let u,h,d,p,f=!1,m=!1;if(dt(n)?(h=()=>n.value,f=Kt(n)):fs(n)?(h=()=>c(n),f=!0):ae(n)?(m=!0,f=n.some(P=>fs(P)||Kt(P)),h=()=>n.map(P=>{if(dt(P))return P.value;if(fs(P))return c(P);if(le(P))return l?l(P,2):P()})):le(n)?e?h=l?()=>l(n,2):n:h=()=>{if(d){xi();try{d()}finally{Ci()}}const P=Ii;Ii=u;try{return l?l(n,3,[p]):n(p)}finally{Ii=P}}:h=yn,e&&s){const P=h,I=s===!0?1/0:s;h=()=>ai(P(),I)}const v=ug(),b=()=>{u.stop(),v&&v.active&&$l(v.effects,u)};if(r&&e){const P=e;e=(...I)=>{P(...I),b()}}let g=m?new Array(n.length).fill(no):no;const E=P=>{if(!(!(u.flags&1)||!u.dirty&&!P))if(e){const I=u.run();if(s||f||(m?I.some((S,R)=>di(S,g[R])):di(I,g))){d&&d();const S=Ii;Ii=u;try{const R=[I,g===no?void 0:m&&g[0]===no?[]:g,p];l?l(e,3,R):e(...R),g=I}finally{Ii=S}}}else u.run()};return a&&a(E),u=new Yd(h),u.scheduler=o?()=>o(E,!1):E,p=P=>zg(P,!1,u),d=u.onStop=()=>{const P=Mo.get(u);if(P){if(l)l(P,4);else for(const I of P)I();Mo.delete(u)}},e?i?E(!0):g=u.run():o?o(E.bind(null,!0),!0):u.run(),b.pause=u.pause.bind(u),b.resume=u.resume.bind(u),b.stop=b,b}function ai(n,e=1/0,t){if(e<=0||!Fe(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,dt(n))ai(n.value,e,t);else if(ae(n))for(let i=0;i<n.length;i++)ai(n[i],e,t);else if(Ud(n)||ps(n))n.forEach(i=>{ai(i,e,t)});else if(Gd(n)){for(const i in n)ai(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&ai(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fr(n,e,t,i){try{return i?n(...i):n()}catch(s){ta(s,e,t)}}function Cn(n,e,t,i){if(le(n)){const s=Fr(n,e,t,i);return s&&jd(s)&&s.catch(r=>{ta(r,e,t)}),s}if(ae(n)){const s=[];for(let r=0;r<n.length;r++)s.push(Cn(n[r],e,t,i));return s}}function ta(n,e,t,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,l,c)===!1)return}a=a.parent}if(r){xi(),Fr(r,null,10,[n,l,c]),Ci();return}}Fg(n,t,s,i,o)}function Fg(n,e,t,i=!0,s=!1){if(s)throw n;console.error(n)}const gt=[];let fn=-1;const vs=[];let si=null,ls=0;const pp=Promise.resolve();let Ao=null;function fp(n){const e=Ao||pp;return n?e.then(this?n.bind(this):n):e}function Ng(n){let e=fn+1,t=gt.length;for(;e<t;){const i=e+t>>>1,s=gt[i],r=_r(s);r<n||r===n&&s.flags&2?e=i+1:t=i}return e}function sc(n){if(!(n.flags&1)){const e=_r(n),t=gt[gt.length-1];!t||!(n.flags&2)&&e>=_r(t)?gt.push(n):gt.splice(Ng(e),0,n),n.flags|=1,mp()}}function mp(){Ao||(Ao=pp.then(gp))}function Vg(n){ae(n)?vs.push(...n):si&&n.id===-1?si.splice(ls+1,0,n):n.flags&1||(vs.push(n),n.flags|=1),mp()}function bu(n,e,t=fn+1){for(;t<gt.length;t++){const i=gt[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;gt.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function vp(n){if(vs.length){const e=[...new Set(vs)].sort((t,i)=>_r(t)-_r(i));if(vs.length=0,si){si.push(...e);return}for(si=e,ls=0;ls<si.length;ls++){const t=si[ls];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}si=null,ls=0}}const _r=n=>n.id==null?n.flags&2?-1:1/0:n.id;function gp(n){try{for(fn=0;fn<gt.length;fn++){const e=gt[fn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Fr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;fn<gt.length;fn++){const e=gt[fn];e&&(e.flags&=-2)}fn=-1,gt.length=0,vp(),Ao=null,(gt.length||vs.length)&&gp()}}let tn=null,_p=null;function Ro(n){const e=tn;return tn=n,_p=n&&n.type.__scopeId||null,e}function Ug(n,e=tn,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&Au(-1);const r=Ro(e);let o;try{o=n(...s)}finally{Ro(r),i._d&&Au(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Si(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(xi(),Cn(l,t,8,[n.el,a,n,e]),Ci())}}const jg=Symbol("_vte"),Hg=n=>n.__isTeleport;function rc(n,e){n.shapeFlag&6&&n.component?(n.transition=e,rc(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function bp(n,e){return le(n)?mt({name:n.name},e,{setup:n}):n}function wp(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Io(n,e,t,i,s=!1){if(ae(n)){n.forEach((f,m)=>Io(f,e&&(ae(e)?e[m]:e),t,i,s));return}if(ar(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Io(n,e,t,i.component.subTree);return}const r=i.shapeFlag&4?lc(i.component):i.el,o=s?null:r,{i:a,r:l}=n,c=e&&e.r,u=a.refs===Be?a.refs={}:a.refs,h=a.setupState,d=Pe(h),p=h===Be?()=>!1:f=>Te(d,f);if(c!=null&&c!==l&&($e(c)?(u[c]=null,p(c)&&(h[c]=null)):dt(c)&&(c.value=null)),le(l))Fr(l,a,12,[o,u]);else{const f=$e(l),m=dt(l);if(f||m){const v=()=>{if(n.f){const b=f?p(l)?h[l]:u[l]:l.value;s?ae(b)&&$l(b,r):ae(b)?b.includes(r)||b.push(r):f?(u[l]=[r],p(l)&&(h[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else f?(u[l]=o,p(l)&&(h[l]=o)):m&&(l.value=o,n.k&&(u[n.k]=o))};o?(v.id=-1,It(v,t)):v()}}}Qo().requestIdleCallback;Qo().cancelIdleCallback;const ar=n=>!!n.type.__asyncLoader,yp=n=>n.type.__isKeepAlive;function Gg(n,e){xp(n,"a",e)}function qg(n,e){xp(n,"da",e)}function xp(n,e,t=ut){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(na(e,i,t),t){let s=t.parent;for(;s&&s.parent;)yp(s.parent.vnode)&&Wg(i,e,t,s),s=s.parent}}function Wg(n,e,t,i){const s=na(e,n,i,!0);Cp(()=>{$l(i[e],s)},t)}function na(n,e,t=ut,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{xi();const a=Nr(t),l=Cn(e,t,n,o);return a(),Ci(),l});return i?s.unshift(r):s.push(r),r}}const $n=n=>(e,t=ut)=>{(!wr||n==="sp")&&na(n,(...i)=>e(...i),t)},$g=$n("bm"),Kg=$n("m"),Yg=$n("bu"),Xg=$n("u"),Zg=$n("bum"),Cp=$n("um"),Qg=$n("sp"),Jg=$n("rtg"),e0=$n("rtc");function t0(n,e=ut){na("ec",n,e)}const Ep="components";function HM(n,e){return Pp(Ep,n,!0,e)||n}const Sp=Symbol.for("v-ndc");function GM(n){return $e(n)?Pp(Ep,n,!1)||n:n||Sp}function Pp(n,e,t=!0,i=!1){const s=tn||ut;if(s){const r=s.type;{const a=G0(r,!1);if(a&&(a===e||a===Yt(e)||a===Zo(Yt(e))))return r}const o=wu(s[n]||r[n],e)||wu(s.appContext[n],e);return!o&&i?r:o}}function wu(n,e){return n&&(n[e]||n[Yt(e)]||n[Zo(Yt(e))])}function qM(n,e,t,i){let s;const r=t,o=ae(n);if(o||$e(n)){const a=o&&fs(n);let l=!1;a&&(l=!Kt(n),n=Jo(n)),s=new Array(n.length);for(let c=0,u=n.length;c<u;c++)s[c]=e(l?lt(n[c]):n[c],c,void 0,r)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,r)}else if(Fe(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(n[u],u,l,r)}}else s=[];return s}const hl=n=>n?Kp(n)?lc(n):hl(n.parent):null,lr=mt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>hl(n.parent),$root:n=>hl(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Mp(n),$forceUpdate:n=>n.f||(n.f=()=>{sc(n.update)}),$nextTick:n=>n.n||(n.n=fp.bind(n.proxy)),$watch:n=>x0.bind(n)}),Ea=(n,e)=>n!==Be&&!n.__isScriptSetup&&Te(n,e),n0={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(Ea(i,e))return o[e]=1,i[e];if(s!==Be&&Te(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&Te(c,e))return o[e]=3,r[e];if(t!==Be&&Te(t,e))return o[e]=4,t[e];dl&&(o[e]=0)}}const u=lr[e];let h,d;if(u)return e==="$attrs"&&at(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Be&&Te(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,Te(d,e))return d[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return Ea(s,e)?(s[e]=t,!0):i!==Be&&Te(i,e)?(i[e]=t,!0):Te(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!t[o]||n!==Be&&Te(n,o)||Ea(e,o)||(a=r[0])&&Te(a,o)||Te(i,o)||Te(lr,o)||Te(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Te(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function yu(n){return ae(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let dl=!0;function i0(n){const e=Mp(n),t=n.proxy,i=n.ctx;dl=!1,e.beforeCreate&&xu(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:f,activated:m,deactivated:v,beforeDestroy:b,beforeUnmount:g,destroyed:E,unmounted:P,render:I,renderTracked:S,renderTriggered:R,errorCaptured:_,serverPrefetch:y,expose:w,inheritAttrs:k,components:B,directives:L,filters:N}=e;if(c&&s0(c,i,null),o)for(const V in o){const W=o[V];le(W)&&(i[V]=W.bind(t))}if(s){const V=s.call(t,t);Fe(V)&&(n.data=ea(V))}if(dl=!0,r)for(const V in r){const W=r[V],Z=le(W)?W.bind(t,t):le(W.get)?W.get.bind(t,t):yn,ne=!le(W)&&le(W.set)?W.set.bind(t):yn,se=en({get:Z,set:ne});Object.defineProperty(i,V,{enumerable:!0,configurable:!0,get:()=>se.value,set:Q=>se.value=Q})}if(a)for(const V in a)Tp(a[V],i,t,V);if(l){const V=le(l)?l.call(t):l;Reflect.ownKeys(V).forEach(W=>{go(W,V[W])})}u&&xu(u,n,"c");function z(V,W){ae(W)?W.forEach(Z=>V(Z.bind(t))):W&&V(W.bind(t))}if(z($g,h),z(Kg,d),z(Yg,p),z(Xg,f),z(Gg,m),z(qg,v),z(t0,_),z(e0,S),z(Jg,R),z(Zg,g),z(Cp,P),z(Qg,y),ae(w))if(w.length){const V=n.exposed||(n.exposed={});w.forEach(W=>{Object.defineProperty(V,W,{get:()=>t[W],set:Z=>t[W]=Z})})}else n.exposed||(n.exposed={});I&&n.render===yn&&(n.render=I),k!=null&&(n.inheritAttrs=k),B&&(n.components=B),L&&(n.directives=L),y&&wp(n)}function s0(n,e,t=yn){ae(n)&&(n=pl(n));for(const i in n){const s=n[i];let r;Fe(s)?"default"in s?r=rn(s.from||i,s.default,!0):r=rn(s.from||i):r=rn(s),dt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function xu(n,e,t){Cn(ae(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function Tp(n,e,t,i){let s=i.includes(".")?jp(t,i):()=>t[i];if($e(n)){const r=e[n];le(r)&&_o(s,r)}else if(le(n))_o(s,n.bind(t));else if(Fe(n))if(ae(n))n.forEach(r=>Tp(r,e,t,i));else{const r=le(n.handler)?n.handler.bind(t):e[n.handler];le(r)&&_o(s,r,n)}}function Mp(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>ko(l,c,o,!0)),ko(l,e,o)),Fe(e)&&r.set(e,l),l}function ko(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&ko(n,r,t,!0),s&&s.forEach(o=>ko(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=r0[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const r0={data:Cu,props:Eu,emits:Eu,methods:er,computed:er,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:er,directives:er,watch:a0,provide:Cu,inject:o0};function Cu(n,e){return e?n?function(){return mt(le(n)?n.call(this,this):n,le(e)?e.call(this,this):e)}:e:n}function o0(n,e){return er(pl(n),pl(e))}function pl(n){if(ae(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function vt(n,e){return n?[...new Set([].concat(n,e))]:e}function er(n,e){return n?mt(Object.create(null),n,e):e}function Eu(n,e){return n?ae(n)&&ae(e)?[...new Set([...n,...e])]:mt(Object.create(null),yu(n),yu(e??{})):e}function a0(n,e){if(!n)return e;if(!e)return n;const t=mt(Object.create(null),n);for(const i in e)t[i]=vt(n[i],e[i]);return t}function Ap(){return{app:null,config:{isNativeTag:Xv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let l0=0;function c0(n,e){return function(i,s=null){le(i)||(i=mt({},i)),s!=null&&!Fe(s)&&(s=null);const r=Ap(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:l0++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:W0,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&le(u.install)?(o.add(u),u.install(c,...h)):le(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,d){if(!l){const p=c._ceVNode||zt(i,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),n(p,u,d),l=!0,c._container=u,u.__vue_app__=c,lc(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Cn(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=gs;gs=c;try{return u()}finally{gs=h}}};return c}}let gs=null;function go(n,e){if(ut){let t=ut.provides;const i=ut.parent&&ut.parent.provides;i===t&&(t=ut.provides=Object.create(i)),t[n]=e}}function rn(n,e,t=!1){const i=ut||tn;if(i||gs){const s=gs?gs._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&le(e)?e.call(i&&i.proxy):e}}const Rp={},Ip=()=>Object.create(Rp),kp=n=>Object.getPrototypeOf(n)===Rp;function u0(n,e,t,i=!1){const s={},r=Ip();n.propsDefaults=Object.create(null),Bp(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:cp(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function h0(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=Pe(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(ia(n.emitsOptions,d))continue;const p=e[d];if(l)if(Te(r,d))p!==r[d]&&(r[d]=p,c=!0);else{const f=Yt(d);s[f]=fl(l,a,f,p,n,!1)}else p!==r[d]&&(r[d]=p,c=!0)}}}else{Bp(n,e,s,r)&&(c=!0);let u;for(const h in a)(!e||!Te(e,h)&&((u=Qi(h))===h||!Te(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(s[h]=fl(l,a,h,void 0,n,!0)):delete s[h]);if(r!==a)for(const h in r)(!e||!Te(e,h))&&(delete r[h],c=!0)}c&&Nn(n.attrs,"set","")}function Bp(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(sr(l))continue;const c=e[l];let u;s&&Te(s,u=Yt(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:ia(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=Pe(t),c=a||Be;for(let u=0;u<r.length;u++){const h=r[u];t[h]=fl(s,l,h,c[h],n,!Te(c,h))}}return o}function fl(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=Te(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&le(l)){const{propsDefaults:c}=s;if(t in c)i=c[t];else{const u=Nr(s);i=c[t]=l.call(null,e),u()}}else i=l;s.ce&&s.ce._setProp(t,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Qi(t))&&(i=!0))}return i}const d0=new WeakMap;function Op(n,e,t=!1){const i=t?d0:e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!le(n)){const u=h=>{l=!0;const[d,p]=Op(h,e,!0);mt(o,d),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return Fe(n)&&i.set(n,ds),ds;if(ae(r))for(let u=0;u<r.length;u++){const h=Yt(r[u]);Su(h)&&(o[h]=Be)}else if(r)for(const u in r){const h=Yt(u);if(Su(h)){const d=r[u],p=o[h]=ae(d)||le(d)?{type:d}:mt({},d),f=p.type;let m=!1,v=!0;if(ae(f))for(let b=0;b<f.length;++b){const g=f[b],E=le(g)&&g.name;if(E==="Boolean"){m=!0;break}else E==="String"&&(v=!1)}else m=le(f)&&f.name==="Boolean";p[0]=m,p[1]=v,(m||Te(p,"default"))&&a.push(h)}}const c=[o,a];return Fe(n)&&i.set(n,c),c}function Su(n){return n[0]!=="$"&&!sr(n)}const Lp=n=>n[0]==="_"||n==="$stable",oc=n=>ae(n)?n.map(vn):[vn(n)],p0=(n,e,t)=>{if(e._n)return e;const i=Ug((...s)=>oc(e(...s)),t);return i._c=!1,i},zp=(n,e,t)=>{const i=n._ctx;for(const s in n){if(Lp(s))continue;const r=n[s];if(le(r))e[s]=p0(s,r,i);else if(r!=null){const o=oc(r);e[s]=()=>o}}},Dp=(n,e)=>{const t=oc(e);n.slots.default=()=>t},Fp=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},f0=(n,e,t)=>{const i=n.slots=Ip();if(n.vnode.shapeFlag&32){const s=e._;s?(Fp(i,e,t),t&&qd(i,"_",s,!0)):zp(e,i)}else e&&Dp(n,e)},m0=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=Be;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:Fp(s,e,t):(r=!e.$stable,zp(e,s)),o=e}else e&&(Dp(n,e),o={default:1});if(r)for(const a in s)!Lp(a)&&o[a]==null&&delete s[a]},It=A0;function v0(n){return g0(n)}function g0(n,e){const t=Qo();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=yn,insertStaticContent:f}=n,m=(T,A,O,U=null,H=null,G=null,X=void 0,Y=null,K=!!A.dynamicChildren)=>{if(T===A)return;T&&!Vs(T,A)&&(U=q(T),Q(T,H,G,!0),T=null),A.patchFlag===-2&&(K=!1,A.dynamicChildren=null);const{type:$,ref:ee,shapeFlag:J}=A;switch($){case sa:v(T,A,O,U);break;case qi:b(T,A,O,U);break;case Pa:T==null&&g(A,O,U,X);break;case Dn:B(T,A,O,U,H,G,X,Y,K);break;default:J&1?I(T,A,O,U,H,G,X,Y,K):J&6?L(T,A,O,U,H,G,X,Y,K):(J&64||J&128)&&$.process(T,A,O,U,H,G,X,Y,K,M)}ee!=null&&H&&Io(ee,T&&T.ref,G,A||T,!A)},v=(T,A,O,U)=>{if(T==null)i(A.el=a(A.children),O,U);else{const H=A.el=T.el;A.children!==T.children&&c(H,A.children)}},b=(T,A,O,U)=>{T==null?i(A.el=l(A.children||""),O,U):A.el=T.el},g=(T,A,O,U)=>{[T.el,T.anchor]=f(T.children,A,O,U,T.el,T.anchor)},E=({el:T,anchor:A},O,U)=>{let H;for(;T&&T!==A;)H=d(T),i(T,O,U),T=H;i(A,O,U)},P=({el:T,anchor:A})=>{let O;for(;T&&T!==A;)O=d(T),s(T),T=O;s(A)},I=(T,A,O,U,H,G,X,Y,K)=>{A.type==="svg"?X="svg":A.type==="math"&&(X="mathml"),T==null?S(A,O,U,H,G,X,Y,K):y(T,A,H,G,X,Y,K)},S=(T,A,O,U,H,G,X,Y)=>{let K,$;const{props:ee,shapeFlag:J,transition:re,dirs:oe}=T;if(K=T.el=o(T.type,G,ee&&ee.is,ee),J&8?u(K,T.children):J&16&&_(T.children,K,null,U,H,Sa(T,G),X,Y),oe&&Si(T,null,U,"created"),R(K,T,T.scopeId,X,U),ee){for(const be in ee)be!=="value"&&!sr(be)&&r(K,be,null,ee[be],G,U);"value"in ee&&r(K,"value",null,ee.value,G),($=ee.onVnodeBeforeMount)&&cn($,U,T)}oe&&Si(T,null,U,"beforeMount");const ce=_0(H,re);ce&&re.beforeEnter(K),i(K,A,O),(($=ee&&ee.onVnodeMounted)||ce||oe)&&It(()=>{$&&cn($,U,T),ce&&re.enter(K),oe&&Si(T,null,U,"mounted")},H)},R=(T,A,O,U,H)=>{if(O&&p(T,O),U)for(let G=0;G<U.length;G++)p(T,U[G]);if(H){let G=H.subTree;if(A===G||Gp(G.type)&&(G.ssContent===A||G.ssFallback===A)){const X=H.vnode;R(T,X,X.scopeId,X.slotScopeIds,H.parent)}}},_=(T,A,O,U,H,G,X,Y,K=0)=>{for(let $=K;$<T.length;$++){const ee=T[$]=Y?ri(T[$]):vn(T[$]);m(null,ee,A,O,U,H,G,X,Y)}},y=(T,A,O,U,H,G,X)=>{const Y=A.el=T.el;let{patchFlag:K,dynamicChildren:$,dirs:ee}=A;K|=T.patchFlag&16;const J=T.props||Be,re=A.props||Be;let oe;if(O&&Pi(O,!1),(oe=re.onVnodeBeforeUpdate)&&cn(oe,O,A,T),ee&&Si(A,T,O,"beforeUpdate"),O&&Pi(O,!0),(J.innerHTML&&re.innerHTML==null||J.textContent&&re.textContent==null)&&u(Y,""),$?w(T.dynamicChildren,$,Y,O,U,Sa(A,H),G):X||W(T,A,Y,null,O,U,Sa(A,H),G,!1),K>0){if(K&16)k(Y,J,re,O,H);else if(K&2&&J.class!==re.class&&r(Y,"class",null,re.class,H),K&4&&r(Y,"style",J.style,re.style,H),K&8){const ce=A.dynamicProps;for(let be=0;be<ce.length;be++){const me=ce[be],Qe=J[me],Ke=re[me];(Ke!==Qe||me==="value")&&r(Y,me,Qe,Ke,H,O)}}K&1&&T.children!==A.children&&u(Y,A.children)}else!X&&$==null&&k(Y,J,re,O,H);((oe=re.onVnodeUpdated)||ee)&&It(()=>{oe&&cn(oe,O,A,T),ee&&Si(A,T,O,"updated")},U)},w=(T,A,O,U,H,G,X)=>{for(let Y=0;Y<A.length;Y++){const K=T[Y],$=A[Y],ee=K.el&&(K.type===Dn||!Vs(K,$)||K.shapeFlag&70)?h(K.el):O;m(K,$,ee,null,U,H,G,X,!0)}},k=(T,A,O,U,H)=>{if(A!==O){if(A!==Be)for(const G in A)!sr(G)&&!(G in O)&&r(T,G,A[G],null,H,U);for(const G in O){if(sr(G))continue;const X=O[G],Y=A[G];X!==Y&&G!=="value"&&r(T,G,Y,X,H,U)}"value"in O&&r(T,"value",A.value,O.value,H)}},B=(T,A,O,U,H,G,X,Y,K)=>{const $=A.el=T?T.el:a(""),ee=A.anchor=T?T.anchor:a("");let{patchFlag:J,dynamicChildren:re,slotScopeIds:oe}=A;oe&&(Y=Y?Y.concat(oe):oe),T==null?(i($,O,U),i(ee,O,U),_(A.children||[],O,ee,H,G,X,Y,K)):J>0&&J&64&&re&&T.dynamicChildren?(w(T.dynamicChildren,re,O,H,G,X,Y),(A.key!=null||H&&A===H.subTree)&&Np(T,A,!0)):W(T,A,O,ee,H,G,X,Y,K)},L=(T,A,O,U,H,G,X,Y,K)=>{A.slotScopeIds=Y,T==null?A.shapeFlag&512?H.ctx.activate(A,O,U,X,K):N(A,O,U,H,G,X,K):F(T,A,K)},N=(T,A,O,U,H,G,X)=>{const Y=T.component=N0(T,U,H);if(yp(T)&&(Y.ctx.renderer=M),V0(Y,!1,X),Y.asyncDep){if(H&&H.registerDep(Y,z,X),!T.el){const K=Y.subTree=zt(qi);b(null,K,A,O)}}else z(Y,T,A,O,H,G,X)},F=(T,A,O)=>{const U=A.component=T.component;if(T0(T,A,O))if(U.asyncDep&&!U.asyncResolved){V(U,A,O);return}else U.next=A,U.update();else A.el=T.el,U.vnode=A},z=(T,A,O,U,H,G,X)=>{const Y=()=>{if(T.isMounted){let{next:J,bu:re,u:oe,parent:ce,vnode:be}=T;{const ot=Vp(T);if(ot){J&&(J.el=be.el,V(T,J,X)),ot.asyncDep.then(()=>{T.isUnmounted||Y()});return}}let me=J,Qe;Pi(T,!1),J?(J.el=be.el,V(T,J,X)):J=be,re&&ba(re),(Qe=J.props&&J.props.onVnodeBeforeUpdate)&&cn(Qe,ce,J,be),Pi(T,!0);const Ke=Tu(T),rt=T.subTree;T.subTree=Ke,m(rt,Ke,h(rt.el),q(rt),T,H,G),J.el=Ke.el,me===null&&M0(T,Ke.el),oe&&It(oe,H),(Qe=J.props&&J.props.onVnodeUpdated)&&It(()=>cn(Qe,ce,J,be),H)}else{let J;const{el:re,props:oe}=A,{bm:ce,m:be,parent:me,root:Qe,type:Ke}=T,rt=ar(A);Pi(T,!1),ce&&ba(ce),!rt&&(J=oe&&oe.onVnodeBeforeMount)&&cn(J,me,A),Pi(T,!0);{Qe.ce&&Qe.ce._injectChildStyle(Ke);const ot=T.subTree=Tu(T);m(null,ot,O,U,T,H,G),A.el=ot.el}if(be&&It(be,H),!rt&&(J=oe&&oe.onVnodeMounted)){const ot=A;It(()=>cn(J,me,ot),H)}(A.shapeFlag&256||me&&ar(me.vnode)&&me.vnode.shapeFlag&256)&&T.a&&It(T.a,H),T.isMounted=!0,A=O=U=null}};T.scope.on();const K=T.effect=new Yd(Y);T.scope.off();const $=T.update=K.run.bind(K),ee=T.job=K.runIfDirty.bind(K);ee.i=T,ee.id=T.uid,K.scheduler=()=>sc(ee),Pi(T,!0),$()},V=(T,A,O)=>{A.component=T;const U=T.vnode.props;T.vnode=A,T.next=null,h0(T,A.props,U,O),m0(T,A.children,O),xi(),bu(T),Ci()},W=(T,A,O,U,H,G,X,Y,K=!1)=>{const $=T&&T.children,ee=T?T.shapeFlag:0,J=A.children,{patchFlag:re,shapeFlag:oe}=A;if(re>0){if(re&128){ne($,J,O,U,H,G,X,Y,K);return}else if(re&256){Z($,J,O,U,H,G,X,Y,K);return}}oe&8?(ee&16&&Ee($,H,G),J!==$&&u(O,J)):ee&16?oe&16?ne($,J,O,U,H,G,X,Y,K):Ee($,H,G,!0):(ee&8&&u(O,""),oe&16&&_(J,O,U,H,G,X,Y,K))},Z=(T,A,O,U,H,G,X,Y,K)=>{T=T||ds,A=A||ds;const $=T.length,ee=A.length,J=Math.min($,ee);let re;for(re=0;re<J;re++){const oe=A[re]=K?ri(A[re]):vn(A[re]);m(T[re],oe,O,null,H,G,X,Y,K)}$>ee?Ee(T,H,G,!0,!1,J):_(A,O,U,H,G,X,Y,K,J)},ne=(T,A,O,U,H,G,X,Y,K)=>{let $=0;const ee=A.length;let J=T.length-1,re=ee-1;for(;$<=J&&$<=re;){const oe=T[$],ce=A[$]=K?ri(A[$]):vn(A[$]);if(Vs(oe,ce))m(oe,ce,O,null,H,G,X,Y,K);else break;$++}for(;$<=J&&$<=re;){const oe=T[J],ce=A[re]=K?ri(A[re]):vn(A[re]);if(Vs(oe,ce))m(oe,ce,O,null,H,G,X,Y,K);else break;J--,re--}if($>J){if($<=re){const oe=re+1,ce=oe<ee?A[oe].el:U;for(;$<=re;)m(null,A[$]=K?ri(A[$]):vn(A[$]),O,ce,H,G,X,Y,K),$++}}else if($>re)for(;$<=J;)Q(T[$],H,G,!0),$++;else{const oe=$,ce=$,be=new Map;for($=ce;$<=re;$++){const de=A[$]=K?ri(A[$]):vn(A[$]);de.key!=null&&be.set(de.key,$)}let me,Qe=0;const Ke=re-ce+1;let rt=!1,ot=0;const Zt=new Array(Ke);for($=0;$<Ke;$++)Zt[$]=0;for($=oe;$<=J;$++){const de=T[$];if(Qe>=Ke){Q(de,H,G,!0);continue}let ln;if(de.key!=null)ln=be.get(de.key);else for(me=ce;me<=re;me++)if(Zt[me-ce]===0&&Vs(de,A[me])){ln=me;break}ln===void 0?Q(de,H,G,!0):(Zt[ln-ce]=$+1,ln>=ot?ot=ln:rt=!0,m(de,A[ln],O,null,H,G,X,Y,K),Qe++)}const Yn=rt?b0(Zt):ds;for(me=Yn.length-1,$=Ke-1;$>=0;$--){const de=ce+$,ln=A[de],cu=de+1<ee?A[de+1].el:U;Zt[$]===0?m(null,ln,O,cu,H,G,X,Y,K):rt&&(me<0||$!==Yn[me]?se(ln,O,cu,2):me--)}}},se=(T,A,O,U,H=null)=>{const{el:G,type:X,transition:Y,children:K,shapeFlag:$}=T;if($&6){se(T.component.subTree,A,O,U);return}if($&128){T.suspense.move(A,O,U);return}if($&64){X.move(T,A,O,M);return}if(X===Dn){i(G,A,O);for(let J=0;J<K.length;J++)se(K[J],A,O,U);i(T.anchor,A,O);return}if(X===Pa){E(T,A,O);return}if(U!==2&&$&1&&Y)if(U===0)Y.beforeEnter(G),i(G,A,O),It(()=>Y.enter(G),H);else{const{leave:J,delayLeave:re,afterLeave:oe}=Y,ce=()=>i(G,A,O),be=()=>{J(G,()=>{ce(),oe&&oe()})};re?re(G,ce,be):be()}else i(G,A,O)},Q=(T,A,O,U=!1,H=!1)=>{const{type:G,props:X,ref:Y,children:K,dynamicChildren:$,shapeFlag:ee,patchFlag:J,dirs:re,cacheIndex:oe}=T;if(J===-2&&(H=!1),Y!=null&&Io(Y,null,O,T,!0),oe!=null&&(A.renderCache[oe]=void 0),ee&256){A.ctx.deactivate(T);return}const ce=ee&1&&re,be=!ar(T);let me;if(be&&(me=X&&X.onVnodeBeforeUnmount)&&cn(me,A,T),ee&6)ge(T.component,O,U);else{if(ee&128){T.suspense.unmount(O,U);return}ce&&Si(T,null,A,"beforeUnmount"),ee&64?T.type.remove(T,A,O,M,U):$&&!$.hasOnce&&(G!==Dn||J>0&&J&64)?Ee($,A,O,!1,!0):(G===Dn&&J&384||!H&&ee&16)&&Ee(K,A,O),U&&ue(T)}(be&&(me=X&&X.onVnodeUnmounted)||ce)&&It(()=>{me&&cn(me,A,T),ce&&Si(T,null,A,"unmounted")},O)},ue=T=>{const{type:A,el:O,anchor:U,transition:H}=T;if(A===Dn){pe(O,U);return}if(A===Pa){P(T);return}const G=()=>{s(O),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(T.shapeFlag&1&&H&&!H.persisted){const{leave:X,delayLeave:Y}=H,K=()=>X(O,G);Y?Y(T.el,G,K):K()}else G()},pe=(T,A)=>{let O;for(;T!==A;)O=d(T),s(T),T=O;s(A)},ge=(T,A,O)=>{const{bum:U,scope:H,job:G,subTree:X,um:Y,m:K,a:$}=T;Pu(K),Pu($),U&&ba(U),H.stop(),G&&(G.flags|=8,Q(X,T,A,O)),Y&&It(Y,A),It(()=>{T.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},Ee=(T,A,O,U=!1,H=!1,G=0)=>{for(let X=G;X<T.length;X++)Q(T[X],A,O,U,H)},q=T=>{if(T.shapeFlag&6)return q(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const A=d(T.anchor||T.el),O=A&&A[jg];return O?d(O):A};let j=!1;const x=(T,A,O)=>{T==null?A._vnode&&Q(A._vnode,null,null,!0):m(A._vnode||null,T,A,null,null,null,O),A._vnode=T,j||(j=!0,bu(),vp(),j=!1)},M={p:m,um:Q,m:se,r:ue,mt:N,mc:_,pc:W,pbc:w,n:q,o:n};return{render:x,hydrate:void 0,createApp:c0(x)}}function Sa({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Pi({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function _0(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Np(n,e,t=!1){const i=n.children,s=e.children;if(ae(i)&&ae(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=ri(s[r]),a.el=o.el),!t&&a.patchFlag!==-2&&Np(o,a)),a.type===sa&&(a.el=o.el)}}function b0(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<c?r=a+1:o=a;c<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function Vp(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Vp(e)}function Pu(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const w0=Symbol.for("v-scx"),y0=()=>rn(w0);function _o(n,e,t){return Up(n,e,t)}function Up(n,e,t=Be){const{immediate:i,deep:s,flush:r,once:o}=t,a=mt({},t),l=e&&i||!e&&r!=="post";let c;if(wr){if(r==="sync"){const p=y0();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=yn,p.resume=yn,p.pause=yn,p}}const u=ut;a.call=(p,f,m)=>Cn(p,u,f,m);let h=!1;r==="post"?a.scheduler=p=>{It(p,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(p,f)=>{f?p():sc(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=Dg(n,e,a);return wr&&(c?c.push(d):l&&d()),d}function x0(n,e,t){const i=this.proxy,s=$e(n)?n.includes(".")?jp(i,n):()=>i[n]:n.bind(i,i);let r;le(e)?r=e:(r=e.handler,t=e);const o=Nr(this),a=Up(s,r.bind(i),t);return o(),a}function jp(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}const C0=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Yt(e)}Modifiers`]||n[`${Qi(e)}Modifiers`];function E0(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Be;let s=t;const r=e.startsWith("update:"),o=r&&C0(i,e.slice(7));o&&(o.trim&&(s=t.map(u=>$e(u)?u.trim():u)),o.number&&(s=t.map(tg)));let a,l=i[a=_a(e)]||i[a=_a(Yt(e))];!l&&r&&(l=i[a=_a(Qi(e))]),l&&Cn(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Cn(c,n,6,s)}}function Hp(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!le(n)){const l=c=>{const u=Hp(c,e,!0);u&&(a=!0,mt(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Fe(n)&&i.set(n,null),null):(ae(r)?r.forEach(l=>o[l]=null):mt(o,r),Fe(n)&&i.set(n,o),o)}function ia(n,e){return!n||!Ko(e)?!1:(e=e.slice(2).replace(/Once$/,""),Te(n,e[0].toLowerCase()+e.slice(1))||Te(n,Qi(e))||Te(n,e))}function Tu(n){const{type:e,vnode:t,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:d,setupState:p,ctx:f,inheritAttrs:m}=n,v=Ro(n);let b,g;try{if(t.shapeFlag&4){const P=s||i,I=P;b=vn(c.call(I,P,u,h,p,d,f)),g=a}else{const P=e;b=vn(P.length>1?P(h,{attrs:a,slots:o,emit:l}):P(h,null)),g=e.props?a:S0(a)}}catch(P){cr.length=0,ta(P,n,1),b=zt(qi)}let E=b;if(g&&m!==!1){const P=Object.keys(g),{shapeFlag:I}=E;P.length&&I&7&&(r&&P.some(Wl)&&(g=P0(g,r)),E=Es(E,g,!1,!0))}return t.dirs&&(E=Es(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(t.dirs):t.dirs),t.transition&&rc(E,t.transition),b=E,Ro(v),b}const S0=n=>{let e;for(const t in n)(t==="class"||t==="style"||Ko(t))&&((e||(e={}))[t]=n[t]);return e},P0=(n,e)=>{const t={};for(const i in n)(!Wl(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function T0(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?Mu(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!ia(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Mu(i,o,c):!0:!!o;return!1}function Mu(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!ia(t,r))return!0}return!1}function M0({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const Gp=n=>n.__isSuspense;function A0(n,e){e&&e.pendingBranch?ae(n)?e.effects.push(...n):e.effects.push(n):Vg(n)}const Dn=Symbol.for("v-fgt"),sa=Symbol.for("v-txt"),qi=Symbol.for("v-cmt"),Pa=Symbol.for("v-stc"),cr=[];let Lt=null;function R0(n=!1){cr.push(Lt=n?null:[])}function I0(){cr.pop(),Lt=cr[cr.length-1]||null}let br=1;function Au(n,e=!1){br+=n,n<0&&Lt&&e&&(Lt.hasOnce=!0)}function qp(n){return n.dynamicChildren=br>0?Lt||ds:null,I0(),br>0&&Lt&&Lt.push(n),n}function WM(n,e,t,i,s,r){return qp($p(n,e,t,i,s,r,!0))}function k0(n,e,t,i,s){return qp(zt(n,e,t,i,s,!0))}function Bo(n){return n?n.__v_isVNode===!0:!1}function Vs(n,e){return n.type===e.type&&n.key===e.key}const Wp=({key:n})=>n??null,bo=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?$e(n)||dt(n)||le(n)?{i:tn,r:n,k:e,f:!!t}:n:null);function $p(n,e=null,t=null,i=0,s=null,r=n===Dn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Wp(e),ref:e&&bo(e),scopeId:_p,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:tn};return a?(ac(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=$e(t)?8:16),br>0&&!o&&Lt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Lt.push(l),l}const zt=B0;function B0(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===Sp)&&(n=qi),Bo(n)){const a=Es(n,e,!0);return t&&ac(a,t),br>0&&!r&&Lt&&(a.shapeFlag&6?Lt[Lt.indexOf(n)]=a:Lt.push(a)),a.patchFlag=-2,a}if(q0(n)&&(n=n.__vccOpts),e){e=O0(e);let{class:a,style:l}=e;a&&!$e(a)&&(e.class=Xl(a)),Fe(l)&&(ic(l)&&!ae(l)&&(l=mt({},l)),e.style=Yl(l))}const o=$e(n)?1:Gp(n)?128:Hg(n)?64:Fe(n)?4:le(n)?2:0;return $p(n,e,t,i,s,o,r,!0)}function O0(n){return n?ic(n)||kp(n)?mt({},n):n:null}function Es(n,e,t=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=n,c=e?z0(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&Wp(c),ref:e&&e.ref?t&&r?ae(r)?r.concat(bo(e)):[r,bo(e)]:bo(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Dn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Es(n.ssContent),ssFallback:n.ssFallback&&Es(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&rc(u,l.clone(u)),u}function L0(n=" ",e=0){return zt(sa,null,n,e)}function $M(n="",e=!1){return e?(R0(),k0(qi,null,n)):zt(qi,null,n)}function vn(n){return n==null||typeof n=="boolean"?zt(qi):ae(n)?zt(Dn,null,n.slice()):Bo(n)?ri(n):zt(sa,null,String(n))}function ri(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Es(n)}function ac(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(ae(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),ac(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!kp(e)?e._ctx=tn:s===3&&tn&&(tn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else le(e)?(e={default:e,_ctx:tn},t=32):(e=String(e),i&64?(t=16,e=[L0(e)]):t=8);n.children=e,n.shapeFlag|=t}function z0(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Xl([e.class,i.class]));else if(s==="style")e.style=Yl([e.style,i.style]);else if(Ko(s)){const r=e[s],o=i[s];o&&r!==o&&!(ae(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function cn(n,e,t,i=null){Cn(n,e,7,[t,i])}const D0=Ap();let F0=0;function N0(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||D0,r={uid:F0++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Op(i,s),emitsOptions:Hp(i,s),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:i.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=E0.bind(null,r),n.ce&&n.ce(r),r}let ut=null,Oo,ml;{const n=Qo(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};Oo=e("__VUE_INSTANCE_SETTERS__",t=>ut=t),ml=e("__VUE_SSR_SETTERS__",t=>wr=t)}const Nr=n=>{const e=ut;return Oo(n),n.scope.on(),()=>{n.scope.off(),Oo(e)}},Ru=()=>{ut&&ut.scope.off(),Oo(null)};function Kp(n){return n.vnode.shapeFlag&4}let wr=!1;function V0(n,e=!1,t=!1){e&&ml(e);const{props:i,children:s}=n.vnode,r=Kp(n);u0(n,i,r,e),f0(n,s,t);const o=r?U0(n,e):void 0;return e&&ml(!1),o}function U0(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,n0);const{setup:i}=t;if(i){xi();const s=n.setupContext=i.length>1?H0(n):null,r=Nr(n),o=Fr(i,n,0,[n.props,s]),a=jd(o);if(Ci(),r(),(a||n.sp)&&!ar(n)&&wp(n),a){if(o.then(Ru,Ru),e)return o.then(l=>{Iu(n,l)}).catch(l=>{ta(l,n,0)});n.asyncDep=o}else Iu(n,o)}else Yp(n)}function Iu(n,e,t){le(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Fe(e)&&(n.setupState=dp(e)),Yp(n)}function Yp(n,e,t){const i=n.type;n.render||(n.render=i.render||yn);{const s=Nr(n);xi();try{i0(n)}finally{Ci(),s()}}}const j0={get(n,e){return at(n,"get",""),n[e]}};function H0(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,j0),slots:n.slots,emit:n.emit,expose:e}}function lc(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(dp(Ag(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in lr)return lr[t](n)},has(e,t){return t in e||t in lr}})):n.proxy}function G0(n,e=!0){return le(n)?n.displayName||n.name:n.name||e&&n.__name}function q0(n){return le(n)&&"__vccOpts"in n}const en=(n,e)=>Lg(n,e,wr);function Xp(n,e,t){const i=arguments.length;return i===2?Fe(e)&&!ae(e)?Bo(e)?zt(n,null,[e]):zt(n,e):zt(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Bo(t)&&(t=[t]),zt(n,e,t))}const W0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vl;const ku=typeof window<"u"&&window.trustedTypes;if(ku)try{vl=ku.createPolicy("vue",{createHTML:n=>n})}catch{}const Zp=vl?n=>vl.createHTML(n):n=>n,$0="http://www.w3.org/2000/svg",K0="http://www.w3.org/1998/Math/MathML",Ln=typeof document<"u"?document:null,Bu=Ln&&Ln.createElement("template"),Y0={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?Ln.createElementNS($0,n):e==="mathml"?Ln.createElementNS(K0,n):t?Ln.createElement(n,{is:t}):Ln.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>Ln.createTextNode(n),createComment:n=>Ln.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ln.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{Bu.innerHTML=Zp(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=Bu.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},X0=Symbol("_vtc");function Z0(n,e,t){const i=n[X0];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Ou=Symbol("_vod"),Q0=Symbol("_vsh"),J0=Symbol(""),e_=/(^|;)\s*display\s*:/;function t_(n,e,t){const i=n.style,s=$e(t);let r=!1;if(t&&!s){if(e)if($e(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&wo(i,a,"")}else for(const o in e)t[o]==null&&wo(i,o,"");for(const o in t)o==="display"&&(r=!0),wo(i,o,t[o])}else if(s){if(e!==t){const o=i[J0];o&&(t+=";"+o),i.cssText=t,r=e_.test(t)}}else e&&n.removeAttribute("style");Ou in n&&(n[Ou]=r?i.display:"",n[Q0]&&(i.display="none"))}const Lu=/\s*!important$/;function wo(n,e,t){if(ae(t))t.forEach(i=>wo(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=n_(n,e);Lu.test(t)?n.setProperty(Qi(i),t.replace(Lu,""),"important"):n[i]=t}}const zu=["Webkit","Moz","ms"],Ta={};function n_(n,e){const t=Ta[e];if(t)return t;let i=Yt(e);if(i!=="filter"&&i in n)return Ta[e]=i;i=Zo(i);for(let s=0;s<zu.length;s++){const r=zu[s]+i;if(r in n)return Ta[e]=r}return e}const Du="http://www.w3.org/1999/xlink";function Fu(n,e,t,i,s,r=ag(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Du,e.slice(6,e.length)):n.setAttributeNS(Du,e,t):t==null||r&&!Wd(t)?n.removeAttribute(e):n.setAttribute(e,r?"":yi(t)?String(t):t)}function Nu(n,e,t,i,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Zp(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=Wd(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function i_(n,e,t,i){n.addEventListener(e,t,i)}function s_(n,e,t,i){n.removeEventListener(e,t,i)}const Vu=Symbol("_vei");function r_(n,e,t,i,s=null){const r=n[Vu]||(n[Vu]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=o_(e);if(i){const c=r[e]=c_(i,s);i_(n,a,c,l)}else o&&(s_(n,a,o,l),r[e]=void 0)}}const Uu=/(?:Once|Passive|Capture)$/;function o_(n){let e;if(Uu.test(n)){e={};let i;for(;i=n.match(Uu);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Qi(n.slice(2)),e]}let Ma=0;const a_=Promise.resolve(),l_=()=>Ma||(a_.then(()=>Ma=0),Ma=Date.now());function c_(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Cn(u_(i,t.value),e,5,[i])};return t.value=n,t.attached=l_(),t}function u_(n,e){if(ae(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const ju=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,h_=(n,e,t,i,s,r)=>{const o=s==="svg";e==="class"?Z0(n,i,o):e==="style"?t_(n,t,i):Ko(e)?Wl(e)||r_(n,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):d_(n,e,i,o))?(Nu(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Fu(n,e,i,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!$e(i))?Nu(n,Yt(e),i,r,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Fu(n,e,i,o))};function d_(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&ju(e)&&le(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ju(e)&&$e(t)?!1:e in n}const p_=mt({patchProp:h_},Y0);let Hu;function f_(){return Hu||(Hu=v0(p_))}const KM=(...n)=>{const e=f_().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=v_(i);if(!s)return;const r=e._component;!le(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,m_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function m_(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function v_(n){return $e(n)?document.querySelector(n):n}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const cs=typeof document<"u";function Qp(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function g_(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Qp(n.default)}const Se=Object.assign;function Aa(n,e){const t={};for(const i in e){const s=e[i];t[i]=on(s)?s.map(n):n(s)}return t}const ur=()=>{},on=Array.isArray,Jp=/#/g,__=/&/g,b_=/\//g,w_=/=/g,y_=/\?/g,ef=/\+/g,x_=/%5B/g,C_=/%5D/g,tf=/%5E/g,E_=/%60/g,nf=/%7B/g,S_=/%7C/g,sf=/%7D/g,P_=/%20/g;function cc(n){return encodeURI(""+n).replace(S_,"|").replace(x_,"[").replace(C_,"]")}function T_(n){return cc(n).replace(nf,"{").replace(sf,"}").replace(tf,"^")}function gl(n){return cc(n).replace(ef,"%2B").replace(P_,"+").replace(Jp,"%23").replace(__,"%26").replace(E_,"`").replace(nf,"{").replace(sf,"}").replace(tf,"^")}function M_(n){return gl(n).replace(w_,"%3D")}function A_(n){return cc(n).replace(Jp,"%23").replace(y_,"%3F")}function R_(n){return n==null?"":A_(n).replace(b_,"%2F")}function yr(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const I_=/\/$/,k_=n=>n.replace(I_,"");function Ra(n,e,t="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=n(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=z_(i??e,t),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:yr(o)}}function B_(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Gu(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function O_(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&Ss(e.matched[i],t.matched[s])&&rf(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ss(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function rf(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!L_(n[t],e[t]))return!1;return!0}function L_(n,e){return on(n)?qu(n,e):on(e)?qu(e,n):n===e}function qu(n,e){return on(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function z_(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Xn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xr;(function(n){n.pop="pop",n.push="push"})(xr||(xr={}));var hr;(function(n){n.back="back",n.forward="forward",n.unknown=""})(hr||(hr={}));function D_(n){if(!n)if(cs){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),k_(n)}const F_=/^[^#]+#/;function N_(n,e){return n.replace(F_,"#")+e}function V_(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const ra=()=>({left:window.scrollX,top:window.scrollY});function U_(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=V_(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Wu(n,e){return(history.state?history.state.position-e:-1)+n}const _l=new Map;function j_(n,e){_l.set(n,e)}function H_(n){const e=_l.get(n);return _l.delete(n),e}let G_=()=>location.protocol+"//"+location.host;function of(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Gu(l,"")}return Gu(t,n)+i+s}function q_(n,e,t,i){let s=[],r=[],o=null;const a=({state:d})=>{const p=of(n,location),f=t.value,m=e.value;let v=0;if(d){if(t.value=p,e.value=d,o&&o===f){o=null;return}v=m?d.position-m.position:0}else i(p);s.forEach(b=>{b(t.value,f,{delta:v,type:xr.pop,direction:v?v>0?hr.forward:hr.back:hr.unknown})})};function l(){o=t.value}function c(d){s.push(d);const p=()=>{const f=s.indexOf(d);f>-1&&s.splice(f,1)};return r.push(p),p}function u(){const{history:d}=window;d.state&&d.replaceState(Se({},d.state,{scroll:ra()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function $u(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?ra():null}}function W_(n){const{history:e,location:t}=window,i={value:of(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=n.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:G_()+n+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(p){console.error(p),t[u?"replace":"assign"](d)}}function o(l,c){const u=Se({},e.state,$u(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=Se({},s.value,e.state,{forward:l,scroll:ra()});r(u.current,u,!0);const h=Se({},$u(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function $_(n){n=D_(n);const e=W_(n),t=q_(n,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=Se({location:"",base:n,go:i,createHref:N_.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function YM(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),$_(n)}function K_(n){return typeof n=="string"||n&&typeof n=="object"}function af(n){return typeof n=="string"||typeof n=="symbol"}const lf=Symbol("");var Ku;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Ku||(Ku={}));function Ps(n,e){return Se(new Error,{type:n,[lf]:!0},e)}function Mn(n,e){return n instanceof Error&&lf in n&&(e==null||!!(n.type&e))}const Yu="[^/]+?",Y_={sensitive:!1,strict:!1,start:!0,end:!0},X_=/[.+*?^${}()[\]/\\]/g;function Z_(n,e){const t=Se({},Y_,e),i=[];let s=t.start?"^":"";const r=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let p=40+(t.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(X_,"\\$&"),p+=40;else if(d.type===1){const{value:f,repeatable:m,optional:v,regexp:b}=d;r.push({name:f,repeatable:m,optional:v});const g=b||Yu;if(g!==Yu){p+=10;try{new RegExp(`(${g})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${f}" (${g}): `+P.message)}}let E=m?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;h||(E=v&&c.length<2?`(?:/${E})`:"/"+E),v&&(E+="?"),s+=E,p+=20,v&&(p+=-8),m&&(p+=-20),g===".*"&&(p+=-50)}u.push(p)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",f=r[d-1];h[f.name]=p&&f.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const d of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of d)if(p.type===0)u+=p.value;else if(p.type===1){const{value:f,repeatable:m,optional:v}=p,b=f in c?c[f]:"";if(on(b)&&!m)throw new Error(`Provided param "${f}" is an array but it is not repeatable (* or + modifiers)`);const g=on(b)?b.join("/"):b;if(!g)if(v)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${f}"`);u+=g}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function Q_(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function cf(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=Q_(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(Xu(i))return 1;if(Xu(s))return-1}return s.length-i.length}function Xu(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const J_={type:0,value:""},eb=/[a-zA-Z0-9_]/;function tb(n){if(!n)return[[]];if(n==="/")return[[J_]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=0,i=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):d();break;case 4:d(),t=i;break;case 1:l==="("?t=2:eb.test(l)?d():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function nb(n,e,t){const i=Z_(tb(n.path),t),s=Se(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function ib(n,e){const t=[],i=new Map;e=eh({strict:!1,end:!0,sensitive:!1},e);function s(h){return i.get(h)}function r(h,d,p){const f=!p,m=Qu(h);m.aliasOf=p&&p.record;const v=eh(e,h),b=[m];if("alias"in h){const P=typeof h.alias=="string"?[h.alias]:h.alias;for(const I of P)b.push(Qu(Se({},m,{components:p?p.record.components:m.components,path:I,aliasOf:p?p.record:m})))}let g,E;for(const P of b){const{path:I}=P;if(d&&I[0]!=="/"){const S=d.record.path,R=S[S.length-1]==="/"?"":"/";P.path=d.record.path+(I&&R+I)}if(g=nb(P,d,v),p?p.alias.push(g):(E=E||g,E!==g&&E.alias.push(g),f&&h.name&&!Ju(g)&&o(h.name)),uf(g)&&l(g),m.children){const S=m.children;for(let R=0;R<S.length;R++)r(S[R],g,p&&p.children[R])}p=p||g}return E?()=>{o(E)}:ur}function o(h){if(af(h)){const d=i.get(h);d&&(i.delete(h),t.splice(t.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=t.indexOf(h);d>-1&&(t.splice(d,1),h.record.name&&i.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return t}function l(h){const d=ob(h,t);t.splice(d,0,h),h.record.name&&!Ju(h)&&i.set(h.record.name,h)}function c(h,d){let p,f={},m,v;if("name"in h&&h.name){if(p=i.get(h.name),!p)throw Ps(1,{location:h});v=p.record.name,f=Se(Zu(d.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),h.params&&Zu(h.params,p.keys.map(E=>E.name))),m=p.stringify(f)}else if(h.path!=null)m=h.path,p=t.find(E=>E.re.test(m)),p&&(f=p.parse(m),v=p.record.name);else{if(p=d.name?i.get(d.name):t.find(E=>E.re.test(d.path)),!p)throw Ps(1,{location:h,currentLocation:d});v=p.record.name,f=Se({},d.params,h.params),m=p.stringify(f)}const b=[];let g=p;for(;g;)b.unshift(g.record),g=g.parent;return{name:v,path:m,params:f,matched:b,meta:rb(b)}}n.forEach(h=>r(h));function u(){t.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Zu(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function Qu(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:sb(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function sb(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function Ju(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function rb(n){return n.reduce((e,t)=>Se(e,t.meta),{})}function eh(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function ob(n,e){let t=0,i=e.length;for(;t!==i;){const r=t+i>>1;cf(n,e[r])<0?i=r:t=r+1}const s=ab(n);return s&&(i=e.lastIndexOf(s,i-1)),i}function ab(n){let e=n;for(;e=e.parent;)if(uf(e)&&cf(n,e)===0)return e}function uf({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function lb(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(ef," "),o=r.indexOf("="),a=yr(o<0?r:r.slice(0,o)),l=o<0?null:yr(r.slice(o+1));if(a in e){let c=e[a];on(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function th(n){let e="";for(let t in n){const i=n[t];if(t=M_(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(on(i)?i.map(r=>r&&gl(r)):[i&&gl(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function cb(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=on(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const ub=Symbol(""),nh=Symbol(""),oa=Symbol(""),uc=Symbol(""),bl=Symbol("");function Us(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function oi(n,e,t,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Ps(4,{from:t,to:e})):d instanceof Error?l(d):K_(d)?l(Ps(2,{from:e,to:d})):(o&&i.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},u=r(()=>n.call(i&&i.instances[s],e,t,c));let h=Promise.resolve(u);n.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Ia(n,e,t,i,s=r=>r()){const r=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Qp(l)){const u=(l.__vccOpts||l)[e];u&&r.push(oi(u,t,i,o,a,s))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=g_(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&oi(p,t,i,o,a,s)()}))}}return r}function ih(n){const e=rn(oa),t=rn(uc),i=en(()=>{const l=ms(n.to);return e.resolve(l)}),s=en(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(Ss.bind(null,u));if(d>-1)return d;const p=sh(l[c-2]);return c>1&&sh(u)===p&&h[h.length-1].path!==p?h.findIndex(Ss.bind(null,l[c-2])):d}),r=en(()=>s.value>-1&&mb(t.params,i.value.params)),o=en(()=>s.value>-1&&s.value===t.matched.length-1&&rf(t.params,i.value.params));function a(l={}){if(fb(l)){const c=e[ms(n.replace)?"replace":"push"](ms(n.to)).catch(ur);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:en(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}function hb(n){return n.length===1?n[0]:n}const db=bp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ih,setup(n,{slots:e}){const t=ea(ih(n)),{options:i}=rn(oa),s=en(()=>({[rh(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[rh(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&hb(e.default(t));return n.custom?r:Xp("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),pb=db;function fb(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function mb(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!on(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function sh(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const rh=(n,e,t)=>n??e??t,vb=bp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=rn(bl),s=en(()=>n.route||i.value),r=rn(nh,0),o=en(()=>{let c=ms(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=en(()=>s.value.matched[o.value]);go(nh,en(()=>o.value+1)),go(ub,a),go(bl,s);const l=Rg();return _o(()=>[l.value,a.value,n.name],([c,u,h],[d,p,f])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Ss(u,p)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,h=a.value,d=h&&h.components[u];if(!d)return oh(t.default,{Component:d,route:c});const p=h.props[u],f=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=Xp(d,Se({},f,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return oh(t.default,{Component:v,route:c})||v}}});function oh(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const gb=vb;function XM(n){const e=ib(n.routes,n),t=n.parseQuery||lb,i=n.stringifyQuery||th,s=n.history,r=Us(),o=Us(),a=Us(),l=Ig(Xn);let c=Xn;cs&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Aa.bind(null,q=>""+q),h=Aa.bind(null,R_),d=Aa.bind(null,yr);function p(q,j){let x,M;return af(q)?(x=e.getRecordMatcher(q),M=j):M=q,e.addRoute(M,x)}function f(q){const j=e.getRecordMatcher(q);j&&e.removeRoute(j)}function m(){return e.getRoutes().map(q=>q.record)}function v(q){return!!e.getRecordMatcher(q)}function b(q,j){if(j=Se({},j||l.value),typeof q=="string"){const O=Ra(t,q,j.path),U=e.resolve({path:O.path},j),H=s.createHref(O.fullPath);return Se(O,U,{params:d(U.params),hash:yr(O.hash),redirectedFrom:void 0,href:H})}let x;if(q.path!=null)x=Se({},q,{path:Ra(t,q.path,j.path).path});else{const O=Se({},q.params);for(const U in O)O[U]==null&&delete O[U];x=Se({},q,{params:h(O)}),j.params=h(j.params)}const M=e.resolve(x,j),D=q.hash||"";M.params=u(d(M.params));const T=B_(i,Se({},q,{hash:T_(D),path:M.path})),A=s.createHref(T);return Se({fullPath:T,hash:D,query:i===th?cb(q.query):q.query||{}},M,{redirectedFrom:void 0,href:A})}function g(q){return typeof q=="string"?Ra(t,q,l.value.path):Se({},q)}function E(q,j){if(c!==q)return Ps(8,{from:j,to:q})}function P(q){return R(q)}function I(q){return P(Se(g(q),{replace:!0}))}function S(q){const j=q.matched[q.matched.length-1];if(j&&j.redirect){const{redirect:x}=j;let M=typeof x=="function"?x(q):x;return typeof M=="string"&&(M=M.includes("?")||M.includes("#")?M=g(M):{path:M},M.params={}),Se({query:q.query,hash:q.hash,params:M.path!=null?{}:q.params},M)}}function R(q,j){const x=c=b(q),M=l.value,D=q.state,T=q.force,A=q.replace===!0,O=S(x);if(O)return R(Se(g(O),{state:typeof O=="object"?Se({},D,O.state):D,force:T,replace:A}),j||x);const U=x;U.redirectedFrom=j;let H;return!T&&O_(i,M,x)&&(H=Ps(16,{to:U,from:M}),se(M,M,!0,!1)),(H?Promise.resolve(H):w(U,M)).catch(G=>Mn(G)?Mn(G,2)?G:ne(G):W(G,U,M)).then(G=>{if(G){if(Mn(G,2))return R(Se({replace:A},g(G.to),{state:typeof G.to=="object"?Se({},D,G.to.state):D,force:T}),j||U)}else G=B(U,M,!0,A,D);return k(U,M,G),G})}function _(q,j){const x=E(q,j);return x?Promise.reject(x):Promise.resolve()}function y(q){const j=pe.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(q):q()}function w(q,j){let x;const[M,D,T]=_b(q,j);x=Ia(M.reverse(),"beforeRouteLeave",q,j);for(const O of M)O.leaveGuards.forEach(U=>{x.push(oi(U,q,j))});const A=_.bind(null,q,j);return x.push(A),Ee(x).then(()=>{x=[];for(const O of r.list())x.push(oi(O,q,j));return x.push(A),Ee(x)}).then(()=>{x=Ia(D,"beforeRouteUpdate",q,j);for(const O of D)O.updateGuards.forEach(U=>{x.push(oi(U,q,j))});return x.push(A),Ee(x)}).then(()=>{x=[];for(const O of T)if(O.beforeEnter)if(on(O.beforeEnter))for(const U of O.beforeEnter)x.push(oi(U,q,j));else x.push(oi(O.beforeEnter,q,j));return x.push(A),Ee(x)}).then(()=>(q.matched.forEach(O=>O.enterCallbacks={}),x=Ia(T,"beforeRouteEnter",q,j,y),x.push(A),Ee(x))).then(()=>{x=[];for(const O of o.list())x.push(oi(O,q,j));return x.push(A),Ee(x)}).catch(O=>Mn(O,8)?O:Promise.reject(O))}function k(q,j,x){a.list().forEach(M=>y(()=>M(q,j,x)))}function B(q,j,x,M,D){const T=E(q,j);if(T)return T;const A=j===Xn,O=cs?history.state:{};x&&(M||A?s.replace(q.fullPath,Se({scroll:A&&O&&O.scroll},D)):s.push(q.fullPath,D)),l.value=q,se(q,j,x,A),ne()}let L;function N(){L||(L=s.listen((q,j,x)=>{if(!ge.listening)return;const M=b(q),D=S(M);if(D){R(Se(D,{replace:!0,force:!0}),M).catch(ur);return}c=M;const T=l.value;cs&&j_(Wu(T.fullPath,x.delta),ra()),w(M,T).catch(A=>Mn(A,12)?A:Mn(A,2)?(R(Se(g(A.to),{force:!0}),M).then(O=>{Mn(O,20)&&!x.delta&&x.type===xr.pop&&s.go(-1,!1)}).catch(ur),Promise.reject()):(x.delta&&s.go(-x.delta,!1),W(A,M,T))).then(A=>{A=A||B(M,T,!1),A&&(x.delta&&!Mn(A,8)?s.go(-x.delta,!1):x.type===xr.pop&&Mn(A,20)&&s.go(-1,!1)),k(M,T,A)}).catch(ur)}))}let F=Us(),z=Us(),V;function W(q,j,x){ne(q);const M=z.list();return M.length?M.forEach(D=>D(q,j,x)):console.error(q),Promise.reject(q)}function Z(){return V&&l.value!==Xn?Promise.resolve():new Promise((q,j)=>{F.add([q,j])})}function ne(q){return V||(V=!q,N(),F.list().forEach(([j,x])=>q?x(q):j()),F.reset()),q}function se(q,j,x,M){const{scrollBehavior:D}=n;if(!cs||!D)return Promise.resolve();const T=!x&&H_(Wu(q.fullPath,0))||(M||!x)&&history.state&&history.state.scroll||null;return fp().then(()=>D(q,j,T)).then(A=>A&&U_(A)).catch(A=>W(A,q,j))}const Q=q=>s.go(q);let ue;const pe=new Set,ge={currentRoute:l,listening:!0,addRoute:p,removeRoute:f,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:m,resolve:b,options:n,push:P,replace:I,go:Q,back:()=>Q(-1),forward:()=>Q(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:z.add,isReady:Z,install(q){const j=this;q.component("RouterLink",pb),q.component("RouterView",gb),q.config.globalProperties.$router=j,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>ms(l)}),cs&&!ue&&l.value===Xn&&(ue=!0,P(s.location).catch(D=>{}));const x={};for(const D in Xn)Object.defineProperty(x,D,{get:()=>l.value[D],enumerable:!0});q.provide(oa,j),q.provide(uc,cp(x)),q.provide(bl,l);const M=q.unmount;pe.add(q),q.unmount=function(){pe.delete(q),pe.size<1&&(c=Xn,L&&L(),L=null,l.value=Xn,ue=!1,V=!1),M()}}};function Ee(q){return q.reduce((j,x)=>j.then(()=>y(x)),Promise.resolve())}return ge}function _b(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(n.matched.find(c=>Ss(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>Ss(c,l))||s.push(l))}return[t,i,s]}function ZM(){return rn(oa)}function QM(n){return rn(uc)}(function(e,t){var i=t.documentElement,s=e.devicePixelRatio||1;function r(){t.body?t.body.style.fontSize=12*s+"px":t.addEventListener("DOMContentLoaded",r)}r();function o(){var c=i.clientWidth/10;i.style.fontSize=c+"px"}if(o(),e.addEventListener("resize",o),e.addEventListener("pageshow",function(c){c.persisted&&o()}),s>=2){var a=t.createElement("body"),l=t.createElement("div");l.style.border=".5px solid transparent",a.appendChild(l),i.appendChild(a),l.offsetHeight===1&&i.classList.add("hairlines"),i.removeChild(a)}})(window,document);/**
 * postprocessing v6.36.4 build Tue Nov 05 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rschen
 * @license Zlib
 */var ka=1/1e3,bb=1e3,wb=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*ka}get fixedDelta(){return this._fixedDelta*ka}set fixedDelta(n){this._fixedDelta=n*bb}get elapsed(){return this._elapsed*ka}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},yb=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new vo;return t.setAttribute("position",new hu(n,3)),t.setAttribute("uv",new hu(e,2)),t})(),an=class wl{static get fullscreenGeometry(){return yb}constructor(e="Pass",t=new uu,i=new Gv){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new On(wl.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new uu),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=$o){}render(e,t,i,s,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof wi||t instanceof Nd||t instanceof Vd||t instanceof wl)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},xb=class extends an{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,s){const r=n.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},Cb=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,hf="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",df=class extends Zi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ie(null),opacity:new Ie(1)},blending:Bs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Cb,vertexShader:hf})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},Eb=class extends an{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new df,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new wi(1,1,{minFilter:To,magFilter:To,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Hi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===ct&&(this.renderTarget.texture.colorSpace=ct))}},ah=new $v,pf=class extends an{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,s){const r=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=r!==null,c=o>=0;l?(n.getClearColor(ah),n.setClearColor(r,c?o:a)):c&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(ah,a):c&&n.setClearAlpha(a)}},Sb=class extends an{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new pf(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,s){const r=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.stencil.setFunc(r.ALWAYS,u,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,e),c.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(r.EQUAL,1,4294967295),o.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.stencil.setLocked(!0)}},JM=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Eb,this.depthTexture=null,this.passes=[],this.timer=new wb,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new xt),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Hi&&n.outputColorSpace===ct&&(this.inputBuffer.texture.colorSpace=ct,this.outputBuffer.texture.colorSpace=ct,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new Vv;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Uv,n.type=jv):n.type=Hv,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const s=this.renderer,r=s===null?new xt:s.getDrawingBufferSize(new xt),o={minFilter:To,magFilter:To,stencilBuffer:e,depthBuffer:n,type:t},a=new wi(r.width,r.height,o);return i>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=i),t===Hi&&s!==null&&s.outputColorSpace===ct&&(a.texture.colorSpace=ct),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new xt),r=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,r,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(n of t)n.setDepthTexture(a)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(a,l)=>a||l.needsDepthTexture;e.reduce(r,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,r=!1,o,a,l;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(e,i,s,n,r),c.needsSwap&&(r&&(t.renderToScreen=c.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,i,s,n,r),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=s,s=l),c instanceof Sb?r=!0:c instanceof xb&&(r=!1))}setSize(n,e,t){const i=this.renderer,s=i.getSize(new xt);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&i.setSize(n,e,t);const r=i.getDrawingBufferSize(new xt);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const o of this.passes)o.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),an.fullscreenGeometry.dispose()}},Di={NONE:0,DEPTH:1,CONVOLUTION:2},ye={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Pb=class{constructor(){this.shaderParts=new Map([[ye.FRAGMENT_HEAD,null],[ye.FRAGMENT_MAIN_UV,null],[ye.FRAGMENT_MAIN_IMAGE,null],[ye.VERTEX_HEAD,null],[ye.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Di.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=zd}},Ba=!1,lh=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Jr:t=this.materialsFlatShadedDoubleSide;break;case Qr:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Jr:t=this.materialsDoubleSide;break;case Qr:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Zi))return n.clone();const e=n.uniforms,t=new Map;for(const s in e){const r=e[s].value;r.isRenderTargetTexture&&(e[s].value=null,t.set(s,r))}const i=n.clone();for(const s of t)e[s[0]].value=s[1],i.uniforms[s[0]].value=s[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=qv;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Qr,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Jr,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Qr,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Jr,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,Ba){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ba}static set workaroundEnabled(n){Ba=n}},Zn=-1,_n=class extends Gl{constructor(n,e=Zn,t=Zn,i=1){super(),this.resizable=n,this.baseSize=new xt(1,1),this.preferredSize=new xt(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new xt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Zn?t.width=e.width:e.height!==Zn?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Zn?t.height=e.height:e.width!==Zn?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Zn),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Zn}},fe={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Tb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Mb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Ab="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Rb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Ib="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",kb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Bb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Ob="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Lb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",zb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Db="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Fb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Nb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Vb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Ub="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",jb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Hb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Gb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",qb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Wb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",$b="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Kb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Yb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Xb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Zb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Qb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Jb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",ew="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",tw="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",nw="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",iw="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",sw="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",rw=new Map([[fe.ADD,Tb],[fe.ALPHA,Mb],[fe.AVERAGE,Ab],[fe.COLOR,Rb],[fe.COLOR_BURN,Ib],[fe.COLOR_DODGE,kb],[fe.DARKEN,Bb],[fe.DIFFERENCE,Ob],[fe.DIVIDE,Lb],[fe.DST,null],[fe.EXCLUSION,zb],[fe.HARD_LIGHT,Db],[fe.HARD_MIX,Fb],[fe.HUE,Nb],[fe.INVERT,Vb],[fe.INVERT_RGB,Ub],[fe.LIGHTEN,jb],[fe.LINEAR_BURN,Hb],[fe.LINEAR_DODGE,Gb],[fe.LINEAR_LIGHT,qb],[fe.LUMINOSITY,Wb],[fe.MULTIPLY,$b],[fe.NEGATION,Kb],[fe.NORMAL,Yb],[fe.OVERLAY,Xb],[fe.PIN_LIGHT,Zb],[fe.REFLECT,Qb],[fe.SATURATION,Jb],[fe.SCREEN,ew],[fe.SOFT_LIGHT,tw],[fe.SRC,nw],[fe.SUBTRACT,iw],[fe.VIVID_LIGHT,sw]]),ow=class extends Gl{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new Ie(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return rw.get(this.blendFunction)}},hc={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},aw=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,lw="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",cw=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],uw=class extends Zi{constructor(n=new du){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ie(null),texelSize:new Ie(new du),scale:new Ie(1),kernel:new Ie(0)},blending:Bs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:aw,vertexShader:lw}),this.setTexelSize(n.x,n.y),this.kernelSize=hc.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return cw[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},hw=class extends an{constructor({kernelSize:n=hc.MEDIUM,resolutionScale:e=.5,width:t=_n.AUTO_SIZE,height:i=_n.AUTO_SIZE,resolutionX:s=t,resolutionY:r=i}={}){super("KawaseBlurPass"),this.renderTargetA=new wi(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new _n(this,s,r,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new uw,this._blurMaterial.kernelSize=n,this.copyMaterial=new df}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const r=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let h=e;this.fullscreenMaterial=c;for(let d=0,p=u.length;d<p;++d){const f=d&1?l:a;c.kernel=u[d],c.inputBuffer=h.texture,n.setRenderTarget(f),n.render(r,o),h=f}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(r,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Hi?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===ct&&(this.renderTargetA.texture.colorSpace=ct,this.renderTargetB.texture.colorSpace=ct))}static get AUTO_SIZE(){return _n.AUTO_SIZE}},dw=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,pw=class extends Zi{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Fd.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ie(null),threshold:new Ie(0),smoothing:new Ie(1),range:new Ie(null)},blending:Bs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:dw,vertexShader:hf}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},fw=class extends an{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:s=_n.AUTO_SIZE,height:r=_n.AUTO_SIZE,resolutionX:o=s,resolutionY:a=r}={}){super("LuminancePass"),this.fullscreenMaterial=new pw(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new wi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new _n(this,o,a,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,s){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Hi&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},mw=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,vw="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",gw=class extends Zi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Ie(null),texelSize:new Ie(new xt)},blending:Bs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:mw,vertexShader:vw})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},_w=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,bw="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",ww=class extends Zi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Ie(null),supportBuffer:new Ie(null),texelSize:new Ie(new xt),radius:new Ie(.85)},blending:Bs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_w,vertexShader:bw})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},yw=class extends an{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new wi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new gw,this.upsamplingMaterial=new ww,this.resolution=new xt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const s=e.clone();s.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,s){const{scene:r,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let h=e;this.fullscreenMaterial=a;for(let d=0,p=c.length;d<p;++d){const f=c[d];a.setSize(h.width,h.height),a.inputBuffer=h.texture,n.setRenderTarget(f),n.render(r,o),h=f}this.fullscreenMaterial=l;for(let d=u.length-1;d>=0;--d){const p=u[d];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=c[d].texture,n.setRenderTarget(p),n.render(r,o),h=p}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,s=t.height;for(let r=0,o=this.downsamplingMipmaps.length;r<o;++r)i=Math.round(i*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(i,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(i,s)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of i)s.texture.type=t;if(t!==Hi)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===ct)for(const s of i)s.texture.colorSpace=ct}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},xw=class extends Gl{constructor(n,e,{attributes:t=Di.NONE,blendFunction:i=fe.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=s,this.uniforms=r,this.extensions=o,this.blendMode=new ow(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=zd,this._outputColorSpace=Dd}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=$o){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof wi||e instanceof Nd||e instanceof Vd||e instanceof an)&&this[n].dispose()}}},Cw=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,eA=class extends xw{constructor({blendFunction:n=fe.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:s=1,radius:r=.85,levels:o=8,kernelSize:a=hc.LARGE,resolutionScale:l=.5,width:c=_n.AUTO_SIZE,height:u=_n.AUTO_SIZE,resolutionX:h=c,resolutionY:d=u}={}){super("BloomEffect",Cw,{blendFunction:n,uniforms:new Map([["map",new Ie(null)],["intensity",new Ie(s)]])}),this.renderTarget=new wi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new hw({kernelSize:a}),this.luminancePass=new fw({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new yw,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new _n(this,h,d,l);p.addEventListener("change",f=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,s.renderTarget):this.blurPass.render(n,s.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===ct&&(this.renderTarget.texture.colorSpace=ct))}},tA=class extends an{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new pf,this.overrideMaterialManager=t===null?null:new lh(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new lh(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,s){const r=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=r.background,u=n.shadowMap.autoUpdate,h=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,r,o):n.render(r,o),o.layers.mask=l,r.background=c,n.shadowMap.autoUpdate=u}},Ew=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Sw="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Pw=class extends Zi{constructor(n,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Fd.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ie(null),depthBuffer:new Ie(null),resolution:new Ie(new xt),texelSize:new Ie(new xt),cameraNear:new Ie(.3),cameraFar:new Ie(1e3),aspect:new Ie(1),time:new Ie(0)},blending:Bs,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=$o){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=Ew.replace(ye.FRAGMENT_HEAD,n.get(ye.FRAGMENT_HEAD)||"").replace(ye.FRAGMENT_MAIN_UV,n.get(ye.FRAGMENT_MAIN_UV)||"").replace(ye.FRAGMENT_MAIN_IMAGE,n.get(ye.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Sw.replace(ye.VERTEX_HEAD,n.get(ye.VERTEX_HEAD)||"").replace(ye.VERTEX_MAIN_SUPPORT,n.get(ye.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Wv?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return ye}};function ch(n,e,t){for(const i of e){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),r=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(r,s))}}function Tw(n,e,t){let i=e.getFragmentShader(),s=e.getVertexShader();const r=i!==void 0&&/mainImage/.test(i),o=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&Di.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!r&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let c=l.get(ye.FRAGMENT_HEAD)||"",u=l.get(ye.FRAGMENT_MAIN_UV)||"",h=l.get(ye.FRAGMENT_MAIN_IMAGE)||"",d=l.get(ye.VERTEX_HEAD)||"",p=l.get(ye.VERTEX_MAIN_SUPPORT)||"";const f=new Set,m=new Set;if(o&&(u+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const g=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);p+=`	${n}MainSupport(`,p+=g?`vUv);
`:`);
`;for(const E of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const P of E[1].split(/\s*,\s*/))t.varyings.add(P),f.add(P),m.add(P);for(const E of s.matchAll(a))m.add(E[1])}for(const g of i.matchAll(a))m.add(g[1]);for(const g of e.defines.keys())m.add(g.replace(/\([\w\s,]*\)/g,""));for(const g of e.uniforms.keys())m.add(g);m.delete("while"),m.delete("for"),m.delete("if"),e.uniforms.forEach((g,E)=>t.uniforms.set(n+E.charAt(0).toUpperCase()+E.slice(1),g)),e.defines.forEach((g,E)=>t.defines.set(n+E.charAt(0).toUpperCase()+E.slice(1),g));const v=new Map([["fragment",i],["vertex",s]]);ch(n,m,t.defines),ch(n,m,v),i=v.get("fragment"),s=v.get("vertex");const b=e.blendMode;if(t.blendModes.set(b.blendFunction,b),r){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(h+=e.inputColorSpace===ct?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Dd?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const g=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${n}MainImage(color0, UV, `,t.attributes&Di.DEPTH&&g.test(i)&&(h+="depth, ",t.readDepth=!0),h+=`color1);
	`;const E=n+"BlendOpacity";t.uniforms.set(E,b.opacity),h+=`color0 = blend${b.blendFunction}(color0, color1, ${E});

	`,c+=`uniform float ${E};

`}if(c+=i+`
`,s!==null&&(d+=s+`
`),l.set(ye.FRAGMENT_HEAD,c),l.set(ye.FRAGMENT_MAIN_UV,u),l.set(ye.FRAGMENT_MAIN_IMAGE,h),l.set(ye.VERTEX_HEAD,d),l.set(ye.VERTEX_MAIN_SUPPORT,p),e.extensions!==null)for(const g of e.extensions)t.extensions.add(g)}}var nA=class extends an{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Pw(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new Pb;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===fe.DST)n.attributes|=o.getAttributes()&Di.DEPTH;else{if(n.attributes&o.getAttributes()&Di.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);Tw("e"+e++,o,n)}let t=n.shaderParts.get(ye.FRAGMENT_HEAD),i=n.shaderParts.get(ye.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(ye.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(r,`blend${o.blendFunction}`)+`
`;n.attributes&Di.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===ct&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(ye.FRAGMENT_HEAD,t),n.shaderParts.set(ye.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(ye.FRAGMENT_MAIN_UV,s);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=$o){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,s){for(const r of this.effects)r.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Hi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}};function Os(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function io(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ff={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,s,r){function o(c,u){if(!s[c]){if(!i[c]){var h=typeof io=="function"&&io;if(!u&&h)return h(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}u=s[c]={exports:{}},i[c][0].call(u.exports,function(d){var p=i[c][1][d];return o(p||d)},u,u.exports,t,i,s,r)}return s[c].exports}for(var a=typeof io=="function"&&io,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var f=t("crypto");function m(S,R){R=g(S,R);var _;return(_=R.algorithm!=="passthrough"?f.createHash(R.algorithm):new I).write===void 0&&(_.write=_.update,_.end=_.update),P(R,_).dispatch(S),_.update||_.end(""),_.digest?_.digest(R.encoding==="buffer"?void 0:R.encoding):(S=_.read(),R.encoding!=="buffer"?S.toString(R.encoding):S)}(s=i.exports=m).sha1=function(S){return m(S)},s.keys=function(S){return m(S,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(S){return m(S,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(S){return m(S,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=f.getHashes?f.getHashes().slice():["sha1","md5"],b=(v.push("passthrough"),["buffer","hex","binary","base64"]);function g(S,R){var _={};if(_.algorithm=(R=R||{}).algorithm||"sha1",_.encoding=R.encoding||"hex",_.excludeValues=!!R.excludeValues,_.algorithm=_.algorithm.toLowerCase(),_.encoding=_.encoding.toLowerCase(),_.ignoreUnknown=R.ignoreUnknown===!0,_.respectType=R.respectType!==!1,_.respectFunctionNames=R.respectFunctionNames!==!1,_.respectFunctionProperties=R.respectFunctionProperties!==!1,_.unorderedArrays=R.unorderedArrays===!0,_.unorderedSets=R.unorderedSets!==!1,_.unorderedObjects=R.unorderedObjects!==!1,_.replacer=R.replacer||void 0,_.excludeKeys=R.excludeKeys||void 0,S===void 0)throw new Error("Object argument required.");for(var y=0;y<v.length;++y)v[y].toLowerCase()===_.algorithm.toLowerCase()&&(_.algorithm=v[y]);if(v.indexOf(_.algorithm)===-1)throw new Error('Algorithm "'+_.algorithm+'"  not supported. supported values: '+v.join(", "));if(b.indexOf(_.encoding)===-1&&_.algorithm!=="passthrough")throw new Error('Encoding "'+_.encoding+'"  not supported. supported values: '+b.join(", "));return _}function E(S){if(typeof S=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(S))!=null}function P(S,R,_){_=_||[];function y(w){return R.update?R.update(w,"utf8"):R.write(w,"utf8")}return{dispatch:function(w){return this["_"+((w=S.replacer?S.replacer(w):w)===null?"null":typeof w)](w)},_object:function(w){var k,B=Object.prototype.toString.call(w),L=/\[object (.*)\]/i.exec(B);if(L=(L=L?L[1]:"unknown:["+B+"]").toLowerCase(),0<=(B=_.indexOf(w)))return this.dispatch("[CIRCULAR:"+B+"]");if(_.push(w),a!==void 0&&a.isBuffer&&a.isBuffer(w))return y("buffer:"),y(w);if(L==="object"||L==="function"||L==="asyncfunction")return B=Object.keys(w),S.unorderedObjects&&(B=B.sort()),S.respectType===!1||E(w)||B.splice(0,0,"prototype","__proto__","constructor"),S.excludeKeys&&(B=B.filter(function(N){return!S.excludeKeys(N)})),y("object:"+B.length+":"),k=this,B.forEach(function(N){k.dispatch(N),y(":"),S.excludeValues||k.dispatch(w[N]),y(",")});if(!this["_"+L]){if(S.ignoreUnknown)return y("["+L+"]");throw new Error('Unknown object type "'+L+'"')}this["_"+L](w)},_array:function(w,N){N=N!==void 0?N:S.unorderedArrays!==!1;var B=this;if(y("array:"+w.length+":"),!N||w.length<=1)return w.forEach(function(F){return B.dispatch(F)});var L=[],N=w.map(function(F){var z=new I,V=_.slice();return P(S,z,V).dispatch(F),L=L.concat(V.slice(_.length)),z.read().toString()});return _=_.concat(L),N.sort(),this._array(N,!1)},_date:function(w){return y("date:"+w.toJSON())},_symbol:function(w){return y("symbol:"+w.toString())},_error:function(w){return y("error:"+w.toString())},_boolean:function(w){return y("bool:"+w.toString())},_string:function(w){y("string:"+w.length+":"),y(w.toString())},_function:function(w){y("fn:"),E(w)?this.dispatch("[native]"):this.dispatch(w.toString()),S.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(w.name)),S.respectFunctionProperties&&this._object(w)},_number:function(w){return y("number:"+w.toString())},_xml:function(w){return y("xml:"+w.toString())},_null:function(){return y("Null")},_undefined:function(){return y("Undefined")},_regexp:function(w){return y("regex:"+w.toString())},_uint8array:function(w){return y("uint8array:"),this.dispatch(Array.prototype.slice.call(w))},_uint8clampedarray:function(w){return y("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(w))},_int8array:function(w){return y("int8array:"),this.dispatch(Array.prototype.slice.call(w))},_uint16array:function(w){return y("uint16array:"),this.dispatch(Array.prototype.slice.call(w))},_int16array:function(w){return y("int16array:"),this.dispatch(Array.prototype.slice.call(w))},_uint32array:function(w){return y("uint32array:"),this.dispatch(Array.prototype.slice.call(w))},_int32array:function(w){return y("int32array:"),this.dispatch(Array.prototype.slice.call(w))},_float32array:function(w){return y("float32array:"),this.dispatch(Array.prototype.slice.call(w))},_float64array:function(w){return y("float64array:"),this.dispatch(Array.prototype.slice.call(w))},_arraybuffer:function(w){return y("arraybuffer:"),this.dispatch(new Uint8Array(w))},_url:function(w){return y("url:"+w.toString())},_map:function(w){return y("map:"),w=Array.from(w),this._array(w,S.unorderedSets!==!1)},_set:function(w){return y("set:"),w=Array.from(w),this._array(w,S.unorderedSets!==!1)},_file:function(w){return y("file:"),this.dispatch([w.name,w.size,w.type,w.lastModfied])},_blob:function(){if(S.ignoreUnknown)return y("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return y("domwindow")},_bigint:function(w){return y("bigint:"+w.toString())},_process:function(){return y("process")},_timer:function(){return y("timer")},_pipe:function(){return y("pipe")},_tcp:function(){return y("tcp")},_udp:function(){return y("udp")},_tty:function(){return y("tty")},_statwatcher:function(){return y("statwatcher")},_securecontext:function(){return y("securecontext")},_connection:function(){return y("connection")},_zlib:function(){return y("zlib")},_context:function(){return y("context")},_nodescript:function(){return y("nodescript")},_httpparser:function(){return y("httpparser")},_dataview:function(){return y("dataview")},_signal:function(){return y("signal")},_fsevent:function(){return y("fsevent")},_tlswrap:function(){return y("tlswrap")}}}function I(){return{buf:"",write:function(S){this.buf+=S},end:function(S){this.buf+=S},read:function(){return this.buf}}}s.writeToStream=function(S,R,_){return _===void 0&&(_=R,R={}),P(R=g(S,R),_).dispatch(S)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){(function(f){var m=typeof Uint8Array<"u"?Uint8Array:Array,v=43,b=47,g=48,E=97,P=65,I=45,S=95;function R(_){return _=_.charCodeAt(0),_===v||_===I?62:_===b||_===S?63:_<g?-1:_<g+10?_-g+26+26:_<P+26?_-P:_<E+26?_-E+26:void 0}f.toByteArray=function(_){var y,w;if(0<_.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var k=_.length,k=_.charAt(k-2)==="="?2:_.charAt(k-1)==="="?1:0,B=new m(3*_.length/4-k),L=0<k?_.length-4:_.length,N=0;function F(z){B[N++]=z}for(y=0;y<L;y+=4,0)F((16711680&(w=R(_.charAt(y))<<18|R(_.charAt(y+1))<<12|R(_.charAt(y+2))<<6|R(_.charAt(y+3))))>>16),F((65280&w)>>8),F(255&w);return k==2?F(255&(w=R(_.charAt(y))<<2|R(_.charAt(y+1))>>4)):k==1&&(F((w=R(_.charAt(y))<<10|R(_.charAt(y+1))<<4|R(_.charAt(y+2))>>2)>>8&255),F(255&w)),B},f.fromByteArray=function(_){var y,w,k,B,L=_.length%3,N="";function F(z){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(z)}for(y=0,k=_.length-L;y<k;y+=3)w=(_[y]<<16)+(_[y+1]<<8)+_[y+2],N+=F((B=w)>>18&63)+F(B>>12&63)+F(B>>6&63)+F(63&B);switch(L){case 1:N=(N+=F((w=_[_.length-1])>>2))+F(w<<4&63)+"==";break;case 2:N=(N=(N+=F((w=(_[_.length-2]<<8)+_[_.length-1])>>10))+F(w>>4&63))+F(w<<2&63)+"="}return N}})(s===void 0?this.base64js={}:s)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,i,s){(function(r,o,v,l,c,u,h,d,p){var f=t("base64-js"),m=t("ieee754");function v(x,M,D){if(!(this instanceof v))return new v(x,M,D);var T,A,O,U,H=typeof x;if(M==="base64"&&H=="string")for(x=(U=x).trim?U.trim():U.replace(/^\s+|\s+$/g,"");x.length%4!=0;)x+="=";if(H=="number")T=W(x);else if(H=="string")T=v.byteLength(x,M);else{if(H!="object")throw new Error("First argument needs to be a number, array or string.");T=W(x.length)}if(v._useTypedArrays?A=v._augment(new Uint8Array(T)):((A=this).length=T,A._isBuffer=!0),v._useTypedArrays&&typeof x.byteLength=="number")A._set(x);else if(Z(U=x)||v.isBuffer(U)||U&&typeof U=="object"&&typeof U.length=="number")for(O=0;O<T;O++)v.isBuffer(x)?A[O]=x.readUInt8(O):A[O]=x[O];else if(H=="string")A.write(x,0,M);else if(H=="number"&&!v._useTypedArrays&&!D)for(O=0;O<T;O++)A[O]=0;return A}function b(x,M,D,T){return v._charsWritten=ue(function(A){for(var O=[],U=0;U<A.length;U++)O.push(255&A.charCodeAt(U));return O}(M),x,D,T)}function g(x,M,D,T){return v._charsWritten=ue(function(A){for(var O,U,H=[],G=0;G<A.length;G++)U=A.charCodeAt(G),O=U>>8,U=U%256,H.push(U),H.push(O);return H}(M),x,D,T)}function E(x,M,D){var T="";D=Math.min(x.length,D);for(var A=M;A<D;A++)T+=String.fromCharCode(x[A]);return T}function P(x,M,D,O){O||(j(typeof D=="boolean","missing or invalid endian"),j(M!=null,"missing offset"),j(M+1<x.length,"Trying to read beyond buffer length"));var A,O=x.length;if(!(O<=M))return D?(A=x[M],M+1<O&&(A|=x[M+1]<<8)):(A=x[M]<<8,M+1<O&&(A|=x[M+1])),A}function I(x,M,D,O){O||(j(typeof D=="boolean","missing or invalid endian"),j(M!=null,"missing offset"),j(M+3<x.length,"Trying to read beyond buffer length"));var A,O=x.length;if(!(O<=M))return D?(M+2<O&&(A=x[M+2]<<16),M+1<O&&(A|=x[M+1]<<8),A|=x[M],M+3<O&&(A+=x[M+3]<<24>>>0)):(M+1<O&&(A=x[M+1]<<16),M+2<O&&(A|=x[M+2]<<8),M+3<O&&(A|=x[M+3]),A+=x[M]<<24>>>0),A}function S(x,M,D,T){if(T||(j(typeof D=="boolean","missing or invalid endian"),j(M!=null,"missing offset"),j(M+1<x.length,"Trying to read beyond buffer length")),!(x.length<=M))return T=P(x,M,D,!0),32768&T?-1*(65535-T+1):T}function R(x,M,D,T){if(T||(j(typeof D=="boolean","missing or invalid endian"),j(M!=null,"missing offset"),j(M+3<x.length,"Trying to read beyond buffer length")),!(x.length<=M))return T=I(x,M,D,!0),2147483648&T?-1*(4294967295-T+1):T}function _(x,M,D,T){return T||(j(typeof D=="boolean","missing or invalid endian"),j(M+3<x.length,"Trying to read beyond buffer length")),m.read(x,M,D,23,4)}function y(x,M,D,T){return T||(j(typeof D=="boolean","missing or invalid endian"),j(M+7<x.length,"Trying to read beyond buffer length")),m.read(x,M,D,52,8)}function w(x,M,D,T,A){if(A||(j(M!=null,"missing value"),j(typeof T=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+1<x.length,"trying to write beyond buffer length"),ge(M,65535)),A=x.length,!(A<=D))for(var O=0,U=Math.min(A-D,2);O<U;O++)x[D+O]=(M&255<<8*(T?O:1-O))>>>8*(T?O:1-O)}function k(x,M,D,T,A){if(A||(j(M!=null,"missing value"),j(typeof T=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+3<x.length,"trying to write beyond buffer length"),ge(M,4294967295)),A=x.length,!(A<=D))for(var O=0,U=Math.min(A-D,4);O<U;O++)x[D+O]=M>>>8*(T?O:3-O)&255}function B(x,M,D,T,A){A||(j(M!=null,"missing value"),j(typeof T=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+1<x.length,"Trying to write beyond buffer length"),Ee(M,32767,-32768)),x.length<=D||w(x,0<=M?M:65535+M+1,D,T,A)}function L(x,M,D,T,A){A||(j(M!=null,"missing value"),j(typeof T=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+3<x.length,"Trying to write beyond buffer length"),Ee(M,2147483647,-2147483648)),x.length<=D||k(x,0<=M?M:4294967295+M+1,D,T,A)}function N(x,M,D,T,A){A||(j(M!=null,"missing value"),j(typeof T=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+3<x.length,"Trying to write beyond buffer length"),q(M,34028234663852886e22,-34028234663852886e22)),x.length<=D||m.write(x,M,D,T,23,4)}function F(x,M,D,T,A){A||(j(M!=null,"missing value"),j(typeof T=="boolean","missing or invalid endian"),j(D!=null,"missing offset"),j(D+7<x.length,"Trying to write beyond buffer length"),q(M,17976931348623157e292,-17976931348623157e292)),x.length<=D||m.write(x,M,D,T,52,8)}s.Buffer=v,s.SlowBuffer=v,s.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var x=new ArrayBuffer(0),M=new Uint8Array(x);return M.foo=function(){return 42},M.foo()===42&&typeof M.subarray=="function"}catch{return!1}}(),v.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(x){return!(x==null||!x._isBuffer)},v.byteLength=function(x,M){var D;switch(x+="",M||"utf8"){case"hex":D=x.length/2;break;case"utf8":case"utf-8":D=se(x).length;break;case"ascii":case"binary":case"raw":D=x.length;break;case"base64":D=Q(x).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":D=2*x.length;break;default:throw new Error("Unknown encoding")}return D},v.concat=function(x,M){if(j(Z(x),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),x.length===0)return new v(0);if(x.length===1)return x[0];if(typeof M!="number")for(A=M=0;A<x.length;A++)M+=x[A].length;for(var D=new v(M),T=0,A=0;A<x.length;A++){var O=x[A];O.copy(D,T),T+=O.length}return D},v.prototype.write=function(x,M,D,T){isFinite(M)?isFinite(D)||(T=D,D=void 0):(G=T,T=M,M=D,D=G),M=Number(M)||0;var A,O,U,H,G=this.length-M;switch((!D||G<(D=Number(D)))&&(D=G),T=String(T||"utf8").toLowerCase()){case"hex":A=function(X,Y,K,$){K=Number(K)||0;var ee=X.length-K;(!$||ee<($=Number($)))&&($=ee),j((ee=Y.length)%2==0,"Invalid hex string"),ee/2<$&&($=ee/2);for(var J=0;J<$;J++){var re=parseInt(Y.substr(2*J,2),16);j(!isNaN(re),"Invalid hex string"),X[K+J]=re}return v._charsWritten=2*J,J}(this,x,M,D);break;case"utf8":case"utf-8":O=this,U=M,H=D,A=v._charsWritten=ue(se(x),O,U,H);break;case"ascii":case"binary":A=b(this,x,M,D);break;case"base64":O=this,U=M,H=D,A=v._charsWritten=ue(Q(x),O,U,H);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=g(this,x,M,D);break;default:throw new Error("Unknown encoding")}return A},v.prototype.toString=function(x,M,D){var T,A,O,U,H=this;if(x=String(x||"utf8").toLowerCase(),M=Number(M)||0,(D=D!==void 0?Number(D):H.length)===M)return"";switch(x){case"hex":T=function(G,X,Y){var K=G.length;(!X||X<0)&&(X=0),(!Y||Y<0||K<Y)&&(Y=K);for(var $="",ee=X;ee<Y;ee++)$+=ne(G[ee]);return $}(H,M,D);break;case"utf8":case"utf-8":T=function(G,X,Y){var K="",$="";Y=Math.min(G.length,Y);for(var ee=X;ee<Y;ee++)G[ee]<=127?(K+=pe($)+String.fromCharCode(G[ee]),$=""):$+="%"+G[ee].toString(16);return K+pe($)}(H,M,D);break;case"ascii":case"binary":T=E(H,M,D);break;case"base64":A=H,U=D,T=(O=M)===0&&U===A.length?f.fromByteArray(A):f.fromByteArray(A.slice(O,U));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":T=function(G,X,Y){for(var K=G.slice(X,Y),$="",ee=0;ee<K.length;ee+=2)$+=String.fromCharCode(K[ee]+256*K[ee+1]);return $}(H,M,D);break;default:throw new Error("Unknown encoding")}return T},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(x,M,D,T){if(M=M||0,(T=T||T===0?T:this.length)!==(D=D||0)&&x.length!==0&&this.length!==0){j(D<=T,"sourceEnd < sourceStart"),j(0<=M&&M<x.length,"targetStart out of bounds"),j(0<=D&&D<this.length,"sourceStart out of bounds"),j(0<=T&&T<=this.length,"sourceEnd out of bounds"),T>this.length&&(T=this.length);var A=(T=x.length-M<T-D?x.length-M+D:T)-D;if(A<100||!v._useTypedArrays)for(var O=0;O<A;O++)x[O+M]=this[O+D];else x._set(this.subarray(D,D+A),M)}},v.prototype.slice=function(x,M){var D=this.length;if(x=V(x,D,0),M=V(M,D,D),v._useTypedArrays)return v._augment(this.subarray(x,M));for(var T=M-x,A=new v(T,void 0,!0),O=0;O<T;O++)A[O]=this[O+x];return A},v.prototype.get=function(x){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(x)},v.prototype.set=function(x,M){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(x,M)},v.prototype.readUInt8=function(x,M){if(M||(j(x!=null,"missing offset"),j(x<this.length,"Trying to read beyond buffer length")),!(x>=this.length))return this[x]},v.prototype.readUInt16LE=function(x,M){return P(this,x,!0,M)},v.prototype.readUInt16BE=function(x,M){return P(this,x,!1,M)},v.prototype.readUInt32LE=function(x,M){return I(this,x,!0,M)},v.prototype.readUInt32BE=function(x,M){return I(this,x,!1,M)},v.prototype.readInt8=function(x,M){if(M||(j(x!=null,"missing offset"),j(x<this.length,"Trying to read beyond buffer length")),!(x>=this.length))return 128&this[x]?-1*(255-this[x]+1):this[x]},v.prototype.readInt16LE=function(x,M){return S(this,x,!0,M)},v.prototype.readInt16BE=function(x,M){return S(this,x,!1,M)},v.prototype.readInt32LE=function(x,M){return R(this,x,!0,M)},v.prototype.readInt32BE=function(x,M){return R(this,x,!1,M)},v.prototype.readFloatLE=function(x,M){return _(this,x,!0,M)},v.prototype.readFloatBE=function(x,M){return _(this,x,!1,M)},v.prototype.readDoubleLE=function(x,M){return y(this,x,!0,M)},v.prototype.readDoubleBE=function(x,M){return y(this,x,!1,M)},v.prototype.writeUInt8=function(x,M,D){D||(j(x!=null,"missing value"),j(M!=null,"missing offset"),j(M<this.length,"trying to write beyond buffer length"),ge(x,255)),M>=this.length||(this[M]=x)},v.prototype.writeUInt16LE=function(x,M,D){w(this,x,M,!0,D)},v.prototype.writeUInt16BE=function(x,M,D){w(this,x,M,!1,D)},v.prototype.writeUInt32LE=function(x,M,D){k(this,x,M,!0,D)},v.prototype.writeUInt32BE=function(x,M,D){k(this,x,M,!1,D)},v.prototype.writeInt8=function(x,M,D){D||(j(x!=null,"missing value"),j(M!=null,"missing offset"),j(M<this.length,"Trying to write beyond buffer length"),Ee(x,127,-128)),M>=this.length||(0<=x?this.writeUInt8(x,M,D):this.writeUInt8(255+x+1,M,D))},v.prototype.writeInt16LE=function(x,M,D){B(this,x,M,!0,D)},v.prototype.writeInt16BE=function(x,M,D){B(this,x,M,!1,D)},v.prototype.writeInt32LE=function(x,M,D){L(this,x,M,!0,D)},v.prototype.writeInt32BE=function(x,M,D){L(this,x,M,!1,D)},v.prototype.writeFloatLE=function(x,M,D){N(this,x,M,!0,D)},v.prototype.writeFloatBE=function(x,M,D){N(this,x,M,!1,D)},v.prototype.writeDoubleLE=function(x,M,D){F(this,x,M,!0,D)},v.prototype.writeDoubleBE=function(x,M,D){F(this,x,M,!1,D)},v.prototype.fill=function(x,M,D){if(M=M||0,D=D||this.length,j(typeof(x=typeof(x=x||0)=="string"?x.charCodeAt(0):x)=="number"&&!isNaN(x),"value is not a number"),j(M<=D,"end < start"),D!==M&&this.length!==0){j(0<=M&&M<this.length,"start out of bounds"),j(0<=D&&D<=this.length,"end out of bounds");for(var T=M;T<D;T++)this[T]=x}},v.prototype.inspect=function(){for(var x=[],M=this.length,D=0;D<M;D++)if(x[D]=ne(this[D]),D===s.INSPECT_MAX_BYTES){x[D+1]="...";break}return"<Buffer "+x.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var x=new Uint8Array(this.length),M=0,D=x.length;M<D;M+=1)x[M]=this[M];return x.buffer};var z=v.prototype;function V(x,M,D){return typeof x!="number"?D:M<=(x=~~x)?M:0<=x||0<=(x+=M)?x:0}function W(x){return(x=~~Math.ceil(+x))<0?0:x}function Z(x){return(Array.isArray||function(M){return Object.prototype.toString.call(M)==="[object Array]"})(x)}function ne(x){return x<16?"0"+x.toString(16):x.toString(16)}function se(x){for(var M=[],D=0;D<x.length;D++){var T=x.charCodeAt(D);if(T<=127)M.push(x.charCodeAt(D));else for(var A=D,O=(55296<=T&&T<=57343&&D++,encodeURIComponent(x.slice(A,D+1)).substr(1).split("%")),U=0;U<O.length;U++)M.push(parseInt(O[U],16))}return M}function Q(x){return f.toByteArray(x)}function ue(x,M,D,T){for(var A=0;A<T&&!(A+D>=M.length||A>=x.length);A++)M[A+D]=x[A];return A}function pe(x){try{return decodeURIComponent(x)}catch{return""}}function ge(x,M){j(typeof x=="number","cannot write a non-number as a number"),j(0<=x,"specified a negative value for writing an unsigned value"),j(x<=M,"value is larger than maximum value for type"),j(Math.floor(x)===x,"value has a fractional component")}function Ee(x,M,D){j(typeof x=="number","cannot write a non-number as a number"),j(x<=M,"value larger than maximum allowed value"),j(D<=x,"value smaller than minimum allowed value"),j(Math.floor(x)===x,"value has a fractional component")}function q(x,M,D){j(typeof x=="number","cannot write a non-number as a number"),j(x<=M,"value larger than maximum allowed value"),j(D<=x,"value smaller than minimum allowed value")}function j(x,M){if(!x)throw new Error(M||"Failed assertion")}v._augment=function(x){return x._isBuffer=!0,x._get=x.get,x._set=x.set,x.get=z.get,x.set=z.set,x.write=z.write,x.toString=z.toString,x.toLocaleString=z.toString,x.toJSON=z.toJSON,x.copy=z.copy,x.slice=z.slice,x.readUInt8=z.readUInt8,x.readUInt16LE=z.readUInt16LE,x.readUInt16BE=z.readUInt16BE,x.readUInt32LE=z.readUInt32LE,x.readUInt32BE=z.readUInt32BE,x.readInt8=z.readInt8,x.readInt16LE=z.readInt16LE,x.readInt16BE=z.readInt16BE,x.readInt32LE=z.readInt32LE,x.readInt32BE=z.readInt32BE,x.readFloatLE=z.readFloatLE,x.readFloatBE=z.readFloatBE,x.readDoubleLE=z.readDoubleLE,x.readDoubleBE=z.readDoubleBE,x.writeUInt8=z.writeUInt8,x.writeUInt16LE=z.writeUInt16LE,x.writeUInt16BE=z.writeUInt16BE,x.writeUInt32LE=z.writeUInt32LE,x.writeUInt32BE=z.writeUInt32BE,x.writeInt8=z.writeInt8,x.writeInt16LE=z.writeInt16LE,x.writeInt16BE=z.writeInt16BE,x.writeInt32LE=z.writeInt32LE,x.writeInt32BE=z.writeInt32BE,x.writeFloatLE=z.writeFloatLE,x.writeFloatBE=z.writeFloatBE,x.writeDoubleLE=z.writeDoubleLE,x.writeDoubleBE=z.writeDoubleBE,x.fill=z.fill,x.inspect=z.inspect,x.toArrayBuffer=z.toArrayBuffer,x}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,i,s){(function(r,o,f,l,c,u,h,d,p){var f=t("buffer").Buffer,m=4,v=new f(m);v.fill(0),i.exports={hash:function(b,g,E,P){for(var I=g(function(w,k){w.length%m!=0&&(B=w.length+(m-w.length%m),w=f.concat([w,v],B));for(var B,L=[],N=k?w.readInt32BE:w.readInt32LE,F=0;F<w.length;F+=m)L.push(N.call(w,F));return L}(b=f.isBuffer(b)?b:new f(b),P),8*b.length),g=P,S=new f(E),R=g?S.writeInt32BE:S.writeInt32LE,_=0;_<I.length;_++)R.call(S,I[_],4*_,!0);return S}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,i,s){(function(r,o,f,l,c,u,h,d,p){var f=t("buffer").Buffer,m=t("./sha"),v=t("./sha256"),b=t("./rng"),g={sha1:m,sha256:v,md5:t("./md5")},E=64,P=new f(E);function I(w,k){var B=g[w=w||"sha1"],L=[];return B||S("algorithm:",w,"is not yet supported"),{update:function(N){return f.isBuffer(N)||(N=new f(N)),L.push(N),N.length,this},digest:function(N){var F=f.concat(L),F=k?function(z,V,W){f.isBuffer(V)||(V=new f(V)),f.isBuffer(W)||(W=new f(W)),V.length>E?V=z(V):V.length<E&&(V=f.concat([V,P],E));for(var Z=new f(E),ne=new f(E),se=0;se<E;se++)Z[se]=54^V[se],ne[se]=92^V[se];return W=z(f.concat([Z,W])),z(f.concat([ne,W]))}(B,k,F):B(F);return L=null,N?F.toString(N):F}}}function S(){var w=[].slice.call(arguments).join(" ");throw new Error([w,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}P.fill(0),s.createHash=function(w){return I(w)},s.createHmac=I,s.randomBytes=function(w,k){if(!k||!k.call)return new f(b(w));try{k.call(this,void 0,new f(b(w)))}catch(B){k(B)}};var R,_=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],y=function(w){s[w]=function(){S("sorry,",w,"is not implemented yet")}};for(R in _)y(_[R])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var f=t("./helpers");function m(S,R){S[R>>5]|=128<<R%32,S[14+(R+64>>>9<<4)]=R;for(var _=1732584193,y=-271733879,w=-1732584194,k=271733878,B=0;B<S.length;B+=16){var L=_,N=y,F=w,z=k,_=b(_,y,w,k,S[B+0],7,-680876936),k=b(k,_,y,w,S[B+1],12,-389564586),w=b(w,k,_,y,S[B+2],17,606105819),y=b(y,w,k,_,S[B+3],22,-1044525330);_=b(_,y,w,k,S[B+4],7,-176418897),k=b(k,_,y,w,S[B+5],12,1200080426),w=b(w,k,_,y,S[B+6],17,-1473231341),y=b(y,w,k,_,S[B+7],22,-45705983),_=b(_,y,w,k,S[B+8],7,1770035416),k=b(k,_,y,w,S[B+9],12,-1958414417),w=b(w,k,_,y,S[B+10],17,-42063),y=b(y,w,k,_,S[B+11],22,-1990404162),_=b(_,y,w,k,S[B+12],7,1804603682),k=b(k,_,y,w,S[B+13],12,-40341101),w=b(w,k,_,y,S[B+14],17,-1502002290),_=g(_,y=b(y,w,k,_,S[B+15],22,1236535329),w,k,S[B+1],5,-165796510),k=g(k,_,y,w,S[B+6],9,-1069501632),w=g(w,k,_,y,S[B+11],14,643717713),y=g(y,w,k,_,S[B+0],20,-373897302),_=g(_,y,w,k,S[B+5],5,-701558691),k=g(k,_,y,w,S[B+10],9,38016083),w=g(w,k,_,y,S[B+15],14,-660478335),y=g(y,w,k,_,S[B+4],20,-405537848),_=g(_,y,w,k,S[B+9],5,568446438),k=g(k,_,y,w,S[B+14],9,-1019803690),w=g(w,k,_,y,S[B+3],14,-187363961),y=g(y,w,k,_,S[B+8],20,1163531501),_=g(_,y,w,k,S[B+13],5,-1444681467),k=g(k,_,y,w,S[B+2],9,-51403784),w=g(w,k,_,y,S[B+7],14,1735328473),_=E(_,y=g(y,w,k,_,S[B+12],20,-1926607734),w,k,S[B+5],4,-378558),k=E(k,_,y,w,S[B+8],11,-2022574463),w=E(w,k,_,y,S[B+11],16,1839030562),y=E(y,w,k,_,S[B+14],23,-35309556),_=E(_,y,w,k,S[B+1],4,-1530992060),k=E(k,_,y,w,S[B+4],11,1272893353),w=E(w,k,_,y,S[B+7],16,-155497632),y=E(y,w,k,_,S[B+10],23,-1094730640),_=E(_,y,w,k,S[B+13],4,681279174),k=E(k,_,y,w,S[B+0],11,-358537222),w=E(w,k,_,y,S[B+3],16,-722521979),y=E(y,w,k,_,S[B+6],23,76029189),_=E(_,y,w,k,S[B+9],4,-640364487),k=E(k,_,y,w,S[B+12],11,-421815835),w=E(w,k,_,y,S[B+15],16,530742520),_=P(_,y=E(y,w,k,_,S[B+2],23,-995338651),w,k,S[B+0],6,-198630844),k=P(k,_,y,w,S[B+7],10,1126891415),w=P(w,k,_,y,S[B+14],15,-1416354905),y=P(y,w,k,_,S[B+5],21,-57434055),_=P(_,y,w,k,S[B+12],6,1700485571),k=P(k,_,y,w,S[B+3],10,-1894986606),w=P(w,k,_,y,S[B+10],15,-1051523),y=P(y,w,k,_,S[B+1],21,-2054922799),_=P(_,y,w,k,S[B+8],6,1873313359),k=P(k,_,y,w,S[B+15],10,-30611744),w=P(w,k,_,y,S[B+6],15,-1560198380),y=P(y,w,k,_,S[B+13],21,1309151649),_=P(_,y,w,k,S[B+4],6,-145523070),k=P(k,_,y,w,S[B+11],10,-1120210379),w=P(w,k,_,y,S[B+2],15,718787259),y=P(y,w,k,_,S[B+9],21,-343485551),_=I(_,L),y=I(y,N),w=I(w,F),k=I(k,z)}return Array(_,y,w,k)}function v(S,R,_,y,w,k){return I((R=I(I(R,S),I(y,k)))<<w|R>>>32-w,_)}function b(S,R,_,y,w,k,B){return v(R&_|~R&y,S,R,w,k,B)}function g(S,R,_,y,w,k,B){return v(R&y|_&~y,S,R,w,k,B)}function E(S,R,_,y,w,k,B){return v(R^_^y,S,R,w,k,B)}function P(S,R,_,y,w,k,B){return v(_^(R|~y),S,R,w,k,B)}function I(S,R){var _=(65535&S)+(65535&R);return(S>>16)+(R>>16)+(_>>16)<<16|65535&_}i.exports=function(S){return f.hash(S,m,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){i.exports=function(f){for(var m,v=new Array(f),b=0;b<f;b++)!(3&b)&&(m=4294967296*Math.random()),v[b]=m>>>((3&b)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var f=t("./helpers");function m(g,E){g[E>>5]|=128<<24-E%32,g[15+(E+64>>9<<4)]=E;for(var P,I,S,R=Array(80),_=1732584193,y=-271733879,w=-1732584194,k=271733878,B=-1009589776,L=0;L<g.length;L+=16){for(var N=_,F=y,z=w,V=k,W=B,Z=0;Z<80;Z++){R[Z]=Z<16?g[L+Z]:b(R[Z-3]^R[Z-8]^R[Z-14]^R[Z-16],1);var ne=v(v(b(_,5),(ne=y,I=w,S=k,(P=Z)<20?ne&I|~ne&S:!(P<40)&&P<60?ne&I|ne&S|I&S:ne^I^S)),v(v(B,R[Z]),(P=Z)<20?1518500249:P<40?1859775393:P<60?-1894007588:-899497514)),B=k,k=w,w=b(y,30),y=_,_=ne}_=v(_,N),y=v(y,F),w=v(w,z),k=v(k,V),B=v(B,W)}return Array(_,y,w,k,B)}function v(g,E){var P=(65535&g)+(65535&E);return(g>>16)+(E>>16)+(P>>16)<<16|65535&P}function b(g,E){return g<<E|g>>>32-E}i.exports=function(g){return f.hash(g,m,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){function f(E,P){var I=(65535&E)+(65535&P);return(E>>16)+(P>>16)+(I>>16)<<16|65535&I}function m(E,P){var I,S=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),R=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);E[P>>5]|=128<<24-P%32,E[15+(P+64>>9<<4)]=P;for(var y,w,k=0;k<E.length;k+=16){for(var B=R[0],L=R[1],N=R[2],F=R[3],z=R[4],V=R[5],W=R[6],Z=R[7],ne=0;ne<64;ne++)_[ne]=ne<16?E[ne+k]:f(f(f((w=_[ne-2],b(w,17)^b(w,19)^g(w,10)),_[ne-7]),(w=_[ne-15],b(w,7)^b(w,18)^g(w,3))),_[ne-16]),I=f(f(f(f(Z,b(w=z,6)^b(w,11)^b(w,25)),z&V^~z&W),S[ne]),_[ne]),y=f(b(y=B,2)^b(y,13)^b(y,22),B&L^B&N^L&N),Z=W,W=V,V=z,z=f(F,I),F=N,N=L,L=B,B=f(I,y);R[0]=f(B,R[0]),R[1]=f(L,R[1]),R[2]=f(N,R[2]),R[3]=f(F,R[3]),R[4]=f(z,R[4]),R[5]=f(V,R[5]),R[6]=f(W,R[6]),R[7]=f(Z,R[7])}return R}var v=t("./helpers"),b=function(E,P){return E>>>P|E<<32-P},g=function(E,P){return E>>>P};i.exports=function(E){return v.hash(E,m,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){s.read=function(f,m,v,b,k){var E,P,I=8*k-b-1,S=(1<<I)-1,R=S>>1,_=-7,y=v?k-1:0,w=v?-1:1,k=f[m+y];for(y+=w,E=k&(1<<-_)-1,k>>=-_,_+=I;0<_;E=256*E+f[m+y],y+=w,_-=8);for(P=E&(1<<-_)-1,E>>=-_,_+=b;0<_;P=256*P+f[m+y],y+=w,_-=8);if(E===0)E=1-R;else{if(E===S)return P?NaN:1/0*(k?-1:1);P+=Math.pow(2,b),E-=R}return(k?-1:1)*P*Math.pow(2,E-b)},s.write=function(f,m,v,b,g,B){var P,I,S=8*B-g-1,R=(1<<S)-1,_=R>>1,y=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=b?0:B-1,k=b?1:-1,B=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(I=isNaN(m)?1:0,P=R):(P=Math.floor(Math.log(m)/Math.LN2),m*(b=Math.pow(2,-P))<1&&(P--,b*=2),2<=(m+=1<=P+_?y/b:y*Math.pow(2,1-_))*b&&(P++,b/=2),R<=P+_?(I=0,P=R):1<=P+_?(I=(m*b-1)*Math.pow(2,g),P+=_):(I=m*Math.pow(2,_-1)*Math.pow(2,g),P=0));8<=g;f[v+w]=255&I,w+=k,I/=256,g-=8);for(P=P<<g|I,S+=g;0<S;f[v+w]=255&P,w+=k,P/=256,S-=8);f[v+w-k]|=128*B}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var f,m,v;function b(){}(r=i.exports={}).nextTick=(m=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,m?function(g){return window.setImmediate(g)}:v?(f=[],window.addEventListener("message",function(g){var E=g.source;E!==window&&E!==null||g.data!=="process-tick"||(g.stopPropagation(),0<f.length&&f.shift()())},!0),function(g){f.push(g),window.postMessage("process-tick","*")}):function(g){setTimeout(g,0)}),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.binding=function(g){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(g){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(ff);var Mw=ff.exports;const iA=Os(Mw);var mf=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],Aw=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],vf=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],Rw=mf,Iw=Rw.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),yl=vf;yl=yl.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});var kw=yl.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),Bw=Hw,Ow=mf,uh=Aw,Lw=vf,zw=Iw,Dw=kw,Qt=999,hh=9999,Oa=0,La=1,dh=2,ph=3,fh=4,js=5,Fw=6,Nw=7,Vw=8,mh=9,Uw=10,vh=11,jw=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function Hw(n){var e=0,t=0,i=Qt,s,r,o=[],a=[],l=1,c=0,u=0,h=!1,d=!1,p="",f;n=n||{};var m=Lw,v=Ow;n.version==="300 es"&&(m=Dw,v=zw);for(var b={},g={},e=0;e<m.length;e++)b[m[e]]=!0;for(var e=0;e<v.length;e++)g[v[e]]=!0;return function(V){return a=[],V!==null?P(V):I()};function E(V){V.length&&a.push({type:jw[i],data:V,position:u,line:l,column:c})}function P(V){e=0,V.toString&&(V=V.toString()),p+=V.replace(/\r\n/g,`
`),f=p.length;for(var W;s=p[e],e<f;){switch(W=e,i){case Oa:e=w();break;case La:e=y();break;case dh:e=_();break;case ph:e=k();break;case fh:e=N();break;case vh:e=L();break;case js:e=F();break;case hh:e=z();break;case mh:e=R();break;case Qt:e=S();break}if(W!==e)switch(p[W]){case`
`:c=0,++l;break;default:++c;break}}return t+=e,p=p.slice(e),a}function I(V){return o.length&&E(o.join("")),i=Uw,E("(eof)"),a}function S(){return o=o.length?[]:o,r==="/"&&s==="*"?(u=t+e-1,i=Oa,r=s,e+1):r==="/"&&s==="/"?(u=t+e-1,i=La,r=s,e+1):s==="#"?(i=dh,u=t+e,e):/\s/.test(s)?(i=mh,u=t+e,e):(h=/\d/.test(s),d=/[^\w_]/.test(s),u=t+e,i=h?fh:d?ph:hh,e)}function R(){return/[^\s]/g.test(s)?(E(o.join("")),i=Qt,e):(o.push(s),r=s,e+1)}function _(){return(s==="\r"||s===`
`)&&r!=="\\"?(E(o.join("")),i=Qt,e):(o.push(s),r=s,e+1)}function y(){return _()}function w(){return s==="/"&&r==="*"?(o.push(s),E(o.join("")),i=Qt,e+1):(o.push(s),r=s,e+1)}function k(){if(r==="."&&/\d/.test(s))return i=js,e;if(r==="/"&&s==="*")return i=Oa,e;if(r==="/"&&s==="/")return i=La,e;if(s==="."&&o.length){for(;B(o););return i=js,e}if(s===";"||s===")"||s==="("){if(o.length)for(;B(o););return E(s),i=Qt,e+1}var V=o.length===2&&s!=="=";if(/[\w_\d\s]/.test(s)||V){for(;B(o););return i=Qt,e}return o.push(s),r=s,e+1}function B(V){var W=0,Z,ne;do{if(Z=uh.indexOf(V.slice(0,V.length+W).join("")),ne=uh[Z],Z===-1){if(W--+V.length>0)continue;ne=V.slice(0,1).join("")}return E(ne),u+=ne.length,o=o.slice(ne.length),o.length}while(!0)}function L(){return/[^a-fA-F0-9]/.test(s)?(E(o.join("")),i=Qt,e):(o.push(s),r=s,e+1)}function N(){return s==="."||/[eE]/.test(s)?(o.push(s),i=js,r=s,e+1):s==="x"&&o.length===1&&o[0]==="0"?(i=vh,o.push(s),r=s,e+1):/[^\d]/.test(s)?(E(o.join("")),i=Qt,e):(o.push(s),r=s,e+1)}function F(){return s==="f"&&(o.push(s),r=s,e+=1),/[eE]/.test(s)||(s==="-"||s==="+")&&/[eE]/.test(r)?(o.push(s),r=s,e+1):/[^\d]/.test(s)?(E(o.join("")),i=Qt,e):(o.push(s),r=s,e+1)}function z(){if(/[^\d\w_]/.test(s)){var V=o.join("");return g[V]?i=Vw:b[V]?i=Nw:i=Fw,E(o.join("")),i=Qt,e}return o.push(s),r=s,e+1}}var Gw=Bw,qw=Ww;function Ww(n,e){var t=Gw(e),i=[];return i=i.concat(t(n)),i=i.concat(t(null)),i}const sA=Os(qw);var $w=Kw;function Kw(n){for(var e=[],t=0;t<n.length;t++)n[t].type!=="eof"&&e.push(n[t].data);return e.join("")}const rA=Os($w);var Yw=Xw;function Xw(n){var e=null,t=null,i=0,s=0,r=0,o=0,a=0,l=[],c,u,h;for(c=0,u;c<n.length;c++)if(h=n[c],h.data==="{"){if(i&&i++||(u=p(c,Qn(")"),Qn()),u<0)||(o=u,u=p(u,Qn("("),Qn(")")),u<0)||(a=u,u=p(u,Hs),u<0)||n[u].type!=="ident"||(t=n[u].data,u=p(u,Hs),u<0))continue;i=1,s=c,e=n[u].data,r=u;var d=p(u,Hs);switch(n[d]&&n[d].data){case"lowp":case"highp":case"mediump":r=d}}else if(i&&h.data==="}"){if(--i)continue;l.push({name:t,type:e,body:[s+1,c],args:[a,o+1],outer:[r,c+1]})}for(c=0;c<n.length;c++)if(h=n[c],h.data===";"){if(u=p(c,Qn(")"),Qn()),u<0||(o=u,u=p(u,Qn("("),Qn(")")),u<0)||(a=u,u=p(u,Hs),u<0)||n[u].type!=="ident"||(t=n[u].data,u=p(u,Hs),u<0)||n[u].type==="operator"||n[u].data==="return")continue;e=n[u].data,l.push({name:t,type:e,body:!1,args:[a,o+1],outer:[u,c+1]})}return l.sort(function(f,m){return f.outer[0]-m.outer[0]});function p(f,m,v){for(var b=f-1;b>=0;b--){if(m(n[b]))return b;if(v&&v(n[b]))return-1}return-1}}function Qn(n){return function(e){return e.type==="operator"&&(!n||e.data===n)}}function Hs(n){return n.type!=="whitespace"}const oA=Os(Yw);function zn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gf(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ft={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ts={duration:.5,overwrite:!1,delay:0},dc,pt,De,qt=1e8,Oe=1/qt,xl=Math.PI*2,Zw=xl/4,Qw=0,_f=Math.sqrt,Jw=Math.cos,ey=Math.sin,nt=function(e){return typeof e=="string"},qe=function(e){return typeof e=="function"},jn=function(e){return typeof e=="number"},pc=function(e){return typeof e>"u"},En=function(e){return typeof e=="object"},St=function(e){return e!==!1},fc=function(){return typeof window<"u"},so=function(e){return qe(e)||nt(e)},bf=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ft=Array.isArray,Cl=/(?:-?\.?\d|\.)+/gi,wf=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,us=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,za=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,yf=/[+-]=-?[.\d]+/,xf=/[^,'"\[\]\s]+/gi,ty=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ve,mn,El,mc,Nt={},Lo={},Cf,Ef=function(e){return(Lo=Wi(e,Nt))&&At},vc=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Cr=function(e,t){return!t&&console.warn(e)},Sf=function(e,t){return e&&(Nt[e]=t)&&Lo&&(Lo[e]=t)||Nt},Er=function(){return 0},ny={suppressEvents:!0,isStart:!0,kill:!1},yo={suppressEvents:!0,kill:!1},iy={suppressEvents:!0},gc={},pi=[],Sl={},Pf,Bt={},Da={},gh=30,xo=[],_c="",bc=function(e){var t=e[0],i,s;if(En(t)||qe(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(s=xo.length;s--&&!xo[s].targetTest(t););i=xo[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new Xf(e[s],i)))||e.splice(s,1);return e},Fi=function(e){return e._gsap||bc(Wt(e))[0]._gsap},Tf=function(e,t,i){return(i=e[t])&&qe(i)?e[t]():pc(i)&&e.getAttribute&&e.getAttribute(t)||i},Pt=function(e,t){return(e=e.split(",")).forEach(t)||e},We=function(e){return Math.round(e*1e5)/1e5||0},tt=function(e){return Math.round(e*1e7)/1e7||0},_s=function(e,t){var i=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+s:i==="-"?e-s:i==="*"?e*s:e/s},sy=function(e,t){for(var i=t.length,s=0;e.indexOf(t[s])<0&&++s<i;);return s<i},zo=function(){var e=pi.length,t=pi.slice(0),i,s;for(Sl={},pi.length=0,i=0;i<e;i++)s=t[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Mf=function(e,t,i,s){pi.length&&!pt&&zo(),e.render(t,i,pt&&t<0&&(e._initted||e._startAt)),pi.length&&!pt&&zo()},Af=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(xf).length<2?t:nt(e)?e.trim():e},Rf=function(e){return e},Xt=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ry=function(e){return function(t,i){for(var s in i)s in t||s==="duration"&&e||s==="ease"||(t[s]=i[s])}},Wi=function(e,t){for(var i in t)e[i]=t[i];return e},_h=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=En(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Do=function(e,t){var i={},s;for(s in e)s in t||(i[s]=e[s]);return i},dr=function(e){var t=e.parent||Ve,i=e.keyframes?ry(ft(e.keyframes)):Xt;if(St(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},oy=function(e,t){for(var i=e.length,s=i===t.length;s&&i--&&e[i]===t[i];);return i<0},If=function(e,t,i,s,r){var o=e[s],a;if(r)for(a=t[r];o&&o[r]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},aa=function(e,t,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},gi=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ni=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},ay=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Pl=function(e,t,i,s){return e._startAt&&(pt?e._startAt.revert(yo):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},ly=function n(e){return!e||e._ts&&n(e.parent)},bh=function(e){return e._repeat?Ms(e._tTime,e=e.duration()+e._rDelay)*e:0},Ms=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Fo=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},la=function(e){return e._end=tt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Oe)||0))},ca=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=tt(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),la(e),i._dirty||Ni(i,e)),e},kf=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Fo(e.rawTime(),t),(!t._dur||Vr(0,t.totalDuration(),i)-t._tTime>Oe)&&t.render(i,!0)),Ni(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Oe}},gn=function(e,t,i,s){return t.parent&&gi(t),t._start=tt((jn(i)?i:i||e!==Ve?Gt(e,i,t):e._time)+t._delay),t._end=tt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),If(e,t,"_first","_last",e._sort?"_start":0),Tl(t)||(e._recent=t),s||kf(e,t),e._ts<0&&ca(e,e._tTime),e},Bf=function(e,t){return(Nt.ScrollTrigger||vc("scrollTrigger",t))&&Nt.ScrollTrigger.create(t,e)},Of=function(e,t,i,s,r){if(yc(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!pt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Pf!==Ot.frame)return pi.push(e),e._lazy=[r,s],1},cy=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},Tl=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},uy=function(e,t,i,s){var r=e.ratio,o=t<0||!t&&(!e._start&&cy(e)&&!(!e._initted&&Tl(e))||(e._ts<0||e._dp._ts<0)&&!Tl(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=Vr(0,e._tDur,t),u=Ms(l,a),e._yoyo&&u&1&&(o=1-o),u!==Ms(e._tTime,a)&&(r=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==r||pt||s||e._zTime===Oe||!t&&e._zTime){if(!e._initted&&Of(e,t,s,i,l))return;for(h=e._zTime,e._zTime=t||(i?Oe:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&Pl(e,t,i,!0),e._onUpdate&&!i&&Dt(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Dt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&gi(e,1),!i&&!pt&&(Dt(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},hy=function(e,t,i){var s;if(i>t)for(s=e._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},As=function(e,t,i,s){var r=e._repeat,o=tt(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:tt(o*(r+1)+e._rDelay*r):o,a>0&&!s&&ca(e,e._tTime=e._tDur*a),e.parent&&la(e),i||Ni(e.parent,e),e},wh=function(e){return e instanceof _t?Ni(e):As(e,e._dur)},dy={_start:0,endTime:Er,totalDuration:Er},Gt=function n(e,t,i){var s=e.labels,r=e._recent||dy,o=e.duration()>=qt?r.endTime(!1):e._dur,a,l,c;return nt(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?r:i).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(ft(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},pr=function(e,t,i){var s=jn(t[1]),r=(s?2:1)+(e<2?0:1),o=t[r],a,l;if(s&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=St(l.vars.inherit)&&l.parent;o.immediateRender=St(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[r-1]}return new Xe(t[0],o,t[r+1])},Ei=function(e,t){return e||e===0?t(e):t},Vr=function(e,t,i){return i<e?e:i>t?t:i},ht=function(e,t){return!nt(e)||!(t=ty.exec(e))?"":t[1]},py=function(e,t,i){return Ei(i,function(s){return Vr(e,t,s)})},Ml=[].slice,Lf=function(e,t){return e&&En(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&En(e[0]))&&!e.nodeType&&e!==mn},fy=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(s){var r;return nt(s)&&!t||Lf(s,1)?(r=i).push.apply(r,Wt(s)):i.push(s)})||i},Wt=function(e,t,i){return De&&!t&&De.selector?De.selector(e):nt(e)&&!i&&(El||!Rs())?Ml.call((t||mc).querySelectorAll(e),0):ft(e)?fy(e,i):Lf(e)?Ml.call(e,0):e?[e]:[]},Al=function(e){return e=Wt(e)[0]||Cr("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Wt(t,i.querySelectorAll?i:i===e?Cr("Invalid scope")||mc.createElement("div"):e)}},zf=function(e){return e.sort(function(){return .5-Math.random()})},Df=function(e){if(qe(e))return e;var t=En(e)?e:{each:e},i=Vi(t.ease),s=t.from||0,r=parseFloat(t.base)||0,o={},a=s>0&&s<1,l=isNaN(s)||a,c=t.axis,u=s,h=s;return nt(s)?u=h={center:.5,edges:.5,end:1}[s]||0:!a&&l&&(u=s[0],h=s[1]),function(d,p,f){var m=(f||t).length,v=o[m],b,g,E,P,I,S,R,_,y;if(!v){if(y=t.grid==="auto"?0:(t.grid||[1,qt])[1],!y){for(R=-qt;R<(R=f[y++].getBoundingClientRect().left)&&y<m;);y<m&&y--}for(v=o[m]=[],b=l?Math.min(y,m)*u-.5:s%y,g=y===qt?0:l?m*h/y-.5:s/y|0,R=0,_=qt,S=0;S<m;S++)E=S%y-b,P=g-(S/y|0),v[S]=I=c?Math.abs(c==="y"?P:E):_f(E*E+P*P),I>R&&(R=I),I<_&&(_=I);s==="random"&&zf(v),v.max=R-_,v.min=_,v.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(y>m?m-1:c?c==="y"?m/y:y:Math.max(y,m/y))||0)*(s==="edges"?-1:1),v.b=m<0?r-m:r,v.u=ht(t.amount||t.each)||0,i=i&&m<0?$f(i):i}return m=(v[d]-v.min)/v.max||0,tt(v.b+(i?i(m):m)*v.v)+v.u}},Rl=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var s=tt(Math.round(parseFloat(i)/e)*e*t);return(s-s%1)/t+(jn(i)?0:ht(i))}},Ff=function(e,t){var i=ft(e),s,r;return!i&&En(e)&&(s=i=e.radius||qt,e.values?(e=Wt(e.values),(r=!jn(e[0]))&&(s*=s)):e=Rl(e.increment)),Ei(t,i?qe(e)?function(o){return r=e(o),Math.abs(r-o)<=s?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),c=qt,u=0,h=e.length,d,p;h--;)r?(d=e[h].x-a,p=e[h].y-l,d=d*d+p*p):d=Math.abs(e[h]-a),d<c&&(c=d,u=h);return u=!s||c<=s?e[u]:o,r||u===o||jn(o)?u:u+ht(o)}:Rl(e))},Nf=function(e,t,i,s){return Ei(ft(e)?!t:i===!0?!!(i=0):!s,function(){return ft(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*s)/s})},my=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduce(function(r,o){return o(r)},s)}},vy=function(e,t){return function(i){return e(parseFloat(i))+(t||ht(i))}},gy=function(e,t,i){return Uf(e,t,0,1,i)},Vf=function(e,t,i){return Ei(i,function(s){return e[~~t(s)]})},_y=function n(e,t,i){var s=t-e;return ft(e)?Vf(e,n(0,e.length),t):Ei(i,function(r){return(s+(r-e)%s)%s+e})},by=function n(e,t,i){var s=t-e,r=s*2;return ft(e)?Vf(e,n(0,e.length-1),t):Ei(i,function(o){return o=(r+(o-e)%r)%r||0,e+(o>s?r-o:o)})},Sr=function(e){for(var t=0,i="",s,r,o,a;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a=e.charAt(s+7)==="[",r=e.substr(s+7,o-s-7).match(a?xf:Cl),i+=e.substr(t,s-t)+Nf(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},Uf=function(e,t,i,s,r){var o=t-e,a=s-i;return Ei(r,function(l){return i+((l-e)/o*a||0)})},wy=function n(e,t,i,s){var r=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!r){var o=nt(e),a={},l,c,u,h,d;if(i===!0&&(s=1)&&(i=null),o)e={p:e},t={p:t};else if(ft(e)&&!ft(t)){for(u=[],h=e.length,d=h-2,c=1;c<h;c++)u.push(n(e[c-1],e[c]));h--,r=function(f){f*=h;var m=Math.min(d,~~f);return u[m](f-m)},i=t}else s||(e=Wi(ft(e)?[]:{},e));if(!u){for(l in t)wc.call(a,e,l,"get",t[l]);r=function(f){return Ec(f,a)||(o?e.p:e)}}}return Ei(i,r)},yh=function(e,t,i){var s=e.labels,r=qt,o,a,l;for(o in s)a=s[o]-t,a<0==!!i&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},Dt=function(e,t,i){var s=e.vars,r=s[t],o=De,a=e._ctx,l,c,u;if(r)return l=s[t+"Params"],c=s.callbackScope||e,i&&pi.length&&zo(),a&&(De=a),u=l?r.apply(c,l):r.call(c),De=o,u},tr=function(e){return gi(e),e.scrollTrigger&&e.scrollTrigger.kill(!!pt),e.progress()<1&&Dt(e,"onInterrupt"),e},hs,jf=[],Hf=function(e){if(e)if(e=!e.name&&e.default||e,fc()||e.headless){var t=e.name,i=qe(e),s=t&&!i&&e.init?function(){this._props=[]}:e,r={init:Er,render:Ec,add:wc,kill:zy,modifier:Ly,rawVars:0},o={targetTest:0,get:0,getSetter:Cc,aliases:{},register:0};if(Rs(),e!==s){if(Bt[t])return;Xt(s,Xt(Do(e,r),o)),Wi(s.prototype,Wi(r,Do(e,o))),Bt[s.prop=t]=s,e.targetTest&&(xo.push(s),gc[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Sf(t,s),e.register&&e.register(At,s,Tt)}else jf.push(e)},Re=255,nr={aqua:[0,Re,Re],lime:[0,Re,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Re],navy:[0,0,128],white:[Re,Re,Re],olive:[128,128,0],yellow:[Re,Re,0],orange:[Re,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Re,0,0],pink:[Re,192,203],cyan:[0,Re,Re],transparent:[Re,Re,Re,0]},Fa=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Re+.5|0},Gf=function(e,t,i){var s=e?jn(e)?[e>>16,e>>8&Re,e&Re]:0:nr.black,r,o,a,l,c,u,h,d,p,f;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),nr[e])s=nr[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+r+r+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Re,s&Re,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Re,e&Re]}else if(e.substr(0,3)==="hsl"){if(s=f=e.match(Cl),!t)l=+s[0]%360/360,c=+s[1]/100,u=+s[2]/100,o=u<=.5?u*(c+1):u+c-u*c,r=u*2-o,s.length>3&&(s[3]*=1),s[0]=Fa(l+1/3,r,o),s[1]=Fa(l,r,o),s[2]=Fa(l-1/3,r,o);else if(~e.indexOf("="))return s=e.match(wf),i&&s.length<4&&(s[3]=1),s}else s=e.match(Cl)||nr.transparent;s=s.map(Number)}return t&&!f&&(r=s[0]/Re,o=s[1]/Re,a=s[2]/Re,h=Math.max(r,o,a),d=Math.min(r,o,a),u=(h+d)/2,h===d?l=c=0:(p=h-d,c=u>.5?p/(2-h-d):p/(h+d),l=h===r?(o-a)/p+(o<a?6:0):h===o?(a-r)/p+2:(r-o)/p+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(u*100+.5)),i&&s.length<4&&(s[3]=1),s},qf=function(e){var t=[],i=[],s=-1;return e.split(fi).forEach(function(r){var o=r.match(us)||[];t.push.apply(t,o),i.push(s+=o.length+1)}),t.c=i,t},xh=function(e,t,i){var s="",r=(e+s).match(fi),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!r)return e;if(r=r.map(function(d){return(d=Gf(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(u=qf(e),l=i.c,l.join(s)!==u.c.join(s)))for(c=e.replace(fi,"1").split(us),h=c.length-1;a<h;a++)s+=c[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!c)for(c=e.split(fi),h=c.length-1;a<h;a++)s+=c[a]+r[a];return s+c[h]},fi=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in nr)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),yy=/hsl[a]?\(/,Wf=function(e){var t=e.join(" "),i;if(fi.lastIndex=0,fi.test(t))return i=yy.test(t),e[1]=xh(e[1],i),e[0]=xh(e[0],i,qf(e[1])),!0},Pr,Ot=function(){var n=Date.now,e=500,t=33,i=n(),s=i,r=1e3/240,o=r,a=[],l,c,u,h,d,p,f=function m(v){var b=n()-s,g=v===!0,E,P,I,S;if((b>e||b<0)&&(i+=b-t),s+=b,I=s-i,E=I-o,(E>0||g)&&(S=++h.frame,d=I-h.time*1e3,h.time=I=I/1e3,o+=E+(E>=r?4:r-E),P=1),g||(l=c(m)),P)for(p=0;p<a.length;p++)a[p](I,d,S,v)};return h={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(v){return d/(1e3/(v||60))},wake:function(){Cf&&(!El&&fc()&&(mn=El=window,mc=mn.document||{},Nt.gsap=At,(mn.gsapVersions||(mn.gsapVersions=[])).push(At.version),Ef(Lo||mn.GreenSockGlobals||!mn.gsap&&mn||{}),jf.forEach(Hf)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(v){return setTimeout(v,o-h.time*1e3+1|0)},Pr=1,f(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Pr=0,c=Er},lagSmoothing:function(v,b){e=v||1/0,t=Math.min(b||33,e)},fps:function(v){r=1e3/(v||240),o=h.time*1e3+r},add:function(v,b,g){var E=b?function(P,I,S,R){v(P,I,S,R),h.remove(E)}:v;return h.remove(v),a[g?"unshift":"push"](E),Rs(),E},remove:function(v,b){~(b=a.indexOf(v))&&a.splice(b,1)&&p>=b&&p--},_listeners:a},h}(),Rs=function(){return!Pr&&Ot.wake()},ve={},xy=/^[\d.\-M][\d.\-,\s]/,Cy=/["']/g,Ey=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),s=i[0],r=1,o=i.length,a,l,c;r<o;r++)l=i[r],a=r!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[s]=isNaN(c)?c.replace(Cy,"").trim():+c,s=l.substr(a+1).trim();return t},Sy=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<i?e.indexOf(")",i+1):i)},Py=function(e){var t=(e+"").split("("),i=ve[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Ey(t[1])]:Sy(e).split(",").map(Af)):ve._CE&&xy.test(e)?ve._CE("",e):i},$f=function(e){return function(t){return 1-e(1-t)}},Kf=function n(e,t){for(var i=e._first,s;i;)i instanceof _t?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=t)),i=i._next},Vi=function(e,t){return e&&(qe(e)?e:ve[e]||Py(e))||t},Ji=function(e,t,i,s){i===void 0&&(i=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:s},o;return Pt(e,function(a){ve[a]=Nt[a]=r,ve[o=a.toLowerCase()]=i;for(var l in r)ve[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=ve[a+"."+l]=r[l]}),r},Yf=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Na=function n(e,t,i){var s=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),o=r/xl*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*ey((u-o)*r)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Yf(a);return r=xl/r,l.config=function(c,u){return n(e,c,u)},l},Va=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:Yf(i);return s.config=function(r){return n(e,r)},s};Pt("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Ji(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});ve.Linear.easeNone=ve.none=ve.Linear.easeIn;Ji("Elastic",Na("in"),Na("out"),Na());(function(n,e){var t=1/e,i=2*t,s=2.5*t,r=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<s?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Ji("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);Ji("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Ji("Circ",function(n){return-(_f(1-n*n)-1)});Ji("Sine",function(n){return n===1?1:-Jw(n*Zw)+1});Ji("Back",Va("in"),Va("out"),Va());ve.SteppedEase=ve.steps=Nt.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,s=e+(t?0:1),r=t?1:0,o=1-Oe;return function(a){return((s*Vr(0,o,a)|0)+r)*i}}};Ts.ease=ve["quad.out"];Pt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return _c+=n+","+n+"Params,"});var Xf=function(e,t){this.id=Qw++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Tf,this.set=t?t.getSetter:Cc},Tr=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,As(this,+t.duration,1,1),this.data=t.data,De&&(this._ctx=De,De.data.push(this)),Pr||Ot.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,As(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,s){if(Rs(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(ca(this,i),!r._dp||r.parent||kf(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&gn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Oe||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Mf(this,i,s)),this},e.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+bh(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},e.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+bh(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?Ms(this._tTime,r)+1:1},e.timeScale=function(i,s){if(!arguments.length)return this._rts===-Oe?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Fo(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Oe?0:this._rts,this.totalTime(Vr(-Math.abs(this._delay),this._tDur,r),s!==!1),la(this),ay(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Rs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Oe&&(this._tTime-=Oe)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&gn(s,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(St(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Fo(s.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=iy);var s=pt;return pt=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),pt=s,this},e.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,wh(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,wh(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,s){return this.totalTime(Gt(this,i),St(s))},e.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,St(s))},e.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},e.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Oe:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Oe,this},e.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-Oe)},e.eventCallback=function(i,s,r){var o=this.vars;return arguments.length>1?(s?(o[i]=s,r&&(o[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete o[i],this):o[i]},e.then=function(i){var s=this;return new Promise(function(r){var o=qe(i)?i:Rf,a=function(){var c=s.then;s.then=null,qe(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=c),r(o),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){tr(this)},n}();Xt(Tr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Oe,_prom:0,_ps:!1,_rts:1});var _t=function(n){gf(e,n);function e(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=St(i.sortChildren),Ve&&gn(i.parent||Ve,zn(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&Bf(zn(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(s,r,o){return pr(0,arguments,this),this},t.from=function(s,r,o){return pr(1,arguments,this),this},t.fromTo=function(s,r,o,a){return pr(2,arguments,this),this},t.set=function(s,r,o){return r.duration=0,r.parent=this,dr(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new Xe(s,r,Gt(this,o),1),this},t.call=function(s,r,o){return gn(this,Xe.delayedCall(0,s,r),o)},t.staggerTo=function(s,r,o,a,l,c,u){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Xe(s,o,Gt(this,l)),this},t.staggerFrom=function(s,r,o,a,l,c,u){return o.runBackwards=1,dr(o).immediateRender=St(o.immediateRender),this.staggerTo(s,r,o,a,l,c,u)},t.staggerFromTo=function(s,r,o,a,l,c,u,h){return a.startAt=o,dr(a).immediateRender=St(a.immediateRender),this.staggerTo(s,r,a,l,c,u,h)},t.render=function(s,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=s<=0?0:tt(s),h=this._zTime<0!=s<0&&(this._initted||!c),d,p,f,m,v,b,g,E,P,I,S,R;if(this!==Ve&&u>l&&s>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,s+=this._time-a),d=u,P=this._start,E=this._ts,b=!E,h&&(c||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(S=this._yoyo,v=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(v*100+s,r,o);if(d=tt(u%v),u===l?(m=this._repeat,d=c):(m=~~(u/v),m&&m===u/v&&(d=c,m--),d>c&&(d=c)),I=Ms(this._tTime,v),!a&&this._tTime&&I!==m&&this._tTime-I*v-this._dur<=0&&(I=m),S&&m&1&&(d=c-d,R=1),m!==I&&!this._lock){var _=S&&I&1,y=_===(S&&m&1);if(m<I&&(_=!_),a=_?0:u%c?c:u,this._lock=1,this.render(a||(R?0:tt(m*v)),r,!c)._lock=0,this._tTime=u,!r&&this.parent&&Dt(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,y&&(this._lock=2,a=_?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;Kf(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=hy(this,tt(a),tt(d)),g&&(u-=d-(d=g._start))),this._tTime=u,this._time=d,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&d&&!r&&!m&&(Dt(this,"onStart"),this._tTime!==u))return this;if(d>=a&&s>=0)for(p=this._first;p;){if(f=p._next,(p._act||d>=p._start)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,r,o),d!==this._time||!this._ts&&!b){g=0,f&&(u+=this._zTime=-Oe);break}}p=f}else{p=this._last;for(var w=s<0?s:d;p;){if(f=p._prev,(p._act||w<=p._end)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(w-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(w-p._start)*p._ts,r,o||pt&&(p._initted||p._startAt)),d!==this._time||!this._ts&&!b){g=0,f&&(u+=this._zTime=w?-Oe:Oe);break}}p=f}}if(g&&!r&&(this.pause(),g.render(d>=a?0:-Oe)._zTime=d>=a?1:-1,this._ts))return this._start=P,la(this),this.render(s,r,o);this._onUpdate&&!r&&Dt(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(P===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&gi(this,1),!r&&!(s<0&&!a)&&(u||a||!l)&&(Dt(this,u===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var o=this;if(jn(r)||(r=Gt(this,r,s)),!(s instanceof Tr)){if(ft(s))return s.forEach(function(a){return o.add(a,r)}),this;if(nt(s))return this.addLabel(s,r);if(qe(s))s=Xe.delayedCall(0,s);else return this}return this!==s?gn(this,s,r):this},t.getChildren=function(s,r,o,a){s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-qt);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Xe?r&&l.push(c):(o&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,r,o)))),c=c._next;return l},t.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},t.remove=function(s){return nt(s)?this.removeLabel(s):qe(s)?this.killTweensOf(s):(aa(this,s),s===this._recent&&(this._recent=this._last),Ni(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=tt(Ot.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=Gt(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,o){var a=Xe.delayedCall(0,r||Er,o);return a.data="isPause",this._hasPause=1,gn(this,a,Gt(this,s))},t.removePause=function(s){var r=this._first;for(s=Gt(this,s);r;)r._start===s&&r.data==="isPause"&&gi(r),r=r._next},t.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),l=a.length;l--;)li!==a[l]&&a[l].kill(s,r);return this},t.getTweensOf=function(s,r){for(var o=[],a=Wt(s),l=this._first,c=jn(r),u;l;)l instanceof Xe?sy(l._targets,a)&&(c?(!li||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(u=l.getTweensOf(a,r)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(s,r){r=r||{};var o=this,a=Gt(o,s),l=r,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,p,f=Xe.to(o,Xt({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Oe,onStart:function(){if(o.pause(),!p){var v=r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());f._dur!==v&&As(f,v,0,1).render(f._time,!0,!0),p=1}u&&u.apply(f,h||[])}},r));return d?f.render(0):f},t.tweenFromTo=function(s,r,o){return this.tweenTo(r,Xt({startAt:{time:Gt(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),yh(this,Gt(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),yh(this,Gt(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Oe)},t.shiftChildren=function(s,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(c in l)l[c]>=o&&(l[c]+=s);return Ni(this)},t.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Ni(this)},t.totalDuration=function(s){var r=0,o=this,a=o._last,l=qt,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,gn(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(r-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=c;As(o,o===Ve&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(Ve._ts&&(Mf(Ve,Fo(s,Ve)),Pf=Ot.frame),Ot.frame>=gh){gh+=Ft.autoSleep||120;var r=Ve._first;if((!r||!r._ts)&&Ft.autoSleep&&Ot._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Ot.sleep()}}},e}(Tr);Xt(_t.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ty=function(e,t,i,s,r,o,a){var l=new Tt(this._pt,e,t,0,1,nm,null,r),c=0,u=0,h,d,p,f,m,v,b,g;for(l.b=i,l.e=s,i+="",s+="",(b=~s.indexOf("random("))&&(s=Sr(s)),o&&(g=[i,s],o(g,e,t),i=g[0],s=g[1]),d=i.match(za)||[];h=za.exec(s);)f=h[0],m=s.substring(c,h.index),p?p=(p+1)%5:m.substr(-5)==="rgba("&&(p=1),f!==d[u++]&&(v=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:m||u===1?m:",",s:v,c:f.charAt(1)==="="?_s(v,f)-v:parseFloat(f)-v,m:p&&p<4?Math.round:0},c=za.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=a,(yf.test(s)||b)&&(l.e=0),this._pt=l,l},wc=function(e,t,i,s,r,o,a,l,c,u){qe(s)&&(s=s(r||0,e,o));var h=e[t],d=i!=="get"?i:qe(h)?c?e[t.indexOf("set")||!qe(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,p=qe(h)?c?ky:em:xc,f;if(nt(s)&&(~s.indexOf("random(")&&(s=Sr(s)),s.charAt(1)==="="&&(f=_s(d,s)+(ht(d)||0),(f||f===0)&&(s=f))),!u||d!==s||Il)return!isNaN(d*s)&&s!==""?(f=new Tt(this._pt,e,t,+d||0,s-(d||0),typeof h=="boolean"?Oy:tm,0,p),c&&(f.fp=c),a&&f.modifier(a,this,e),this._pt=f):(!h&&!(t in e)&&vc(t,s),Ty.call(this,e,t,d,s,p,l||Ft.stringFilter,c))},My=function(e,t,i,s,r){if(qe(e)&&(e=fr(e,r,t,i,s)),!En(e)||e.style&&e.nodeType||ft(e)||bf(e))return nt(e)?fr(e,r,t,i,s):e;var o={},a;for(a in e)o[a]=fr(e[a],r,t,i,s);return o},Zf=function(e,t,i,s,r,o){var a,l,c,u;if(Bt[e]&&(a=new Bt[e]).init(r,a.rawVars?t[e]:My(t[e],s,r,o,i),i,s,o)!==!1&&(i._pt=l=new Tt(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==hs))for(c=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)c[a._props[u]]=l;return a},li,Il,yc=function n(e,t,i){var s=e.vars,r=s.ease,o=s.startAt,a=s.immediateRender,l=s.lazy,c=s.onUpdate,u=s.runBackwards,h=s.yoyoEase,d=s.keyframes,p=s.autoRevert,f=e._dur,m=e._startAt,v=e._targets,b=e.parent,g=b&&b.data==="nested"?b.vars.targets:v,E=e._overwrite==="auto"&&!dc,P=e.timeline,I,S,R,_,y,w,k,B,L,N,F,z,V;if(P&&(!d||!r)&&(r="none"),e._ease=Vi(r,Ts.ease),e._yEase=h?$f(Vi(h===!0?r:h,Ts.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!P&&!!s.runBackwards,!P||d&&!s.stagger){if(B=v[0]?Fi(v[0]).harness:0,z=B&&s[B.prop],I=Do(s,gc),m&&(m._zTime<0&&m.progress(1),t<0&&u&&a&&!p?m.render(-1,!0):m.revert(u&&f?yo:ny),m._lazy=0),o){if(gi(e._startAt=Xe.set(v,Xt({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!m&&St(l),startAt:null,delay:0,onUpdate:c&&function(){return Dt(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pt||!a&&!p)&&e._startAt.revert(yo),a&&f&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&f&&!m){if(t&&(a=!1),R=Xt({overwrite:!1,data:"isFromStart",lazy:a&&!m&&St(l),immediateRender:a,stagger:0,parent:b},I),z&&(R[B.prop]=z),gi(e._startAt=Xe.set(v,R)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pt?e._startAt.revert(yo):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Oe,Oe);else if(!t)return}for(e._pt=e._ptCache=0,l=f&&St(l)||l&&!f,S=0;S<v.length;S++){if(y=v[S],k=y._gsap||bc(v)[S]._gsap,e._ptLookup[S]=N={},Sl[k.id]&&pi.length&&zo(),F=g===v?S:g.indexOf(y),B&&(L=new B).init(y,z||I,e,F,g)!==!1&&(e._pt=_=new Tt(e._pt,y,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(W){N[W]=_}),L.priority&&(w=1)),!B||z)for(R in I)Bt[R]&&(L=Zf(R,I,e,F,y,g))?L.priority&&(w=1):N[R]=_=wc.call(e,y,R,"get",I[R],F,g,0,s.stringFilter);e._op&&e._op[S]&&e.kill(y,e._op[S]),E&&e._pt&&(li=e,Ve.killTweensOf(y,N,e.globalTime(t)),V=!e.parent,li=0),e._pt&&l&&(Sl[k.id]=1)}w&&im(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!V,d&&t<=0&&P.render(qt,!0,!0)},Ay=function(e,t,i,s,r,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,d,p;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,p=e._targets.length;p--;){if(u=d[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return Il=1,e.vars[t]="+=0",yc(e,a),Il=0,l?Cr(t+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)h=c[p],u=h._pt||h,u.s=(s||s===0)&&!r?s:u.s+(s||0)+o*u.c,u.c=i-u.s,h.e&&(h.e=We(i)+ht(h.e)),h.b&&(h.b=u.s+ht(h.b))},Ry=function(e,t){var i=e[0]?Fi(e[0]).harness:0,s=i&&i.aliases,r,o,a,l;if(!s)return t;r=Wi({},t);for(o in s)if(o in r)for(l=s[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},Iy=function(e,t,i,s){var r=t.ease||s||"power1.inOut",o,a;if(ft(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:r})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:r})},fr=function(e,t,i,s,r){return qe(e)?e.call(t,i,s,r):nt(e)&&~e.indexOf("random(")?Sr(e):e},Qf=_c+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Jf={};Pt(Qf+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Jf[n]=1});var Xe=function(n){gf(e,n);function e(i,s,r,o){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=n.call(this,o?s:dr(s))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,p=l.overwrite,f=l.keyframes,m=l.defaults,v=l.scrollTrigger,b=l.yoyoEase,g=s.parent||Ve,E=(ft(i)||bf(i)?jn(i[0]):"length"in s)?[i]:Wt(i),P,I,S,R,_,y,w,k;if(a._targets=E.length?bc(E):Cr("GSAP target "+i+" not found. https://gsap.com",!Ft.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,f||d||so(c)||so(u)){if(s=a.vars,P=a.timeline=new _t({data:"nested",defaults:m||{},targets:g&&g.data==="nested"?g.vars.targets:E}),P.kill(),P.parent=P._dp=zn(a),P._start=0,d||so(c)||so(u)){if(R=E.length,w=d&&Df(d),En(d))for(_ in d)~Qf.indexOf(_)&&(k||(k={}),k[_]=d[_]);for(I=0;I<R;I++)S=Do(s,Jf),S.stagger=0,b&&(S.yoyoEase=b),k&&Wi(S,k),y=E[I],S.duration=+fr(c,zn(a),I,y,E),S.delay=(+fr(u,zn(a),I,y,E)||0)-a._delay,!d&&R===1&&S.delay&&(a._delay=u=S.delay,a._start+=u,S.delay=0),P.to(y,S,w?w(I,y,E):0),P._ease=ve.none;P.duration()?c=u=0:a.timeline=0}else if(f){dr(Xt(P.vars.defaults,{ease:"none"})),P._ease=Vi(f.ease||s.ease||"none");var B=0,L,N,F;if(ft(f))f.forEach(function(z){return P.to(E,z,">")}),P.duration();else{S={};for(_ in f)_==="ease"||_==="easeEach"||Iy(_,f[_],S,f.easeEach);for(_ in S)for(L=S[_].sort(function(z,V){return z.t-V.t}),B=0,I=0;I<L.length;I++)N=L[I],F={ease:N.e,duration:(N.t-(I?L[I-1].t:0))/100*c},F[_]=N.v,P.to(E,F,B),B+=F.duration;P.duration()<c&&P.to({},{duration:c-P.duration()})}}c||a.duration(c=P.duration())}else a.timeline=0;return p===!0&&!dc&&(li=zn(a),Ve.killTweensOf(E),li=0),gn(g,zn(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(h||!c&&!f&&a._start===tt(g._time)&&St(h)&&ly(zn(a))&&g.data!=="nested")&&(a._tTime=-Oe,a.render(Math.max(0,-u)||0)),v&&Bf(zn(a),v),a}var t=e.prototype;return t.render=function(s,r,o){var a=this._time,l=this._tDur,c=this._dur,u=s<0,h=s>l-Oe&&!u?l:s<Oe?0:s,d,p,f,m,v,b,g,E,P;if(!c)uy(this,s,r,o);else if(h!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,E=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(m*100+s,r,o);if(d=tt(h%m),h===l?(f=this._repeat,d=c):(f=~~(h/m),f&&f===tt(h/m)&&(d=c,f--),d>c&&(d=c)),b=this._yoyo&&f&1,b&&(P=this._yEase,d=c-d),v=Ms(this._tTime,m),d===a&&!o&&this._initted&&f===v)return this._tTime=h,this;f!==v&&(E&&this._yEase&&Kf(E,b),this.vars.repeatRefresh&&!b&&!this._lock&&this._time!==m&&this._initted&&(this._lock=o=1,this.render(tt(m*f),!0).invalidate()._lock=0))}if(!this._initted){if(Of(this,u?s:d,o,r,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&f!==v))return this;if(c!==this._dur)return this.render(s,r,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(P||this._ease)(d/c),this._from&&(this.ratio=g=1-g),d&&!a&&!r&&!f&&(Dt(this,"onStart"),this._tTime!==h))return this;for(p=this._pt;p;)p.r(g,p.d),p=p._next;E&&E.render(s<0?s:E._dur*E._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&Pl(this,s,r,o),Dt(this,"onUpdate")),this._repeat&&f!==v&&this.vars.onRepeat&&!r&&this.parent&&Dt(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&Pl(this,s,!0,!0),(s||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&gi(this,1),!r&&!(u&&!a)&&(h||a||b)&&(Dt(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},t.resetTo=function(s,r,o,a,l){Pr||Ot.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||yc(this,c),u=this._ease(c/this._dur),Ay(this,s,r,o,a,u,c,l)?this.resetTo(s,r,o,a,1):(ca(this,0),this.parent||If(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?tr(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,li&&li.vars.overwrite!==!0)._first||tr(this),this.parent&&o!==this.timeline.totalDuration()&&As(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=s?Wt(s):a,c=this._ptLookup,u=this._pt,h,d,p,f,m,v,b;if((!r||r==="all")&&oy(a,l))return r==="all"&&(this._pt=0),tr(this);for(h=this._op=this._op||[],r!=="all"&&(nt(r)&&(m={},Pt(r,function(g){return m[g]=1}),r=m),r=Ry(a,r)),b=a.length;b--;)if(~l.indexOf(a[b])){d=c[b],r==="all"?(h[b]=r,f=d,p={}):(p=h[b]=h[b]||{},f=r);for(m in f)v=d&&d[m],v&&((!("kill"in v.d)||v.d.kill(m)===!0)&&aa(this,v,"_pt"),delete d[m]),p!=="all"&&(p[m]=1)}return this._initted&&!this._pt&&u&&tr(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return pr(1,arguments)},e.delayedCall=function(s,r,o,a){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,r,o){return pr(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,o){return Ve.killTweensOf(s,r,o)},e}(Tr);Xt(Xe.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Pt("staggerTo,staggerFrom,staggerFromTo",function(n){Xe[n]=function(){var e=new _t,t=Ml.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var xc=function(e,t,i){return e[t]=i},em=function(e,t,i){return e[t](i)},ky=function(e,t,i,s){return e[t](s.fp,i)},By=function(e,t,i){return e.setAttribute(t,i)},Cc=function(e,t){return qe(e[t])?em:pc(e[t])&&e.setAttribute?By:xc},tm=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Oy=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},nm=function(e,t){var i=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+s,i=i._next;s+=t.c}t.set(t.t,t.p,s,t)},Ec=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Ly=function(e,t,i,s){for(var r=this._pt,o;r;)o=r._next,r.p===s&&r.modifier(e,t,i),r=o},zy=function(e){for(var t=this._pt,i,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?aa(this,t,"_pt"):t.dep||(i=1),t=s;return!i},Dy=function(e,t,i,s){s.mSet(e,t,s.m.call(s.tween,i,s.mt),s)},im=function(e){for(var t=e._pt,i,s,r,o;t;){for(i=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:o=t,t=i}e._pt=r},Tt=function(){function n(t,i,s,r,o,a,l,c,u){this.t=i,this.s=r,this.c=o,this.p=s,this.r=a||tm,this.d=l||this,this.set=c||xc,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=Dy,this.m=i,this.mt=r,this.tween=s},n}();Pt(_c+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return gc[n]=1});Nt.TweenMax=Nt.TweenLite=Xe;Nt.TimelineLite=Nt.TimelineMax=_t;Ve=new _t({sortChildren:!1,defaults:Ts,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ft.stringFilter=Wf;var Ui=[],Co={},Fy=[],Ch=0,Ny=0,Ua=function(e){return(Co[e]||Fy).map(function(t){return t()})},kl=function(){var e=Date.now(),t=[];e-Ch>2&&(Ua("matchMediaInit"),Ui.forEach(function(i){var s=i.queries,r=i.conditions,o,a,l,c;for(a in s)o=mn.matchMedia(s[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),Ua("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),Ch=e,Ua("matchMedia"))},sm=function(){function n(t,i){this.selector=i&&Al(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Ny++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,s,r){qe(i)&&(r=s,s=i,i=qe);var o=this,a=function(){var c=De,u=o.selector,h;return c&&c!==o&&c.data.push(o),r&&(o.selector=Al(r)),De=o,h=s.apply(o,arguments),qe(h)&&o._r.push(h),De=c,o.selector=u,o.isReverted=!1,h};return o.last=a,i===qe?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var s=De;De=null,i(this),De=s},e.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof Xe&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,s){var r=this;if(i?function(){for(var a=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=r.data.length;l--;)c=r.data[l],c instanceof _t?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Xe)&&c.revert&&c.revert(i);r._r.forEach(function(u){return u(i,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Ui.length;o--;)Ui[o].id===this.id&&Ui.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),Vy=function(){function n(t){this.contexts=[],this.scope=t,De&&De.data.push(this)}var e=n.prototype;return e.add=function(i,s,r){En(i)||(i={matches:i});var o=new sm(0,r||this.scope),a=o.conditions={},l,c,u;De&&!o.selector&&(o.selector=De.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=i;for(c in i)c==="all"?u=1:(l=mn.matchMedia(i[c]),l&&(Ui.indexOf(o)<0&&Ui.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(kl):l.addEventListener("change",kl)));return u&&s(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),No={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){return Hf(s)})},timeline:function(e){return new _t(e)},getTweensOf:function(e,t){return Ve.getTweensOf(e,t)},getProperty:function(e,t,i,s){nt(e)&&(e=Wt(e)[0]);var r=Fi(e||{}).get,o=i?Rf:Af;return i==="native"&&(i=""),e&&(t?o((Bt[t]&&Bt[t].get||r)(e,t,i,s)):function(a,l,c){return o((Bt[a]&&Bt[a].get||r)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Wt(e),e.length>1){var s=e.map(function(u){return At.quickSetter(u,t,i)}),r=s.length;return function(u){for(var h=r;h--;)s[h](u)}}e=e[0]||{};var o=Bt[t],a=Fi(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;hs._pt=0,h.init(e,i?u+i:u,hs,0,[e]),h.render(1,h),hs._pt&&Ec(1,hs)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var s,r=At.to(e,Wi((s={},s[t]="+=0.1",s.paused=!0,s),i||{})),o=function(l,c,u){return r.resetTo(t,l,c,u)};return o.tween=r,o},isTweening:function(e){return Ve.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Vi(e.ease,Ts.ease)),_h(Ts,e||{})},config:function(e){return _h(Ft,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.plugins,r=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Bt[a]&&!Nt[a]&&Cr(t+" effect requires "+a+" plugin.")}),Da[t]=function(a,l,c){return i(Wt(a),Xt(l||{},r),c)},o&&(_t.prototype[t]=function(a,l,c){return this.add(Da[t](a,En(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){ve[e]=Vi(t)},parseEase:function(e,t){return arguments.length?Vi(e,t):ve},getById:function(e){return Ve.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new _t(e),s,r;for(i.smoothChildTiming=St(e.smoothChildTiming),Ve.remove(i),i._dp=0,i._time=i._tTime=Ve._time,s=Ve._first;s;)r=s._next,(t||!(!s._dur&&s instanceof Xe&&s.vars.onComplete===s._targets[0]))&&gn(i,s,s._start-s._delay),s=r;return gn(Ve,i,0),i},context:function(e,t){return e?new sm(e,t):De},matchMedia:function(e){return new Vy(e)},matchMediaRefresh:function(){return Ui.forEach(function(e){var t=e.conditions,i,s;for(s in t)t[s]&&(t[s]=!1,i=1);i&&e.revert()})||kl()},addEventListener:function(e,t){var i=Co[e]||(Co[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Co[e],s=i&&i.indexOf(t);s>=0&&i.splice(s,1)},utils:{wrap:_y,wrapYoyo:by,distribute:Df,random:Nf,snap:Ff,normalize:gy,getUnit:ht,clamp:py,splitColor:Gf,toArray:Wt,selector:Al,mapRange:Uf,pipe:my,unitize:vy,interpolate:wy,shuffle:zf},install:Ef,effects:Da,ticker:Ot,updateRoot:_t.updateRoot,plugins:Bt,globalTimeline:Ve,core:{PropTween:Tt,globals:Sf,Tween:Xe,Timeline:_t,Animation:Tr,getCache:Fi,_removeLinkedListItem:aa,reverting:function(){return pt},context:function(e){return e&&De&&(De.data.push(e),e._ctx=De),De},suppressOverwrites:function(e){return dc=e}}};Pt("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return No[n]=Xe[n]});Ot.add(_t.updateRoot);hs=No.to({},{duration:0});var Uy=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},jy=function(e,t){var i=e._targets,s,r,o;for(s in t)for(r=i.length;r--;)o=e._ptLookup[r][s],o&&(o=o.d)&&(o._pt&&(o=Uy(o,s)),o&&o.modifier&&o.modifier(t[s],e,i[r],s))},ja=function(e,t){return{name:e,rawVars:1,init:function(s,r,o){o._onInit=function(a){var l,c;if(nt(r)&&(l={},Pt(r,function(u){return l[u]=1}),r=l),t){l={};for(c in r)l[c]=t(r[c]);r=l}jy(a,r)}}}},At=No.registerPlugin({name:"attr",init:function(e,t,i,s,r){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],s,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)pt?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},ja("roundProps",Rl),ja("modifiers"),ja("snap",Ff))||No;Xe.version=_t.version=At.version="3.12.5";Cf=1;fc()&&Rs();ve.Power0;ve.Power1;ve.Power2;ve.Power3;ve.Power4;ve.Linear;ve.Quad;ve.Cubic;ve.Quart;ve.Quint;ve.Strong;ve.Elastic;ve.Back;ve.SteppedEase;ve.Bounce;ve.Sine;ve.Expo;ve.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Eh,ci,bs,Sc,Oi,Sh,Pc,Hy=function(){return typeof window<"u"},Hn={},ki=180/Math.PI,ws=Math.PI/180,is=Math.atan2,Ph=1e8,Tc=/([A-Z])/g,Gy=/(left|right|width|margin|padding|x)/i,qy=/[\s,\(]\S/,bn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Bl=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Wy=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},$y=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Ky=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},rm=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},om=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Yy=function(e,t,i){return e.style[t]=i},Xy=function(e,t,i){return e.style.setProperty(t,i)},Zy=function(e,t,i){return e._gsap[t]=i},Qy=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Jy=function(e,t,i,s,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},e1=function(e,t,i,s,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},je="transform",Mt=je+"Origin",t1=function n(e,t){var i=this,s=this.target,r=s.style,o=s._gsap;if(e in Hn&&r){if(this.tfm=this.tfm||{},e!=="transform")e=bn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Fn(s,a)}):this.tfm[e]=o.x?o[e]:Fn(s,e),e===Mt&&(this.tfm.zOrigin=o.zOrigin);else return bn.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(je)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Mt,t,"")),e=je}(r||t)&&this.props.push(e,t,r[e])},am=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},n1=function(){var e=this.props,t=this.target,i=t.style,s=t._gsap,r,o;for(r=0;r<e.length;r+=3)e[r+1]?t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(Tc,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=Pc(),(!r||!r.isStart)&&!i[je]&&(am(i),s.zOrigin&&i[Mt]&&(i[Mt]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},lm=function(e,t){var i={target:e,props:[],revert:n1,save:t1};return e._gsap||At.core.getCache(e),t&&t.split(",").forEach(function(s){return i.save(s)}),i},cm,Ol=function(e,t){var i=ci.createElementNS?ci.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ci.createElement(e);return i&&i.style?i:ci.createElement(e)},xn=function n(e,t,i){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(Tc,"-$1").toLowerCase())||s.getPropertyValue(t)||!i&&n(e,Is(t)||t,1)||""},Th="O,Moz,ms,Ms,Webkit".split(","),Is=function(e,t,i){var s=t||Oi,r=s.style,o=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Th[o]+e in r););return o<0?null:(o===3?"ms":o>=0?Th[o]:"")+e},Ll=function(){Hy()&&window.document&&(Eh=window,ci=Eh.document,bs=ci.documentElement,Oi=Ol("div")||{style:{}},Ol("div"),je=Is(je),Mt=je+"Origin",Oi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",cm=!!Is("perspective"),Pc=At.core.reverting,Sc=1)},Ha=function n(e){var t=Ol("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,o;if(bs.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),bs.removeChild(t),this.style.cssText=r,o},Mh=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},um=function(e){var t;try{t=e.getBBox()}catch{t=Ha.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Ha||(t=Ha.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Mh(e,["x","cx","x1"])||0,y:+Mh(e,["y","cy","y1"])||0,width:0,height:0}:t},hm=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&um(e))},$i=function(e,t){if(t){var i=e.style,s;t in Hn&&t!==Mt&&(t=je),i.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(s==="--"?t:t.replace(Tc,"-$1").toLowerCase())):i.removeAttribute(t)}},ui=function(e,t,i,s,r,o){var a=new Tt(e._pt,t,i,0,1,o?om:rm);return e._pt=a,a.b=s,a.e=r,e._props.push(i),a},Ah={deg:1,rad:1,turn:1},i1={grid:1,flex:1},_i=function n(e,t,i,s){var r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",a=Oi.style,l=Gy.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=s==="px",p=s==="%",f,m,v,b;if(s===o||!r||Ah[s]||Ah[o])return r;if(o!=="px"&&!d&&(r=n(e,t,i,"px")),b=e.getCTM&&hm(e),(p||o==="%")&&(Hn[t]||~t.indexOf("adius")))return f=b?e.getBBox()[l?"width":"height"]:e[u],We(p?r/f*h:r/100*f);if(a[l?"width":"height"]=h+(d?o:s),m=~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,b&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===ci||!m.appendChild)&&(m=ci.body),v=m._gsap,v&&p&&v.width&&l&&v.time===Ot.time&&!v.uncache)return We(r/v.width*h);if(p&&(t==="height"||t==="width")){var g=e.style[t];e.style[t]=h+s,f=e[u],g?e.style[t]=g:$i(e,t)}else(p||o==="%")&&!i1[xn(m,"display")]&&(a.position=xn(e,"position")),m===e&&(a.position="static"),m.appendChild(Oi),f=Oi[u],m.removeChild(Oi),a.position="absolute";return l&&p&&(v=Fi(m),v.time=Ot.time,v.width=m[u]),We(d?f*r/h:f&&r?h/f*r:0)},Fn=function(e,t,i,s){var r;return Sc||Ll(),t in bn&&t!=="transform"&&(t=bn[t],~t.indexOf(",")&&(t=t.split(",")[0])),Hn[t]&&t!=="transform"?(r=Ar(e,s),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:Uo(xn(e,Mt))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Vo[t]&&Vo[t](e,t,i)||xn(e,t)||Tf(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?_i(e,t,r,i)+i:r},s1=function(e,t,i,s){if(!i||i==="none"){var r=Is(t,e,1),o=r&&xn(e,r,1);o&&o!==i?(t=r,i=o):t==="borderColor"&&(i=xn(e,"borderTopColor"))}var a=new Tt(this._pt,e.style,t,0,1,nm),l=0,c=0,u,h,d,p,f,m,v,b,g,E,P,I;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(m=e.style[t],e.style[t]=s,s=xn(e,t)||s,m?e.style[t]=m:$i(e,t)),u=[i,s],Wf(u),i=u[0],s=u[1],d=i.match(us)||[],I=s.match(us)||[],I.length){for(;h=us.exec(s);)v=h[0],g=s.substring(l,h.index),f?f=(f+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(f=1),v!==(m=d[c++]||"")&&(p=parseFloat(m)||0,P=m.substr((p+"").length),v.charAt(1)==="="&&(v=_s(p,v)+P),b=parseFloat(v),E=v.substr((b+"").length),l=us.lastIndex-E.length,E||(E=E||Ft.units[t]||P,l===s.length&&(s+=E,a.e+=E)),P!==E&&(p=_i(e,t,m,E)||0),a._pt={_next:a._pt,p:g||c===1?g:",",s:p,c:b-p,m:f&&f<4||t==="zIndex"?Math.round:0});a.c=l<s.length?s.substring(l,s.length):""}else a.r=t==="display"&&s==="none"?om:rm;return yf.test(s)&&(a.e=0),this._pt=a,a},Rh={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},r1=function(e){var t=e.split(" "),i=t[0],s=t[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(e=i,i=s,s=e),t[0]=Rh[i]||i,t[1]=Rh[s]||s,t.join(" ")},o1=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,s=i.style,r=t.u,o=i._gsap,a,l,c;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)a=r[c],Hn[a]&&(l=1,a=a==="transformOrigin"?Mt:je),$i(i,a);l&&($i(i,je),o&&(o.svg&&i.removeAttribute("transform"),Ar(i,1),o.uncache=1,am(s)))}},Vo={clearProps:function(e,t,i,s,r){if(r.data!=="isFromStart"){var o=e._pt=new Tt(e._pt,t,i,0,0,o1);return o.u=s,o.pr=-10,o.tween=r,e._props.push(i),1}}},Mr=[1,0,0,1,0,0],dm={},pm=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Ih=function(e){var t=xn(e,je);return pm(t)?Mr:t.substr(7).match(wf).map(We)},Mc=function(e,t){var i=e._gsap||Fi(e),s=e.style,r=Ih(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?Mr:r):(r===Mr&&!e.offsetParent&&e!==bs&&!i.svg&&(l=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,bs.appendChild(e)),r=Ih(e),l?s.display=l:$i(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):bs.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},zl=function(e,t,i,s,r,o){var a=e._gsap,l=r||Mc(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,p=l[0],f=l[1],m=l[2],v=l[3],b=l[4],g=l[5],E=t.split(" "),P=parseFloat(E[0])||0,I=parseFloat(E[1])||0,S,R,_,y;i?l!==Mr&&(R=p*v-f*m)&&(_=P*(v/R)+I*(-m/R)+(m*g-v*b)/R,y=P*(-f/R)+I*(p/R)-(p*g-f*b)/R,P=_,I=y):(S=um(e),P=S.x+(~E[0].indexOf("%")?P/100*S.width:P),I=S.y+(~(E[1]||E[0]).indexOf("%")?I/100*S.height:I)),s||s!==!1&&a.smooth?(b=P-c,g=I-u,a.xOffset=h+(b*p+g*m)-b,a.yOffset=d+(b*f+g*v)-g):a.xOffset=a.yOffset=0,a.xOrigin=P,a.yOrigin=I,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!i,e.style[Mt]="0px 0px",o&&(ui(o,a,"xOrigin",c,P),ui(o,a,"yOrigin",u,I),ui(o,a,"xOffset",h,a.xOffset),ui(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",P+" "+I)},Ar=function(e,t){var i=e._gsap||new Xf(e);if("x"in i&&!t&&!i.uncache)return i;var s=e.style,r=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=xn(e,Mt)||"0",u,h,d,p,f,m,v,b,g,E,P,I,S,R,_,y,w,k,B,L,N,F,z,V,W,Z,ne,se,Q,ue,pe,ge;return u=h=d=m=v=b=g=E=P=0,p=f=1,i.svg=!!(e.getCTM&&hm(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[je]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[je]!=="none"?l[je]:"")),s.scale=s.rotate=s.translate="none"),R=Mc(e,i.svg),i.svg&&(i.uncache?(W=e.getBBox(),c=i.xOrigin-W.x+"px "+(i.yOrigin-W.y)+"px",V=""):V=!t&&e.getAttribute("data-svg-origin"),zl(e,V||c,!!V||i.originIsAbsolute,i.smooth!==!1,R)),I=i.xOrigin||0,S=i.yOrigin||0,R!==Mr&&(k=R[0],B=R[1],L=R[2],N=R[3],u=F=R[4],h=z=R[5],R.length===6?(p=Math.sqrt(k*k+B*B),f=Math.sqrt(N*N+L*L),m=k||B?is(B,k)*ki:0,g=L||N?is(L,N)*ki+m:0,g&&(f*=Math.abs(Math.cos(g*ws))),i.svg&&(u-=I-(I*k+S*L),h-=S-(I*B+S*N))):(ge=R[6],ue=R[7],ne=R[8],se=R[9],Q=R[10],pe=R[11],u=R[12],h=R[13],d=R[14],_=is(ge,Q),v=_*ki,_&&(y=Math.cos(-_),w=Math.sin(-_),V=F*y+ne*w,W=z*y+se*w,Z=ge*y+Q*w,ne=F*-w+ne*y,se=z*-w+se*y,Q=ge*-w+Q*y,pe=ue*-w+pe*y,F=V,z=W,ge=Z),_=is(-L,Q),b=_*ki,_&&(y=Math.cos(-_),w=Math.sin(-_),V=k*y-ne*w,W=B*y-se*w,Z=L*y-Q*w,pe=N*w+pe*y,k=V,B=W,L=Z),_=is(B,k),m=_*ki,_&&(y=Math.cos(_),w=Math.sin(_),V=k*y+B*w,W=F*y+z*w,B=B*y-k*w,z=z*y-F*w,k=V,F=W),v&&Math.abs(v)+Math.abs(m)>359.9&&(v=m=0,b=180-b),p=We(Math.sqrt(k*k+B*B+L*L)),f=We(Math.sqrt(z*z+ge*ge)),_=is(F,z),g=Math.abs(_)>2e-4?_*ki:0,P=pe?1/(pe<0?-pe:pe):0),i.svg&&(V=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!pm(xn(e,je)),V&&e.setAttribute("transform",V))),Math.abs(g)>90&&Math.abs(g)<270&&(r?(p*=-1,g+=m<=0?180:-180,m+=m<=0?180:-180):(f*=-1,g+=g<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=We(p),i.scaleY=We(f),i.rotation=We(m)+a,i.rotationX=We(v)+a,i.rotationY=We(b)+a,i.skewX=g+a,i.skewY=E+a,i.transformPerspective=P+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(s[Mt]=Uo(c)),i.xOffset=i.yOffset=0,i.force3D=Ft.force3D,i.renderTransform=i.svg?l1:cm?fm:a1,i.uncache=0,i},Uo=function(e){return(e=e.split(" "))[0]+" "+e[1]},Ga=function(e,t,i){var s=ht(t);return We(parseFloat(t)+parseFloat(_i(e,"x",i+"px",s)))+s},a1=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,fm(e,t)},Ti="0deg",Gs="0px",Mi=") ",fm=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,h=i.rotationX,d=i.skewX,p=i.skewY,f=i.scaleX,m=i.scaleY,v=i.transformPerspective,b=i.force3D,g=i.target,E=i.zOrigin,P="",I=b==="auto"&&e&&e!==1||b===!0;if(E&&(h!==Ti||u!==Ti)){var S=parseFloat(u)*ws,R=Math.sin(S),_=Math.cos(S),y;S=parseFloat(h)*ws,y=Math.cos(S),o=Ga(g,o,R*y*-E),a=Ga(g,a,-Math.sin(S)*-E),l=Ga(g,l,_*y*-E+E)}v!==Gs&&(P+="perspective("+v+Mi),(s||r)&&(P+="translate("+s+"%, "+r+"%) "),(I||o!==Gs||a!==Gs||l!==Gs)&&(P+=l!==Gs||I?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Mi),c!==Ti&&(P+="rotate("+c+Mi),u!==Ti&&(P+="rotateY("+u+Mi),h!==Ti&&(P+="rotateX("+h+Mi),(d!==Ti||p!==Ti)&&(P+="skew("+d+", "+p+Mi),(f!==1||m!==1)&&(P+="scale("+f+", "+m+Mi),g.style[je]=P||"translate(0, 0)"},l1=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,h=i.scaleX,d=i.scaleY,p=i.target,f=i.xOrigin,m=i.yOrigin,v=i.xOffset,b=i.yOffset,g=i.forceCSS,E=parseFloat(o),P=parseFloat(a),I,S,R,_,y;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=ws,c*=ws,I=Math.cos(l)*h,S=Math.sin(l)*h,R=Math.sin(l-c)*-d,_=Math.cos(l-c)*d,c&&(u*=ws,y=Math.tan(c-u),y=Math.sqrt(1+y*y),R*=y,_*=y,u&&(y=Math.tan(u),y=Math.sqrt(1+y*y),I*=y,S*=y)),I=We(I),S=We(S),R=We(R),_=We(_)):(I=h,_=d,S=R=0),(E&&!~(o+"").indexOf("px")||P&&!~(a+"").indexOf("px"))&&(E=_i(p,"x",o,"px"),P=_i(p,"y",a,"px")),(f||m||v||b)&&(E=We(E+f-(f*I+m*R)+v),P=We(P+m-(f*S+m*_)+b)),(s||r)&&(y=p.getBBox(),E=We(E+s/100*y.width),P=We(P+r/100*y.height)),y="matrix("+I+","+S+","+R+","+_+","+E+","+P+")",p.setAttribute("transform",y),g&&(p.style[je]=y)},c1=function(e,t,i,s,r){var o=360,a=nt(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?ki:1),c=l-s,u=s+c+"deg",h,d;return a&&(h=r.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*Ph)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*Ph)%o-~~(c/o)*o)),e._pt=d=new Tt(e._pt,t,i,s,c,Wy),d.e=u,d.u="deg",e._props.push(i),d},kh=function(e,t){for(var i in t)e[i]=t[i];return e},u1=function(e,t,i){var s=kh({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,h,d,p,f;s.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[je]=t,a=Ar(i,1),$i(i,je),i.setAttribute("transform",c)):(c=getComputedStyle(i)[je],o[je]=t,a=Ar(i,1),o[je]=c);for(l in Hn)c=s[l],u=a[l],c!==u&&r.indexOf(l)<0&&(p=ht(c),f=ht(u),h=p!==f?_i(i,l,c,f):parseFloat(c),d=parseFloat(u),e._pt=new Tt(e._pt,a,l,h,d-h,Bl),e._pt.u=f||0,e._props.push(l));kh(a,s)};Pt("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",s="Bottom",r="Left",o=(e<3?[t,i,s,r]:[t+r,t+i,s+i,s+r]).map(function(a){return e<2?n+a:"border"+a+n});Vo[e>1?"border"+n:n]=function(a,l,c,u,h){var d,p;if(arguments.length<4)return d=o.map(function(f){return Fn(a,f,c)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(u+"").split(" "),p={},o.forEach(function(f,m){return p[f]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(l,p,h)}});var mm={name:"css",register:Ll,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,s,r){var o=this._props,a=e.style,l=i.vars.startAt,c,u,h,d,p,f,m,v,b,g,E,P,I,S,R,_;Sc||Ll(),this.styles=this.styles||lm(e),_=this.styles.props,this.tween=i;for(m in t)if(m!=="autoRound"&&(u=t[m],!(Bt[m]&&Zf(m,t,i,s,e,r)))){if(p=typeof u,f=Vo[m],p==="function"&&(u=u.call(i,s,e,r),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=Sr(u)),f)f(this,e,m,u,i)&&(R=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",fi.lastIndex=0,fi.test(c)||(v=ht(c),b=ht(u)),b?v!==b&&(c=_i(e,m,c,b)+b):v&&(u+=v),this.add(a,"setProperty",c,u,s,r,0,0,m),o.push(m),_.push(m,0,a[m]);else if(p!=="undefined"){if(l&&m in l?(c=typeof l[m]=="function"?l[m].call(i,s,e,r):l[m],nt(c)&&~c.indexOf("random(")&&(c=Sr(c)),ht(c+"")||c==="auto"||(c+=Ft.units[m]||ht(Fn(e,m))||""),(c+"").charAt(1)==="="&&(c=Fn(e,m))):c=Fn(e,m),d=parseFloat(c),g=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),g&&(u=u.substr(2)),h=parseFloat(u),m in bn&&(m==="autoAlpha"&&(d===1&&Fn(e,"visibility")==="hidden"&&h&&(d=0),_.push("visibility",0,a.visibility),ui(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),m!=="scale"&&m!=="transform"&&(m=bn[m],~m.indexOf(",")&&(m=m.split(",")[0]))),E=m in Hn,E){if(this.styles.save(m),P||(I=e._gsap,I.renderTransform&&!t.parseTransform||Ar(e,t.parseTransform),S=t.smoothOrigin!==!1&&I.smooth,P=this._pt=new Tt(this._pt,a,je,0,1,I.renderTransform,I,0,-1),P.dep=1),m==="scale")this._pt=new Tt(this._pt,I,"scaleY",I.scaleY,(g?_s(I.scaleY,g+h):h)-I.scaleY||0,Bl),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){_.push(Mt,0,a[Mt]),u=r1(u),I.svg?zl(e,u,0,S,0,this):(b=parseFloat(u.split(" ")[2])||0,b!==I.zOrigin&&ui(this,I,"zOrigin",I.zOrigin,b),ui(this,a,m,Uo(c),Uo(u)));continue}else if(m==="svgOrigin"){zl(e,u,1,S,0,this);continue}else if(m in dm){c1(this,I,m,d,g?_s(d,g+u):u);continue}else if(m==="smoothOrigin"){ui(this,I,"smooth",I.smooth,u);continue}else if(m==="force3D"){I[m]=u;continue}else if(m==="transform"){u1(this,u,e);continue}}else m in a||(m=Is(m)||m);if(E||(h||h===0)&&(d||d===0)&&!qy.test(u)&&m in a)v=(c+"").substr((d+"").length),h||(h=0),b=ht(u)||(m in Ft.units?Ft.units[m]:v),v!==b&&(d=_i(e,m,c,b)),this._pt=new Tt(this._pt,E?I:a,m,d,(g?_s(d,g+h):h)-d,!E&&(b==="px"||m==="zIndex")&&t.autoRound!==!1?Ky:Bl),this._pt.u=b||0,v!==b&&b!=="%"&&(this._pt.b=c,this._pt.r=$y);else if(m in a)s1.call(this,e,m,c,g?g+u:u);else if(m in e)this.add(e,m,c||e[m],g?g+u:u,s,r);else if(m!=="parseTransform"){vc(m,u);continue}E||(m in a?_.push(m,0,a[m]):_.push(m,1,c||e[m])),o.push(m)}}R&&im(this)},render:function(e,t){if(t.tween._time||!Pc())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Fn,aliases:bn,getSetter:function(e,t,i){var s=bn[t];return s&&s.indexOf(",")<0&&(t=s),t in Hn&&t!==Mt&&(e._gsap.x||Fn(e,"x"))?i&&Sh===i?t==="scale"?Qy:Zy:(Sh=i||{})&&(t==="scale"?Jy:e1):e.style&&!pc(e.style[t])?Yy:~t.indexOf("-")?Xy:Cc(e,t)},core:{_removeProperty:$i,_getMatrix:Mc}};At.utils.checkPrefix=Is;At.core.getStyleSaver=lm;(function(n,e,t,i){var s=Pt(n+","+e+","+t,function(r){Hn[r]=1});Pt(e,function(r){Ft.units[r]="deg",dm[r]=1}),bn[s[13]]=n+","+e,Pt(i,function(r){var o=r.split(":");bn[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Pt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Ft.units[n]="px"});At.registerPlugin(mm);var h1=At.registerPlugin(mm)||At;h1.core.Tween;/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function Le(n){return n==null}function Ac(n){return n!==null&&typeof n=="object"}function Dl(n){return n!==null&&typeof n=="object"}function d1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Ki(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,s)=>{const r=n[s],o=e[s];return Dl(r)&&Dl(o)?Object.assign(Object.assign({},i),{[s]:Ki(r,o)}):Object.assign(Object.assign({},i),{[s]:s in e?o:r})},{})}function Rc(n){return Ac(n)?"target"in n:!1}const p1={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Ge{static alreadyDisposed(){return new Ge({type:"alreadydisposed"})}static notBindable(){return new Ge({type:"notbindable"})}static notCompatible(e,t){return new Ge({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new Ge({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Ge({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=p1[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class jo{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!jo.isBindable(i))throw Ge.notBindable();if(!(e in i))throw Ge.propertyNotFound(e);i[e]=t}}let Ze=class{constructor(){this.observers_={}}on(e,t,i){var s;let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:t,key:(s=i==null?void 0:i.key)!==null&&s!==void 0?s:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(s=>s.key!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(s=>{s.handler(t)})}};class f1{constructor(e,t){var i;this.constraint_=t==null?void 0:t.constraint,this.equals_=(i=t==null?void 0:t.equals)!==null&&i!==void 0?i:(s,r)=>s===r,this.emitter=new Ze,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,s)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:s,sender:this}))}}class m1{constructor(e){this.emitter=new Ze,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.value_;s===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:this.value_,sender:this}))}}class v1{constructor(e){this.emitter=new Ze,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Ne(n,e){const t=e==null?void 0:e.constraint,i=e==null?void 0:e.equals;return!t&&!i?new m1(n):new f1(n,e)}function g1(n){return[new v1(n),(e,t)=>{n.setRawValue(e,t)}]}class he{constructor(e){this.emitter=new Ze,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,s)=>Object.assign(i,{[s]:Ne(e[s])}),{})}static fromObject(e){const t=this.createCore(e);return new he(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class Ur{constructor(e){this.values=he.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}}class _1{constructor(e){this.values=he.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let s=e;return Le(i)||(s=Math.max(s,i)),Le(t)||(s=Math.min(s,t)),s}}class b1{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}}class w1{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const y1={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};class x1{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=y1[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const C1={"+":n=>n,"-":n=>-n,"~":n=>~n};class E1{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=C1[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ic(n){return(e,t)=>{for(let i=0;i<n.length;i++){const s=n[i](e,t);if(s!=="")return s}return""}}function Rr(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function S1(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function Ir(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function P1(n,e){const t=Ir(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const s=Ir(n,e);return s===""?"":i+s}function kc(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=P1(n,e);return i===""?"":t+i}function vm(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=S1(n,e);return e+=i.length,i===""?"":i+Ir(n,e)}function T1(n,e){const t=vm(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const s=Ir(n,e);return e+=s.length,t+i+s+kc(n,e)}function M1(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=Ir(n,e);return e+=i.length,i===""?"":t+i+kc(n,e)}function A1(n,e){const t=vm(n,e);return e+=t.length,t===""?"":t+kc(n,e)}const R1=Ic([T1,M1,A1]);function I1(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function k1(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=I1(n,e);return i===""?"":t+i}function B1(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function O1(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=B1(n,e);return i===""?"":t+i}function L1(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function z1(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=L1(n,e);return i===""?"":t+i}const D1=Ic([k1,O1,z1]),F1=Ic([D1,R1]);function N1(n,e){const t=F1(n,e);return e+=t.length,t===""?null:{evaluable:new w1(t),cursor:e}}function V1(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=_m(n,e);if(!i)return null;e=i.cursor,e+=Rr(n,e).length;const s=n.substr(e,1);return e+=s.length,s!==")"?null:{evaluable:i.evaluable,cursor:e}}function U1(n,e){var t;return(t=N1(n,e))!==null&&t!==void 0?t:V1(n,e)}function gm(n,e){const t=U1(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const s=gm(n,e);return s?(e=s.cursor,{cursor:e,evaluable:new E1(i,s.evaluable)}):null}function j1(n,e,t){t+=Rr(e,t).length;const i=n.filter(s=>e.startsWith(s,t))[0];return i?(t+=i.length,t+=Rr(e,t).length,{cursor:t,operator:i}):null}function H1(n,e){return(t,i)=>{const s=n(t,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const o=j1(e,t,i);if(!o)break;i=o.cursor;const a=n(t,i);if(!a)return null;i=a.cursor,r=new x1(o.operator,r,a.evaluable)}return r?{cursor:i,evaluable:r}:null}}const G1=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>H1(n,e),gm);function _m(n,e){return e+=Rr(n,e).length,G1(n,e)}function q1(n){const e=_m(n,0);return!e||e.cursor+Rr(n,e.cursor).length!==n.length?null:e.evaluable}function Gn(n){var e;const t=q1(n);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function bm(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=Gn(n);if(!Le(e))return e}return 0}function W1(n){return String(n)}function Rt(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function Me(n,e,t,i,s){const r=(n-e)/(t-e);return i+r*(s-i)}function Bh(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function et(n,e,t){return Math.min(Math.max(n,e),t)}function wm(n,e){return(n%e+e)%e}function $1(n,e){return Le(n.step)?Math.max(Bh(e),2):Bh(n.step)}function ym(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function xm(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function Cm(n,e){return Le(n.step)?null:new b1(n.step,e)}function Em(n){return!Le(n.max)&&!Le(n.min)?new Ur({max:n.max,min:n.min}):!Le(n.max)||!Le(n.min)?new _1({max:n.max,min:n.min}):null}function Sm(n,e){var t,i,s;return{formatter:(t=n.format)!==null&&t!==void 0?t:Rt($1(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:ym(n),pointerScale:(s=n.pointerScale)!==null&&s!==void 0?s:xm(n,e)}}function Pm(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function Bc(n){return{constraint:n.constraint,textProps:he.fromObject(Sm(n.params,n.initialValue))}}class es{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class ua{constructor(e){this.target=e}}class jr extends ua{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}}class K1 extends ua{constructor(e,t){super(e),this.expanded=t}}class Y1 extends ua{constructor(e,t){super(e),this.index=t}}class X1 extends ua{constructor(e,t){super(e),this.native=t}}class kr extends es{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ze,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new jr(this,t.binding.target.read(),e.options.last))}}class Z1{constructor(e,t){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Ze}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Q1(n){if(!("binding"in n))return!1;const e=n.binding;return Rc(e)&&"read"in e&&"write"in e}function J1(n,e){const i=Object.keys(e).reduce((s,r)=>{if(s===void 0)return;const o=e[r],a=o(n[r]);return a.succeeded?Object.assign(Object.assign({},s),{[r]:a.value}):void 0},{});return i}function ex(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const s=e(i);if(!(!s.succeeded||s.value===void 0))return[...t,s.value]},[])}function tx(n){return n===null?!1:typeof n=="object"}function An(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function Oh(n){return{custom:e=>An(e)(n),boolean:An(e=>typeof e=="boolean"?e:void 0)(n),number:An(e=>typeof e=="number"?e:void 0)(n),string:An(e=>typeof e=="string"?e:void 0)(n),function:An(e=>typeof e=="function"?e:void 0)(n),constant:e=>An(t=>t===e?e:void 0)(n),raw:An(e=>e)(n),object:e=>An(t=>{if(tx(t))return J1(t,e)})(n),array:e=>An(t=>{if(Array.isArray(t))return ex(t,e)})(n)}}const Fl={optional:Oh(!0),required:Oh(!1)};function He(n,e){const t=e(Fl),i=Fl.required.object(t)(n);return i.succeeded?i.value:void 0}function Vt(n,e,t,i){if(e&&!e(n))return!1;const s=He(n,t);return s?i(s):!1}function Ut(n,e){var t;return Ki((t=n==null?void 0:n())!==null&&t!==void 0?t:{},e)}function ji(n){return"value"in n}function Tm(n){if(!Ac(n)||!("binding"in n))return!1;const e=n.binding;return Rc(e)}const wn="http://www.w3.org/2000/svg";function Ho(n){n.offsetHeight}function nx(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function Oc(n){return n.ontouchstart!==void 0}function ix(){return globalThis}function sx(){return ix().document}function rx(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const ox={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function ha(n,e){const t=n.createElementNS(wn,"svg");return t.innerHTML=ox[e],t}function Mm(n,e,t){n.insertBefore(e,n.children[t])}function Lc(n){n.parentElement&&n.parentElement.removeChild(n)}function Am(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function ax(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function Rm(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function Un(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function Sn(n,e,t){Un(n.value(e),t)}const lx="tp";function _e(n){return(t,i)=>[lx,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const qs=_e("lbl");function cx(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(s=>n.createTextNode(s)).forEach((s,r)=>{r>0&&t.appendChild(n.createElement("br")),t.appendChild(s)}),t}class Im{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(qs()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(qs("l")),Sn(t.props,"label",r=>{Le(r)?this.element.classList.add(qs(void 0,"nol")):(this.element.classList.remove(qs(void 0,"nol")),ax(i),i.appendChild(cx(e,r)))}),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("div");s.classList.add(qs("v")),this.element.appendChild(s),this.valueElement=s}}class km{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new Im(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Vt(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Ut(null,{label:this.props.get("label")})}}function ux(){return["veryfirst","first","last","verylast"]}const Lh=_e(""),zh={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class da{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ux().forEach(i=>{t.classList.remove(Lh(void 0,zh[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(Lh(void 0,zh[i]))})}),this.viewProps.handleDispose(()=>{Lc(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Vt(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Ut(null,Object.assign({},this.viewProps.exportState()))}}class Yi extends da{constructor(e,t){if(t.value!==t.valueController.value)throw Ge.shouldNeverHappen();const i=t.valueController.viewProps,s=new km(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new Im(e,{props:t.props,viewProps:i}),viewProps:i})),this.labelController=s,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Vt(e,t=>{var i,s,r;return super.importState(t)&&this.labelController.importProps(t)&&((r=(s=(i=this.valueController).importProps)===null||s===void 0?void 0:s.call(i,e))!==null&&r!==void 0?r:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,i;return Ut(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}))}}function Dh(n){const e=Object.assign({},n);return delete e.value,e}class Bm extends Yi{constructor(e,t){super(e,t),this.tag=t.tag}importState(e){return Vt(e,t=>super.importState(Dh(e)),t=>({tag:t.optional.string}),t=>(this.tag=t.tag,!0))}exportState(){return Ut(()=>Dh(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function hx(n){return ji(n)&&Tm(n.value)}class dx extends Bm{importState(e){return Vt(e,t=>super.importState(t),t=>({binding:t.required.object({value:t.required.raw})}),t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0))}}function px(n){return ji(n)&&Q1(n.value)}function Om(n,e){for(;n.length<e;)n.push(void 0)}function fx(n){const e=[];return Om(e,n),e}function mx(n){const e=n.indexOf(void 0);return e<0?n:n.slice(0,e)}function vx(n,e){const t=[...mx(n),e];return t.length>n.length?t.splice(0,t.length-n.length):Om(t,n.length),t}class gx{constructor(e){this.emitter=new Ze,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Ne(fx(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=vx(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function _x(n){if(!("binding"in n))return!1;const e=n.binding;return Rc(e)&&"read"in e&&!("write"in e)}class bx extends Bm{exportState(){return Ut(()=>super.exportState(),{binding:{readonly:!0}})}}function wx(n){return ji(n)&&_x(n.value)}class yx extends es{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,r=>{i(new X1(this,r.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}}function xx(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function Ls(n,e){return t=>{xx(n,e,t)}}function zc(n,e){Un(n,t=>{e.textContent=t??""})}const qa=_e("btn");class Cx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(qa()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(qa("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(qa("t")),zc(t.props.value("title"),s),this.buttonElement.appendChild(s)}}class Ex{constructor(e,t){this.emitter=new Ze,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Cx(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Vt(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Ut(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class Fh extends da{constructor(e,t){const i=new Ex(e,{props:t.buttonProps,viewProps:t.viewProps}),s=new km(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:s.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=s}importState(e){return Vt(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Ut(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Lm{constructor(e){const[t,i]=e.split("-"),s=t.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const zs=new Lm("2.0.5");function wt(n){return Object.assign({core:zs},n)}const Sx=wt({id:"button",type:"blade",accept(n){const e=He(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new Fh(n.document,{blade:n.blade,buttonProps:he.fromObject({title:n.params.title}),labelProps:he.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof Fh?new yx(n.controller):null}});function Px(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Tx(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Mx(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Ax(n){return Ac(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Rx(n,e){if(!jo.isBindable(n))throw Ge.notBindable();return new jo(n,e)}class Ix{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Ze,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const s=i??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,Rx(e,t),s),a=this.pool_.createBindingApi(o);return this.add(a,s.index)}addFolder(e){return Tx(this,e)}addButton(e){return Px(this,e)}addTab(e){return Mx(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),s=this.pool_.createApi(i);return this.add(s,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{Ax(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),s=Tm(t.value)?t.value.binding:null;this.emitter_.emit("change",new jr(i,s?s.target.read():t.value.rawValue,e.options.last))}}class Dc extends es{constructor(e,t){super(e),this.rackApi_=new Ix(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class Fc extends da{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Vt(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,s)=>i.importState(t.children[s])))}exportState(){return Ut(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function Nl(n){return"rackController"in n}class kx{constructor(e){this.emitter=new Ze,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw Ge.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(s=>{this.cache_.delete(s)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function Bx(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(ji(i)&&i.value===e)return i}return null}function Ox(n){return Nl(n)?n.rackController.rack.bcSet_:null}class Lx{constructor(e){var t,i;this.emitter=new Ze,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new kx(Ox),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),ji(i))i.value.emitter.on("change",this.onChildValueChange_);else if(Nl(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(ji(i))i.value.emitter.off("change",this.onChildValueChange_);else if(Nl(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(s=>{const r=[];s===t&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),s===i&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),s.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=Bx(this.find(ji),e.sender);if(!t)throw Ge.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Nc{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new Lx({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Mm(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Lc(e.bladeController.view.element)}}function Ds(){return new he({positions:Ne([],{equals:d1})})}class Hr extends he{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=he.createCore(t);return new Hr(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Le(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};Sn(this,"expanded",i),Sn(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function zx(n,e){let t=0;return nx(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),Ho(e),t=e.clientHeight,n.set("temporaryExpanded",null),Ho(e)}),t}function Nh(n,e){e.style.height=n.styleHeight}function Vc(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),Le(n.get("expandedHeight"))){const t=zx(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),Ho(e)}),n.emitter.on("change",()=>{Nh(n,e)}),Nh(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}class zm extends Dc{constructor(e,t){super(e,t),this.emitter_=new Ze,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new K1(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const Dm=_e("cnt");class Dx{constructor(e,t){var i;this.className_=_e((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Dm()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Sn(this.foldable_,"completed",Ls(this.element,this.className_(void 0,"cpl")));const s=e.createElement("button");s.classList.add(this.className_("b")),Sn(t.props,"title",c=>{Le(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),zc(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Vl extends Fc{constructor(e,t){var i;const s=Hr.create((i=t.expanded)!==null&&i!==void 0?i:!0),r=new Dx(e,{foldable:s,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Nc({blade:t.blade,element:r.containerElement,root:t.root,viewProps:t.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=s,Vc(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Vt(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Ut(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Fx=wt({id:"folder",type:"blade",accept(n){const e=He(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new Vl(n.document,{blade:n.blade,expanded:n.params.expanded,props:he.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Vl?new zm(n.controller,n.pool):null}}),Nx=_e("");function Vh(n,e){return Ls(n,Nx(void 0,e))}class Kn extends he{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=g1(Ne(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,s;const r=e??{};return new Kn(he.createCore({disabled:(t=r.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=r.hidden)!==null&&i!==void 0?i:!1,parent:(s=r.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Un(this.globalDisabled_,Vh(e,"disabled")),Sn(this,"hidden",Vh(e,"hidden"))}bindDisabled(e){Un(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){Un(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Uh=_e("tbp");class Vx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Uh()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Uh("c")),this.element.appendChild(i),this.containerElement=i}}const Ws=_e("tbi");class Ux{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ws()),t.viewProps.bindClassModifiers(this.element),Sn(t.props,"selected",r=>{r?this.element.classList.add(Ws(void 0,"sel")):this.element.classList.remove(Ws(void 0,"sel"))});const i=e.createElement("button");i.classList.add(Ws("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(Ws("t")),zc(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class jx{constructor(e,t){this.emitter=new Ze,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Ux(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Ul extends Fc{constructor(e,t){const i=new Vx(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Nc({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new jx(e,{props:t.itemProps,viewProps:Kn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,Sn(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(e){return Vt(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Ut(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Hx extends Dc{constructor(e,t){super(e,t),this.emitter_=new Ze,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new Ul(t,{blade:Ds(),itemProps:he.fromObject({selected:!1,title:e.title}),props:he.fromObject({selected:!1}),viewProps:Kn.create()}),s=this.pool_.createApi(i);return this.rackApi_.add(s,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new Y1(this,e.rawValue))}}class Gx extends Dc{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}}const jh=-1;class qx{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Ne(!0),this.selectedIndex=Ne(jh),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=jh,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,s)=>{i.rawValue=s===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const $s=_e("tab");class Wx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add($s(),Dm()),t.viewProps.bindClassModifiers(this.element),Un(t.empty,Ls(this.element,$s(void 0,"nop")));const i=e.createElement("div");i.classList.add($s("t")),this.element.appendChild(i),this.itemsElement=i;const s=e.createElement("div");s.classList.add($s("i")),this.element.appendChild(s);const r=e.createElement("div");r.classList.add($s("c")),this.element.appendChild(r),this.contentsElement=r}}class Hh extends Fc{constructor(e,t){const i=new qx,s=new Wx(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Nc({blade:t.blade,element:s.contentsElement,viewProps:t.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;Mm(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Lc(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}const Fm=wt({id:"tab",type:"blade",accept(n){const e=He(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new Hh(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new Ul(n.document,{blade:Ds(),itemProps:he.fromObject({selected:!1,title:t.title}),props:he.fromObject({selected:!1}),viewProps:Kn.create()});e.add(i)}),e},api(n){return n.controller instanceof Hh?new Hx(n.controller,n.pool):n.controller instanceof Ul?new Gx(n.controller,n.pool):null}});function $x(n,e){const t=n.accept(e.params);if(!t)return null;const i=He(e.params,s=>({disabled:s.optional.boolean,hidden:s.optional.boolean}));return n.controller({blade:Ds(),document:e.document,params:Object.assign(Object.assign({},t.params),{disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden}),viewProps:Kn.create({disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden})})}class Uc extends kr{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class Kx{constructor(){this.disabled=!1,this.emitter=new Ze}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Yx{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Ze,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Gr{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}}function Go(n,e){if(n instanceof e)return n;if(n instanceof Gr){const t=n.constraints.reduce((i,s)=>i||(s instanceof e?s:null),null);if(t)return t}return null}class qr{constructor(e){this.values=he.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(s=>s.value===e).length>0?e:t[0].value}}function Wr(n){var e;const t=Fl;if(Array.isArray(n))return(e=He({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function jc(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function Hc(n){return Le(n)?null:new qr(jc(n))}const Wa=_e("lst");class Xx{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(Wa()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(Wa("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const s=e.createElement("div");s.classList.add(Wa("m")),s.appendChild(ha(e,"dropdown")),this.element.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,Sn(this.props_,"options",r=>{Am(this.selectElement),r.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class bi{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Xx(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return Vt(e,null,t=>({options:t.required.custom(Wr)}),t=>(this.props.set("options",jc(t.options)),!0))}exportProps(){return Ut(null,{options:this.props.get("options")})}}const Gh=_e("pop");class Zx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Gh()),t.viewProps.bindClassModifiers(this.element),Un(t.shows,Ls(this.element,Gh(void 0,"v")))}}class Nm{constructor(e,t){this.shows=Ne(!1),this.viewProps=t.viewProps,this.view=new Zx(e,{shows:this.shows,viewProps:this.viewProps})}}const qh=_e("txt");class Qx{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(qh()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(qh("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Br{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Qx(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);Le(s)||(this.value.rawValue=s),this.view.refresh()}}function Jx(n){return String(n)}function Vm(n){return n==="false"?!1:!!n}function Wh(n){return Jx(n)}function eC(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const tC=Rt(0);function qo(n){return tC(n)+"%"}function Um(n){return String(n)}function jl(n){return n}function Fs({primary:n,secondary:e,forward:t,backward:i}){let s=!1;function r(o){s||(s=!0,o(),s=!1)}n.emitter.on("change",o=>{r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Et(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Or(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function qn(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function nC(n){return n==="ArrowUp"||n==="ArrowDown"}function jm(n){return nC(n)||n==="ArrowLeft"||n==="ArrowRight"}function $a(n,e){var t,i;const s=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:n.pageX-(((t=s&&s.scrollX)!==null&&t!==void 0?t:0)+r.left),y:n.pageY-(((i=s&&s.scrollY)!==null&&i!==void 0?i:0)+r.top)}}class ts{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ze,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_($a(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_($a(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_($a(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-s.left,y:i.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Ht=_e("txt");class iC{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Ht(),Ht(void 0,"num")),t.arrayPosition&&this.element.classList.add(Ht(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Ht("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ht()),this.inputElement.classList.add(Ht("i"));const s=e.createElement("div");s.classList.add(Ht("k")),this.element.appendChild(s),this.knobElement=s;const r=e.createElementNS(wn,"svg");r.classList.add(Ht("g")),this.knobElement.appendChild(r);const o=e.createElementNS(wn,"path");o.classList.add(Ht("gb")),r.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(wn,"path");a.classList.add(Ht("gh")),r.appendChild(a),this.guideHeadElem_=a;const l=e.createElement("div");l.classList.add(_e("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Ht(void 0,"drg"));return}this.element.classList.add(Ht(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),s=et(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+s},0 L${i},4 L${i+s},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class $r{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=Ne(null),this.view=new iC(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new ts(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const s=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),r=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return s!==void 0&&(o=Math.max(o,s)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);Le(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(e){const t=Et(this.props.get("keyScale"),Or(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Et(this.props.get("keyScale"),Or(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ka=_e("sld");class sC{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Ka()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Ka("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const s=e.createElement("div");s.classList.add(Ka("k")),this.trackElement.appendChild(s),this.knobElement=s,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=et(Me(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class rC{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new sC(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ts(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(Me(et(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Et(this.props.get("keyScale"),qn(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){Et(this.props.get("keyScale"),qn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ya=_e("sldtxt");class oC{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ya());const i=e.createElement("div");i.classList.add(Ya("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Ya("t")),this.textView_=t.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class Wo{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new rC(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new $r(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new oC(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Vt(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Ut(null,{max:e.get("max"),min:e.get("min")})}}function Hm(n){return{sliderProps:new he({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new he({formatter:Ne(n.formatter),keyScale:n.keyScale,pointerScale:Ne(n.pointerScale)})}}const aC={containerUnitSize:"cnt-usz"};function Gm(n){return`--${aC[n]}`}function Lr(n){return Pm(n)}function hi(n){if(Dl(n))return He(n,Lr)}function Vn(n,e){if(!n)return;const t=[],i=Cm(n,e);i&&t.push(i);const s=Em(n);return s&&t.push(s),new Gr(t)}function lC(n){return n?n.major===zs.major:!1}function qm(n){if(n==="inline"||n==="popup")return n}function Kr(n,e){n.write(e)}const ro=_e("ckb");class cC{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ro()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(ro("l")),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("input");s.classList.add(ro("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,t.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(ro("w")),this.labelElement.appendChild(r);const o=ha(e,"check");r.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class uC{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new cC(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function hC(n){const e=[],t=Hc(n.options);return t&&e.push(t),new Gr(e)}const dC=wt({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=He(e,i=>({options:i.optional.custom(Wr),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Vm,constraint:n=>hC(n.params),writer:n=>Kr},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&Go(i,qr);return s?new bi(e,{props:new he({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new uC(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof bi?new Uc(n.controller):null}}),Ai=_e("col");class pC{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ai()),t.foldable.bindExpandedClass(this.element,Ai(void 0,"expanded")),Sn(t.foldable,"completed",Ls(this.element,Ai(void 0,"cpl")));const i=e.createElement("div");i.classList.add(Ai("h")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Ai("s")),i.appendChild(s),this.swatchElement=s;const r=e.createElement("div");if(r.classList.add(Ai("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Ai("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function fC(n,e,t){const i=et(n/255,0,1),s=et(e/255,0,1),r=et(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c=0,u=0;const h=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),i===o?c=(s-r)/l:s===o?c=2+(r-i)/l:c=4+(i-s)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function mC(n,e,t){const i=(n%360+360)%360,s=et(e/100,0,1),r=et(t/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o/2;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function vC(n,e,t){const i=et(n/255,0,1),s=et(e/255,0,1),r=et(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c;l===0?c=0:o===i?c=60*(((s-r)/l%6+6)%6):o===s?c=60*((r-i)/l+2):c=60*((i-s)/l+4);const u=o===0?0:l/o,h=o;return[c,u*100,h*100]}function Wm(n,e,t){const i=wm(n,360),s=et(e/100,0,1),r=et(t/100,0,1),o=r*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function gC(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function _C(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function Pn(n){return[n[0],n[1],n[2]]}function pa(n,e){return[n[0],n[1],n[2],e]}const bC={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:gC,rgb:mC},hsv:{hsl:_C,hsv:(n,e,t)=>[n,e,t],rgb:Wm},rgb:{hsl:fC,hsv:vC,rgb:(n,e,t)=>[n,e,t]}};function ks(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function wC(n,e){return n===e?e:wm(n,e)}function $m(n,e,t){var i;const s=ks(e,t);return[e==="rgb"?et(n[0],0,s[0]):wC(n[0],s[0]),et(n[1],0,s[1]),et(n[2],0,s[2]),et((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function $h(n,e,t,i){const s=ks(e,t),r=ks(e,i);return n.map((o,a)=>o/s[a]*r[a])}function Km(n,e,t){const i=$h(n,e.mode,e.type,"int"),s=bC[e.mode][t.mode](...i);return $h(s,t.mode,"int",t.type)}class xe{static black(){return new xe([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=$m(e,t,this.type)}getComponents(e){return pa(Km(Pn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Jn=_e("colp");class yC{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Jn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Jn("hsv"));const s=e.createElement("div");s.classList.add(Jn("sv")),this.svPaletteView_=t.svPaletteView,s.appendChild(this.svPaletteView_.element),i.appendChild(s);const r=e.createElement("div");r.classList.add(Jn("h")),this.hPaletteView_=t.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(Jn("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const a=e.createElement("div");a.classList.add(Jn("a"));const l=e.createElement("div");l.classList.add(Jn("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=e.createElement("div");c.classList.add(Jn("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function xC(n){return n==="int"?"int":n==="float"?"float":void 0}function Gc(n){return He(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(xC)}),expanded:e.optional.boolean,picker:e.optional.custom(qm),readonly:e.optional.constant(!1)}))}function Xi(n){return n?.1:1}function Ym(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}class qc{constructor(e,t){this.type="float",this.mode=t,this.comps_=$m(e,t,this.type)}getComponents(e){return pa(Km(Pn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const CC={int:(n,e)=>new xe(n,e),float:(n,e)=>new qc(n,e)};function Wc(n,e,t){return CC[t](n,e)}function EC(n){return n.type==="float"}function SC(n){return n.type==="int"}function PC(n){const e=n.getComponents(),t=ks(n.mode,"int");return new xe([Math.round(Me(e[0],0,1,0,t[0])),Math.round(Me(e[1],0,1,0,t[1])),Math.round(Me(e[2],0,1,0,t[2])),e[3]],n.mode)}function TC(n){const e=n.getComponents(),t=ks(n.mode,"int");return new qc([Me(e[0],0,t[0],0,1),Me(e[1],0,t[1],0,1),Me(e[2],0,t[2],0,1),e[3]],n.mode)}function bt(n,e){if(n.type===e)return n;if(SC(n)&&e==="float")return TC(n);if(EC(n)&&e==="int")return PC(n);throw Ge.shouldNeverHappen()}function MC(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function $t(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const AC={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function Xm(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return AC[i](t)}function Zm(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[$t(e[1],255),$t(e[2],255),$t(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function RC(n){const e=Zm(n);return e?new xe(e,"rgb"):null}function Qm(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[$t(e[1],255),$t(e[2],255),$t(e[3],255),$t(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function IC(n){const e=Qm(n);return e?new xe(e,"rgb"):null}function Jm(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Xm(e[1]),$t(e[2],100),$t(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function kC(n){const e=Jm(n);return e?new xe(e,"hsl"):null}function ev(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Xm(e[1]),$t(e[2],100),$t(e[3],100),$t(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function BC(n){const e=ev(n);return e?new xe(e,"hsl"):null}function tv(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function OC(n){const e=tv(n);return e?new xe(e,"rgb"):null}function nv(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Me(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),Me(parseInt(t[4],16),0,255,0,1)]:null}function LC(n){const e=nv(n);return e?new xe(e,"rgb"):null}function iv(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function zC(n){return e=>{const t=iv(e);return t?Wc(t,"rgb",n):null}}function sv(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function DC(n){return e=>{const t=sv(e);return t?Wc(t,"rgb",n):null}}const FC=[{parser:tv,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:nv,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Zm,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Qm,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Jm,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:ev,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:iv,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:sv,result:{alpha:!0,mode:"rgb",notation:"object"}}];function NC(n){return FC.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function VC(n,e="int"){const t=NC(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function Yr(n){const e=[OC,LC,RC,IC,kC,BC];e.push(zC("int"),DC("int"));const t=eC(e);return i=>{const s=t(i);return s?bt(s,n):null}}function UC(n){const e=Yr("int");if(typeof n!="string")return xe.black();const t=e(n);return t??xe.black()}function rv(n){const e=et(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function $c(n,e="#"){const t=Pn(n.getComponents("rgb")).map(rv).join("");return`${e}${t}`}function Kc(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(rv).join("");return`${e}${i}`}function ov(n){const e=Rt(0),t=bt(n,"int");return`rgb(${Pn(t.getComponents("rgb")).map(s=>e(s)).join(", ")})`}function Eo(n){const e=Rt(2),t=Rt(0);return`rgba(${bt(n,"int").getComponents("rgb").map((r,o)=>(o===3?e:t)(r)).join(", ")})`}function jC(n){const e=[Rt(0),qo,qo],t=bt(n,"int");return`hsl(${Pn(t.getComponents("hsl")).map((s,r)=>e[r](s)).join(", ")})`}function HC(n){const e=[Rt(0),qo,qo,Rt(2)];return`hsla(${bt(n,"int").getComponents("hsl").map((s,r)=>e[r](s)).join(", ")})`}function av(n,e){const t=Rt(e==="float"?2:0),i=["r","g","b"],s=bt(n,e);return`{${Pn(s.getComponents("rgb")).map((o,a)=>`${i[a]}: ${t(o)}`).join(", ")}}`}function GC(n){return e=>av(e,n)}function lv(n,e){const t=Rt(2),i=Rt(e==="float"?2:0),s=["r","g","b","a"];return`{${bt(n,e).getComponents("rgb").map((a,l)=>{const c=l===3?t:i;return`${s[l]}: ${c(a)}`}).join(", ")}}`}function qC(n){return e=>lv(e,n)}const WC=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:$c},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Kc},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:ov},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Eo},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:jC},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:HC},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:GC(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:qC(e)}],[])];function cv(n){return WC.reduce((e,t)=>e||(MC(t.format,n)?t.stringifier:null),null)}const Ks=_e("apl");class $C{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Ks()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Ks("b")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Ks("c")),i.appendChild(s),this.colorElem_=s;const r=e.createElement("div");r.classList.add(Ks("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Ks("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new xe([t[0],t[1],t[2],0],"rgb"),s=new xe([t[0],t[1],t[2],255],"rgb"),r=["to right",Eo(i),Eo(s)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Eo(e);const o=Me(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class KC{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new $C(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ts(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,s=this.value.rawValue,[r,o,a]=s.getComponents("hsv");this.value.setRawValue(new xe([r,o,a,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Et(Xi(!0),qn(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new xe([s,r,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Et(Xi(!0),qn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ss=_e("coltxt");function YC(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,s)=>{const r=n.createElement("option");return r.textContent=s.text,r.value=s.value,i.appendChild(r),i},n.createDocumentFragment())),e}class XC{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ss()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(ss("m")),this.modeElem_=YC(e),this.modeElem_.classList.add(ss("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const s=e.createElement("div");s.classList.add(ss("mm")),s.appendChild(ha(e,"dropdown")),i.appendChild(s),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(ss("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=t.inputViews,this.applyInputViews_(),Un(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Am(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(ss("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}}function ZC(n){return Rt(n==="float"?2:0)}function QC(n,e,t){const i=ks(n,e)[t];return new Ur({min:0,max:i})}function JC(n,e,t){return new $r(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:he.fromObject({formatter:ZC(e.colorType),keyScale:Xi(!1),pointerScale:e.colorType==="float"?.01:1}),value:Ne(0,{constraint:QC(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function eE(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:Gn,viewProps:e.viewProps};return[0,1,2].map(i=>{const s=JC(n,t,i);return Fs({primary:e.value,secondary:s.value,forward(r){return bt(r,e.colorType).getComponents(e.colorMode)[i]},backward(r,o){const a=e.colorMode,c=bt(r,e.colorType).getComponents(a);c[i]=o;const u=Wc(pa(Pn(c),c[3]),a,e.colorType);return bt(u,"int")}}),s})}function tE(n,e){const t=new Br(n,{parser:Yr("int"),props:he.fromObject({formatter:$c}),value:Ne(xe.black()),viewProps:e.viewProps});return Fs({primary:e.value,secondary:t.value,forward:i=>new xe(Pn(i.getComponents()),i.mode),backward:(i,s)=>new xe(pa(Pn(s.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function nE(n){return n!=="hex"}class iE{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=Ne(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new XC(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return nE(t)?eE(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):tE(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const Xa=_e("hpl");class sE{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Xa()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Xa("c")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Xa("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=ov(new xe([t,100,100],"hsv"));const i=Me(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class rE{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new sE(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ts(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=Me(et(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),s=this.value.rawValue,[,r,o,a]=s.getComponents("hsv");this.value.setRawValue(new xe([i,r,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Et(Xi(!1),qn(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new xe([s+t,r,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Et(Xi(!1),qn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Za=_e("svp"),Kh=64;class oE{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Za()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=Kh,i.width=Kh,i.classList.add(Za("c")),this.element.appendChild(i),this.canvasElement=i;const s=e.createElement("div");s.classList.add(Za("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=rx(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,s,r),a=o.data;for(let u=0;u<r;u++)for(let h=0;h<s;h++){const d=Me(h,0,s,0,100),p=Me(u,0,r,100,0),f=Wm(i[0],d,p),m=(u*s+h)*4;a[m]=f[0],a[m+1]=f[1],a[m+2]=f[2],a[m+3]=255}e.putImageData(o,0,0);const l=Me(i[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=Me(i[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class aE{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new oE(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ts(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=Me(e.point.x,0,e.bounds.width,0,100),s=Me(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new xe([r,i,s,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){jm(e.key)&&e.preventDefault();const[t,i,s,r]=this.value.rawValue.getComponents("hsv"),o=Xi(!1),a=Et(o,qn(e)),l=Et(o,Or(e));a===0&&l===0||this.value.setRawValue(new xe([t,i+a,s+l,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Xi(!1),i=Et(t,qn(e)),s=Et(t,Or(e));i===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class lE{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new rE(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new aE(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new KC(e,{value:this.value,viewProps:this.viewProps}),text:new $r(e,{parser:Gn,props:he.fromObject({pointerScale:.01,keyScale:.1,formatter:Rt(2)}),value:Ne(0,{constraint:new Ur({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Fs({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,s)=>{const r=i.getComponents();return r[3]=s,new xe(r,i.mode)}}),this.textsC_=new iE(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new yC(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Qa=_e("colsw");class cE{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Qa()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Qa("sw")),this.element.appendChild(i),this.swatchElem_=i;const s=e.createElement("button");s.classList.add(Qa("b")),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=Kc(e)}onValueChange_(){this.update_()}}class uE{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new cE(e,{value:this.value,viewProps:this.viewProps})}}class Yc{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Hr.create(t.expanded),this.swatchC_=new uE(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Br(e,{parser:t.parser,props:he.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new pC(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Nm(e,{viewProps:this.viewProps}):null;const s=new lE(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),Fs({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Vc(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Rm(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!Oc(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function hE(n){return Pn(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function dE(n){return n.getComponents("rgb").reduce((e,t,i)=>{const s=Math.floor(i===3?t*255:t)&255;return e<<8|s},0)>>>0}function pE(n){return new xe([n>>16&255,n>>8&255,n&255],"rgb")}function fE(n){return new xe([n>>24&255,n>>16&255,n>>8&255,Me(n&255,0,255,0,1)],"rgb")}function mE(n){return typeof n!="number"?xe.black():pE(n)}function vE(n){return typeof n!="number"?xe.black():fE(n)}function So(n,e){return typeof n!="object"||Le(n)?!1:e in n&&typeof n[e]=="number"}function uv(n){return So(n,"r")&&So(n,"g")&&So(n,"b")}function hv(n){return uv(n)&&So(n,"a")}function dv(n){return uv(n)}function Xc(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let s=0;s<t.length;s++)if(t[s]!==i[s])return!1;return!0}function Yh(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function gE(n){const e=cv(n);return e?(t,i)=>{Kr(t,e(i))}:null}function _E(n){const e=n?dE:hE;return(t,i)=>{Kr(t,e(i))}}function bE(n,e,t){const s=bt(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b),n.writeProperty("a",s.a)}function wE(n,e,t){const s=bt(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b)}function yE(n,e){return(t,i)=>{n?bE(t,i,e):wE(t,i,e)}}function xE(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function CE(n){return n?e=>Kc(e,"0x"):e=>$c(e,"0x")}function EE(n){return"color"in n||n.view==="color"}const SE=wt({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!EE(e))return null;const t=Gc(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:xE(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?vE:mE,equals:Xc,writer:n=>_E(n.params.supportsAlpha)},controller:n=>{var e,t;return new Yc(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:CE(n.params.supportsAlpha),parser:Yr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function PE(n,e){if(!dv(n))return bt(xe.black(),e);if(e==="int"){const t=Yh(n);return new xe(t,"rgb")}if(e==="float"){const t=Yh(n);return new qc(t,"rgb")}return bt(xe.black(),"int")}function TE(n){return hv(n)}function ME(n){return e=>{const t=PE(e,n);return bt(t,"int")}}function AE(n,e){return t=>n?lv(t,e):av(t,e)}const RE=wt({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!dv(n))return null;const i=Gc(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=Ym(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>ME(n.params.colorType),equals:Xc,writer:n=>yE(TE(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=hv(n.initialValue);return new Yc(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:AE(i,n.params.colorType),parser:Yr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}}),IE=wt({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=VC(n,Ym(e));if(!t)return null;const i=cv(t);if(!i)return null;const s=Gc(e);return s?{initialValue:n,params:Object.assign(Object.assign({},s),{format:t,stringifier:i})}:null},binding:{reader:()=>UC,equals:Xc,writer:n=>{const e=gE(n.params.format);if(!e)throw Ge.notBindable();return e}},controller:n=>{var e,t;return new Yc(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:Yr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class Zc{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,s)=>{var r,o;return(o=(r=this.components[s])===null||r===void 0?void 0:r.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}}const Xh=_e("pndtxt");class kE{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Xh()),this.textViews.forEach(i=>{const s=e.createElement("div");s.classList.add(Xh("a")),s.appendChild(i.element),this.element.appendChild(s)})}}function BE(n,e,t){return new $r(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:Ne(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class Qc{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,s)=>BE(e,t,s)),this.acs_.forEach((i,s)=>{Fs({primary:this.value,secondary:i.value,forward:r=>t.assembly.toComponents(r)[s],backward:(r,o)=>{const a=t.assembly.toComponents(r);return a[s]=o,t.assembly.fromComponents(a)}})}),this.view=new kE(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class OE extends kr{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function LE(n,e){const t=[],i=Cm(n,e);i&&t.push(i);const s=Em(n);s&&t.push(s);const r=Hc(n.options);return r&&t.push(r),new Gr(t)}const zE=wt({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=He(e,i=>Object.assign(Object.assign({},Pm(i)),{options:i.optional.custom(Wr),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>bm,constraint:n=>LE(n.params,n.initialValue),writer:n=>Kr},controller:n=>{const e=n.value,t=n.constraint,i=t&&Go(t,qr);if(i)return new bi(n.document,{props:new he({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const s=Sm(n.params,e.rawValue),r=t&&Go(t,Ur);return r?new Wo(n.document,Object.assign(Object.assign({},Hm(Object.assign(Object.assign({},s),{keyScale:Ne(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:Gn,value:e,viewProps:n.viewProps})):new $r(n.document,{parser:Gn,props:he.fromObject(s),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof Wo?new OE(n.controller):n.controller.valueController instanceof bi?new Uc(n.controller):null}});class mi{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(Le(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const pv={toComponents:n=>n.getComponents(),fromComponents:n=>new mi(...n)},rs=_e("p2d");class DE{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(rs()),t.viewProps.bindClassModifiers(this.element),Un(t.expanded,Ls(this.element,rs(void 0,"expanded")));const i=e.createElement("div");i.classList.add(rs("h")),this.element.appendChild(i);const s=e.createElement("button");s.classList.add(rs("b")),s.appendChild(ha(e,"p2dpad")),t.viewProps.bindDisabled(s),i.appendChild(s),this.buttonElement=s;const r=e.createElement("div");if(r.classList.add(rs("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(rs("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const ei=_e("p2dp");class FE{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(ei()),t.layout==="popup"&&this.element.classList.add(ei(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(ei("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const s=e.createElementNS(wn,"svg");s.classList.add(ei("g")),this.padElement.appendChild(s),this.svgElem_=s;const r=e.createElementNS(wn,"line");r.classList.add(ei("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(wn,"line");o.classList.add(ei("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(wn,"line");a.classList.add(ei("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=e.createElement("div");l.classList.add(ei("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),s=Me(e,-i,+i,0,100),r=Me(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Zh(n,e,t){return[Et(e[0],qn(n)),Et(e[1],Or(n))*(t?1:-1)]}class NE{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new FE(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ts(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),s=Me(e.point.x,0,e.bounds.width,-i,+i),r=Me(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new mi(s,r),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){jm(e.key)&&e.preventDefault();const[t,i]=Zh(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new mi(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=Zh(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class VE{constructor(e,t){var i,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Hr.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Nm(e,{viewProps:this.viewProps}):null;const r=new NE(e,{layout:t.pickerLayout,props:new he({invertsY:Ne(t.invertsY),max:Ne(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new Qc(e,{assembly:pv,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new DE(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Fs({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Vc(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Rm(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!Oc(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function UE(n){return mi.isObject(n)?new mi(n.x,n.y):new mi}function jE(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function HE(n,e){return new Zc({assembly:pv,components:[Vn(Object.assign(Object.assign({},n),n.x),e.x),Vn(Object.assign(Object.assign({},n),n.y),e.y)]})}function Qh(n,e){var t,i;if(!Le(n.min)||!Le(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const s=ym(n);return Math.max(Math.abs(s)*10,Math.abs(e)*10)}function GE(n,e){var t,i;const s=Qh(Ki(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),r=Qh(Ki(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(s,r)}function qE(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}const WE=wt({id:"input-point2d",type:"input",accept:(n,e)=>{if(!mi.isObject(n))return null;const t=He(e,i=>Object.assign(Object.assign({},Lr(i)),{expanded:i.optional.boolean,picker:i.optional.custom(qm),readonly:i.optional.constant(!1),x:i.optional.custom(hi),y:i.optional.object(Object.assign(Object.assign({},Lr(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>UE,constraint:n=>HE(n.params,n.initialValue),equals:mi.equals,writer:()=>jE},controller:n=>{var e,t;const i=n.document,s=n.value,r=n.constraint,o=[n.params.x,n.params.y];return new VE(i,{axes:s.rawValue.getComponents().map((a,l)=>{var c;return Bc({constraint:r.components[l],initialValue:a,params:Ki(n.params,(c=o[l])!==null&&c!==void 0?c:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:qE(n.params),max:GE(n.params,s.rawValue),parser:Gn,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:s,viewProps:n.viewProps})}});class ys{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Le(e))return!1;const t=e.x,i=e.y,s=e.z;return!(typeof t!="number"||typeof i!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const fv={toComponents:n=>n.getComponents(),fromComponents:n=>new ys(...n)};function $E(n){return ys.isObject(n)?new ys(n.x,n.y,n.z):new ys}function KE(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function YE(n,e){return new Zc({assembly:fv,components:[Vn(Object.assign(Object.assign({},n),n.x),e.x),Vn(Object.assign(Object.assign({},n),n.y),e.y),Vn(Object.assign(Object.assign({},n),n.z),e.z)]})}const XE=wt({id:"input-point3d",type:"input",accept:(n,e)=>{if(!ys.isObject(n))return null;const t=He(e,i=>Object.assign(Object.assign({},Lr(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(hi),y:i.optional.custom(hi),z:i.optional.custom(hi)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>$E,constraint:n=>YE(n.params,n.initialValue),equals:ys.equals,writer:n=>KE},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new Qc(n.document,{assembly:fv,axes:e.rawValue.getComponents().map((s,r)=>{var o;return Bc({constraint:t.components[r],initialValue:s,params:Ki(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Gn,value:e,viewProps:n.viewProps})}});class xs{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.z=i,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Le(e))return!1;const t=e.x,i=e.y,s=e.z,r=e.w;return!(typeof t!="number"||typeof i!="number"||typeof s!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const mv={toComponents:n=>n.getComponents(),fromComponents:n=>new xs(...n)};function ZE(n){return xs.isObject(n)?new xs(n.x,n.y,n.z,n.w):new xs}function QE(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function JE(n,e){return new Zc({assembly:mv,components:[Vn(Object.assign(Object.assign({},n),n.x),e.x),Vn(Object.assign(Object.assign({},n),n.y),e.y),Vn(Object.assign(Object.assign({},n),n.z),e.z),Vn(Object.assign(Object.assign({},n),n.w),e.w)]})}const eS=wt({id:"input-point4d",type:"input",accept:(n,e)=>{if(!xs.isObject(n))return null;const t=He(e,i=>Object.assign(Object.assign({},Lr(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(hi),x:i.optional.custom(hi),y:i.optional.custom(hi),z:i.optional.custom(hi)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>ZE,constraint:n=>JE(n.params,n.initialValue),equals:xs.equals,writer:n=>QE},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new Qc(n.document,{assembly:mv,axes:e.rawValue.getComponents().map((s,r)=>{var o;return Bc({constraint:t.components[r],initialValue:s,params:Ki(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Gn,value:e,viewProps:n.viewProps})}});function tS(n){const e=[],t=Hc(n.options);return t&&e.push(t),new Gr(e)}const nS=wt({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=He(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(Wr)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Um,constraint:n=>tS(n.params),writer:n=>Kr},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&Go(i,qr);return s?new bi(e,{props:new he({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new Br(e,{parser:r=>r,props:he.fromObject({formatter:jl}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof bi?new Uc(n.controller):null}}),Xr={monitor:{defaultInterval:200,defaultRows:3}},Jh=_e("mll");class iS{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Jh()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(Jh("i")),i.style.height=`calc(var(${Gm("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(s=>{s!==void 0&&i.push(this.formatter_(s))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class Jc{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new iS(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const ed=_e("sgl");class sS{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(ed()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(ed("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class eu{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new sS(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}const rS=wt({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=He(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Vm},controller:n=>{var e;return n.value.rawValue.length===1?new eu(n.document,{formatter:Wh,value:n.value,viewProps:n.viewProps}):new Jc(n.document,{formatter:Wh,rows:(e=n.params.rows)!==null&&e!==void 0?e:Xr.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class oS extends kr{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const ti=_e("grl");class aS{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ti()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(wn,"svg");i.classList.add(ti("g")),i.style.height=`calc(var(${Gm("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const s=e.createElementNS(wn,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const r=e.createElement("div");r.classList.add(ti("t"),_e("tt")()),this.element.appendChild(r),this.tooltipElem_=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,s=this.props_.get("min"),r=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,d)=>{if(h===void 0)return;const p=Me(d,0,i,0,e),f=Me(h,s,r,t,0);o.push([p,f].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(ti("t","a"));return}const c=Me(this.cursor_.rawValue,0,i,0,e),u=Me(l,s,r,t,0);a.style.left=`${c}px`,a.style.top=`${u}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(ti("t","a"))||(a.classList.add(ti("t","a"),ti("t","in")),Ho(a),a.classList.remove(ti("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class vv{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=Ne(-1),this.view=new aS(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Oc(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new ts(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Vt(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Ut(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(Me(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Me(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Hl(n){return Le(n.format)?Rt(2):n.format}function lS(n){var e;return n.value.rawValue.length===1?new eu(n.document,{formatter:Hl(n.params),value:n.value,viewProps:n.viewProps}):new Jc(n.document,{formatter:Hl(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Xr.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function cS(n){var e,t,i;return new vv(n.document,{formatter:Hl(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Xr.monitor.defaultRows,props:he.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function td(n){return n.view==="graph"}const uS=wt({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=He(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>td(n)?64:1,reader:n=>bm},controller:n=>td(n.params)?cS(n):lS(n),api:n=>n.controller.valueController instanceof vv?new oS(n.controller):null}),hS=wt({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=He(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Um},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new Jc(n.document,{formatter:jl,rows:(e=n.params.rows)!==null&&e!==void 0?e:Xr.monitor.defaultRows,value:t,viewProps:n.viewProps}):new eu(n.document,{formatter:jl,value:t,viewProps:n.viewProps})}});class dS{constructor(){this.map_=new Map}get(e){var t;return(t=this.map_.get(e))!==null&&t!==void 0?t:null}has(e){return this.map_.has(e)}add(e,t){return this.map_.set(e,t),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),t}}class pS{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function fS(n,e){var t;const i=n.accept(e.target.read(),e.params);if(Le(i))return null;const s={target:e.target,initialValue:i.initialValue,params:i.params},r=He(e.params,h=>({disabled:h.optional.boolean,hidden:h.optional.boolean,label:h.optional.string,tag:h.optional.string})),o=n.binding.reader(s),a=n.binding.constraint?n.binding.constraint(s):void 0,l=new pS({reader:o,target:e.target,writer:n.binding.writer(s)}),c=new Z1(Ne(o(i.initialValue),{constraint:a,equals:n.binding.equals}),l),u=n.controller({constraint:a,document:e.document,initialValue:i.initialValue,params:i.params,value:c,viewProps:Kn.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})});return new dx(e.document,{blade:Ds(),props:he.fromObject({label:"label"in e.params?(t=r==null?void 0:r.label)!==null&&t!==void 0?t:null:e.target.key}),tag:r==null?void 0:r.tag,value:c,valueController:u})}class mS{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function vS(n,e){return e===0?new Kx:new Yx(n,e??Xr.monitor.defaultInterval)}function gS(n,e){var t,i,s;const r=n.accept(e.target.read(),e.params);if(Le(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},a=He(e.params,d=>({bufferSize:d.optional.number,disabled:d.optional.boolean,hidden:d.optional.boolean,interval:d.optional.number,label:d.optional.string})),l=n.binding.reader(o),c=(i=(t=a==null?void 0:a.bufferSize)!==null&&t!==void 0?t:n.binding.defaultBufferSize&&n.binding.defaultBufferSize(r.params))!==null&&i!==void 0?i:1,u=new gx({binding:new mS({reader:l,target:e.target}),bufferSize:c,ticker:vS(e.document,a==null?void 0:a.interval)}),h=n.controller({document:e.document,params:r.params,value:u,viewProps:Kn.create({disabled:a==null?void 0:a.disabled,hidden:a==null?void 0:a.hidden})});return h.viewProps.bindDisabled(u.ticker),h.viewProps.handleDispose(()=>{u.ticker.dispose()}),new bx(e.document,{blade:Ds(),props:he.fromObject({label:"label"in e.params?(s=a==null?void 0:a.label)!==null&&s!==void 0?s:null:e.target.key}),value:u,valueController:h})}class _S{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,t){if(!lC(t.core))throw Ge.notCompatible(e,t.id);t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput_(e,t,i){return this.pluginsMap_.inputs.reduce((s,r)=>s??fS(r,{document:e,target:t,params:i}),null)}createMonitor_(e,t,i){return this.pluginsMap_.monitors.reduce((s,r)=>s??gS(r,{document:e,params:i,target:t}),null)}createBinding(e,t,i){const s=t.read();if(Le(s))throw new Ge({context:{key:t.key},type:"nomatchingcontroller"});const r=this.createInput_(e,t,i);if(r)return r;const o=this.createMonitor_(e,t,i);if(o)return o;throw new Ge({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const i=this.pluginsMap_.blades.reduce((s,r)=>s??$x(r,{document:e,params:t}),null);if(!i)throw new Ge({type:"nomatchingview",context:{params:t}});return i}createInputBindingApi_(e){const t=this.pluginsMap_.inputs.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new kr(e))}createMonitorBindingApi_(e){const t=this.pluginsMap_.monitors.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new kr(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(px(e))return this.createInputBindingApi_(e);if(wx(e))return this.createMonitorBindingApi_(e);throw Ge.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(hx(e))return this.createBindingApi(e);const t=this.pluginsMap_.blades.reduce((i,s)=>i??s.api({controller:e,pool:this}),null);if(!t)throw Ge.shouldNeverHappen();return this.apiCache_.add(e,t)}}const bS=new dS;function wS(){const n=new _S(bS);return[WE,XE,eS,nS,zE,IE,RE,SE,dC,rS,hS,uS,Sx,Fx,Fm].forEach(e=>{n.register("core",e)}),n}class yS extends es{constructor(e){super(e),this.emitter_=new Ze,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new jr(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class xS extends es{}class CS extends es{constructor(e){super(e),this.emitter_=new Ze,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new jr(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class ES extends es{constructor(e){super(e),this.emitter_=new Ze,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new jr(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const SS=function(){return{id:"list",type:"blade",core:zs,accept(n){const e=He(n,t=>({options:t.required.custom(Wr),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}));return e?{params:e}:null},controller(n){const e=new qr(jc(n.params.options)),t=Ne(n.params.value,{constraint:e}),i=new bi(n.document,{props:new he({options:e.values.value("options")}),value:t,viewProps:n.viewProps});return new Yi(n.document,{blade:n.blade,props:he.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof Yi)||!(n.controller.valueController instanceof bi)?null:new yS(n.controller)}}}();class PS extends zm{constructor(e,t){super(e,t)}get element(){return this.controller.view.element}}class TS extends Vl{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const nd=_e("spr");class MS{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(nd()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("hr");i.classList.add(nd("r")),this.element.appendChild(i)}}class id extends da{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new MS(e,{viewProps:t.viewProps})}))}}const AS={id:"separator",type:"blade",core:zs,accept(n){const e=He(n,t=>({view:t.required.constant("separator")}));return e?{params:e}:null},controller(n){return new id(n.document,{blade:n.blade,viewProps:n.viewProps})},api(n){return n.controller instanceof id?new xS(n.controller):null}},RS={id:"slider",type:"blade",core:zs,accept(n){const e=He(n,t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}));return e?{params:e}:null},controller(n){var e,t;const i=(e=n.params.value)!==null&&e!==void 0?e:0,s=new Ur({max:n.params.max,min:n.params.min}),r=Ne(i,{constraint:s}),o=new Wo(n.document,Object.assign(Object.assign({},Hm({formatter:(t=n.params.format)!==null&&t!==void 0?t:W1,keyScale:Ne(1),max:s.values.value("max"),min:s.values.value("min"),pointerScale:xm(n.params,i)})),{parser:Gn,value:r,viewProps:n.viewProps}));return new Yi(n.document,{blade:n.blade,props:he.fromObject({label:n.params.label}),value:r,valueController:o})},api(n){return!(n.controller instanceof Yi)||!(n.controller.valueController instanceof Wo)?null:new CS(n.controller)}},IS=function(){return{id:"text",type:"blade",core:zs,accept(n){const e=He(n,t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}));return e?{params:e}:null},controller(n){var e;const t=Ne(n.params.value),i=new Br(n.document,{parser:n.params.parse,props:he.fromObject({formatter:(e=n.params.format)!==null&&e!==void 0?e:s=>String(s)}),value:t,viewProps:n.viewProps});return new Yi(n.document,{blade:n.blade,props:he.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof Yi)||!(n.controller.valueController instanceof Br)?null:new ES(n.controller)}}}();function kS(n){const e=n.createElement("div");return e.classList.add(_e("dfw")()),n.body&&n.body.appendChild(e),e}function BS(n,e,t){if(n.querySelector(`style[data-tp-style=${e}]`))return;const i=n.createElement("style");i.dataset.tpStyle=e,i.textContent=t,n.head.appendChild(i)}class lA extends PS{constructor(e){var t,i;const s=e??{},r=(t=s.document)!==null&&t!==void 0?t:sx(),o=wS(),a=new TS(r,{expanded:s.expanded,blade:Ds(),props:he.fromObject({title:s.title}),viewProps:Kn.create()});super(a,o),this.pool_=o,this.containerElem_=(i=s.container)!==null&&i!==void 0?i:kS(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!s.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Ge.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw Ge.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&BS(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(i=>{this.pool_.register(e.id,i)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[SS,AS,RS,Fm,IS]})}}new Lm("4.0.5");class nn{constructor(e){e===void 0&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){e===void 0&&(e=new C);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){t===void 0&&(t=new C);const i=this.elements,s=e.x,r=e.y,o=e.z;return t.x=i[0]*s+i[1]*r+i[2]*o,t.y=i[3]*s+i[4]*r+i[5]*o,t.z=i[6]*s+i[7]*r+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){t===void 0&&(t=new nn);const i=this.elements,s=e.elements,r=t.elements,o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],d=i[6],p=i[7],f=i[8],m=s[0],v=s[1],b=s[2],g=s[3],E=s[4],P=s[5],I=s[6],S=s[7],R=s[8];return r[0]=o*m+a*g+l*I,r[1]=o*v+a*E+l*S,r[2]=o*b+a*P+l*R,r[3]=c*m+u*g+h*I,r[4]=c*v+u*E+h*S,r[5]=c*b+u*P+h*R,r[6]=d*m+p*g+f*I,r[7]=d*v+p*E+f*S,r[8]=d*b+p*P+f*R,t}scale(e,t){t===void 0&&(t=new nn);const i=this.elements,s=t.elements;for(let r=0;r!==3;r++)s[3*r+0]=e.x*i[3*r+0],s[3*r+1]=e.y*i[3*r+1],s[3*r+2]=e.z*i[3*r+2];return t}solve(e,t){t===void 0&&(t=new C);const i=3,s=4,r=[];let o,a;for(o=0;o<i*s;o++)r.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)r[o+s*a]=this.elements[o+3*a];r[3+4*0]=e.x,r[3+4*1]=e.y,r[3+4*2]=e.z;let l=3;const c=l;let u;const h=4;let d;do{if(o=c-l,r[o+s*o]===0){for(a=o+1;a<c;a++)if(r[o+s*a]!==0){u=h;do d=h-u,r[d+s*o]+=r[d+s*a];while(--u);break}}if(r[o+s*o]!==0)for(a=o+1;a<c;a++){const p=r[o+s*a]/r[o+s*o];u=h;do d=h-u,r[d+s*a]=d<=o?0:r[d+s*a]-r[d+s*o]*p;while(--u)}}while(--l);if(t.z=r[2*s+3]/r[2*s+2],t.y=(r[1*s+3]-r[1*s+2]*t.z)/r[1*s+1],t.x=(r[0*s+3]-r[0*s+2]*t.z-r[0*s+1]*t.y)/r[0*s+0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(i===void 0)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";const t=",";for(let i=0;i<9;i++)e+=this.elements[i]+t;return e}reverse(e){e===void 0&&(e=new nn);const t=3,i=6,s=OS;let r,o;for(r=0;r<3;r++)for(o=0;o<3;o++)s[r+i*o]=this.elements[r+3*o];s[3+6*0]=1,s[3+6*1]=0,s[3+6*2]=0,s[4+6*0]=0,s[4+6*1]=1,s[4+6*2]=0,s[5+6*0]=0,s[5+6*1]=0,s[5+6*2]=1;let a=3;const l=a;let c;const u=i;let h;do{if(r=l-a,s[r+i*r]===0){for(o=r+1;o<l;o++)if(s[r+i*o]!==0){c=u;do h=u-c,s[h+i*r]+=s[h+i*o];while(--c);break}}if(s[r+i*r]!==0)for(o=r+1;o<l;o++){const d=s[r+i*o]/s[r+i*r];c=u;do h=u-c,s[h+i*o]=h<=r?0:s[h+i*o]-s[h+i*r]*d;while(--c)}}while(--a);r=2;do{o=r-1;do{const d=s[r+i*o]/s[r+i*r];c=i;do h=i-c,s[h+i*o]=s[h+i*o]-s[h+i*r]*d;while(--c)}while(o--)}while(--r);r=2;do{const d=1/s[r+i*r];c=i;do h=i-c,s[h+i*r]=s[h+i*r]*d;while(--c)}while(r--);r=2;do{o=2;do{if(h=s[t+o+i*r],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(r,o,h)}while(o--)}while(r--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,s=e.z,r=e.w,o=t+t,a=i+i,l=s+s,c=t*o,u=t*a,h=t*l,d=i*a,p=i*l,f=s*l,m=r*o,v=r*a,b=r*l,g=this.elements;return g[3*0+0]=1-(d+f),g[3*0+1]=u-b,g[3*0+2]=h+v,g[3*1+0]=u+b,g[3*1+1]=1-(c+f),g[3*1+2]=p-m,g[3*2+0]=h-v,g[3*2+1]=p+m,g[3*2+2]=1-(c+d),this}transpose(e){e===void 0&&(e=new nn);const t=this.elements,i=e.elements;let s;return i[0]=t[0],i[4]=t[4],i[8]=t[8],s=t[1],i[1]=t[3],i[3]=s,s=t[2],i[2]=t[6],i[6]=s,s=t[5],i[5]=t[7],i[7]=s,e}}const OS=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class C{constructor(e,t,i){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){t===void 0&&(t=new C);const i=e.x,s=e.y,r=e.z,o=this.x,a=this.y,l=this.z;return t.x=a*r-l*s,t.y=l*i-o*r,t.z=o*s-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(t)t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z;else return new C(this.x+e.x,this.y+e.y,this.z+e.z)}vsub(e,t){if(t)t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z;else return new C(this.x-e.x,this.y-e.y,this.z-e.z)}crossmat(){return new nn([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,s=Math.sqrt(e*e+t*t+i*i);if(s>0){const r=1/s;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return s}unit(e){e===void 0&&(e=new C);const t=this.x,i=this.y,s=this.z;let r=Math.sqrt(t*t+i*i+s*s);return r>0?(r=1/r,e.x=t*r,e.y=i*r,e.z=s*r):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z;return Math.sqrt((r-t)*(r-t)+(o-i)*(o-i)+(a-s)*(a-s))}distanceSquared(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z;return(r-t)*(r-t)+(o-i)*(o-i)+(a-s)*(a-s)}scale(e,t){t===void 0&&(t=new C);const i=this.x,s=this.y,r=this.z;return t.x=e*i,t.y=e*s,t.z=e*r,t}vmul(e,t){return t===void 0&&(t=new C),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return i===void 0&&(i=new C),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(e){return e===void 0&&(e=new C),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const s=LS,r=1/i;s.set(this.x*r,this.y*r,this.z*r);const o=zS;Math.abs(s.x)<.9?(o.set(1,0,0),s.cross(o,e)):(o.set(0,1,0),s.cross(o,e)),s.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const s=this.x,r=this.y,o=this.z;i.x=s+(e.x-s)*t,i.y=r+(e.y-r)*t,i.z=o+(e.z-o)*t}almostEquals(e,t){return t===void 0&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return e===void 0&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(sd),sd.almostEquals(e,t)}clone(){return new C(this.x,this.y,this.z)}}C.ZERO=new C(0,0,0);C.UNIT_X=new C(1,0,0);C.UNIT_Y=new C(0,1,0);C.UNIT_Z=new C(0,0,1);const LS=new C,zS=new C,sd=new C;class jt{constructor(e){e===void 0&&(e={}),this.lowerBound=new C,this.upperBound=new C,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,s){const r=this.lowerBound,o=this.upperBound,a=i;r.copy(e[0]),a&&a.vmult(r,r),o.copy(r);for(let l=1;l<e.length;l++){let c=e[l];a&&(a.vmult(c,rd),c=rd),c.x>o.x&&(o.x=c.x),c.x<r.x&&(r.x=c.x),c.y>o.y&&(o.y=c.y),c.y<r.y&&(r.y=c.y),c.z>o.z&&(o.z=c.z),c.z<r.z&&(r.z=c.z)}return t&&(t.vadd(r,r),t.vadd(o,o)),s&&(r.x-=s,r.y-=s,r.z-=s,o.x+=s,o.y+=s,o.z+=s),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return new jt().copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,s=e.lowerBound,r=e.upperBound,o=s.x<=i.x&&i.x<=r.x||t.x<=r.x&&r.x<=i.x,a=s.y<=i.y&&i.y<=r.y||t.y<=r.y&&r.y<=i.y,l=s.z<=i.z&&i.z<=r.z||t.z<=r.z&&r.z<=i.z;return o&&a&&l}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,s=e.lowerBound,r=e.upperBound;return t.x<=s.x&&i.x>=r.x&&t.y<=s.y&&i.y>=r.y&&t.z<=s.z&&i.z>=r.z}getCorners(e,t,i,s,r,o,a,l){const c=this.lowerBound,u=this.upperBound;e.copy(c),t.set(u.x,c.y,c.z),i.set(u.x,u.y,c.z),s.set(c.x,u.y,u.z),r.set(u.x,c.y,u.z),o.set(c.x,u.y,c.z),a.set(c.x,c.y,u.z),l.copy(u)}toLocalFrame(e,t){const i=od,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(s,r,o,a,l,c,u,h);for(let d=0;d!==8;d++){const p=i[d];e.pointToLocal(p,p)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=od,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(s,r,o,a,l,c,u,h);for(let d=0;d!==8;d++){const p=i[d];e.pointToWorld(p,p)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,s=1/t.x,r=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*s,l=(this.upperBound.x-i.x)*s,c=(this.lowerBound.y-i.y)*r,u=(this.upperBound.y-i.y)*r,h=(this.lowerBound.z-i.z)*o,d=(this.upperBound.z-i.z)*o,p=Math.max(Math.max(Math.min(a,l),Math.min(c,u)),Math.min(h,d)),f=Math.min(Math.min(Math.max(a,l),Math.max(c,u)),Math.max(h,d));return!(f<0||p>f)}}const rd=new C,od=[new C,new C,new C,new C,new C,new C,new C,new C];class ad{constructor(){this.matrix=[]}get(e,t){let{index:i}=e,{index:s}=t;if(s>i){const r=s;s=i,i=r}return this.matrix[(i*(i+1)>>1)+s-1]}set(e,t,i){let{index:s}=e,{index:r}=t;if(r>s){const o=r;r=s,s=o}this.matrix[(s*(s+1)>>1)+r-1]=i?1:0}reset(){for(let e=0,t=this.matrix.length;e!==t;e++)this.matrix[e]=0}setNumObjects(e){this.matrix.length=e*(e-1)>>1}}class gv{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;return i[e]===void 0&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return!!(i[e]!==void 0&&i[e].includes(t))}hasAnyEventListener(e){return this._listeners===void 0?!1:this._listeners[e]!==void 0}removeEventListener(e,t){if(this._listeners===void 0)return this;const i=this._listeners;if(i[e]===void 0)return this;const s=i[e].indexOf(t);return s!==-1&&i[e].splice(s,1),this}dispatchEvent(e){if(this._listeners===void 0)return this;const i=this._listeners[e.type];if(i!==void 0){e.target=this;for(let s=0,r=i.length;s<r;s++)i[s].call(this,e)}return this}}class Ue{constructor(e,t,i,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=1),this.x=e,this.y=t,this.z=i,this.w=s}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(t*.5);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(t*.5),this}toAxisAngle(e){e===void 0&&(e=new C),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=DS,s=FS;e.tangents(i,s),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){t===void 0&&(t=new Ue);const i=this.x,s=this.y,r=this.z,o=this.w,a=e.x,l=e.y,c=e.z,u=e.w;return t.x=i*u+o*a+s*c-r*l,t.y=s*u+o*l+r*a-i*c,t.z=r*u+o*c+i*l-s*a,t.w=o*u-i*a-s*l-r*c,t}inverse(e){e===void 0&&(e=new Ue);const t=this.x,i=this.y,s=this.z,r=this.w;this.conjugate(e);const o=1/(t*t+i*i+s*s+r*r);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return e===void 0&&(e=new Ue),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){t===void 0&&(t=new C);const i=e.x,s=e.y,r=e.z,o=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*r-l*s,h=c*s+l*i-o*r,d=c*r+o*s-a*i,p=-o*i-a*s-l*r;return t.x=u*c+p*-o+h*-l-d*-a,t.y=h*c+p*-a+d*-o-u*-l,t.z=d*c+p*-l+u*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){t===void 0&&(t="YZX");let i,s,r;const o=this.x,a=this.y,l=this.z,c=this.w;switch(t){case"YZX":const u=o*a+l*c;if(u>.499&&(i=2*Math.atan2(o,c),s=Math.PI/2,r=0),u<-.499&&(i=-2*Math.atan2(o,c),s=-Math.PI/2,r=0),i===void 0){const h=o*o,d=a*a,p=l*l;i=Math.atan2(2*a*c-2*o*l,1-2*d-2*p),s=Math.asin(2*u),r=Math.atan2(2*o*c-2*a*l,1-2*h-2*p)}break;default:throw new Error(`Euler order ${t} not supported yet.`)}e.y=i,e.z=s,e.x=r}setFromEuler(e,t,i,s){s===void 0&&(s="XYZ");const r=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(t/2),u=Math.sin(i/2);return s==="XYZ"?(this.x=l*o*a+r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a-l*c*u):s==="YXZ"?(this.x=l*o*a+r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a+l*c*u):s==="ZXY"?(this.x=l*o*a-r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a-l*c*u):s==="ZYX"?(this.x=l*o*a-r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a+l*c*u):s==="YZX"?(this.x=l*o*a+r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a-l*c*u):s==="XZY"&&(this.x=l*o*a-r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a+l*c*u),this}clone(){return new Ue(this.x,this.y,this.z,this.w)}slerp(e,t,i){i===void 0&&(i=new Ue);const s=this.x,r=this.y,o=this.z,a=this.w;let l=e.x,c=e.y,u=e.z,h=e.w,d,p,f,m,v;return p=s*l+r*c+o*u+a*h,p<0&&(p=-p,l=-l,c=-c,u=-u,h=-h),1-p>1e-6?(d=Math.acos(p),f=Math.sin(d),m=Math.sin((1-t)*d)/f,v=Math.sin(t*d)/f):(m=1-t,v=t),i.x=m*s+v*l,i.y=m*r+v*c,i.z=m*o+v*u,i.w=m*a+v*h,i}integrate(e,t,i,s){s===void 0&&(s=new Ue);const r=e.x*i.x,o=e.y*i.y,a=e.z*i.z,l=this.x,c=this.y,u=this.z,h=this.w,d=t*.5;return s.x+=d*(r*h+o*u-a*c),s.y+=d*(o*h+a*l-r*u),s.z+=d*(a*h+r*c-o*l),s.w+=d*(-r*l-o*c-a*u),s}}const DS=new C,FS=new C,NS={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class te{constructor(e){e===void 0&&(e={}),this.id=te.idCounter++,this.type=e.type||0,this.boundingSphereRadius=0,this.collisionResponse=e.collisionResponse?e.collisionResponse:!0,this.collisionFilterGroup=e.collisionFilterGroup!==void 0?e.collisionFilterGroup:1,this.collisionFilterMask=e.collisionFilterMask!==void 0?e.collisionFilterMask:-1,this.material=e.material?e.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(e,t){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(e,t,i,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}te.idCounter=0;te.types=NS;class we{constructor(e){e===void 0&&(e={}),this.position=new C,this.quaternion=new Ue,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return we.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return we.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return t===void 0&&(t=new C),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,s){return s===void 0&&(s=new C),i.vsub(e,s),t.conjugate(ld),ld.vmult(s,s),s}static pointToWorldFrame(e,t,i,s){return s===void 0&&(s=new C),t.vmult(i,s),s.vadd(e,s),s}static vectorToWorldFrame(e,t,i){return i===void 0&&(i=new C),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,s){return s===void 0&&(s=new C),t.w*=-1,t.vmult(i,s),t.w*=-1,s}}const ld=new Ue;class vi extends te{constructor(e){e===void 0&&(e={});const{vertices:t=[],faces:i=[],normals:s=[],axes:r,boundingSphereRadius:o}=e;super({type:te.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=s,this.faceNormals.length===0&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=r?r.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const s=new C;for(let r=0;r!==e.length;r++){const o=e[r],a=o.length;for(let l=0;l!==a;l++){const c=(l+1)%a;t[o[l]].vsub(t[o[c]],s),s.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(s)||i[h].almostEquals(s)){u=!0;break}u||i.push(s.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let s=0;s<this.faces[e].length;s++)if(!this.vertices[this.faces[e][s]])throw new Error(`Vertex ${this.faces[e][s]} not found!`);const t=this.faceNormals[e]||new C;this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t;const i=this.vertices[this.faces[e][0]];if(t.dot(i)<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let s=0;s<this.faces[e].length;s++)console.warn(`.vertices[${this.faces[e][s]}] = Vec3(${this.vertices[this.faces[e][s]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e],s=this.vertices[i[0]],r=this.vertices[i[1]],o=this.vertices[i[2]];vi.computeNormal(s,r,o,t)}static computeNormal(e,t,i,s){const r=new C,o=new C;t.vsub(e,o),i.vsub(t,r),r.cross(o,s),s.isZero()||s.normalize()}clipAgainstHull(e,t,i,s,r,o,a,l,c){const u=new C;let h=-1,d=-Number.MAX_VALUE;for(let f=0;f<i.faces.length;f++){u.copy(i.faceNormals[f]),r.vmult(u,u);const m=u.dot(o);m>d&&(d=m,h=f)}const p=[];for(let f=0;f<i.faces[h].length;f++){const m=i.vertices[i.faces[h][f]],v=new C;v.copy(m),r.vmult(v,v),s.vadd(v,v),p.push(v)}h>=0&&this.clipFaceAgainstHull(o,e,t,p,a,l,c)}findSeparatingAxis(e,t,i,s,r,o,a,l){const c=new C,u=new C,h=new C,d=new C,p=new C,f=new C;let m=Number.MAX_VALUE;const v=this;if(v.uniqueAxes)for(let b=0;b!==v.uniqueAxes.length;b++){i.vmult(v.uniqueAxes[b],c);const g=v.testSepAxis(c,e,t,i,s,r);if(g===!1)return!1;g<m&&(m=g,o.copy(c))}else{const b=a?a.length:v.faces.length;for(let g=0;g<b;g++){const E=a?a[g]:g;c.copy(v.faceNormals[E]),i.vmult(c,c);const P=v.testSepAxis(c,e,t,i,s,r);if(P===!1)return!1;P<m&&(m=P,o.copy(c))}}if(e.uniqueAxes)for(let b=0;b!==e.uniqueAxes.length;b++){r.vmult(e.uniqueAxes[b],u);const g=v.testSepAxis(u,e,t,i,s,r);if(g===!1)return!1;g<m&&(m=g,o.copy(u))}else{const b=l?l.length:e.faces.length;for(let g=0;g<b;g++){const E=l?l[g]:g;u.copy(e.faceNormals[E]),r.vmult(u,u);const P=v.testSepAxis(u,e,t,i,s,r);if(P===!1)return!1;P<m&&(m=P,o.copy(u))}}for(let b=0;b!==v.uniqueEdges.length;b++){i.vmult(v.uniqueEdges[b],d);for(let g=0;g!==e.uniqueEdges.length;g++)if(r.vmult(e.uniqueEdges[g],p),d.cross(p,f),!f.almostZero()){f.normalize();const E=v.testSepAxis(f,e,t,i,s,r);if(E===!1)return!1;E<m&&(m=E,o.copy(f))}}return s.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,s,r,o){const a=this;vi.project(a,e,i,s,Ja),vi.project(t,e,r,o,el);const l=Ja[0],c=Ja[1],u=el[0],h=el[1];if(l<h||u<c)return!1;const d=l-h,p=u-c;return d<p?d:p}calculateLocalInertia(e,t){const i=new C,s=new C;this.computeLocalAABB(s,i);const r=i.x-s.x,o=i.y-s.y,a=i.z-s.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*r*2*r+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*r*2*r)}getPlaneConstantOfFace(e){const t=this.faces[e],i=this.faceNormals[e],s=this.vertices[t[0]];return-i.dot(s)}clipFaceAgainstHull(e,t,i,s,r,o,a){const l=new C,c=new C,u=new C,h=new C,d=new C,p=new C,f=new C,m=new C,v=this,b=[],g=s,E=b;let P=-1,I=Number.MAX_VALUE;for(let w=0;w<v.faces.length;w++){l.copy(v.faceNormals[w]),i.vmult(l,l);const k=l.dot(e);k<I&&(I=k,P=w)}if(P<0)return;const S=v.faces[P];S.connectedFaces=[];for(let w=0;w<v.faces.length;w++)for(let k=0;k<v.faces[w].length;k++)S.indexOf(v.faces[w][k])!==-1&&w!==P&&S.connectedFaces.indexOf(w)===-1&&S.connectedFaces.push(w);const R=S.length;for(let w=0;w<R;w++){const k=v.vertices[S[w]],B=v.vertices[S[(w+1)%R]];k.vsub(B,c),u.copy(c),i.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[P]),i.vmult(h,h),t.vadd(h,h),u.cross(h,d),d.negate(d),p.copy(k),i.vmult(p,p),t.vadd(p,p);const L=S.connectedFaces[w];f.copy(this.faceNormals[L]);const N=this.getPlaneConstantOfFace(L);m.copy(f),i.vmult(m,m);const F=N-m.dot(t);for(this.clipFaceAgainstPlane(g,E,m,F);g.length;)g.shift();for(;E.length;)g.push(E.shift())}f.copy(this.faceNormals[P]);const _=this.getPlaneConstantOfFace(P);m.copy(f),i.vmult(m,m);const y=_-m.dot(t);for(let w=0;w<g.length;w++){let k=m.dot(g[w])+y;if(k<=r&&(console.log(`clamped: depth=${k} to minDist=${r}`),k=r),k<=o){const B=g[w];if(k<=1e-6){const L={point:B,normal:m,depth:k};a.push(L)}}}}clipFaceAgainstPlane(e,t,i,s){let r,o;const a=e.length;if(a<2)return t;let l=e[e.length-1],c=e[0];r=i.dot(l)+s;for(let u=0;u<a;u++){if(c=e[u],o=i.dot(c)+s,r<0)if(o<0){const h=new C;h.copy(c),t.push(h)}else{const h=new C;l.lerp(c,r/(r-o),h),t.push(h)}else if(o<0){const h=new C;l.lerp(c,r/(r-o),h),t.push(h),t.push(c)}l=c,r=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new C);const i=this.vertices,s=this.worldVertices;for(let r=0;r!==this.vertices.length;r++)t.vmult(i[r],s[r]),e.vadd(s[r],s[r]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let s=0;s<this.vertices.length;s++){const r=i[s];r.x<e.x?e.x=r.x:r.x>t.x&&(t.x=r.x),r.y<e.y?e.y=r.y:r.y>t.y&&(t.y=r.y),r.z<e.z?e.z=r.z:r.z>t.z&&(t.z=r.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new C);const i=this.faceNormals,s=this.worldFaceNormals;for(let r=0;r!==t;r++)e.vmult(i[r],s[r]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const s=t[i].lengthSquared();s>e&&(e=s)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,s){const r=this.vertices;let o,a,l,c,u,h,d=new C;for(let p=0;p<r.length;p++){d.copy(r[p]),t.vmult(d,d),e.vadd(d,d);const f=d;(o===void 0||f.x<o)&&(o=f.x),(c===void 0||f.x>c)&&(c=f.x),(a===void 0||f.y<a)&&(a=f.y),(u===void 0||f.y>u)&&(u=f.y),(l===void 0||f.z<l)&&(l=f.z),(h===void 0||f.z>h)&&(h=f.z)}i.set(o,a,l),s.set(c,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){e===void 0&&(e=new C);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,s=this.vertices;if(t){for(let r=0;r<i;r++){const o=s[r];t.vmult(o,o)}for(let r=0;r<this.faceNormals.length;r++){const o=this.faceNormals[r];t.vmult(o,o)}}if(e)for(let r=0;r<i;r++){const o=s[r];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,s=this.faceNormals,r=null,o=new C;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let l=s[a];const c=t[i[a][0]],u=new C;e.vsub(c,u);const h=l.dot(u),d=new C;o.vsub(c,d);const p=l.dot(d);if(h<0&&p>0||h>0&&p<0)return!1}return r?1:-1}static project(e,t,i,s,r){const o=e.vertices.length,a=VS;let l=0,c=0;const u=US,h=e.vertices;u.setZero(),we.vectorToLocalFrame(i,s,t,a),we.pointToLocalFrame(i,s,u,u);const d=u.dot(a);c=l=h[0].dot(a);for(let p=1;p<o;p++){const f=h[p].dot(a);f>l&&(l=f),f<c&&(c=f)}if(c-=d,l-=d,c>l){const p=c;c=l,l=p}r[0]=l,r[1]=c}}const Ja=[],el=[];new C;const VS=new C,US=new C;class tu extends te{constructor(e){super({type:te.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,s=C,r=[new s(-e,-t,-i),new s(e,-t,-i),new s(e,t,-i),new s(-e,t,-i),new s(-e,-t,i),new s(e,-t,i),new s(e,t,i),new s(-e,t,i)],o=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],a=[new s(0,0,1),new s(0,1,0),new s(1,0,0)],l=new vi({vertices:r,faces:o,axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,t){return t===void 0&&(t=new C),tu.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const s=e;i.x=1/12*t*(2*s.y*2*s.y+2*s.z*2*s.z),i.y=1/12*t*(2*s.x*2*s.x+2*s.z*2*s.z),i.z=1/12*t*(2*s.y*2*s.y+2*s.x*2*s.x)}getSideNormals(e,t){const i=e,s=this.halfExtents;if(i[0].set(s.x,0,0),i[1].set(0,s.y,0),i[2].set(0,0,s.z),i[3].set(-s.x,0,0),i[4].set(0,-s.y,0),i[5].set(0,0,-s.z),t!==void 0)for(let r=0;r!==i.length;r++)t.vmult(i[r],i[r]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const s=this.halfExtents,r=[[s.x,s.y,s.z],[-s.x,s.y,s.z],[-s.x,-s.y,s.z],[-s.x,-s.y,-s.z],[s.x,-s.y,-s.z],[s.x,s.y,-s.z],[-s.x,s.y,-s.z],[s.x,-s.y,s.z]];for(let o=0;o<r.length;o++)ni.set(r[o][0],r[o][1],r[o][2]),t.vmult(ni,ni),e.vadd(ni,ni),i(ni.x,ni.y,ni.z)}calculateWorldAABB(e,t,i,s){const r=this.halfExtents;un[0].set(r.x,r.y,r.z),un[1].set(-r.x,r.y,r.z),un[2].set(-r.x,-r.y,r.z),un[3].set(-r.x,-r.y,-r.z),un[4].set(r.x,-r.y,-r.z),un[5].set(r.x,r.y,-r.z),un[6].set(-r.x,r.y,-r.z),un[7].set(r.x,-r.y,r.z);const o=un[0];t.vmult(o,o),e.vadd(o,o),s.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=un[a];t.vmult(l,l),e.vadd(l,l);const c=l.x,u=l.y,h=l.z;c>s.x&&(s.x=c),u>s.y&&(s.y=u),h>s.z&&(s.z=h),c<i.x&&(i.x=c),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const ni=new C,un=[new C,new C,new C,new C,new C,new C,new C,new C],nu={DYNAMIC:1,STATIC:2,KINEMATIC:4},iu={AWAKE:0,SLEEPY:1,SLEEPING:2};class ie extends gv{constructor(e){e===void 0&&(e={}),super(),this.id=ie.idCounter++,this.index=-1,this.world=null,this.vlambda=new C,this.collisionFilterGroup=typeof e.collisionFilterGroup=="number"?e.collisionFilterGroup:1,this.collisionFilterMask=typeof e.collisionFilterMask=="number"?e.collisionFilterMask:-1,this.collisionResponse=typeof e.collisionResponse=="boolean"?e.collisionResponse:!0,this.position=new C,this.previousPosition=new C,this.interpolatedPosition=new C,this.initPosition=new C,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new C,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new C,this.force=new C;const t=typeof e.mass=="number"?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping=typeof e.linearDamping=="number"?e.linearDamping:.01,this.type=t<=0?ie.STATIC:ie.DYNAMIC,typeof e.type==typeof ie.STATIC&&(this.type=e.type),this.allowSleep=typeof e.allowSleep<"u"?e.allowSleep:!0,this.sleepState=ie.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new C,this.quaternion=new Ue,this.initQuaternion=new Ue,this.previousQuaternion=new Ue,this.interpolatedQuaternion=new Ue,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new C,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new C,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new C,this.invInertia=new C,this.invInertiaWorld=new nn,this.invMassSolve=0,this.invInertiaSolve=new C,this.invInertiaWorldSolve=new nn,this.fixedRotation=typeof e.fixedRotation<"u"?e.fixedRotation:!1,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new C(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new C(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new jt,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new C,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=ie.AWAKE,this.wakeUpAfterNarrowphase=!1,e===ie.SLEEPING&&this.dispatchEvent(ie.wakeupEvent)}sleep(){this.sleepState=ie.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),s=this.sleepSpeedLimit**2;t===ie.AWAKE&&i<s?(this.sleepState=ie.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(ie.sleepyEvent)):t===ie.SLEEPY&&i>s?this.wakeUp():t===ie.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(ie.sleepEvent))}}updateSolveMassProperties(){this.sleepState===ie.SLEEPING||this.type===ie.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return t===void 0&&(t=new C),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return t===void 0&&(t=new C),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return t===void 0&&(t=new C),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return t===void 0&&(t=new C),this.quaternion.vmult(e,t),t}addShape(e,t,i){const s=new C,r=new Ue;return t&&s.copy(t),i&&r.copy(i),this.shapes.push(e),this.shapeOffsets.push(s),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return t===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let s=0;for(let r=0;r!==i;r++){const o=e[r];o.updateBoundingSphereRadius();const a=t[r].length(),l=o.boundingSphereRadius;a+l>s&&(s=a+l)}this.boundingRadius=s}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,s=e.length,r=jS,o=HS,a=this.quaternion,l=this.aabb,c=GS;for(let u=0;u!==s;u++){const h=e[u];a.vmult(t[u],r),r.vadd(this.position,r),a.mult(i[u],o),h.calculateWorldAABB(r,o,c.lowerBound,c.upperBound),u===0?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(!(t.x===t.y&&t.y===t.z&&!e)){const i=qS,s=WS;i.setRotationFromQuaternion(this.quaternion),i.transpose(s),i.scale(t,i),i.mmult(s,this.invInertiaWorld)}}applyForce(e,t){if(t===void 0&&(t=new C),this.type!==ie.DYNAMIC)return;this.sleepState===ie.SLEEPING&&this.wakeUp();const i=KS;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(t===void 0&&(t=new C),this.type!==ie.DYNAMIC)return;const i=YS,s=XS;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,s),this.applyForce(i,s)}applyTorque(e){this.type===ie.DYNAMIC&&(this.sleepState===ie.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(t===void 0&&(t=new C),this.type!==ie.DYNAMIC)return;this.sleepState===ie.SLEEPING&&this.wakeUp();const i=t,s=ZS;s.copy(e),s.scale(this.invMass,s),this.velocity.vadd(s,this.velocity);const r=QS;i.cross(e,r),this.invInertiaWorld.vmult(r,r),this.angularVelocity.vadd(r,this.angularVelocity)}applyLocalImpulse(e,t){if(t===void 0&&(t=new C),this.type!==ie.DYNAMIC)return;const i=JS,s=eP;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,s),this.applyImpulse(i,s)}updateMassProperties(){const e=tP;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),tu.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new C;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===ie.DYNAMIC||this.type===ie.KINEMATIC)||this.sleepState===ie.SLEEPING)return;const s=this.velocity,r=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,u=this.invMass,h=this.invInertiaWorld,d=this.linearFactor,p=u*e;s.x+=a.x*p*d.x,s.y+=a.y*p*d.y,s.z+=a.z*p*d.z;const f=h.elements,m=this.angularFactor,v=l.x*m.x,b=l.y*m.y,g=l.z*m.z;r.x+=e*(f[0]*v+f[1]*b+f[2]*g),r.y+=e*(f[3]*v+f[4]*b+f[5]*g),r.z+=e*(f[6]*v+f[7]*b+f[8]*g),o.x+=s.x*e,o.y+=s.y*e,o.z+=s.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}ie.idCounter=0;ie.COLLIDE_EVENT_NAME="collide";ie.DYNAMIC=nu.DYNAMIC;ie.STATIC=nu.STATIC;ie.KINEMATIC=nu.KINEMATIC;ie.AWAKE=iu.AWAKE;ie.SLEEPY=iu.SLEEPY;ie.SLEEPING=iu.SLEEPING;ie.wakeupEvent={type:"wakeup"};ie.sleepyEvent={type:"sleepy"};ie.sleepEvent={type:"sleep"};const jS=new C,HS=new Ue,GS=new jt,qS=new nn,WS=new nn,$S=new nn,KS=new C,YS=new C,XS=new C,ZS=new C,QS=new C,JS=new C,eP=new C,tP=new C;class _v{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(e,t,i){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(e,t){return!(!(e.collisionFilterGroup&t.collisionFilterMask)||!(t.collisionFilterGroup&e.collisionFilterMask)||(e.type&ie.STATIC||e.sleepState===ie.SLEEPING)&&(t.type&ie.STATIC||t.sleepState===ie.SLEEPING))}intersectionTest(e,t,i,s){this.useBoundingBoxes?this.doBoundingBoxBroadphase(e,t,i,s):this.doBoundingSphereBroadphase(e,t,i,s)}doBoundingSphereBroadphase(e,t,i,s){const r=nP;t.position.vsub(e.position,r);const o=(e.boundingRadius+t.boundingRadius)**2;r.lengthSquared()<o&&(i.push(e),s.push(t))}doBoundingBoxBroadphase(e,t,i,s){e.aabbNeedsUpdate&&e.updateAABB(),t.aabbNeedsUpdate&&t.updateAABB(),e.aabb.overlaps(t.aabb)&&(i.push(e),s.push(t))}makePairsUnique(e,t){const i=iP,s=sP,r=rP,o=e.length;for(let a=0;a!==o;a++)s[a]=e[a],r[a]=t[a];e.length=0,t.length=0;for(let a=0;a!==o;a++){const l=s[a].id,c=r[a].id,u=l<c?`${l},${c}`:`${c},${l}`;i[u]=a,i.keys.push(u)}for(let a=0;a!==i.keys.length;a++){const l=i.keys.pop(),c=i[l];e.push(s[c]),t.push(r[c]),delete i[l]}}setWorld(e){}static boundingSphereCheck(e,t){const i=new C;e.position.vsub(t.position,i);const s=e.shapes[0],r=t.shapes[0];return Math.pow(s.boundingSphereRadius+r.boundingSphereRadius,2)>i.lengthSquared()}aabbQuery(e,t,i){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const nP=new C;new C;new Ue;new C;const iP={keys:[]},sP=[],rP=[];new C;new C;new C;class oP extends _v{constructor(){super()}collisionPairs(e,t,i){const s=e.bodies,r=s.length;let o,a;for(let l=0;l!==r;l++)for(let c=0;c!==l;c++)o=s[l],a=s[c],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,t,i)}aabbQuery(e,t,i){i===void 0&&(i=[]);for(let s=0;s<e.bodies.length;s++){const r=e.bodies[s];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(t)&&i.push(r)}return i}}class zr{constructor(){this.rayFromWorld=new C,this.rayToWorld=new C,this.hitNormalWorld=new C,this.hitPointWorld=new C,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,s,r,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(s),this.shape=r,this.body=o,this.distance=a}}let bv,wv,yv,xv,Cv,Ev,Sv;const su={CLOSEST:1,ANY:2,ALL:4};bv=te.types.SPHERE;wv=te.types.PLANE;yv=te.types.BOX;xv=te.types.CYLINDER;Cv=te.types.CONVEXPOLYHEDRON;Ev=te.types.HEIGHTFIELD;Sv=te.types.TRIMESH;class Ye{get[bv](){return this._intersectSphere}get[wv](){return this._intersectPlane}get[yv](){return this._intersectBox}get[xv](){return this._intersectConvex}get[Cv](){return this._intersectConvex}get[Ev](){return this._intersectHeightfield}get[Sv](){return this._intersectTrimesh}constructor(e,t){e===void 0&&(e=new C),t===void 0&&(t=new C),this.from=e.clone(),this.to=t.clone(),this.direction=new C,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Ye.ANY,this.result=new zr,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||Ye.ANY,this.result=t.result||new zr,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=typeof t.checkCollisionResponse<"u"?t.checkCollisionResponse:!0,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(cd),tl.length=0,e.broadphase.aabbQuery(e,cd,tl),this.intersectBodies(tl),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const s=aP,r=lP;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if(!(i&&!l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],r),e.quaternion.vmult(e.shapeOffsets[o],s),s.vadd(e.position,s),this.intersectShape(l,r,s,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,s=e.length;!this.result.shouldStop&&i<s;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,s){const r=this.from;if(xP(r,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,s,e)}_intersectBox(e,t,i,s,r){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,s,r)}_intersectPlane(e,t,i,s,r){const o=this.from,a=this.to,l=this.direction,c=new C(0,0,1);t.vmult(c,c);const u=new C;o.vsub(i,u);const h=u.dot(c);a.vsub(i,u);const d=u.dot(c);if(h*d>0||o.distanceTo(a)<h)return;const p=c.dot(l);if(Math.abs(p)<this.precision)return;const f=new C,m=new C,v=new C;o.vsub(i,f);const b=-c.dot(f)/p;l.scale(b,m),o.vadd(m,v),this.reportIntersection(c,v,r,s,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,s=this.to,r=this.from;t.x=Math.min(s.x,r.x),t.y=Math.min(s.y,r.y),t.z=Math.min(s.z,r.z),i.x=Math.max(s.x,r.x),i.y=Math.max(s.y,r.y),i.z=Math.max(s.z,r.z)}_intersectHeightfield(e,t,i,s,r){e.data,e.elementSize;const o=cP;o.from.copy(this.from),o.to.copy(this.to),we.pointToLocalFrame(i,t,o.from,o.from),we.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=uP;let l,c,u,h;l=c=0,u=h=e.data.length-1;const d=new jt;o.getAABB(d),e.getIndexOfPosition(d.lowerBound.x,d.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),e.getIndexOfPosition(d.upperBound.x,d.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let p=l;p<u;p++)for(let f=c;f<h;f++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(p,f,d),!!d.overlapsRay(o)){if(e.getConvexTrianglePillar(p,f,!1),we.pointToWorldFrame(i,t,e.pillarOffset,oo),this._intersectConvex(e.pillarConvex,t,oo,s,r,ud),this.result.shouldStop)return;e.getConvexTrianglePillar(p,f,!0),we.pointToWorldFrame(i,t,e.pillarOffset,oo),this._intersectConvex(e.pillarConvex,t,oo,s,r,ud)}}}_intersectSphere(e,t,i,s,r){const o=this.from,a=this.to,l=e.radius,c=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),h=(o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-l**2,d=u**2-4*c*h,p=hP,f=dP;if(!(d<0))if(d===0)o.lerp(a,d,p),p.vsub(i,f),f.normalize(),this.reportIntersection(f,p,r,s,-1);else{const m=(-u-Math.sqrt(d))/(2*c),v=(-u+Math.sqrt(d))/(2*c);if(m>=0&&m<=1&&(o.lerp(a,m,p),p.vsub(i,f),f.normalize(),this.reportIntersection(f,p,r,s,-1)),this.result.shouldStop)return;v>=0&&v<=1&&(o.lerp(a,v,p),p.vsub(i,f),f.normalize(),this.reportIntersection(f,p,r,s,-1))}}_intersectConvex(e,t,i,s,r,o){const a=pP,l=hd,c=o&&o.faceList||null,u=e.faces,h=e.vertices,d=e.faceNormals,p=this.direction,f=this.from,m=this.to,v=f.distanceTo(m),b=c?c.length:u.length,g=this.result;for(let E=0;!g.shouldStop&&E<b;E++){const P=c?c[E]:E,I=u[P],S=d[P],R=t,_=i;l.copy(h[I[0]]),R.vmult(l,l),l.vadd(_,l),l.vsub(f,l),R.vmult(S,a);const y=p.dot(a);if(Math.abs(y)<this.precision)continue;const w=a.dot(l)/y;if(!(w<0)){p.scale(w,yt),yt.vadd(f,yt),Jt.copy(h[I[0]]),R.vmult(Jt,Jt),_.vadd(Jt,Jt);for(let k=1;!g.shouldStop&&k<I.length-1;k++){hn.copy(h[I[k]]),dn.copy(h[I[k+1]]),R.vmult(hn,hn),R.vmult(dn,dn),_.vadd(hn,hn),_.vadd(dn,dn);const B=yt.distanceTo(f);!(Ye.pointInTriangle(yt,Jt,hn,dn)||Ye.pointInTriangle(yt,hn,Jt,dn))||B>v||this.reportIntersection(a,yt,r,s,P)}}}}_intersectTrimesh(e,t,i,s,r,o){const a=fP,l=wP,c=yP,u=hd,h=mP,d=vP,p=gP,f=bP,m=_P,v=e.indices;e.vertices;const b=this.from,g=this.to,E=this.direction;c.position.copy(i),c.quaternion.copy(t),we.vectorToLocalFrame(i,t,E,h),we.pointToLocalFrame(i,t,b,d),we.pointToLocalFrame(i,t,g,p),p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,p.vsub(d,h),h.normalize();const P=d.distanceSquared(p);e.tree.rayQuery(this,c,l);for(let I=0,S=l.length;!this.result.shouldStop&&I!==S;I++){const R=l[I];e.getNormal(R,a),e.getVertex(v[R*3],Jt),Jt.vsub(d,u);const _=h.dot(a),y=a.dot(u)/_;if(y<0)continue;h.scale(y,yt),yt.vadd(d,yt),e.getVertex(v[R*3+1],hn),e.getVertex(v[R*3+2],dn);const w=yt.distanceSquared(d);!(Ye.pointInTriangle(yt,hn,Jt,dn)||Ye.pointInTriangle(yt,Jt,hn,dn))||w>P||(we.vectorToWorldFrame(t,a,m),we.pointToWorldFrame(i,t,yt,f),this.reportIntersection(m,f,r,s,R))}l.length=0}reportIntersection(e,t,i,s,r){const o=this.from,a=this.to,l=o.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=typeof r<"u"?r:-1,this.mode){case Ye.ALL:this.hasHit=!0,c.set(o,a,e,t,i,s,l),c.hasHit=!0,this.callback(c);break;case Ye.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,s,l));break;case Ye.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,s,l),c.shouldStop=!0;break}}static pointInTriangle(e,t,i,s){s.vsub(t,Bi),i.vsub(t,Ys),e.vsub(t,nl);const r=Bi.dot(Bi),o=Bi.dot(Ys),a=Bi.dot(nl),l=Ys.dot(Ys),c=Ys.dot(nl);let u,h;return(u=l*a-o*c)>=0&&(h=r*c-o*a)>=0&&u+h<r*l-o*o}}Ye.CLOSEST=su.CLOSEST;Ye.ANY=su.ANY;Ye.ALL=su.ALL;const cd=new jt,tl=[],Ys=new C,nl=new C,aP=new C,lP=new Ue,yt=new C,Jt=new C,hn=new C,dn=new C;new C;new zr;const ud={faceList:[0]},oo=new C,cP=new Ye,uP=[],hP=new C,dP=new C,pP=new C;new C;new C;const hd=new C,fP=new C,mP=new C,vP=new C,gP=new C,_P=new C,bP=new C;new jt;const wP=[],yP=new we,Bi=new C,ao=new C;function xP(n,e,t){t.vsub(n,Bi);const i=Bi.dot(e);return e.scale(i,ao),ao.vadd(n,ao),t.distanceTo(ao)}class ir extends _v{static checkBounds(e,t,i){let s,r;i===0?(s=e.position.x,r=t.position.x):i===1?(s=e.position.y,r=t.position.y):i===2&&(s=e.position.z,r=t.position.z);const o=e.boundingRadius,a=t.boundingRadius,l=s+o;return r-a<l}static insertionSortX(e){for(let t=1,i=e.length;t<i;t++){const s=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.x<=s.aabb.lowerBound.x);r--)e[r+1]=e[r];e[r+1]=s}return e}static insertionSortY(e){for(let t=1,i=e.length;t<i;t++){const s=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.y<=s.aabb.lowerBound.y);r--)e[r+1]=e[r];e[r+1]=s}return e}static insertionSortZ(e){for(let t=1,i=e.length;t<i;t++){const s=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.z<=s.aabb.lowerBound.z);r--)e[r+1]=e[r];e[r+1]=s}return e}constructor(e){super(),this.axisList=[],this.world=null,this.axisIndex=0;const t=this.axisList;this._addBodyHandler=i=>{t.push(i.body)},this._removeBodyHandler=i=>{const s=t.indexOf(i.body);s!==-1&&t.splice(s,1)},e&&this.setWorld(e)}setWorld(e){this.axisList.length=0;for(let t=0;t<e.bodies.length;t++)this.axisList.push(e.bodies[t]);e.removeEventListener("addBody",this._addBodyHandler),e.removeEventListener("removeBody",this._removeBodyHandler),e.addEventListener("addBody",this._addBodyHandler),e.addEventListener("removeBody",this._removeBodyHandler),this.world=e,this.dirty=!0}collisionPairs(e,t,i){const s=this.axisList,r=s.length,o=this.axisIndex;let a,l;for(this.dirty&&(this.sortList(),this.dirty=!1),a=0;a!==r;a++){const c=s[a];for(l=a+1;l<r;l++){const u=s[l];if(this.needBroadphaseCollision(c,u)){if(!ir.checkBounds(c,u,o))break;this.intersectionTest(c,u,t,i)}}}}sortList(){const e=this.axisList,t=this.axisIndex,i=e.length;for(let s=0;s!==i;s++){const r=e[s];r.aabbNeedsUpdate&&r.updateAABB()}t===0?ir.insertionSortX(e):t===1?ir.insertionSortY(e):t===2&&ir.insertionSortZ(e)}autoDetectAxis(){let e=0,t=0,i=0,s=0,r=0,o=0;const a=this.axisList,l=a.length,c=1/l;for(let p=0;p!==l;p++){const f=a[p],m=f.position.x;e+=m,t+=m*m;const v=f.position.y;i+=v,s+=v*v;const b=f.position.z;r+=b,o+=b*b}const u=t-e*e*c,h=s-i*i*c,d=o-r*r*c;u>h?u>d?this.axisIndex=0:this.axisIndex=2:h>d?this.axisIndex=1:this.axisIndex=2}aabbQuery(e,t,i){i===void 0&&(i=[]),this.dirty&&(this.sortList(),this.dirty=!1);const s=this.axisIndex;let r="x";s===1&&(r="y"),s===2&&(r="z");const o=this.axisList;t.lowerBound[r],t.upperBound[r];for(let a=0;a<o.length;a++){const l=o[a];l.aabbNeedsUpdate&&l.updateAABB(),l.aabb.overlaps(t)&&i.push(l)}return i}}class ru{static defaults(e,t){e===void 0&&(e={});for(let i in t)i in e||(e[i]=t[i]);return e}}class dd{constructor(){this.spatial=new C,this.rotational=new C}multiplyElement(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)}multiplyVectors(e,t){return e.dot(this.spatial)+t.dot(this.rotational)}}class Zr{constructor(e,t,i,s){i===void 0&&(i=-1e6),s===void 0&&(s=1e6),this.id=Zr.idCounter++,this.minForce=i,this.maxForce=s,this.bi=e,this.bj=t,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new dd,this.jacobianElementB=new dd,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(e,t,i){const s=t,r=e,o=i;this.a=4/(o*(1+4*s)),this.b=4*s/(1+4*s),this.eps=4/(o*o*r*(1+4*s))}computeB(e,t,i){const s=this.computeGW(),r=this.computeGq(),o=this.computeGiMf();return-r*e-s*t-o*i}computeGq(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.position,o=s.position;return e.spatial.dot(r)+t.spatial.dot(o)}computeGW(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.velocity,o=s.velocity,a=i.angularVelocity,l=s.angularVelocity;return e.multiplyVectors(r,a)+t.multiplyVectors(o,l)}computeGWlambda(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.vlambda,o=s.vlambda,a=i.wlambda,l=s.wlambda;return e.multiplyVectors(r,a)+t.multiplyVectors(o,l)}computeGiMf(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.force,o=i.torque,a=s.force,l=s.torque,c=i.invMassSolve,u=s.invMassSolve;return r.scale(c,pd),a.scale(u,fd),i.invInertiaWorldSolve.vmult(o,md),s.invInertiaWorldSolve.vmult(l,vd),e.multiplyVectors(pd,md)+t.multiplyVectors(fd,vd)}computeGiMGt(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.invMassSolve,o=s.invMassSolve,a=i.invInertiaWorldSolve,l=s.invInertiaWorldSolve;let c=r+o;return a.vmult(e.rotational,lo),c+=lo.dot(e.rotational),l.vmult(t.rotational,lo),c+=lo.dot(t.rotational),c}addToWlambda(e){const t=this.jacobianElementA,i=this.jacobianElementB,s=this.bi,r=this.bj,o=CP;s.vlambda.addScaledVector(s.invMassSolve*e,t.spatial,s.vlambda),r.vlambda.addScaledVector(r.invMassSolve*e,i.spatial,r.vlambda),s.invInertiaWorldSolve.vmult(t.rotational,o),s.wlambda.addScaledVector(e,o,s.wlambda),r.invInertiaWorldSolve.vmult(i.rotational,o),r.wlambda.addScaledVector(e,o,r.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Zr.idCounter=0;const pd=new C,fd=new C,md=new C,vd=new C,lo=new C,CP=new C;class EP extends Zr{constructor(e,t,i){i===void 0&&(i=1e6),super(e,t,0,i),this.restitution=0,this.ri=new C,this.rj=new C,this.ni=new C}computeB(e){const t=this.a,i=this.b,s=this.bi,r=this.bj,o=this.ri,a=this.rj,l=SP,c=PP,u=s.velocity,h=s.angularVelocity;s.force,s.torque;const d=r.velocity,p=r.angularVelocity;r.force,r.torque;const f=TP,m=this.jacobianElementA,v=this.jacobianElementB,b=this.ni;o.cross(b,l),a.cross(b,c),b.negate(m.spatial),l.negate(m.rotational),v.spatial.copy(b),v.rotational.copy(c),f.copy(r.position),f.vadd(a,f),f.vsub(s.position,f),f.vsub(o,f);const g=b.dot(f),E=this.restitution+1,P=E*d.dot(b)-E*u.dot(b)+p.dot(c)-h.dot(l),I=this.computeGiMf();return-g*t-P*i-e*I}getImpactVelocityAlongNormal(){const e=MP,t=AP,i=RP,s=IP,r=kP;return this.bi.position.vadd(this.ri,i),this.bj.position.vadd(this.rj,s),this.bi.getVelocityAtWorldPoint(i,e),this.bj.getVelocityAtWorldPoint(s,t),e.vsub(t,r),this.ni.dot(r)}}const SP=new C,PP=new C,TP=new C,MP=new C,AP=new C,RP=new C,IP=new C,kP=new C;new C;new C;new C;new C;new C;new C;new C;new C;new C;new C;class gd extends Zr{constructor(e,t,i){super(e,t,-i,i),this.ri=new C,this.rj=new C,this.t=new C}computeB(e){this.a;const t=this.b;this.bi,this.bj;const i=this.ri,s=this.rj,r=BP,o=OP,a=this.t;i.cross(a,r),s.cross(a,o);const l=this.jacobianElementA,c=this.jacobianElementB;a.negate(l.spatial),r.negate(l.rotational),c.spatial.copy(a),c.rotational.copy(o);const u=this.computeGW(),h=this.computeGiMf();return-u*t-e*h}}const BP=new C,OP=new C;class fa{constructor(e,t,i){i=ru.defaults(i,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=fa.idCounter++,this.materials=[e,t],this.friction=i.friction,this.restitution=i.restitution,this.contactEquationStiffness=i.contactEquationStiffness,this.contactEquationRelaxation=i.contactEquationRelaxation,this.frictionEquationStiffness=i.frictionEquationStiffness,this.frictionEquationRelaxation=i.frictionEquationRelaxation}}fa.idCounter=0;class ma{constructor(e){e===void 0&&(e={});let t="";typeof e=="string"&&(t=e,e={}),this.name=t,this.id=ma.idCounter++,this.friction=typeof e.friction<"u"?e.friction:-1,this.restitution=typeof e.restitution<"u"?e.restitution:-1}}ma.idCounter=0;new C;new C;new C;new C;new C;new C;new C;new C;new C;new C;new C;class LP{constructor(e){e===void 0&&(e={}),e=ru.defaults(e,{chassisConnectionPointLocal:new C,chassisConnectionPointWorld:new C,directionLocal:new C,directionWorld:new C,axleLocal:new C,axleWorld:new C,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:10.5,forwardAcceleration:1,sideAcceleration:1,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,slipInfo:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=e.maxSuspensionTravel,this.customSlidingRotationalSpeed=e.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=e.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=e.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=e.chassisConnectionPointWorld.clone(),this.directionLocal=e.directionLocal.clone(),this.directionWorld=e.directionWorld.clone(),this.axleLocal=e.axleLocal.clone(),this.axleWorld=e.axleWorld.clone(),this.suspensionRestLength=e.suspensionRestLength,this.suspensionMaxLength=e.suspensionMaxLength,this.radius=e.radius,this.suspensionStiffness=e.suspensionStiffness,this.dampingCompression=e.dampingCompression,this.dampingRelaxation=e.dampingRelaxation,this.frictionSlip=e.frictionSlip,this.forwardAcceleration=e.forwardAcceleration,this.sideAcceleration=e.sideAcceleration,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=e.rollInfluence,this.maxSuspensionForce=e.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=e.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.slipInfo=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new zr,this.worldTransform=new we,this.isInContact=!1}updateWheel(e){const t=this.raycastResult;if(this.isInContact){const i=t.hitNormalWorld.dot(t.directionWorld);t.hitPointWorld.vsub(e.position,bd),e.getVelocityAtWorldPoint(bd,_d);const s=t.hitNormalWorld.dot(_d);if(i>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=1/.1;else{const r=-1/i;this.suspensionRelativeVelocity=s*r,this.clippedInvContactDotSuspension=r}}else t.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.hitNormalWorld),this.clippedInvContactDotSuspension=1}}const _d=new C,bd=new C;class cA{constructor(e){this.chassisBody=e.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=typeof e.indexRightAxis<"u"?e.indexRightAxis:2,this.indexForwardAxis=typeof e.indexForwardAxis<"u"?e.indexForwardAxis:0,this.indexUpAxis=typeof e.indexUpAxis<"u"?e.indexUpAxis:1,this.constraints=[],this.preStepCallback=()=>{},this.currentVehicleSpeedKmHour=0,this.numWheelsOnGround=0}addWheel(e){e===void 0&&(e={});const t=new LP(e),i=this.wheelInfos.length;return this.wheelInfos.push(t),i}setSteeringValue(e,t){const i=this.wheelInfos[t];i.steering=e}applyEngineForce(e,t){this.wheelInfos[t].engineForce=e}setBrake(e,t){this.wheelInfos[t].brake=e}addToWorld(e){e.addBody(this.chassisBody);const t=this;this.preStepCallback=()=>{t.updateVehicle(e.dt)},e.addEventListener("preStep",this.preStepCallback),this.world=e}getVehicleAxisWorld(e,t){t.set(e===0?1:0,e===1?1:0,e===2?1:0),this.chassisBody.vectorToWorldFrame(t,t)}updateVehicle(e){const t=this.wheelInfos,i=t.length,s=this.chassisBody;for(let h=0;h<i;h++)this.updateWheelTransform(h);this.currentVehicleSpeedKmHour=3.6*s.velocity.length();const r=new C;this.getVehicleAxisWorld(this.indexForwardAxis,r),r.dot(s.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(let h=0;h<i;h++)this.castRay(t[h]);this.updateSuspension(e);const o=new C,a=new C;for(let h=0;h<i;h++){const d=t[h];let p=d.suspensionForce;p>d.maxSuspensionForce&&(p=d.maxSuspensionForce),d.raycastResult.hitNormalWorld.scale(p*e,o),d.raycastResult.hitPointWorld.vsub(s.position,a),s.applyImpulse(o,a)}this.updateFriction(e);const l=new C,c=new C,u=new C;for(let h=0;h<i;h++){const d=t[h];s.getVelocityAtWorldPoint(d.chassisConnectionPointWorld,u);let p=1;switch(this.indexUpAxis){case 1:p=-1;break}if(d.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,c);const f=c.dot(d.raycastResult.hitNormalWorld);d.raycastResult.hitNormalWorld.scale(f,l),c.vsub(l,c);const m=c.dot(u);d.deltaRotation=p*m*e/d.radius}(d.sliding||!d.isInContact)&&d.engineForce!==0&&d.useCustomSlidingRotationalSpeed&&(d.deltaRotation=(d.engineForce>0?1:-1)*d.customSlidingRotationalSpeed*e),Math.abs(d.brake)>Math.abs(d.engineForce)&&(d.deltaRotation=0),d.rotation+=d.deltaRotation,d.deltaRotation*=.99}}updateSuspension(e){const i=this.chassisBody.mass,s=this.wheelInfos,r=s.length;for(let o=0;o<r;o++){const a=s[o];if(a.isInContact){let l;const c=a.suspensionRestLength,u=a.suspensionLength,h=c-u;l=a.suspensionStiffness*h*a.clippedInvContactDotSuspension;const d=a.suspensionRelativeVelocity;let p;d<0?p=a.dampingCompression:p=a.dampingRelaxation,l-=p*d,a.suspensionForce=l*i,a.suspensionForce<0&&(a.suspensionForce=0)}else a.suspensionForce=0}}removeFromWorld(e){this.constraints,e.removeBody(this.chassisBody),e.removeEventListener("preStep",this.preStepCallback),this.world=null}castRay(e){const t=NP,i=VP;this.updateWheelTransformWorld(e);const s=this.chassisBody;let r=-1;const o=e.suspensionRestLength+e.radius;e.directionWorld.scale(o,t);const a=e.chassisConnectionPointWorld;a.vadd(t,i);const l=e.raycastResult;l.reset();const c=s.collisionResponse;s.collisionResponse=!1,this.world.rayTest(a,i,l),s.collisionResponse=c;const u=l.body;if(e.raycastResult.groundObject=0,u){r=l.distance,e.raycastResult.hitNormalWorld=l.hitNormalWorld,e.isInContact=!0;const h=l.distance;e.suspensionLength=h-e.radius;const d=e.suspensionRestLength-e.maxSuspensionTravel,p=e.suspensionRestLength+e.maxSuspensionTravel;e.suspensionLength<d&&(e.suspensionLength=d),e.suspensionLength>p&&(e.suspensionLength=p,e.raycastResult.reset());const f=e.raycastResult.hitNormalWorld.dot(e.directionWorld),m=new C;s.getVelocityAtWorldPoint(e.raycastResult.hitPointWorld,m);const v=e.raycastResult.hitNormalWorld.dot(m);if(f>=-.1)e.suspensionRelativeVelocity=0,e.clippedInvContactDotSuspension=1/.1;else{const b=-1/f;e.suspensionRelativeVelocity=v*b,e.clippedInvContactDotSuspension=b}}else e.suspensionLength=e.suspensionRestLength+0*e.maxSuspensionTravel,e.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.raycastResult.hitNormalWorld),e.clippedInvContactDotSuspension=1;return r}updateWheelTransformWorld(e){e.isInContact=!1;const t=this.chassisBody;t.pointToWorldFrame(e.chassisConnectionPointLocal,e.chassisConnectionPointWorld),t.vectorToWorldFrame(e.directionLocal,e.directionWorld),t.vectorToWorldFrame(e.axleLocal,e.axleWorld)}updateWheelTransform(e){const t=zP,i=DP,s=FP,r=this.wheelInfos[e];this.updateWheelTransformWorld(r),r.directionLocal.scale(-1,t),i.copy(r.axleLocal),t.cross(i,s),s.normalize(),i.normalize();const o=r.steering,a=new Ue;a.setFromAxisAngle(t,o);const l=new Ue;l.setFromAxisAngle(i,r.rotation);const c=r.worldTransform.quaternion;this.chassisBody.quaternion.mult(a,c),c.mult(l,c),c.normalize();const u=r.worldTransform.position;u.copy(r.directionWorld),u.scale(r.suspensionLength,u),u.vadd(r.chassisConnectionPointWorld,u)}getWheelTransformWorld(e){return this.wheelInfos[e].worldTransform}updateFriction(e){const t=jP,i=this.wheelInfos,s=i.length,r=this.chassisBody,o=GP,a=HP;this.numWheelsOnGround=0;for(let u=0;u<s;u++){const h=i[u];h.raycastResult.body&&this.numWheelsOnGround++,h.sideImpulse=0,h.forwardImpulse=0,o[u]||(o[u]=new C),a[u]||(a[u]=new C)}for(let u=0;u<s;u++){const h=i[u],d=h.raycastResult.body;if(d){const p=a[u];this.getWheelTransformWorld(u).vectorToWorldFrame(UP[this.indexRightAxis],p);const m=h.raycastResult.hitNormalWorld,v=p.dot(m);m.scale(v,t),p.vsub(t,p),p.normalize(),m.cross(p,o[u]),o[u].normalize(),h.sideImpulse=i2(r,h.raycastResult.hitPointWorld,d,h.raycastResult.hitPointWorld,p),h.sideImpulse*=qP}}const l=1,c=.5;this.sliding=!1;for(let u=0;u<s;u++){const h=i[u],d=h.raycastResult.body;let p=0;if(h.slipInfo=1,d){const m=h.brake?h.brake:0;p=YP(r,d,h.raycastResult.hitPointWorld,o[u],m),p+=h.engineForce*e;const v=m/p;h.slipInfo*=v}if(h.forwardImpulse=0,h.skidInfo=1,d){h.skidInfo=1;const f=h.suspensionForce*e*h.frictionSlip,v=f*f;h.forwardImpulse=p;const b=h.forwardImpulse*c/h.forwardAcceleration,g=h.sideImpulse*l/h.sideAcceleration,E=b*b+g*g;if(h.sliding=!1,E>v){this.sliding=!0,h.sliding=!0;const P=f/Math.sqrt(E);h.skidInfo*=P}}}if(this.sliding)for(let u=0;u<s;u++){const h=i[u];h.sideImpulse!==0&&h.skidInfo<1&&(h.forwardImpulse*=h.skidInfo,h.sideImpulse*=h.skidInfo)}for(let u=0;u<s;u++){const h=i[u],d=new C;if(h.raycastResult.hitPointWorld.vsub(r.position,d),h.forwardImpulse!==0){const p=new C;o[u].scale(h.forwardImpulse,p),r.applyImpulse(p,d)}if(h.sideImpulse!==0){const p=h.raycastResult.body,f=new C;h.raycastResult.hitPointWorld.vsub(p.position,f);const m=new C;a[u].scale(h.sideImpulse,m),r.vectorToLocalFrame(d,d),d["xyz"[this.indexUpAxis]]*=h.rollInfluence,r.vectorToWorldFrame(d,d),r.applyImpulse(m,d),m.scale(-1,m),p.applyImpulse(m,f)}}}}new C;new C;new C;const zP=new C,DP=new C,FP=new C;new Ye;new C;const NP=new C,VP=new C,UP=[new C(1,0,0),new C(0,1,0),new C(0,0,1)],jP=new C,HP=[],GP=[],qP=1,WP=new C,$P=new C,KP=new C;function YP(n,e,t,i,s){let r=0;const o=t,a=WP,l=$P,c=KP;n.getVelocityAtWorldPoint(o,a),e.getVelocityAtWorldPoint(o,l),a.vsub(l,c);const u=i.dot(c),h=wd(n,t,i),d=wd(e,t,i),f=1/(h+d);return r=-u*f,s<r&&(r=s),r<-s&&(r=-s),r}const XP=new C,ZP=new C,QP=new C,JP=new C;function wd(n,e,t){const i=XP,s=ZP,r=QP,o=JP;return e.vsub(n.position,i),i.cross(t,s),n.invInertiaWorld.vmult(s,o),o.cross(i,r),n.invMass+t.dot(r)}const e2=new C,t2=new C,n2=new C;function i2(n,e,t,i,s){if(s.lengthSquared()>1.1)return 0;const o=e2,a=t2,l=n2;n.getVelocityAtWorldPoint(e,o),t.getVelocityAtWorldPoint(i,a),o.vsub(a,l);const c=s.dot(l),u=.2,h=1/(n.invMass+t.invMass);return-u*c*h}new C;new C;new C;new C;new C;new C;new C;new C;new C;class uA extends vi{constructor(e,t,i,s){if(e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=1),s===void 0&&(s=8),e<0)throw new Error("The cylinder radiusTop cannot be negative.");if(t<0)throw new Error("The cylinder radiusBottom cannot be negative.");const r=s,o=[],a=[],l=[],c=[],u=[],h=Math.cos,d=Math.sin;o.push(new C(-t*d(0),-i*.5,t*h(0))),c.push(0),o.push(new C(-e*d(0),i*.5,e*h(0))),u.push(1);for(let f=0;f<r;f++){const m=2*Math.PI/r*(f+1),v=2*Math.PI/r*(f+.5);f<r-1?(o.push(new C(-t*d(m),-i*.5,t*h(m))),c.push(2*f+2),o.push(new C(-e*d(m),i*.5,e*h(m))),u.push(2*f+3),l.push([2*f,2*f+1,2*f+3,2*f+2])):l.push([2*f,2*f+1,1,0]),(r%2===1||f<r/2)&&a.push(new C(-d(v),0,h(v)))}l.push(c),a.push(new C(0,1,0));const p=[];for(let f=0;f<u.length;f++)p.push(u[u.length-f-1]);l.push(p),super({vertices:o,faces:l,axes:a}),this.type=te.types.CYLINDER,this.radiusTop=e,this.radiusBottom=t,this.height=i,this.numSegments=s}}new C;class hA extends te{constructor(e,t){t===void 0&&(t={}),t=ru.defaults(t,{maxValue:null,minValue:null,elementSize:1}),super({type:te.types.HEIGHTFIELD}),this.data=e,this.maxValue=t.maxValue,this.minValue=t.minValue,this.elementSize=t.elementSize,t.minValue===null&&this.updateMinValue(),t.maxValue===null&&this.updateMaxValue(),this.cacheEnabled=!0,this.pillarConvex=new vi,this.pillarOffset=new C,this.updateBoundingSphereRadius(),this._cachedPillars={}}update(){this._cachedPillars={}}updateMinValue(){const e=this.data;let t=e[0][0];for(let i=0;i!==e.length;i++)for(let s=0;s!==e[i].length;s++){const r=e[i][s];r<t&&(t=r)}this.minValue=t}updateMaxValue(){const e=this.data;let t=e[0][0];for(let i=0;i!==e.length;i++)for(let s=0;s!==e[i].length;s++){const r=e[i][s];r>t&&(t=r)}this.maxValue=t}setHeightValueAtIndex(e,t,i){const s=this.data;s[e][t]=i,this.clearCachedConvexTrianglePillar(e,t,!1),e>0&&(this.clearCachedConvexTrianglePillar(e-1,t,!0),this.clearCachedConvexTrianglePillar(e-1,t,!1)),t>0&&(this.clearCachedConvexTrianglePillar(e,t-1,!0),this.clearCachedConvexTrianglePillar(e,t-1,!1)),t>0&&e>0&&this.clearCachedConvexTrianglePillar(e-1,t-1,!0)}getRectMinMax(e,t,i,s,r){r===void 0&&(r=[]);const o=this.data;let a=this.minValue;for(let l=e;l<=i;l++)for(let c=t;c<=s;c++){const u=o[l][c];u>a&&(a=u)}r[0]=this.minValue,r[1]=a}getIndexOfPosition(e,t,i,s){const r=this.elementSize,o=this.data;let a=Math.floor(e/r),l=Math.floor(t/r);return i[0]=a,i[1]=l,s&&(a<0&&(a=0),l<0&&(l=0),a>=o.length-1&&(a=o.length-1),l>=o[0].length-1&&(l=o[0].length-1)),!(a<0||l<0||a>=o.length-1||l>=o[0].length-1)}getTriangleAt(e,t,i,s,r,o){const a=yd;this.getIndexOfPosition(e,t,a,i);let l=a[0],c=a[1];const u=this.data;i&&(l=Math.min(u.length-2,Math.max(0,l)),c=Math.min(u[0].length-2,Math.max(0,c)));const h=this.elementSize,d=(e/h-l)**2+(t/h-c)**2,p=(e/h-(l+1))**2+(t/h-(c+1))**2,f=d>p;return this.getTriangle(l,c,f,s,r,o),f}getNormalAt(e,t,i,s){const r=a2,o=l2,a=c2,l=u2,c=h2;this.getTriangleAt(e,t,i,r,o,a),o.vsub(r,l),a.vsub(r,c),l.cross(c,s),s.normalize()}getAabbAtIndex(e,t,i){let{lowerBound:s,upperBound:r}=i;const o=this.data,a=this.elementSize;s.set(e*a,t*a,o[e][t]),r.set((e+1)*a,(t+1)*a,o[e+1][t+1])}getHeightAt(e,t,i){const s=this.data,r=s2,o=r2,a=o2,l=yd;this.getIndexOfPosition(e,t,l,i);let c=l[0],u=l[1];i&&(c=Math.min(s.length-2,Math.max(0,c)),u=Math.min(s[0].length-2,Math.max(0,u)));const h=this.getTriangleAt(e,t,i,r,o,a);d2(e,t,r.x,r.y,o.x,o.y,a.x,a.y,xd);const d=xd;return h?s[c+1][u+1]*d.x+s[c][u+1]*d.y+s[c+1][u]*d.z:s[c][u]*d.x+s[c+1][u]*d.y+s[c][u+1]*d.z}getCacheConvexTrianglePillarKey(e,t,i){return`${e}_${t}_${i?1:0}`}getCachedConvexTrianglePillar(e,t,i){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,i)]}setCachedConvexTrianglePillar(e,t,i,s,r){this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,i)]={convex:s,offset:r}}clearCachedConvexTrianglePillar(e,t,i){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,i)]}getTriangle(e,t,i,s,r,o){const a=this.data,l=this.elementSize;i?(s.set((e+1)*l,(t+1)*l,a[e+1][t+1]),r.set(e*l,(t+1)*l,a[e][t+1]),o.set((e+1)*l,t*l,a[e+1][t])):(s.set(e*l,t*l,a[e][t]),r.set((e+1)*l,t*l,a[e+1][t]),o.set(e*l,(t+1)*l,a[e][t+1]))}getConvexTrianglePillar(e,t,i){let s=this.pillarConvex,r=this.pillarOffset;if(this.cacheEnabled){const h=this.getCachedConvexTrianglePillar(e,t,i);if(h){this.pillarConvex=h.convex,this.pillarOffset=h.offset;return}s=new vi,r=new C,this.pillarConvex=s,this.pillarOffset=r}const o=this.data,a=this.elementSize,l=s.faces;s.vertices.length=6;for(let h=0;h<6;h++)s.vertices[h]||(s.vertices[h]=new C);l.length=5;for(let h=0;h<5;h++)l[h]||(l[h]=[]);const c=s.vertices,u=(Math.min(o[e][t],o[e+1][t],o[e][t+1],o[e+1][t+1])-this.minValue)/2+this.minValue;i?(r.set((e+.75)*a,(t+.75)*a,u),c[0].set(.25*a,.25*a,o[e+1][t+1]-u),c[1].set(-.75*a,.25*a,o[e][t+1]-u),c[2].set(.25*a,-.75*a,o[e+1][t]-u),c[3].set(.25*a,.25*a,-Math.abs(u)-1),c[4].set(-.75*a,.25*a,-Math.abs(u)-1),c[5].set(.25*a,-.75*a,-Math.abs(u)-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=2,l[2][1]=5,l[2][2]=3,l[2][3]=0,l[3][0]=3,l[3][1]=4,l[3][2]=1,l[3][3]=0,l[4][0]=1,l[4][1]=4,l[4][2]=5,l[4][3]=2):(r.set((e+.25)*a,(t+.25)*a,u),c[0].set(-.25*a,-.25*a,o[e][t]-u),c[1].set(.75*a,-.25*a,o[e+1][t]-u),c[2].set(-.25*a,.75*a,o[e][t+1]-u),c[3].set(-.25*a,-.25*a,-Math.abs(u)-1),c[4].set(.75*a,-.25*a,-Math.abs(u)-1),c[5].set(-.25*a,.75*a,-Math.abs(u)-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=0,l[2][1]=2,l[2][2]=5,l[2][3]=3,l[3][0]=1,l[3][1]=0,l[3][2]=3,l[3][3]=4,l[4][0]=4,l[4][1]=5,l[4][2]=2,l[4][3]=1),s.computeNormals(),s.computeEdges(),s.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(e,t,i,s,r)}calculateLocalInertia(e,t){return t===void 0&&(t=new C),t.set(0,0,0),t}volume(){return Number.MAX_VALUE}calculateWorldAABB(e,t,i,s){i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),s.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)}updateBoundingSphereRadius(){const e=this.data,t=this.elementSize;this.boundingSphereRadius=new C(e.length*t,e[0].length*t,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).length()}setHeightsFromImage(e,t){const{x:i,z:s,y:r}=t,o=document.createElement("canvas");o.width=e.width,o.height=e.height;const a=o.getContext("2d");a.drawImage(e,0,0);const l=a.getImageData(0,0,e.width,e.height),c=this.data;c.length=0,this.elementSize=Math.abs(i)/l.width;for(let u=0;u<l.height;u++){const h=[];for(let d=0;d<l.width;d++){const p=l.data[(u*l.height+d)*4],f=l.data[(u*l.height+d)*4+1],m=l.data[(u*l.height+d)*4+2],v=(p+f+m)/4/255*s;i<0?h.push(v):h.unshift(v)}r<0?c.unshift(h):c.push(h)}this.updateMaxValue(),this.updateMinValue(),this.update()}}const yd=[],xd=new C,s2=new C,r2=new C,o2=new C,a2=new C,l2=new C,c2=new C,u2=new C,h2=new C;function d2(n,e,t,i,s,r,o,a,l){l.x=((r-a)*(n-o)+(o-s)*(e-a))/((r-a)*(t-o)+(o-s)*(i-a)),l.y=((a-i)*(n-o)+(t-o)*(e-a))/((r-a)*(t-o)+(o-s)*(i-a)),l.z=1-l.x-l.y}new C;new jt;new C;new jt;new C;new C;new C;new C;new C;new C;new C;new jt;new C;new we;new jt;class p2{constructor(){this.equations=[]}solve(e,t){return 0}addEquation(e){e.enabled&&!e.bi.isTrigger&&!e.bj.isTrigger&&this.equations.push(e)}removeEquation(e){const t=this.equations,i=t.indexOf(e);i!==-1&&t.splice(i,1)}removeAllEquations(){this.equations.length=0}}class f2 extends p2{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(e,t){let i=0;const s=this.iterations,r=this.tolerance*this.tolerance,o=this.equations,a=o.length,l=t.bodies,c=l.length,u=e;let h,d,p,f,m,v;if(a!==0)for(let P=0;P!==c;P++)l[P].updateSolveMassProperties();const b=v2,g=g2,E=m2;b.length=a,g.length=a,E.length=a;for(let P=0;P!==a;P++){const I=o[P];E[P]=0,g[P]=I.computeB(u),b[P]=1/I.computeC()}if(a!==0){for(let S=0;S!==c;S++){const R=l[S],_=R.vlambda,y=R.wlambda;_.set(0,0,0),y.set(0,0,0)}for(i=0;i!==s;i++){f=0;for(let S=0;S!==a;S++){const R=o[S];h=g[S],d=b[S],v=E[S],m=R.computeGWlambda(),p=d*(h-m-R.eps*v),v+p<R.minForce?p=R.minForce-v:v+p>R.maxForce&&(p=R.maxForce-v),E[S]+=p,f+=p>0?p:-p,R.addToWlambda(p)}if(f*f<r)break}for(let S=0;S!==c;S++){const R=l[S],_=R.velocity,y=R.angularVelocity;R.vlambda.vmul(R.linearFactor,R.vlambda),_.vadd(R.vlambda,_),R.wlambda.vmul(R.angularFactor,R.wlambda),y.vadd(R.wlambda,y)}let P=o.length;const I=1/u;for(;P--;)o[P].multiplier=E[P]*I}return i}}const m2=[],v2=[],g2=[];ie.STATIC;class _2{constructor(){this.objects=[],this.type=Object}release(){const e=arguments.length;for(let t=0;t!==e;t++)this.objects.push(t<0||arguments.length<=t?void 0:arguments[t]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(e){const t=this.objects;for(;t.length>e;)t.pop();for(;t.length<e;)t.push(this.constructObject());return this}}class b2 extends _2{constructor(){super(...arguments),this.type=C}constructObject(){return new C}}const ze={sphereSphere:te.types.SPHERE,spherePlane:te.types.SPHERE|te.types.PLANE,boxBox:te.types.BOX|te.types.BOX,sphereBox:te.types.SPHERE|te.types.BOX,planeBox:te.types.PLANE|te.types.BOX,convexConvex:te.types.CONVEXPOLYHEDRON,sphereConvex:te.types.SPHERE|te.types.CONVEXPOLYHEDRON,planeConvex:te.types.PLANE|te.types.CONVEXPOLYHEDRON,boxConvex:te.types.BOX|te.types.CONVEXPOLYHEDRON,sphereHeightfield:te.types.SPHERE|te.types.HEIGHTFIELD,boxHeightfield:te.types.BOX|te.types.HEIGHTFIELD,convexHeightfield:te.types.CONVEXPOLYHEDRON|te.types.HEIGHTFIELD,sphereParticle:te.types.PARTICLE|te.types.SPHERE,planeParticle:te.types.PLANE|te.types.PARTICLE,boxParticle:te.types.BOX|te.types.PARTICLE,convexParticle:te.types.PARTICLE|te.types.CONVEXPOLYHEDRON,cylinderCylinder:te.types.CYLINDER,sphereCylinder:te.types.SPHERE|te.types.CYLINDER,planeCylinder:te.types.PLANE|te.types.CYLINDER,boxCylinder:te.types.BOX|te.types.CYLINDER,convexCylinder:te.types.CONVEXPOLYHEDRON|te.types.CYLINDER,heightfieldCylinder:te.types.HEIGHTFIELD|te.types.CYLINDER,particleCylinder:te.types.PARTICLE|te.types.CYLINDER,sphereTrimesh:te.types.SPHERE|te.types.TRIMESH,planeTrimesh:te.types.PLANE|te.types.TRIMESH};class w2{get[ze.sphereSphere](){return this.sphereSphere}get[ze.spherePlane](){return this.spherePlane}get[ze.boxBox](){return this.boxBox}get[ze.sphereBox](){return this.sphereBox}get[ze.planeBox](){return this.planeBox}get[ze.convexConvex](){return this.convexConvex}get[ze.sphereConvex](){return this.sphereConvex}get[ze.planeConvex](){return this.planeConvex}get[ze.boxConvex](){return this.boxConvex}get[ze.sphereHeightfield](){return this.sphereHeightfield}get[ze.boxHeightfield](){return this.boxHeightfield}get[ze.convexHeightfield](){return this.convexHeightfield}get[ze.sphereParticle](){return this.sphereParticle}get[ze.planeParticle](){return this.planeParticle}get[ze.boxParticle](){return this.boxParticle}get[ze.convexParticle](){return this.convexParticle}get[ze.cylinderCylinder](){return this.convexConvex}get[ze.sphereCylinder](){return this.sphereConvex}get[ze.planeCylinder](){return this.planeConvex}get[ze.boxCylinder](){return this.boxConvex}get[ze.convexCylinder](){return this.convexConvex}get[ze.heightfieldCylinder](){return this.heightfieldCylinder}get[ze.particleCylinder](){return this.particleCylinder}get[ze.sphereTrimesh](){return this.sphereTrimesh}get[ze.planeTrimesh](){return this.planeTrimesh}constructor(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new b2,this.world=e,this.currentContactMaterial=e.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(e,t,i,s,r,o){let a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=e,a.bj=t):a=new EP(e,t),a.enabled=e.collisionResponse&&t.collisionResponse&&i.collisionResponse&&s.collisionResponse;const l=this.currentContactMaterial;a.restitution=l.restitution,a.setSpookParams(l.contactEquationStiffness,l.contactEquationRelaxation,this.world.dt);const c=i.material||e.material,u=s.material||t.material;return c&&u&&c.restitution>=0&&u.restitution>=0&&(a.restitution=c.restitution*u.restitution),a.si=r||i,a.sj=o||s,a}createFrictionEquationsFromContact(e,t){const i=e.bi,s=e.bj,r=e.si,o=e.sj,a=this.world,l=this.currentContactMaterial;let c=l.friction;const u=r.material||i.material,h=o.material||s.material;if(u&&h&&u.friction>=0&&h.friction>=0&&(c=u.friction*h.friction),c>0){const d=c*(a.frictionGravity||a.gravity).length();let p=i.invMass+s.invMass;p>0&&(p=1/p);const f=this.frictionEquationPool,m=f.length?f.pop():new gd(i,s,d*p),v=f.length?f.pop():new gd(i,s,d*p);return m.bi=v.bi=i,m.bj=v.bj=s,m.minForce=v.minForce=-d*p,m.maxForce=v.maxForce=d*p,m.ri.copy(e.ri),m.rj.copy(e.rj),v.ri.copy(e.ri),v.rj.copy(e.rj),e.ni.tangents(m.t,v.t),m.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,a.dt),v.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,a.dt),m.enabled=v.enabled=e.enabled,t.push(m,v),!0}return!1}createFrictionFromAverage(e){let t=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(t,this.frictionResult)||e===1)return;const i=this.frictionResult[this.frictionResult.length-2],s=this.frictionResult[this.frictionResult.length-1];Ri.setZero(),os.setZero(),as.setZero();const r=t.bi;t.bj;for(let a=0;a!==e;a++)t=this.result[this.result.length-1-a],t.bi!==r?(Ri.vadd(t.ni,Ri),os.vadd(t.ri,os),as.vadd(t.rj,as)):(Ri.vsub(t.ni,Ri),os.vadd(t.rj,os),as.vadd(t.ri,as));const o=1/e;os.scale(o,i.ri),as.scale(o,i.rj),s.ri.copy(i.ri),s.rj.copy(i.rj),Ri.normalize(),Ri.tangents(i.t,s.t)}getContacts(e,t,i,s,r,o,a){this.contactPointPool=r,this.frictionEquationPool=a,this.result=s,this.frictionResult=o;const l=C2,c=E2,u=y2,h=x2;for(let d=0,p=e.length;d!==p;d++){const f=e[d],m=t[d];let v=null;f.material&&m.material&&(v=i.getContactMaterial(f.material,m.material)||null);const b=f.type&ie.KINEMATIC&&m.type&ie.STATIC||f.type&ie.STATIC&&m.type&ie.KINEMATIC||f.type&ie.KINEMATIC&&m.type&ie.KINEMATIC;for(let g=0;g<f.shapes.length;g++){f.quaternion.mult(f.shapeOrientations[g],l),f.quaternion.vmult(f.shapeOffsets[g],u),u.vadd(f.position,u);const E=f.shapes[g];for(let P=0;P<m.shapes.length;P++){m.quaternion.mult(m.shapeOrientations[P],c),m.quaternion.vmult(m.shapeOffsets[P],h),h.vadd(m.position,h);const I=m.shapes[P];if(!(E.collisionFilterMask&I.collisionFilterGroup&&I.collisionFilterMask&E.collisionFilterGroup)||u.distanceTo(h)>E.boundingSphereRadius+I.boundingSphereRadius)continue;let S=null;E.material&&I.material&&(S=i.getContactMaterial(E.material,I.material)||null),this.currentContactMaterial=S||v||i.defaultContactMaterial;const R=E.type|I.type,_=this[R];if(_){let y=!1;E.type<I.type?y=_.call(this,E,I,u,h,l,c,f,m,E,I,b):y=_.call(this,I,E,h,u,c,l,m,f,E,I,b),y&&b&&(i.shapeOverlapKeeper.set(E.id,I.id),i.bodyOverlapKeeper.set(f.id,m.id))}}}}}sphereSphere(e,t,i,s,r,o,a,l,c,u,h){if(h)return i.distanceSquared(s)<(e.radius+t.radius)**2;const d=this.createContactEquation(a,l,e,t,c,u);s.vsub(i,d.ni),d.ni.normalize(),d.ri.copy(d.ni),d.rj.copy(d.ni),d.ri.scale(e.radius,d.ri),d.rj.scale(-t.radius,d.rj),d.ri.vadd(i,d.ri),d.ri.vsub(a.position,d.ri),d.rj.vadd(s,d.rj),d.rj.vsub(l.position,d.rj),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}spherePlane(e,t,i,s,r,o,a,l,c,u,h){const d=this.createContactEquation(a,l,e,t,c,u);if(d.ni.set(0,0,1),o.vmult(d.ni,d.ni),d.ni.negate(d.ni),d.ni.normalize(),d.ni.scale(e.radius,d.ri),i.vsub(s,co),d.ni.scale(d.ni.dot(co),Cd),co.vsub(Cd,d.rj),-co.dot(d.ni)<=e.radius){if(h)return!0;const p=d.ri,f=d.rj;p.vadd(i,p),p.vsub(a.position,p),f.vadd(s,f),f.vsub(l.position,f),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}}boxBox(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t.convexPolyhedronRepresentation,i,s,r,o,a,l,e,t,h)}sphereBox(e,t,i,s,r,o,a,l,c,u,h){const d=this.v3pool,p=X2;i.vsub(s,uo),t.getSideNormals(p,o);const f=e.radius;let m=!1;const v=Q2,b=J2,g=eT;let E=null,P=0,I=0,S=0,R=null;for(let z=0,V=p.length;z!==V&&m===!1;z++){const W=$2;W.copy(p[z]);const Z=W.length();W.normalize();const ne=uo.dot(W);if(ne<Z+f&&ne>0){const se=K2,Q=Y2;se.copy(p[(z+1)%3]),Q.copy(p[(z+2)%3]);const ue=se.length(),pe=Q.length();se.normalize(),Q.normalize();const ge=uo.dot(se),Ee=uo.dot(Q);if(ge<ue&&ge>-ue&&Ee<pe&&Ee>-pe){const q=Math.abs(ne-Z-f);if((R===null||q<R)&&(R=q,I=ge,S=Ee,E=Z,v.copy(W),b.copy(se),g.copy(Q),P++,h))return!0}}}if(P){m=!0;const z=this.createContactEquation(a,l,e,t,c,u);v.scale(-f,z.ri),z.ni.copy(v),z.ni.negate(z.ni),v.scale(E,v),b.scale(I,b),v.vadd(b,v),g.scale(S,g),v.vadd(g,z.rj),z.ri.vadd(i,z.ri),z.ri.vsub(a.position,z.ri),z.rj.vadd(s,z.rj),z.rj.vsub(l.position,z.rj),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult)}let _=d.get();const y=Z2;for(let z=0;z!==2&&!m;z++)for(let V=0;V!==2&&!m;V++)for(let W=0;W!==2&&!m;W++)if(_.set(0,0,0),z?_.vadd(p[0],_):_.vsub(p[0],_),V?_.vadd(p[1],_):_.vsub(p[1],_),W?_.vadd(p[2],_):_.vsub(p[2],_),s.vadd(_,y),y.vsub(i,y),y.lengthSquared()<f*f){if(h)return!0;m=!0;const Z=this.createContactEquation(a,l,e,t,c,u);Z.ri.copy(y),Z.ri.normalize(),Z.ni.copy(Z.ri),Z.ri.scale(f,Z.ri),Z.rj.copy(_),Z.ri.vadd(i,Z.ri),Z.ri.vsub(a.position,Z.ri),Z.rj.vadd(s,Z.rj),Z.rj.vsub(l.position,Z.rj),this.result.push(Z),this.createFrictionEquationsFromContact(Z,this.frictionResult)}d.release(_),_=null;const w=d.get(),k=d.get(),B=d.get(),L=d.get(),N=d.get(),F=p.length;for(let z=0;z!==F&&!m;z++)for(let V=0;V!==F&&!m;V++)if(z%3!==V%3){p[V].cross(p[z],w),w.normalize(),p[z].vadd(p[V],k),B.copy(i),B.vsub(k,B),B.vsub(s,B);const W=B.dot(w);w.scale(W,L);let Z=0;for(;Z===z%3||Z===V%3;)Z++;N.copy(i),N.vsub(L,N),N.vsub(k,N),N.vsub(s,N);const ne=Math.abs(W),se=N.length();if(ne<p[Z].length()&&se<f){if(h)return!0;m=!0;const Q=this.createContactEquation(a,l,e,t,c,u);k.vadd(L,Q.rj),Q.rj.copy(Q.rj),N.negate(Q.ni),Q.ni.normalize(),Q.ri.copy(Q.rj),Q.ri.vadd(s,Q.ri),Q.ri.vsub(i,Q.ri),Q.ri.normalize(),Q.ri.scale(f,Q.ri),Q.ri.vadd(i,Q.ri),Q.ri.vsub(a.position,Q.ri),Q.rj.vadd(s,Q.rj),Q.rj.vsub(l.position,Q.rj),this.result.push(Q),this.createFrictionEquationsFromContact(Q,this.frictionResult)}}d.release(w,k,B,L,N)}planeBox(e,t,i,s,r,o,a,l,c,u,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,t.convexPolyhedronRepresentation.id=t.id,this.planeConvex(e,t.convexPolyhedronRepresentation,i,s,r,o,a,l,e,t,h)}convexConvex(e,t,i,s,r,o,a,l,c,u,h,d,p){const f=mT;if(!(i.distanceTo(s)>e.boundingSphereRadius+t.boundingSphereRadius)&&e.findSeparatingAxis(t,i,r,s,o,f,d,p)){const m=[],v=vT;e.clipAgainstHull(i,r,t,s,o,f,-100,100,m);let b=0;for(let g=0;g!==m.length;g++){if(h)return!0;const E=this.createContactEquation(a,l,e,t,c,u),P=E.ri,I=E.rj;f.negate(E.ni),m[g].normal.negate(v),v.scale(m[g].depth,v),m[g].point.vadd(v,P),I.copy(m[g].point),P.vsub(i,P),I.vsub(s,I),P.vadd(i,P),P.vsub(a.position,P),I.vadd(s,I),I.vsub(l.position,I),this.result.push(E),b++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(E,this.frictionResult)}this.enableFrictionReduction&&b&&this.createFrictionFromAverage(b)}}sphereConvex(e,t,i,s,r,o,a,l,c,u,h){const d=this.v3pool;i.vsub(s,tT);const p=t.faceNormals,f=t.faces,m=t.vertices,v=e.radius;let b=!1;for(let g=0;g!==m.length;g++){const E=m[g],P=rT;o.vmult(E,P),s.vadd(P,P);const I=sT;if(P.vsub(i,I),I.lengthSquared()<v*v){if(h)return!0;b=!0;const S=this.createContactEquation(a,l,e,t,c,u);S.ri.copy(I),S.ri.normalize(),S.ni.copy(S.ri),S.ri.scale(v,S.ri),P.vsub(s,S.rj),S.ri.vadd(i,S.ri),S.ri.vsub(a.position,S.ri),S.rj.vadd(s,S.rj),S.rj.vsub(l.position,S.rj),this.result.push(S),this.createFrictionEquationsFromContact(S,this.frictionResult);return}}for(let g=0,E=f.length;g!==E&&b===!1;g++){const P=p[g],I=f[g],S=oT;o.vmult(P,S);const R=aT;o.vmult(m[I[0]],R),R.vadd(s,R);const _=lT;S.scale(-v,_),i.vadd(_,_);const y=cT;_.vsub(R,y);const w=y.dot(S),k=uT;if(i.vsub(R,k),w<0&&k.dot(S)>0){const B=[];for(let L=0,N=I.length;L!==N;L++){const F=d.get();o.vmult(m[I[L]],F),s.vadd(F,F),B.push(F)}if(W2(B,S,i)){if(h)return!0;b=!0;const L=this.createContactEquation(a,l,e,t,c,u);S.scale(-v,L.ri),S.negate(L.ni);const N=d.get();S.scale(-w,N);const F=d.get();S.scale(-v,F),i.vsub(s,L.rj),L.rj.vadd(F,L.rj),L.rj.vadd(N,L.rj),L.rj.vadd(s,L.rj),L.rj.vsub(l.position,L.rj),L.ri.vadd(i,L.ri),L.ri.vsub(a.position,L.ri),d.release(N),d.release(F),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult);for(let z=0,V=B.length;z!==V;z++)d.release(B[z]);return}else for(let L=0;L!==I.length;L++){const N=d.get(),F=d.get();o.vmult(m[I[(L+1)%I.length]],N),o.vmult(m[I[(L+2)%I.length]],F),s.vadd(N,N),s.vadd(F,F);const z=nT;F.vsub(N,z);const V=iT;z.unit(V);const W=d.get(),Z=d.get();i.vsub(N,Z);const ne=Z.dot(V);V.scale(ne,W),W.vadd(N,W);const se=d.get();if(W.vsub(i,se),ne>0&&ne*ne<z.lengthSquared()&&se.lengthSquared()<v*v){if(h)return!0;const Q=this.createContactEquation(a,l,e,t,c,u);W.vsub(s,Q.rj),W.vsub(i,Q.ni),Q.ni.normalize(),Q.ni.scale(v,Q.ri),Q.rj.vadd(s,Q.rj),Q.rj.vsub(l.position,Q.rj),Q.ri.vadd(i,Q.ri),Q.ri.vsub(a.position,Q.ri),this.result.push(Q),this.createFrictionEquationsFromContact(Q,this.frictionResult);for(let ue=0,pe=B.length;ue!==pe;ue++)d.release(B[ue]);d.release(N),d.release(F),d.release(W),d.release(se),d.release(Z);return}d.release(N),d.release(F),d.release(W),d.release(se),d.release(Z)}for(let L=0,N=B.length;L!==N;L++)d.release(B[L])}}}planeConvex(e,t,i,s,r,o,a,l,c,u,h){const d=hT,p=dT;p.set(0,0,1),r.vmult(p,p);let f=0;const m=pT;for(let v=0;v!==t.vertices.length;v++)if(d.copy(t.vertices[v]),o.vmult(d,d),s.vadd(d,d),d.vsub(i,m),p.dot(m)<=0){if(h)return!0;const g=this.createContactEquation(a,l,e,t,c,u),E=fT;p.scale(p.dot(m),E),d.vsub(E,E),E.vsub(i,g.ri),g.ni.copy(p),d.vsub(s,g.rj),g.ri.vadd(i,g.ri),g.ri.vsub(a.position,g.ri),g.rj.vadd(s,g.rj),g.rj.vsub(l.position,g.rj),this.result.push(g),f++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult)}this.enableFrictionReduction&&f&&this.createFrictionFromAverage(f)}boxConvex(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t,i,s,r,o,a,l,e,t,h)}sphereHeightfield(e,t,i,s,r,o,a,l,c,u,h){const d=t.data,p=e.radius,f=t.elementSize,m=MT,v=TT;we.pointToLocalFrame(s,o,i,v);let b=Math.floor((v.x-p)/f)-1,g=Math.ceil((v.x+p)/f)+1,E=Math.floor((v.y-p)/f)-1,P=Math.ceil((v.y+p)/f)+1;if(g<0||P<0||b>d.length||E>d[0].length)return;b<0&&(b=0),g<0&&(g=0),E<0&&(E=0),P<0&&(P=0),b>=d.length&&(b=d.length-1),g>=d.length&&(g=d.length-1),P>=d[0].length&&(P=d[0].length-1),E>=d[0].length&&(E=d[0].length-1);const I=[];t.getRectMinMax(b,E,g,P,I);const S=I[0],R=I[1];if(v.z-p>R||v.z+p<S)return;const _=this.result;for(let y=b;y<g;y++)for(let w=E;w<P;w++){const k=_.length;let B=!1;if(t.getConvexTrianglePillar(y,w,!1),we.pointToWorldFrame(s,o,t.pillarOffset,m),i.distanceTo(m)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(B=this.sphereConvex(e,t.pillarConvex,i,m,r,o,a,l,e,t,h)),h&&B||(t.getConvexTrianglePillar(y,w,!0),we.pointToWorldFrame(s,o,t.pillarOffset,m),i.distanceTo(m)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(B=this.sphereConvex(e,t.pillarConvex,i,m,r,o,a,l,e,t,h)),h&&B))return!0;if(_.length-k>2)return}}boxHeightfield(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,t,i,s,r,o,a,l,e,t,h)}convexHeightfield(e,t,i,s,r,o,a,l,c,u,h){const d=t.data,p=t.elementSize,f=e.boundingSphereRadius,m=ST,v=PT,b=ET;we.pointToLocalFrame(s,o,i,b);let g=Math.floor((b.x-f)/p)-1,E=Math.ceil((b.x+f)/p)+1,P=Math.floor((b.y-f)/p)-1,I=Math.ceil((b.y+f)/p)+1;if(E<0||I<0||g>d.length||P>d[0].length)return;g<0&&(g=0),E<0&&(E=0),P<0&&(P=0),I<0&&(I=0),g>=d.length&&(g=d.length-1),E>=d.length&&(E=d.length-1),I>=d[0].length&&(I=d[0].length-1),P>=d[0].length&&(P=d[0].length-1);const S=[];t.getRectMinMax(g,P,E,I,S);const R=S[0],_=S[1];if(!(b.z-f>_||b.z+f<R))for(let y=g;y<E;y++)for(let w=P;w<I;w++){let k=!1;if(t.getConvexTrianglePillar(y,w,!1),we.pointToWorldFrame(s,o,t.pillarOffset,m),i.distanceTo(m)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(k=this.convexConvex(e,t.pillarConvex,i,m,r,o,a,l,null,null,h,v,null)),h&&k||(t.getConvexTrianglePillar(y,w,!0),we.pointToWorldFrame(s,o,t.pillarOffset,m),i.distanceTo(m)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(k=this.convexConvex(e,t.pillarConvex,i,m,r,o,a,l,null,null,h,v,null)),h&&k))return!0}}sphereParticle(e,t,i,s,r,o,a,l,c,u,h){const d=wT;if(d.set(0,0,1),s.vsub(i,d),d.lengthSquared()<=e.radius*e.radius){if(h)return!0;const f=this.createContactEquation(l,a,t,e,c,u);d.normalize(),f.rj.copy(d),f.rj.scale(e.radius,f.rj),f.ni.copy(d),f.ni.negate(f.ni),f.ri.set(0,0,0),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}}planeParticle(e,t,i,s,r,o,a,l,c,u,h){const d=gT;d.set(0,0,1),a.quaternion.vmult(d,d);const p=_T;if(s.vsub(a.position,p),d.dot(p)<=0){if(h)return!0;const m=this.createContactEquation(l,a,t,e,c,u);m.ni.copy(d),m.ni.negate(m.ni),m.ri.set(0,0,0);const v=bT;d.scale(d.dot(s),v),s.vsub(v,v),m.rj.copy(v),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult)}}boxParticle(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,t,i,s,r,o,a,l,e,t,h)}convexParticle(e,t,i,s,r,o,a,l,c,u,h){let d=-1;const p=xT,f=CT;let m=null;const v=yT;if(v.copy(s),v.vsub(i,v),r.conjugate(Ed),Ed.vmult(v,v),e.pointIsInside(v)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(i,r),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(r);for(let b=0,g=e.faces.length;b!==g;b++){const E=[e.worldVertices[e.faces[b][0]]],P=e.worldFaceNormals[b];s.vsub(E[0],Sd);const I=-P.dot(Sd);if(m===null||Math.abs(I)<Math.abs(m)){if(h)return!0;m=I,d=b,p.copy(P)}}if(d!==-1){const b=this.createContactEquation(l,a,t,e,c,u);p.scale(m,f),f.vadd(s,f),f.vsub(i,f),b.rj.copy(f),p.negate(b.ni),b.ri.set(0,0,0);const g=b.ri,E=b.rj;g.vadd(s,g),g.vsub(l.position,g),E.vadd(i,E),E.vsub(a.position,E),this.result.push(b),this.createFrictionEquationsFromContact(b,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(e,t,i,s,r,o,a,l,c,u,h){return this.convexHeightfield(t,e,s,i,o,r,l,a,c,u,h)}particleCylinder(e,t,i,s,r,o,a,l,c,u,h){return this.convexParticle(t,e,s,i,o,r,l,a,c,u,h)}sphereTrimesh(e,t,i,s,r,o,a,l,c,u,h){const d=k2,p=B2,f=O2,m=L2,v=z2,b=D2,g=U2,E=I2,P=A2,I=j2;we.pointToLocalFrame(s,o,i,v);const S=e.radius;g.lowerBound.set(v.x-S,v.y-S,v.z-S),g.upperBound.set(v.x+S,v.y+S,v.z+S),t.getTrianglesInAABB(g,I);const R=R2,_=e.radius*e.radius;for(let L=0;L<I.length;L++)for(let N=0;N<3;N++)if(t.getVertex(t.indices[I[L]*3+N],R),R.vsub(v,P),P.lengthSquared()<=_){if(E.copy(R),we.pointToWorldFrame(s,o,E,R),R.vsub(i,P),h)return!0;let F=this.createContactEquation(a,l,e,t,c,u);F.ni.copy(P),F.ni.normalize(),F.ri.copy(F.ni),F.ri.scale(e.radius,F.ri),F.ri.vadd(i,F.ri),F.ri.vsub(a.position,F.ri),F.rj.copy(R),F.rj.vsub(l.position,F.rj),this.result.push(F),this.createFrictionEquationsFromContact(F,this.frictionResult)}for(let L=0;L<I.length;L++)for(let N=0;N<3;N++){t.getVertex(t.indices[I[L]*3+N],d),t.getVertex(t.indices[I[L]*3+(N+1)%3],p),p.vsub(d,f),v.vsub(p,b);const F=b.dot(f);v.vsub(d,b);let z=b.dot(f);if(z>0&&F<0&&(v.vsub(d,b),m.copy(f),m.normalize(),z=b.dot(m),m.scale(z,b),b.vadd(d,b),b.distanceTo(v)<e.radius)){if(h)return!0;const W=this.createContactEquation(a,l,e,t,c,u);b.vsub(v,W.ni),W.ni.normalize(),W.ni.scale(e.radius,W.ri),W.ri.vadd(i,W.ri),W.ri.vsub(a.position,W.ri),we.pointToWorldFrame(s,o,b,b),b.vsub(l.position,W.rj),we.vectorToWorldFrame(o,W.ni,W.ni),we.vectorToWorldFrame(o,W.ri,W.ri),this.result.push(W),this.createFrictionEquationsFromContact(W,this.frictionResult)}}const y=F2,w=N2,k=V2,B=M2;for(let L=0,N=I.length;L!==N;L++){t.getTriangleVertices(I[L],y,w,k),t.getNormal(I[L],B),v.vsub(y,b);let F=b.dot(B);if(B.scale(F,b),v.vsub(b,b),F=b.distanceTo(v),Ye.pointInTriangle(b,y,w,k)&&F<e.radius){if(h)return!0;let z=this.createContactEquation(a,l,e,t,c,u);b.vsub(v,z.ni),z.ni.normalize(),z.ni.scale(e.radius,z.ri),z.ri.vadd(i,z.ri),z.ri.vsub(a.position,z.ri),we.pointToWorldFrame(s,o,b,b),b.vsub(l.position,z.rj),we.vectorToWorldFrame(o,z.ni,z.ni),we.vectorToWorldFrame(o,z.ri,z.ri),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult)}}I.length=0}planeTrimesh(e,t,i,s,r,o,a,l,c,u,h){const d=new C,p=S2;p.set(0,0,1),r.vmult(p,p);for(let f=0;f<t.vertices.length/3;f++){t.getVertex(f,d);const m=new C;m.copy(d),we.pointToWorldFrame(s,o,m,d);const v=P2;if(d.vsub(i,v),p.dot(v)<=0){if(h)return!0;const g=this.createContactEquation(a,l,e,t,c,u);g.ni.copy(p);const E=T2;p.scale(v.dot(p),E),d.vsub(E,E),g.ri.copy(E),g.ri.vsub(a.position,g.ri),g.rj.copy(d),g.rj.vsub(l.position,g.rj),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult)}}}}const Ri=new C,os=new C,as=new C,y2=new C,x2=new C,C2=new Ue,E2=new Ue,S2=new C,P2=new C,T2=new C,M2=new C,A2=new C;new C;const R2=new C,I2=new C,k2=new C,B2=new C,O2=new C,L2=new C,z2=new C,D2=new C,F2=new C,N2=new C,V2=new C,U2=new jt,j2=[],co=new C,Cd=new C,H2=new C,G2=new C,q2=new C;function W2(n,e,t){let i=null;const s=n.length;for(let r=0;r!==s;r++){const o=n[r],a=H2;n[(r+1)%s].vsub(o,a);const l=G2;a.cross(e,l);const c=q2;t.vsub(o,c);const u=l.dot(c);if(i===null||u>0&&i===!0||u<=0&&i===!1){i===null&&(i=u>0);continue}else return!1}return!0}const uo=new C,$2=new C,K2=new C,Y2=new C,X2=[new C,new C,new C,new C,new C,new C],Z2=new C,Q2=new C,J2=new C,eT=new C,tT=new C,nT=new C,iT=new C,sT=new C,rT=new C,oT=new C,aT=new C,lT=new C,cT=new C,uT=new C;new C;new C;const hT=new C,dT=new C,pT=new C,fT=new C,mT=new C,vT=new C,gT=new C,_T=new C,bT=new C,wT=new C,Ed=new Ue,yT=new C;new C;const xT=new C,Sd=new C,CT=new C,ET=new C,ST=new C,PT=[0],TT=new C,MT=new C;class Pd{constructor(){this.current=[],this.previous=[]}getKey(e,t){if(t<e){const i=t;t=e,e=i}return e<<16|t}set(e,t){const i=this.getKey(e,t),s=this.current;let r=0;for(;i>s[r];)r++;if(i!==s[r]){for(let o=s.length-1;o>=r;o--)s[o+1]=s[o];s[r]=i}}tick(){const e=this.current;this.current=this.previous,this.previous=e,this.current.length=0}getDiff(e,t){const i=this.current,s=this.previous,r=i.length,o=s.length;let a=0;for(let l=0;l<r;l++){let c=!1;const u=i[l];for(;u>s[a];)a++;c=u===s[a],c||Td(e,u)}a=0;for(let l=0;l<o;l++){let c=!1;const u=s[l];for(;u>i[a];)a++;c=i[a]===u,c||Td(t,u)}}}function Td(n,e){n.push((e&4294901760)>>16,e&65535)}const il=(n,e)=>n<e?`${n}-${e}`:`${e}-${n}`;class AT{constructor(){this.data={keys:[]}}get(e,t){const i=il(e,t);return this.data[i]}set(e,t,i){const s=il(e,t);this.get(e,t)||this.data.keys.push(s),this.data[s]=i}delete(e,t){const i=il(e,t),s=this.data.keys.indexOf(i);s!==-1&&this.data.keys.splice(s,1),delete this.data[i]}reset(){const e=this.data,t=e.keys;for(;t.length>0;){const i=t.pop();delete e[i]}}}class dA extends gv{constructor(e){e===void 0&&(e={}),super(),this.dt=-1,this.allowSleep=!!e.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=e.quatNormalizeSkip!==void 0?e.quatNormalizeSkip:0,this.quatNormalizeFast=e.quatNormalizeFast!==void 0?e.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new C,e.gravity&&this.gravity.copy(e.gravity),e.frictionGravity&&(this.frictionGravity=new C,this.frictionGravity.copy(e.frictionGravity)),this.broadphase=e.broadphase!==void 0?e.broadphase:new oP,this.bodies=[],this.hasActiveBodies=!1,this.solver=e.solver!==void 0?e.solver:new f2,this.constraints=[],this.narrowphase=new w2(this),this.collisionMatrix=new ad,this.collisionMatrixPrevious=new ad,this.bodyOverlapKeeper=new Pd,this.shapeOverlapKeeper=new Pd,this.contactmaterials=[],this.contactMaterialTable=new AT,this.defaultMaterial=new ma("default"),this.defaultContactMaterial=new fa(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(e,t){return this.contactMaterialTable.get(e.id,t.id)}collisionMatrixTick(){const e=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=e,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(e){this.constraints.push(e)}removeConstraint(e){const t=this.constraints.indexOf(e);t!==-1&&this.constraints.splice(t,1)}rayTest(e,t,i){i instanceof zr?this.raycastClosest(e,t,{skipBackfaces:!0},i):this.raycastAll(e,t,{skipBackfaces:!0},i)}raycastAll(e,t,i,s){return i===void 0&&(i={}),i.mode=Ye.ALL,i.from=e,i.to=t,i.callback=s,sl.intersectWorld(this,i)}raycastAny(e,t,i,s){return i===void 0&&(i={}),i.mode=Ye.ANY,i.from=e,i.to=t,i.result=s,sl.intersectWorld(this,i)}raycastClosest(e,t,i,s){return i===void 0&&(i={}),i.mode=Ye.CLOSEST,i.from=e,i.to=t,i.result=s,sl.intersectWorld(this,i)}addBody(e){this.bodies.includes(e)||(e.index=this.bodies.length,this.bodies.push(e),e.world=this,e.initPosition.copy(e.position),e.initVelocity.copy(e.velocity),e.timeLastSleepy=this.time,e instanceof ie&&(e.initAngularVelocity.copy(e.angularVelocity),e.initQuaternion.copy(e.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=e,this.idToBodyMap[e.id]=e,this.dispatchEvent(this.addBodyEvent))}removeBody(e){e.world=null;const t=this.bodies.length-1,i=this.bodies,s=i.indexOf(e);if(s!==-1){i.splice(s,1);for(let r=0;r!==i.length;r++)i[r].index=r;this.collisionMatrix.setNumObjects(t),this.removeBodyEvent.body=e,delete this.idToBodyMap[e.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(e){return this.idToBodyMap[e]}getShapeById(e){const t=this.bodies;for(let i=0;i<t.length;i++){const s=t[i].shapes;for(let r=0;r<s.length;r++){const o=s[r];if(o.id===e)return o}}return null}addContactMaterial(e){this.contactmaterials.push(e),this.contactMaterialTable.set(e.materials[0].id,e.materials[1].id,e)}removeContactMaterial(e){const t=this.contactmaterials.indexOf(e);t!==-1&&(this.contactmaterials.splice(t,1),this.contactMaterialTable.delete(e.materials[0].id,e.materials[1].id))}fixedStep(e,t){e===void 0&&(e=1/60),t===void 0&&(t=10);const i=Je.now()/1e3;if(!this.lastCallTime)this.step(e,void 0,t);else{const s=i-this.lastCallTime;this.step(e,s,t)}this.lastCallTime=i}step(e,t,i){if(i===void 0&&(i=10),t===void 0)this.internalStep(e),this.time+=e;else{this.accumulator+=t;const s=Je.now();let r=0;for(;this.accumulator>=e&&r<i&&(this.internalStep(e),this.accumulator-=e,r++,!(Je.now()-s>e*1e3)););this.accumulator=this.accumulator%e;const o=this.accumulator/e;for(let a=0;a!==this.bodies.length;a++){const l=this.bodies[a];l.previousPosition.lerp(l.position,o,l.interpolatedPosition),l.previousQuaternion.slerp(l.quaternion,o,l.interpolatedQuaternion),l.previousQuaternion.normalize()}this.time+=t}}internalStep(e){this.dt=e;const t=this.contacts,i=OT,s=LT,r=this.bodies.length,o=this.bodies,a=this.solver,l=this.gravity,c=this.doProfiling,u=this.profile,h=ie.DYNAMIC;let d=-1/0;const p=this.constraints,f=BT;l.length();const m=l.x,v=l.y,b=l.z;let g=0;for(c&&(d=Je.now()),g=0;g!==r;g++){const L=o[g];if(L.type===h){const N=L.force,F=L.mass;N.x+=F*m,N.y+=F*v,N.z+=F*b}}for(let L=0,N=this.subsystems.length;L!==N;L++)this.subsystems[L].update();c&&(d=Je.now()),i.length=0,s.length=0,this.broadphase.collisionPairs(this,i,s),c&&(u.broadphase=Je.now()-d);let E=p.length;for(g=0;g!==E;g++){const L=p[g];if(!L.collideConnected)for(let N=i.length-1;N>=0;N-=1)(L.bodyA===i[N]&&L.bodyB===s[N]||L.bodyB===i[N]&&L.bodyA===s[N])&&(i.splice(N,1),s.splice(N,1))}this.collisionMatrixTick(),c&&(d=Je.now());const P=kT,I=t.length;for(g=0;g!==I;g++)P.push(t[g]);t.length=0;const S=this.frictionEquations.length;for(g=0;g!==S;g++)f.push(this.frictionEquations[g]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,s,this,t,P,this.frictionEquations,f),c&&(u.narrowphase=Je.now()-d),c&&(d=Je.now()),g=0;g<this.frictionEquations.length;g++)a.addEquation(this.frictionEquations[g]);const R=t.length;for(let L=0;L!==R;L++){const N=t[L],F=N.bi,z=N.bj,V=N.si,W=N.sj;let Z;if(F.material&&z.material?Z=this.getContactMaterial(F.material,z.material)||this.defaultContactMaterial:Z=this.defaultContactMaterial,Z.friction,F.material&&z.material&&(F.material.friction>=0&&z.material.friction>=0&&F.material.friction*z.material.friction,F.material.restitution>=0&&z.material.restitution>=0&&(N.restitution=F.material.restitution*z.material.restitution)),a.addEquation(N),F.allowSleep&&F.type===ie.DYNAMIC&&F.sleepState===ie.SLEEPING&&z.sleepState===ie.AWAKE&&z.type!==ie.STATIC){const ne=z.velocity.lengthSquared()+z.angularVelocity.lengthSquared(),se=z.sleepSpeedLimit**2;ne>=se*2&&(F.wakeUpAfterNarrowphase=!0)}if(z.allowSleep&&z.type===ie.DYNAMIC&&z.sleepState===ie.SLEEPING&&F.sleepState===ie.AWAKE&&F.type!==ie.STATIC){const ne=F.velocity.lengthSquared()+F.angularVelocity.lengthSquared(),se=F.sleepSpeedLimit**2;ne>=se*2&&(z.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(F,z,!0),this.collisionMatrixPrevious.get(F,z)||(Xs.body=z,Xs.contact=N,F.dispatchEvent(Xs),Xs.body=F,z.dispatchEvent(Xs)),this.bodyOverlapKeeper.set(F.id,z.id),this.shapeOverlapKeeper.set(V.id,W.id)}for(this.emitContactEvents(),c&&(u.makeContactConstraints=Je.now()-d,d=Je.now()),g=0;g!==r;g++){const L=o[g];L.wakeUpAfterNarrowphase&&(L.wakeUp(),L.wakeUpAfterNarrowphase=!1)}for(E=p.length,g=0;g!==E;g++){const L=p[g];L.update();for(let N=0,F=L.equations.length;N!==F;N++){const z=L.equations[N];a.addEquation(z)}}a.solve(e,this),c&&(u.solve=Je.now()-d),a.removeAllEquations();const _=Math.pow;for(g=0;g!==r;g++){const L=o[g];if(L.type&h){const N=_(1-L.linearDamping,e),F=L.velocity;F.scale(N,F);const z=L.angularVelocity;if(z){const V=_(1-L.angularDamping,e);z.scale(V,z)}}}this.dispatchEvent(IT),c&&(d=Je.now());const w=this.stepnumber%(this.quatNormalizeSkip+1)===0,k=this.quatNormalizeFast;for(g=0;g!==r;g++)o[g].integrate(e,w,k);this.clearForces(),this.broadphase.dirty=!0,c&&(u.integrate=Je.now()-d),this.stepnumber+=1,this.dispatchEvent(RT);let B=!0;if(this.allowSleep)for(B=!1,g=0;g!==r;g++){const L=o[g];L.sleepTick(this.time),L.sleepState!==ie.SLEEPING&&(B=!0)}this.hasActiveBodies=B}emitContactEvents(){const e=this.hasAnyEventListener("beginContact"),t=this.hasAnyEventListener("endContact");if((e||t)&&this.bodyOverlapKeeper.getDiff(Rn,In),e){for(let r=0,o=Rn.length;r<o;r+=2)Zs.bodyA=this.getBodyById(Rn[r]),Zs.bodyB=this.getBodyById(Rn[r+1]),this.dispatchEvent(Zs);Zs.bodyA=Zs.bodyB=null}if(t){for(let r=0,o=In.length;r<o;r+=2)Qs.bodyA=this.getBodyById(In[r]),Qs.bodyB=this.getBodyById(In[r+1]),this.dispatchEvent(Qs);Qs.bodyA=Qs.bodyB=null}Rn.length=In.length=0;const i=this.hasAnyEventListener("beginShapeContact"),s=this.hasAnyEventListener("endShapeContact");if((i||s)&&this.shapeOverlapKeeper.getDiff(Rn,In),i){for(let r=0,o=Rn.length;r<o;r+=2){const a=this.getShapeById(Rn[r]),l=this.getShapeById(Rn[r+1]);kn.shapeA=a,kn.shapeB=l,a&&(kn.bodyA=a.body),l&&(kn.bodyB=l.body),this.dispatchEvent(kn)}kn.bodyA=kn.bodyB=kn.shapeA=kn.shapeB=null}if(s){for(let r=0,o=In.length;r<o;r+=2){const a=this.getShapeById(In[r]),l=this.getShapeById(In[r+1]);Bn.shapeA=a,Bn.shapeB=l,a&&(Bn.bodyA=a.body),l&&(Bn.bodyB=l.body),this.dispatchEvent(Bn)}Bn.bodyA=Bn.bodyB=Bn.shapeA=Bn.shapeB=null}}clearForces(){const e=this.bodies,t=e.length;for(let i=0;i!==t;i++){const s=e[i];s.force,s.torque,s.force.set(0,0,0),s.torque.set(0,0,0)}}}new jt;const sl=new Ye,Je=globalThis.performance||{};if(!Je.now){let n=Date.now();Je.timing&&Je.timing.navigationStart&&(n=Je.timing.navigationStart),Je.now=()=>Date.now()-n}new C;const RT={type:"postStep"},IT={type:"preStep"},Xs={type:ie.COLLIDE_EVENT_NAME,body:null,contact:null},kT=[],BT=[],OT=[],LT=[],Rn=[],In=[],Zs={type:"beginContact",bodyA:null,bodyB:null},Qs={type:"endContact",bodyA:null,bodyB:null},kn={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Bn={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};function pA(n,e,t){let{color:i=65280,scale:s=1,onInit:r,onUpdate:o}=t===void 0?{}:t;const a=[],l=new Kv({color:i??65280,wireframe:!0}),c=new C,u=new C,h=new C,d=new Ue,p=new pu(1),f=new fu(1,1,1),m=new mu(10,10,10,10);m.translate(0,0,1e-4);function v(_){const y=new vo,w=[];for(let B=0;B<_.vertices.length;B++){const L=_.vertices[B];w.push(L.x,L.y,L.z)}y.setAttribute("position",new ga(w,3));const k=[];for(let B=0;B<_.faces.length;B++){const L=_.faces[B],N=L[0];for(let F=1;F<L.length-1;F++){const z=L[F],V=L[F+1];k.push(N,z,V)}}return y.setIndex(k),y.computeBoundingSphere(),y.computeVertexNormals(),y}function b(_){const y=new vo,w=[],k=c,B=u,L=h;for(let N=0;N<_.indices.length/3;N++)_.getTriangleVertices(N,k,B,L),w.push(k.x,k.y,k.z),w.push(B.x,B.y,B.z),w.push(L.x,L.y,L.z);return y.setAttribute("position",new ga(w,3)),y.computeBoundingSphere(),y.computeVertexNormals(),y}function g(_){const y=new vo,w=_.elementSize||1,k=_.data.flatMap((L,N)=>L.flatMap((F,z)=>[N*w,z*w,F])),B=[];for(let L=0;L<_.data.length-1;L++)for(let N=0;N<_.data[L].length-1;N++){const F=_.data[L].length,z=L*F+N;B.push(z+1,z+F,z+F+1),B.push(z+F,z+1,z)}return y.setIndex(B),y.setAttribute("position",new ga(k,3)),y.computeBoundingSphere(),y.computeVertexNormals(),y}function E(_){let y=new On;const{SPHERE:w,BOX:k,PLANE:B,CYLINDER:L,CONVEXPOLYHEDRON:N,TRIMESH:F,HEIGHTFIELD:z}=te.types;switch(_.type){case w:{y=new On(p,l);break}case k:{y=new On(f,l);break}case B:{y=new On(m,l);break}case L:{const V=new Yv(_.radiusTop,_.radiusBottom,_.height,_.numSegments);y=new On(V,l),_.geometryId=V.id;break}case N:{const V=v(_);y=new On(V,l),_.geometryId=V.id;break}case F:{const V=b(_);y=new On(V,l),_.geometryId=V.id;break}case z:{const V=g(_);y=new On(V,l),_.geometryId=V.id;break}}return n.add(y),y}function P(_,y){const{SPHERE:w,BOX:k,PLANE:B,CYLINDER:L,CONVEXPOLYHEDRON:N,TRIMESH:F,HEIGHTFIELD:z}=te.types;switch(y.type){case w:{const{radius:V}=y;_.scale.set(V*s,V*s,V*s);break}case k:{_.scale.copy(y.halfExtents),_.scale.multiplyScalar(2*s);break}case B:break;case L:{_.scale.set(1*s,1*s,1*s);break}case N:{_.scale.set(1*s,1*s,1*s);break}case F:{_.scale.copy(y.scale).multiplyScalar(s);break}case z:{_.scale.set(1*s,1*s,1*s);break}}}function I(_,y){if(!_)return!1;const{geometry:w}=_;return w instanceof pu&&y.type===te.types.SPHERE||w instanceof fu&&y.type===te.types.BOX||w instanceof mu&&y.type===te.types.PLANE||w.id===y.geometryId&&y.type===te.types.CYLINDER||w.id===y.geometryId&&y.type===te.types.CONVEXPOLYHEDRON||w.id===y.geometryId&&y.type===te.types.TRIMESH||w.id===y.geometryId&&y.type===te.types.HEIGHTFIELD}function S(_,y){let w=a[_],k=!1;return I(w,y)||(w&&n.remove(w),a[_]=w=E(y),k=!0),P(w,y),k}function R(){const _=a,y=c,w=d;let k=0;for(const B of e.bodies)for(let L=0;L!==B.shapes.length;L++){const N=B.shapes[L],F=S(k,N),z=_[k];z&&(B.quaternion.vmult(B.shapeOffsets[L],y),B.position.vadd(y,y),B.quaternion.mult(B.shapeOrientations[L],w),z.position.copy(y),z.quaternion.copy(w),F&&r instanceof Function&&r(B,z,N),!F&&o instanceof Function&&o(B,z,N)),k++}for(let B=k;B<_.length;B++){const L=_[B];L&&n.remove(L)}_.length=k}return{update:R}}const Pv=Math.sqrt(5),zT=1/3,pn=1/6,DT=(Pv-1)/4,st=(5-Pv)/20,Li=n=>Math.floor(n)|0,rl=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),ho=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function fA(n=Math.random){const e=Tv(n),t=new Float64Array(e).map(r=>rl[r%12*3]),i=new Float64Array(e).map(r=>rl[r%12*3+1]),s=new Float64Array(e).map(r=>rl[r%12*3+2]);return function(o,a,l){let c,u,h,d;const p=(o+a+l)*zT,f=Li(o+p),m=Li(a+p),v=Li(l+p),b=(f+m+v)*pn,g=f-b,E=m-b,P=v-b,I=o-g,S=a-E,R=l-P;let _,y,w,k,B,L;I>=S?S>=R?(_=1,y=0,w=0,k=1,B=1,L=0):I>=R?(_=1,y=0,w=0,k=1,B=0,L=1):(_=0,y=0,w=1,k=1,B=0,L=1):S<R?(_=0,y=0,w=1,k=0,B=1,L=1):I<R?(_=0,y=1,w=0,k=0,B=1,L=1):(_=0,y=1,w=0,k=1,B=1,L=0);const N=I-_+pn,F=S-y+pn,z=R-w+pn,V=I-k+2*pn,W=S-B+2*pn,Z=R-L+2*pn,ne=I-1+3*pn,se=S-1+3*pn,Q=R-1+3*pn,ue=f&255,pe=m&255,ge=v&255;let Ee=.6-I*I-S*S-R*R;if(Ee<0)c=0;else{const M=ue+e[pe+e[ge]];Ee*=Ee,c=Ee*Ee*(t[M]*I+i[M]*S+s[M]*R)}let q=.6-N*N-F*F-z*z;if(q<0)u=0;else{const M=ue+_+e[pe+y+e[ge+w]];q*=q,u=q*q*(t[M]*N+i[M]*F+s[M]*z)}let j=.6-V*V-W*W-Z*Z;if(j<0)h=0;else{const M=ue+k+e[pe+B+e[ge+L]];j*=j,h=j*j*(t[M]*V+i[M]*W+s[M]*Z)}let x=.6-ne*ne-se*se-Q*Q;if(x<0)d=0;else{const M=ue+1+e[pe+1+e[ge+1]];x*=x,d=x*x*(t[M]*ne+i[M]*se+s[M]*Q)}return 32*(c+u+h+d)}}function mA(n=Math.random){const e=Tv(n),t=new Float64Array(e).map(o=>ho[o%32*4]),i=new Float64Array(e).map(o=>ho[o%32*4+1]),s=new Float64Array(e).map(o=>ho[o%32*4+2]),r=new Float64Array(e).map(o=>ho[o%32*4+3]);return function(a,l,c,u){let h,d,p,f,m;const v=(a+l+c+u)*DT,b=Li(a+v),g=Li(l+v),E=Li(c+v),P=Li(u+v),I=(b+g+E+P)*st,S=b-I,R=g-I,_=E-I,y=P-I,w=a-S,k=l-R,B=c-_,L=u-y;let N=0,F=0,z=0,V=0;w>k?N++:F++,w>B?N++:z++,w>L?N++:V++,k>B?F++:z++,k>L?F++:V++,B>L?z++:V++;const W=N>=3?1:0,Z=F>=3?1:0,ne=z>=3?1:0,se=V>=3?1:0,Q=N>=2?1:0,ue=F>=2?1:0,pe=z>=2?1:0,ge=V>=2?1:0,Ee=N>=1?1:0,q=F>=1?1:0,j=z>=1?1:0,x=V>=1?1:0,M=w-W+st,D=k-Z+st,T=B-ne+st,A=L-se+st,O=w-Q+2*st,U=k-ue+2*st,H=B-pe+2*st,G=L-ge+2*st,X=w-Ee+3*st,Y=k-q+3*st,K=B-j+3*st,$=L-x+3*st,ee=w-1+4*st,J=k-1+4*st,re=B-1+4*st,oe=L-1+4*st,ce=b&255,be=g&255,me=E&255,Qe=P&255;let Ke=.6-w*w-k*k-B*B-L*L;if(Ke<0)h=0;else{const de=ce+e[be+e[me+e[Qe]]];Ke*=Ke,h=Ke*Ke*(t[de]*w+i[de]*k+s[de]*B+r[de]*L)}let rt=.6-M*M-D*D-T*T-A*A;if(rt<0)d=0;else{const de=ce+W+e[be+Z+e[me+ne+e[Qe+se]]];rt*=rt,d=rt*rt*(t[de]*M+i[de]*D+s[de]*T+r[de]*A)}let ot=.6-O*O-U*U-H*H-G*G;if(ot<0)p=0;else{const de=ce+Q+e[be+ue+e[me+pe+e[Qe+ge]]];ot*=ot,p=ot*ot*(t[de]*O+i[de]*U+s[de]*H+r[de]*G)}let Zt=.6-X*X-Y*Y-K*K-$*$;if(Zt<0)f=0;else{const de=ce+Ee+e[be+q+e[me+j+e[Qe+x]]];Zt*=Zt,f=Zt*Zt*(t[de]*X+i[de]*Y+s[de]*K+r[de]*$)}let Yn=.6-ee*ee-J*J-re*re-oe*oe;if(Yn<0)m=0;else{const de=ce+1+e[be+1+e[me+1+e[Qe+1]]];Yn*=Yn,m=Yn*Yn*(t[de]*ee+i[de]*J+s[de]*re+r[de]*oe)}return 27*(h+d+p+f+m)}}function Tv(n){const t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){const s=i+~~(n()*(256-i)),r=t[i];t[i]=t[s],t[s]=r}for(let i=256;i<512;i++)t[i]=t[i-256];return t}function it(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var FT=it;it.EventEmitter=it;it.prototype._events=void 0;it.prototype._maxListeners=void 0;it.defaultMaxListeners=10;it.prototype.setMaxListeners=function(n){if(!NT(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};it.prototype.emit=function(n){var e,t,i,s,r,o;if(this._events||(this._events={}),n==="error"&&(!this._events.error||Dr(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(t=this._events[n],Mv(t))return!1;if(Wn(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),t.apply(this,s)}else if(Dr(t))for(s=Array.prototype.slice.call(arguments,1),o=t.slice(),i=o.length,r=0;r<i;r++)o[r].apply(this,s);return!0};it.prototype.addListener=function(n,e){var t;if(!Wn(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,Wn(e.listener)?e.listener:e),this._events[n]?Dr(this._events[n])?this._events[n].push(e):this._events[n]=[this._events[n],e]:this._events[n]=e,Dr(this._events[n])&&!this._events[n].warned&&(Mv(this._maxListeners)?t=it.defaultMaxListeners:t=this._maxListeners,t&&t>0&&this._events[n].length>t&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this};it.prototype.on=it.prototype.addListener;it.prototype.once=function(n,e){if(!Wn(e))throw TypeError("listener must be a function");var t=!1;function i(){this.removeListener(n,i),t||(t=!0,e.apply(this,arguments))}return i.listener=e,this.on(n,i),this};it.prototype.removeListener=function(n,e){var t,i,s,r;if(!Wn(e))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(t=this._events[n],s=t.length,i=-1,t===e||Wn(t.listener)&&t.listener===e)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,e);else if(Dr(t)){for(r=s;r-- >0;)if(t[r]===e||t[r].listener&&t[r].listener===e){i=r;break}if(i<0)return this;t.length===1?(t.length=0,delete this._events[n]):t.splice(i,1),this._events.removeListener&&this.emit("removeListener",n,e)}return this};it.prototype.removeAllListeners=function(n){var e,t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[n],Wn(t))this.removeListener(n,t);else if(t)for(;t.length;)this.removeListener(n,t[t.length-1]);return delete this._events[n],this};it.prototype.listeners=function(n){var e;return!this._events||!this._events[n]?e=[]:Wn(this._events[n])?e=[this._events[n]]:e=this._events[n].slice(),e};it.prototype.listenerCount=function(n){if(this._events){var e=this._events[n];if(Wn(e))return 1;if(e)return e.length}return 0};it.listenerCount=function(n,e){return n.listenerCount(e)};function Wn(n){return typeof n=="function"}function NT(n){return typeof n=="number"}function Dr(n){return typeof n=="object"&&n!==null}function Mv(n){return n===void 0}var VT=FT,Md=["touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup"],UT={left:0,top:0},jT=function(e,t){t=t||{},e=e||window;var i=new VT;i.target=t.target||e;var s=null,r=t.filtered,o=Md;typeof t.type=="string"&&(o=Md.filter(function(c){return c.indexOf(t.type)===0}));var a=o.map(function(c){var u=GT(c),h=function(d){var p=d;if(/^touch/.test(c)&&(/^touchend$/.test(c)&&t.preventSimulated!==!1&&d.preventDefault(),r?p=l(d,c):p=Ad(d.changedTouches,i.target)),!!p){var f=HT(p,i.target);i.emit(u,d,f)}};return{type:c,listener:h}});return i.enable=function(){return a.forEach(Id(e,!0)),i},i.disable=function(){return s=null,a.forEach(Id(e,!1)),i},i.enable(),i;function l(c,u){var h;return s&&/^touch(end|cancel)/.test(u)?(h=Rd(c.changedTouches,s.identifier||0),h&&(s=null)):!s&&/^touchstart/.test(u)?s=h=Ad(c.changedTouches,i.target):s&&(h=Rd(c.changedTouches,s.identifier||0)),h}};function HT(n,e){var t=n.clientX||0,i=n.clientY||0,s=qT(e);return[t-s.left,i-s.top]}function Ad(n,e){return Array.prototype.slice.call(n).filter(function(t){return t.target===e})[0]||n[0]}function Rd(n,e){for(var t=0;t<n.length;t++)if(n[t].identifier===e)return n[t];return null}function Id(n,e){return function(t){e?n.addEventListener(t.type,t.listener,{passive:!1}):n.removeEventListener(t.type,t.listener,{passive:!1})}}function GT(n){return n.replace(/^(touch|mouse)/,"").replace(/up$/,"end").replace(/down$/,"start")}function qT(n){return n===window||n===document||n===document.body?UT:n.getBoundingClientRect()}const vA=Os(jT);var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.linear=WT;Ce.easeInSine=$T;var gA=Ce.easeOutSine=KT,_A=Ce.easeInOutSine=YT;Ce.easeInQuad=XT;Ce.easeOutQuad=ZT;Ce.easeInOutQuad=QT;var bA=Ce.easeInCubic=JT,wA=Ce.easeOutCubic=eM;Ce.easeInOutCubic=tM;Ce.easeInQuart=nM;Ce.easeOutQuart=iM;Ce.easeInOutQuart=sM;Ce.easeInQuint=rM;Ce.easeOutQuint=oM;Ce.easeInOutQuint=aM;Ce.easeInExpo=lM;Ce.easeOutExpo=cM;Ce.easeInOutExpo=uM;Ce.easeInCirc=hM;Ce.easeOutCirc=dM;Ce.easeInOutCirc=pM;Ce.easeInBack=fM;Ce.easeOutBack=mM;Ce.easeInOutBack=vM;Ce.easeInElastic=gM;Ce.easeOutElastic=_M;Ce.easeInOutElastic=bM;Ce.easeOutBounce=ou;Ce.easeInBounce=Av;Ce.easeInOutBounce=wM;function WT(n){return n}function $T(n){return-1*Math.cos(n*(Math.PI/2))+1}function KT(n){return Math.sin(n*(Math.PI/2))}function YT(n){return-.5*(Math.cos(Math.PI*n)-1)}function XT(n){return n*n}function ZT(n){return n*(2-n)}function QT(n){return n<.5?2*n*n:-1+(4-2*n)*n}function JT(n){return n*n*n}function eM(n){var e=n-1;return e*e*e+1}function tM(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1}function nM(n){return n*n*n*n}function iM(n){var e=n-1;return 1-e*e*e*e}function sM(n){var e=n-1;return n<.5?8*n*n*n*n:1-8*e*e*e*e}function rM(n){return n*n*n*n*n}function oM(n){var e=n-1;return 1+e*e*e*e*e}function aM(n){var e=n-1;return n<.5?16*n*n*n*n*n:1+16*e*e*e*e*e}function lM(n){return n===0?0:Math.pow(2,10*(n-1))}function cM(n){return n===1?1:-Math.pow(2,-10*n)+1}function uM(n){if(n===0||n===1)return n;var e=n*2,t=e-1;return e<1?.5*Math.pow(2,10*t):.5*(-Math.pow(2,-10*t)+2)}function hM(n){var e=n/1;return-1*(Math.sqrt(1-e*n)-1)}function dM(n){var e=n-1;return Math.sqrt(1-e*e)}function pM(n){var e=n*2,t=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-t*t)+1)}function fM(n){var e=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],t=n/1;return t*t*((e+1)*t-e)}function mM(n){var e=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],t=n/1-1;return t*t*((e+1)*t+e)+1}function vM(n){var e=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],t=n*2,i=t-2,s=e*1.525;return t<1?.5*t*t*((s+1)*t-s):.5*(i*i*((s+1)*i+s)+2)}function gM(n){var e=arguments.length<=1||arguments[1]===void 0?.7:arguments[1];if(n===0||n===1)return n;var t=n/1,i=t-1,s=1-e,r=s/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*i)*Math.sin((i-r)*(2*Math.PI)/s))}function _M(n){var e=arguments.length<=1||arguments[1]===void 0?.7:arguments[1],t=1-e,i=n*2;if(n===0||n===1)return n;var s=t/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*i)*Math.sin((i-s)*(2*Math.PI)/t)+1}function bM(n){var e=arguments.length<=1||arguments[1]===void 0?.65:arguments[1],t=1-e;if(n===0||n===1)return n;var i=n*2,s=i-1,r=t/(2*Math.PI)*Math.asin(1);return i<1?-.5*(Math.pow(2,10*s)*Math.sin((s-r)*(2*Math.PI)/t)):Math.pow(2,-10*s)*Math.sin((s-r)*(2*Math.PI)/t)*.5+1}function ou(n){var e=n/1;if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){var t=e-.5454545454545454;return 7.5625*t*t+.75}else if(e<2.5/2.75){var i=e-.8181818181818182;return 7.5625*i*i+.9375}else{var s=e-.9545454545454546;return 7.5625*s*s+.984375}}function Av(n){return 1-ou(1-n)}function wM(n){return n<.5?Av(n*2)*.5:ou(n*2-1)*.5+.5}/*!
 * paths 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var yM=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,xM=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,CM=Math.PI/180,po=Math.sin,fo=Math.cos,mr=Math.abs,Js=Math.sqrt,EM=function(e){return typeof e=="number"},kd=1e5,ii=function(e){return Math.round(e*kd)/kd||0};function SM(n,e,t,i,s,r,o){for(var a=n.length,l,c,u,h,d;--a>-1;)for(l=n[a],c=l.length,u=0;u<c;u+=2)h=l[u],d=l[u+1],l[u]=h*e+d*i+r,l[u+1]=h*t+d*s+o;return n._dirty=1,n}function PM(n,e,t,i,s,r,o,a,l){if(!(n===a&&e===l)){t=mr(t),i=mr(i);var c=s%360*CM,u=fo(c),h=po(c),d=Math.PI,p=d*2,f=(n-a)/2,m=(e-l)/2,v=u*f+h*m,b=-h*f+u*m,g=v*v,E=b*b,P=g/(t*t)+E/(i*i);P>1&&(t=Js(P)*t,i=Js(P)*i);var I=t*t,S=i*i,R=(I*S-I*E-S*g)/(I*E+S*g);R<0&&(R=0);var _=(r===o?-1:1)*Js(R),y=_*(t*b/i),w=_*-(i*v/t),k=(n+a)/2,B=(e+l)/2,L=k+(u*y-h*w),N=B+(h*y+u*w),F=(v-y)/t,z=(b-w)/i,V=(-v-y)/t,W=(-b-w)/i,Z=F*F+z*z,ne=(z<0?-1:1)*Math.acos(F/Js(Z)),se=(F*W-z*V<0?-1:1)*Math.acos((F*V+z*W)/Js(Z*(V*V+W*W)));isNaN(se)&&(se=d),!o&&se>0?se-=p:o&&se<0&&(se+=p),ne%=p,se%=p;var Q=Math.ceil(mr(se)/(p/4)),ue=[],pe=se/Q,ge=4/3*po(pe/2)/(1+fo(pe/2)),Ee=u*t,q=h*t,j=h*-i,x=u*i,M;for(M=0;M<Q;M++)s=ne+M*pe,v=fo(s),b=po(s),F=fo(s+=pe),z=po(s),ue.push(v-ge*b,b+ge*v,F+ge*z,z-ge*F,F,z);for(M=0;M<ue.length;M+=2)v=ue[M],b=ue[M+1],ue[M]=v*Ee+b*j+L,ue[M+1]=v*q+b*x+N;return ue[M-2]=a,ue[M-1]=l,ue}}function TM(n){var e=(n+"").replace(xM,function(y){var w=+y;return w<1e-4&&w>-1e-4?0:w}).match(yM)||[],t=[],i=0,s=0,r=2/3,o=e.length,a=0,l="ERROR: malformed path: "+n,c,u,h,d,p,f,m,v,b,g,E,P,I,S,R,_=function(w,k,B,L){g=(B-w)/3,E=(L-k)/3,m.push(w+g,k+E,B-g,L-E,B,L)};if(!n||!isNaN(e[0])||isNaN(e[1]))return console.log(l),t;for(c=0;c<o;c++)if(I=p,isNaN(e[c])?(p=e[c].toUpperCase(),f=p!==e[c]):c--,h=+e[c+1],d=+e[c+2],f&&(h+=i,d+=s),c||(v=h,b=d),p==="M")m&&(m.length<8?t.length-=1:a+=m.length),i=v=h,s=b=d,m=[h,d],t.push(m),c+=2,p="L";else if(p==="C")m||(m=[0,0]),f||(i=s=0),m.push(h,d,i+e[c+3]*1,s+e[c+4]*1,i+=e[c+5]*1,s+=e[c+6]*1),c+=6;else if(p==="S")g=i,E=s,(I==="C"||I==="S")&&(g+=i-m[m.length-4],E+=s-m[m.length-3]),f||(i=s=0),m.push(g,E,h,d,i+=e[c+3]*1,s+=e[c+4]*1),c+=4;else if(p==="Q")g=i+(h-i)*r,E=s+(d-s)*r,f||(i=s=0),i+=e[c+3]*1,s+=e[c+4]*1,m.push(g,E,i+(h-i)*r,s+(d-s)*r,i,s),c+=4;else if(p==="T")g=i-m[m.length-4],E=s-m[m.length-3],m.push(i+g,s+E,h+(i+g*1.5-h)*r,d+(s+E*1.5-d)*r,i=h,s=d),c+=2;else if(p==="H")_(i,s,i=h,s),c+=1;else if(p==="V")_(i,s,i,s=h+(f?s-i:0)),c+=1;else if(p==="L"||p==="Z")p==="Z"&&(h=v,d=b,m.closed=!0),(p==="L"||mr(i-h)>.5||mr(s-d)>.5)&&(_(i,s,h,d),p==="L"&&(c+=2)),i=h,s=d;else if(p==="A"){if(S=e[c+4],R=e[c+5],g=e[c+6],E=e[c+7],u=7,S.length>1&&(S.length<3?(E=g,g=R,u--):(E=R,g=S.substr(2),u-=2),R=S.charAt(1),S=S.charAt(0)),P=PM(i,s,+e[c+1],+e[c+2],+e[c+3],+S,+R,(f?i:0)+g*1,(f?s:0)+E*1),c+=u,P)for(u=0;u<P.length;u++)m.push(P[u]);i=m[m.length-2],s=m[m.length-1]}else console.log(l);return c=m.length,c<6?(t.pop(),c=0):m[0]===m[c-2]&&m[1]===m[c-1]&&(m.closed=!0),t.totalPoints=a+c,t}function MM(n){EM(n[0])&&(n=[n]);var e="",t=n.length,i,s,r,o;for(s=0;s<t;s++){for(o=n[s],e+="M"+ii(o[0])+","+ii(o[1])+" C",i=o.length,r=2;r<i;r++)e+=ii(o[r++])+","+ii(o[r++])+" "+ii(o[r++])+","+ii(o[r++])+" "+ii(o[r++])+","+ii(o[r])+" ";o.closed&&(e+="z")}return e}/*!
 * CustomEase 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ct,Rv,Iv=function(){return Ct||typeof window<"u"&&(Ct=window.gsap)&&Ct.registerPlugin&&Ct},Bd=function(){Ct=Iv(),Ct?(Ct.registerEase("_CE",au.create),Rv=1):console.warn("Please gsap.registerPlugin(CustomEase)")},AM=1e20,mo=function(e){return~~(e*1e3+(e<0?-.5:.5))/1e3},RM=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,IM=/[cLlsSaAhHvVtTqQ]/g,kM=function(e){var t=e.length,i=AM,s;for(s=1;s<t;s+=6)+e[s]<i&&(i=+e[s]);return i},BM=function(e,t,i){!i&&i!==0&&(i=Math.max(+e[e.length-1],+e[1]));var s=+e[0]*-1,r=-i,o=e.length,a=1/(+e[o-2]+s),l=-t||(Math.abs(+e[o-1]-+e[1])<.01*(+e[o-2]-+e[0])?kM(e)+r:+e[o-1]+r),c;for(l?l=1/l:l=-a,c=0;c<o;c+=2)e[c]=(+e[c]+s)*a,e[c+1]=(+e[c+1]+r)*l},OM=function n(e,t,i,s,r,o,a,l,c,u,h){var d=(e+i)/2,p=(t+s)/2,f=(i+r)/2,m=(s+o)/2,v=(r+a)/2,b=(o+l)/2,g=(d+f)/2,E=(p+m)/2,P=(f+v)/2,I=(m+b)/2,S=(g+P)/2,R=(E+I)/2,_=a-e,y=l-t,w=Math.abs((i-a)*y-(s-l)*_),k=Math.abs((r-a)*y-(o-l)*_),B;return u||(u=[{x:e,y:t},{x:a,y:l}],h=1),u.splice(h||u.length-1,0,{x:S,y:R}),(w+k)*(w+k)>c*(_*_+y*y)&&(B=u.length,n(e,t,d,p,g,E,S,R,c,u,h),n(S,R,P,I,v,b,a,l,c,u,h+1+(u.length-B))),u},au=function(){function n(t,i,s){Rv||Bd(),this.id=t,this.setData(i,s)}var e=n.prototype;return e.setData=function(i,s){s=s||{},i=i||"0,0,1,1";var r=i.match(RM),o=1,a=[],l=[],c=s.precision||1,u=c<=1,h,d,p,f,m,v,b,g,E;if(this.data=i,(IM.test(i)||~i.indexOf("M")&&i.indexOf("C")<0)&&(r=TM(i)[0]),h=r.length,h===4)r.unshift(0,0),r.push(1,1),h=8;else if((h-2)%6)throw"Invalid CustomEase";for((+r[0]!=0||+r[h-2]!=1)&&BM(r,s.height,s.originY),this.segment=r,f=2;f<h;f+=6)d={x:+r[f-2],y:+r[f-1]},p={x:+r[f+4],y:+r[f+5]},a.push(d,p),OM(d.x,d.y,+r[f],+r[f+1],+r[f+2],+r[f+3],p.x,p.y,1/(c*2e5),a,a.length-1);for(h=a.length,f=0;f<h;f++)b=a[f],g=a[f-1]||b,(b.x>g.x||g.y!==b.y&&g.x===b.x||b===g)&&b.x<=1?(g.cx=b.x-g.x,g.cy=b.y-g.y,g.n=b,g.nx=b.x,u&&f>1&&Math.abs(g.cy/g.cx-a[f-2].cy/a[f-2].cx)>2&&(u=0),g.cx<o&&(g.cx?o=g.cx:(g.cx=.001,f===h-1&&(g.x-=.001,o=Math.min(o,.001),u=0)))):(a.splice(f--,1),h--);if(h=1/o+1|0,m=1/h,v=0,b=a[0],u){for(f=0;f<h;f++)E=f*m,b.nx<E&&(b=a[++v]),d=b.y+(E-b.x)/b.cx*b.cy,l[f]={x:E,cx:m,y:d,cy:0,nx:9},f&&(l[f-1].cy=d-l[f-1].y);l[h-1].cy=a[a.length-1].y-d}else{for(f=0;f<h;f++)b.nx<f*m&&(b=a[++v]),l[f]=b;v<a.length-1&&(l[f-1]=a[a.length-2])}return this.ease=function(P){var I=l[P*h|0]||l[h-1];return I.nx<P&&(I=I.n),I.y+(P-I.x)/I.cx*I.cy},this.ease.custom=this,this.id&&Ct&&Ct.registerEase(this.id,this.ease),this},e.getSVGData=function(i){return n.getSVGData(this,i)},n.create=function(i,s,r){return new n(i,s,r).ease},n.register=function(i){Ct=i,Bd()},n.get=function(i){return Ct.parseEase(i)},n.getSVGData=function(i,s){s=s||{};var r=s.width||100,o=s.height||100,a=s.x||0,l=(s.y||0)+o,c=Ct.utils.toArray(s.path)[0],u,h,d,p,f,m,v,b,g,E;if(s.invert&&(o=-o,l=0),typeof i=="string"&&(i=Ct.parseEase(i)),i.custom&&(i=i.custom),i instanceof n)u=MM(SM([i.segment],r,0,0,-o,a,l));else{for(u=[a,l],v=Math.max(5,(s.precision||1)*200),p=1/v,v+=2,b=5/v,g=mo(a+p*r),E=mo(l+i(p)*-o),h=(E-l)/(g-a),d=2;d<v;d++)f=mo(a+d*p*r),m=mo(l+i(d*p)*-o),(Math.abs((m-E)/(f-g)-h)>b||d===v-1)&&(u.push(g,E),h=(m-E)/(f-g)),g=f,E=m;u="M"+u.join(",")}return c&&c.setAttribute("d",u),u},n}();Iv()&&Ct.registerPlugin(au);au.version="3.12.5";var lu={exports:{}},Cs=typeof Reflect=="object"?Reflect:null,Od=Cs&&typeof Cs.apply=="function"?Cs.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Po;Cs&&typeof Cs.ownKeys=="function"?Po=Cs.ownKeys:Object.getOwnPropertySymbols?Po=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Po=function(e){return Object.getOwnPropertyNames(e)};function LM(n){console&&console.warn&&console.warn(n)}var kv=Number.isNaN||function(e){return e!==e};function Ae(){Ae.init.call(this)}lu.exports=Ae;lu.exports.once=NM;Ae.EventEmitter=Ae;Ae.prototype._events=void 0;Ae.prototype._eventsCount=0;Ae.prototype._maxListeners=void 0;var Ld=10;function va(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(Ae,"defaultMaxListeners",{enumerable:!0,get:function(){return Ld},set:function(n){if(typeof n!="number"||n<0||kv(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");Ld=n}});Ae.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ae.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||kv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Bv(n){return n._maxListeners===void 0?Ae.defaultMaxListeners:n._maxListeners}Ae.prototype.getMaxListeners=function(){return Bv(this)};Ae.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var s=e==="error",r=this._events;if(r!==void 0)s=s&&r.error===void 0;else if(!s)return!1;if(s){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=r[e];if(l===void 0)return!1;if(typeof l=="function")Od(l,this,t);else for(var c=l.length,u=Fv(l,c),i=0;i<c;++i)Od(u[i],this,t);return!0};function Ov(n,e,t,i){var s,r,o;if(va(t),r=n._events,r===void 0?(r=n._events=Object.create(null),n._eventsCount=0):(r.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),r=n._events),o=r[e]),o===void 0)o=r[e]=t,++n._eventsCount;else if(typeof o=="function"?o=r[e]=i?[t,o]:[o,t]:i?o.unshift(t):o.push(t),s=Bv(n),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,LM(a)}return n}Ae.prototype.addListener=function(e,t){return Ov(this,e,t,!1)};Ae.prototype.on=Ae.prototype.addListener;Ae.prototype.prependListener=function(e,t){return Ov(this,e,t,!0)};function zM(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Lv(n,e,t){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},s=zM.bind(i);return s.listener=t,i.wrapFn=s,s}Ae.prototype.once=function(e,t){return va(t),this.on(e,Lv(this,e,t)),this};Ae.prototype.prependOnceListener=function(e,t){return va(t),this.prependListener(e,Lv(this,e,t)),this};Ae.prototype.removeListener=function(e,t){var i,s,r,o,a;if(va(t),s=this._events,s===void 0)return this;if(i=s[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,r=o;break}if(r<0)return this;r===0?i.shift():DM(i,r),i.length===1&&(s[e]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};Ae.prototype.off=Ae.prototype.removeListener;Ae.prototype.removeAllListeners=function(e){var t,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var r=Object.keys(i),o;for(s=0;s<r.length;++s)o=r[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this};function zv(n,e,t){var i=n._events;if(i===void 0)return[];var s=i[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?FM(s):Fv(s,s.length)}Ae.prototype.listeners=function(e){return zv(this,e,!0)};Ae.prototype.rawListeners=function(e){return zv(this,e,!1)};Ae.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):Dv.call(n,e)};Ae.prototype.listenerCount=Dv;function Dv(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ae.prototype.eventNames=function(){return this._eventsCount>0?Po(this._events):[]};function Fv(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n[i];return t}function DM(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function FM(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function NM(n,e){return new Promise(function(t,i){function s(o){n.removeListener(e,r),i(o)}function r(){typeof n.removeListener=="function"&&n.removeListener("error",s),t([].slice.call(arguments))}Nv(n,e,r,{once:!0}),e!=="error"&&VM(n,s,{once:!0})})}function VM(n,e,t){typeof n.on=="function"&&Nv(n,"error",e,t)}function Nv(n,e,t,i){if(typeof n.on=="function")i.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function s(r){i.once&&n.removeEventListener(e,s),t(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var UM=lu.exports;const yA=Os(UM);export{$M as $,fp as A,tu as B,pA as C,vA as D,JM as E,Dn as F,tA as G,hA as H,eA as I,fe as J,nA as K,fA as L,ma as M,au as N,yA as O,lA as P,Ue as Q,cA as R,ir as S,bA as T,wA as U,C as V,dA as W,gA as X,_A as Y,Ug as Z,GM as _,oA as a,XM as a0,YM as a1,KM as a2,Kg as b,WM as c,$p as d,lg as e,k0 as f,QM as g,HM as h,R0 as i,ZM as j,mA as k,Rg as l,Cp as m,qM as n,iA as o,Yl as p,Xl as q,ea as r,rA as s,sA as t,ms as u,h1 as v,fa as w,ie as x,uA as y,te as z};
