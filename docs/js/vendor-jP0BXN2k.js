import{V as wt,U as Fi,S as at,D as av,a as lv,b as cv,c as uv,W as mi,d as Pe,B as Lo,e as $c,C as hv,M as Rn,L as mo,f as Hr,g as Gr,h as qi,F as dv,E as Rl,i as md,N as vd,R as gd,j as Ps,P as pv,k as so,l as Kc,m as _d,T as bd,n as fv,o as Yc,p as mv,q as Xc,r as Zc,s as Qc,t as vv,u as sa}from"./threejs-DBMWHTjA.js";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function kl(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Me={},os=[],gn=()=>{},gv=()=>!1,zo=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Il=n=>n.startsWith("onUpdate:"),pt=Object.assign,Bl=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},_v=Object.prototype.hasOwnProperty,xe=(n,e)=>_v.call(n,e),ae=Array.isArray,as=n=>Fo(n)==="[object Map]",wd=n=>Fo(n)==="[object Set]",le=n=>typeof n=="function",qe=n=>typeof n=="string",vi=n=>typeof n=="symbol",Oe=n=>n!==null&&typeof n=="object",yd=n=>(Oe(n)||le(n))&&le(n.then)&&le(n.catch),xd=Object.prototype.toString,Fo=n=>xd.call(n),bv=n=>Fo(n).slice(8,-1),Cd=n=>Fo(n)==="[object Object]",Ol=n=>qe(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ys=kl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Do=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},wv=/-(\w)/g,Wt=Do(n=>n.replace(wv,(e,t)=>t?t.toUpperCase():"")),yv=/\B([A-Z])/g,Wi=Do(n=>n.replace(yv,"-$1").toLowerCase()),No=Do(n=>n.charAt(0).toUpperCase()+n.slice(1)),ra=Do(n=>n?`on${No(n)}`:""),ai=(n,e)=>!Object.is(n,e),oa=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Ed=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},xv=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Jc;const Vo=()=>Jc||(Jc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ll(n){if(ae(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=qe(i)?Pv(i):Ll(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(qe(n)||Oe(n))return n}const Cv=/;(?![^(]*\))/g,Ev=/:([^]+)/,Sv=/\/\*[^]*?\*\//g;function Pv(n){const e={};return n.replace(Sv,"").split(Cv).forEach(t=>{if(t){const i=t.split(Ev);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function zl(n){let e="";if(qe(n))e=n;else if(ae(n))for(let t=0;t<n.length;t++){const i=zl(n[t]);i&&(e+=i+" ")}else if(Oe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Tv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mv=kl(Tv);function Sd(n){return!!n||n===""}const Pd=n=>!!(n&&n.__v_isRef===!0),Av=n=>qe(n)?n:n==null?"":ae(n)||Oe(n)&&(n.toString===xd||!le(n.toString))?Pd(n)?Av(n.value):JSON.stringify(n,Td,2):String(n),Td=(n,e)=>Pd(e)?Td(n,e.value):as(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s],r)=>(t[aa(i,r)+" =>"]=s,t),{})}:wd(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>aa(t))}:vi(e)?aa(e):Oe(e)&&!ae(e)&&!Cd(e)?String(e):e,aa=(n,e="")=>{var t;return vi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let At;class Rv{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=At,!e&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=At;try{return At=this,e()}finally{At=t}}}on(){At=this}off(){At=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function kv(){return At}let Te;const la=new WeakSet;class Md{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,At&&At.active&&At.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,la.has(this)&&(la.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Rd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,eu(this),kd(this);const e=Te,t=en;Te=this,en=!0;try{return this.fn()}finally{Id(this),Te=e,en=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Nl(e);this.deps=this.depsTail=void 0,eu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?la.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wa(this)&&this.run()}get dirty(){return Wa(this)}}let Ad=0,Xs,Zs;function Rd(n,e=!1){if(n.flags|=8,e){n.next=Zs,Zs=n;return}n.next=Xs,Xs=n}function Fl(){Ad++}function Dl(){if(--Ad>0)return;if(Zs){let e=Zs;for(Zs=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Xs;){let e=Xs;for(Xs=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function kd(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Id(n){let e,t=n.depsTail,i=t;for(;i;){const s=i.prevDep;i.version===-1?(i===t&&(t=s),Nl(i),Iv(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=e,n.depsTail=t}function Wa(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Bd(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Bd(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===or))return;n.globalVersion=or;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Wa(n)){n.flags&=-3;return}const t=Te,i=en;Te=n,en=!0;try{kd(n);const s=n.fn(n._value);(e.version===0||ai(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{Te=t,en=i,Id(n),n.flags&=-3}}function Nl(n,e=!1){const{dep:t,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),t.subs===n&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Nl(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Iv(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let en=!0;const Od=[];function gi(){Od.push(en),en=!1}function _i(){const n=Od.pop();en=n===void 0?!0:n}function eu(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Te;Te=void 0;try{e()}finally{Te=t}}}let or=0;class Bv{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Te||!en||Te===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Te)t=this.activeLink=new Bv(Te,this),Te.deps?(t.prevDep=Te.depsTail,Te.depsTail.nextDep=t,Te.depsTail=t):Te.deps=Te.depsTail=t,Ld(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=Te.depsTail,t.nextDep=void 0,Te.depsTail.nextDep=t,Te.depsTail=t,Te.deps===t&&(Te.deps=i)}return t}trigger(e){this.version++,or++,this.notify(e)}notify(e){Fl();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Dl()}}}function Ld(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Ld(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const $a=new WeakMap,Ri=Symbol(""),Ka=Symbol(""),ar=Symbol("");function rt(n,e,t){if(en&&Te){let i=$a.get(n);i||$a.set(n,i=new Map);let s=i.get(t);s||(i.set(t,s=new Vl),s.map=i,s.key=t),s.track()}}function Ln(n,e,t,i,s,r){const o=$a.get(n);if(!o){or++;return}const a=l=>{l&&l.trigger()};if(Fl(),e==="clear")o.forEach(a);else{const l=ae(n),c=l&&Ol(t);if(l&&t==="length"){const u=Number(i);o.forEach((h,d)=>{(d==="length"||d===ar||!vi(d)&&d>=u)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(ar)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ri)),as(n)&&a(o.get(Ka)));break;case"delete":l||(a(o.get(Ri)),as(n)&&a(o.get(Ka)));break;case"set":as(n)&&a(o.get(Ri));break}}Dl()}function Xi(n){const e=ye(n);return e===n?e:(rt(e,"iterate",ar),qt(n)?e:e.map(ot))}function Uo(n){return rt(n=ye(n),"iterate",ar),n}const Ov={__proto__:null,[Symbol.iterator](){return ca(this,Symbol.iterator,ot)},concat(...n){return Xi(this).concat(...n.map(e=>ae(e)?Xi(e):e))},entries(){return ca(this,"entries",n=>(n[1]=ot(n[1]),n))},every(n,e){return Cn(this,"every",n,e,void 0,arguments)},filter(n,e){return Cn(this,"filter",n,e,t=>t.map(ot),arguments)},find(n,e){return Cn(this,"find",n,e,ot,arguments)},findIndex(n,e){return Cn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Cn(this,"findLast",n,e,ot,arguments)},findLastIndex(n,e){return Cn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Cn(this,"forEach",n,e,void 0,arguments)},includes(...n){return ua(this,"includes",n)},indexOf(...n){return ua(this,"indexOf",n)},join(n){return Xi(this).join(n)},lastIndexOf(...n){return ua(this,"lastIndexOf",n)},map(n,e){return Cn(this,"map",n,e,void 0,arguments)},pop(){return ks(this,"pop")},push(...n){return ks(this,"push",n)},reduce(n,...e){return tu(this,"reduce",n,e)},reduceRight(n,...e){return tu(this,"reduceRight",n,e)},shift(){return ks(this,"shift")},some(n,e){return Cn(this,"some",n,e,void 0,arguments)},splice(...n){return ks(this,"splice",n)},toReversed(){return Xi(this).toReversed()},toSorted(n){return Xi(this).toSorted(n)},toSpliced(...n){return Xi(this).toSpliced(...n)},unshift(...n){return ks(this,"unshift",n)},values(){return ca(this,"values",ot)}};function ca(n,e,t){const i=Uo(n),s=i[e]();return i!==n&&!qt(n)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=t(r.value)),r}),s}const Lv=Array.prototype;function Cn(n,e,t,i,s,r){const o=Uo(n),a=o!==n&&!qt(n),l=o[e];if(l!==Lv[e]){const h=l.apply(n,r);return a?ot(h):h}let c=t;o!==n&&(a?c=function(h,d){return t.call(this,ot(h),d,n)}:t.length>2&&(c=function(h,d){return t.call(this,h,d,n)}));const u=l.call(o,c,i);return a&&s?s(u):u}function tu(n,e,t,i){const s=Uo(n);let r=t;return s!==n&&(qt(n)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,n)}):r=function(o,a,l){return t.call(this,o,ot(a),l,n)}),s[e](r,...i)}function ua(n,e,t){const i=ye(n);rt(i,"iterate",ar);const s=i[e](...t);return(s===-1||s===!1)&&Hl(t[0])?(t[0]=ye(t[0]),i[e](...t)):s}function ks(n,e,t=[]){gi(),Fl();const i=ye(n)[e].apply(n,t);return Dl(),_i(),i}const zv=kl("__proto__,__v_isRef,__isVue"),zd=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(vi));function Fv(n){vi(n)||(n=String(n));const e=ye(this);return rt(e,"has",n),e.hasOwnProperty(n)}class Fd{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(s?r?$v:Ud:r?Vd:Nd).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=ae(e);if(!s){let l;if(o&&(l=Ov[t]))return l;if(t==="hasOwnProperty")return Fv}const a=Reflect.get(e,t,ut(e)?e:i);return(vi(t)?zd.has(t):zv(t))||(s||rt(e,"get",t),r)?a:ut(a)?o&&Ol(t)?a:a.value:Oe(a)?s?Hd(a):jo(a):a}}class Dd extends Fd{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const l=Di(r);if(!qt(i)&&!Di(i)&&(r=ye(r),i=ye(i)),!ae(e)&&ut(r)&&!ut(i))return l?!1:(r.value=i,!0)}const o=ae(e)&&Ol(t)?Number(t)<e.length:xe(e,t),a=Reflect.set(e,t,i,ut(e)?e:s);return e===ye(s)&&(o?ai(i,r)&&Ln(e,"set",t,i):Ln(e,"add",t,i)),a}deleteProperty(e,t){const i=xe(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Ln(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!vi(t)||!zd.has(t))&&rt(e,"has",t),i}ownKeys(e){return rt(e,"iterate",ae(e)?"length":Ri),Reflect.ownKeys(e)}}class Dv extends Fd{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Nv=new Dd,Vv=new Dv,Uv=new Dd(!0);const Ya=n=>n,qr=n=>Reflect.getPrototypeOf(n);function jv(n,e,t){return function(...i){const s=this.__v_raw,r=ye(s),o=as(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=t?Ya:e?Xa:ot;return!e&&rt(r,"iterate",l?Ka:Ri),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Wr(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Hv(n,e){const t={get(s){const r=this.__v_raw,o=ye(r),a=ye(s);n||(ai(s,a)&&rt(o,"get",s),rt(o,"get",a));const{has:l}=qr(o),c=e?Ya:n?Xa:ot;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!n&&rt(ye(s),"iterate",Ri),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=ye(r),a=ye(s);return n||(ai(s,a)&&rt(o,"has",s),rt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=ye(a),c=e?Ya:n?Xa:ot;return!n&&rt(l,"iterate",Ri),a.forEach((u,h)=>s.call(r,c(u),c(h),o))}};return pt(t,n?{add:Wr("add"),set:Wr("set"),delete:Wr("delete"),clear:Wr("clear")}:{add(s){!e&&!qt(s)&&!Di(s)&&(s=ye(s));const r=ye(this);return qr(r).has.call(r,s)||(r.add(s),Ln(r,"add",s,s)),this},set(s,r){!e&&!qt(r)&&!Di(r)&&(r=ye(r));const o=ye(this),{has:a,get:l}=qr(o);let c=a.call(o,s);c||(s=ye(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,r),c?ai(r,u)&&Ln(o,"set",s,r):Ln(o,"add",s,r),this},delete(s){const r=ye(this),{has:o,get:a}=qr(r);let l=o.call(r,s);l||(s=ye(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&Ln(r,"delete",s,void 0),c},clear(){const s=ye(this),r=s.size!==0,o=s.clear();return r&&Ln(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=jv(s,n,e)}),t}function Ul(n,e){const t=Hv(n,e);return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(xe(t,s)&&s in i?t:i,s,r)}const Gv={get:Ul(!1,!1)},qv={get:Ul(!1,!0)},Wv={get:Ul(!0,!1)};const Nd=new WeakMap,Vd=new WeakMap,Ud=new WeakMap,$v=new WeakMap;function Kv(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yv(n){return n.__v_skip||!Object.isExtensible(n)?0:Kv(bv(n))}function jo(n){return Di(n)?n:jl(n,!1,Nv,Gv,Nd)}function jd(n){return jl(n,!1,Uv,qv,Vd)}function Hd(n){return jl(n,!0,Vv,Wv,Ud)}function jl(n,e,t,i,s){if(!Oe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=Yv(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function ls(n){return Di(n)?ls(n.__v_raw):!!(n&&n.__v_isReactive)}function Di(n){return!!(n&&n.__v_isReadonly)}function qt(n){return!!(n&&n.__v_isShallow)}function Hl(n){return n?!!n.__v_raw:!1}function ye(n){const e=n&&n.__v_raw;return e?ye(e):n}function Xv(n){return!xe(n,"__v_skip")&&Object.isExtensible(n)&&Ed(n,"__v_skip",!0),n}const ot=n=>Oe(n)?jo(n):n,Xa=n=>Oe(n)?Hd(n):n;function ut(n){return n?n.__v_isRef===!0:!1}function Zv(n){return Gd(n,!1)}function Qv(n){return Gd(n,!0)}function Gd(n,e){return ut(n)?n:new Jv(n,e)}class Jv{constructor(e,t){this.dep=new Vl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ye(e),this._value=t?e:ot(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||qt(e)||Di(e);e=i?e:ye(e),ai(e,t)&&(this._rawValue=e,this._value=i?e:ot(e),this.dep.trigger())}}function cs(n){return ut(n)?n.value:n}const eg={get:(n,e,t)=>e==="__v_raw"?n:cs(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return ut(s)&&!ut(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function qd(n){return ls(n)?n:new Proxy(n,eg)}class tg{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Vl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=or-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Te!==this)return Rd(this,!0),!0}get value(){const e=this.dep.track();return Bd(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ng(n,e,t=!1){let i,s;return le(n)?i=n:(i=n.get,s=n.set),new tg(i,s,t)}const $r={},vo=new WeakMap;let Pi;function ig(n,e=!1,t=Pi){if(t){let i=vo.get(t);i||vo.set(t,i=[]),i.push(n)}}function sg(n,e,t=Me){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=t,c=T=>s?T:qt(T)||s===!1||s===0?ni(T,1):ni(T);let u,h,d,p,m=!1,f=!1;if(ut(n)?(h=()=>n.value,m=qt(n)):ls(n)?(h=()=>c(n),m=!0):ae(n)?(f=!0,m=n.some(T=>ls(T)||qt(T)),h=()=>n.map(T=>{if(ut(T))return T.value;if(ls(T))return c(T);if(le(T))return l?l(T,2):T()})):le(n)?e?h=l?()=>l(n,2):n:h=()=>{if(d){gi();try{d()}finally{_i()}}const T=Pi;Pi=u;try{return l?l(n,3,[p]):n(p)}finally{Pi=T}}:h=gn,e&&s){const T=h,k=s===!0?1/0:s;h=()=>ni(T(),k)}const v=kv(),C=()=>{u.stop(),v&&v.active&&Bl(v.effects,u)};if(r&&e){const T=e;e=(...k)=>{T(...k),C()}}let g=f?new Array(n.length).fill($r):$r;const E=T=>{if(!(!(u.flags&1)||!u.dirty&&!T))if(e){const k=u.run();if(s||m||(f?k.some((P,R)=>ai(P,g[R])):ai(k,g))){d&&d();const P=Pi;Pi=u;try{const R=[k,g===$r?void 0:f&&g[0]===$r?[]:g,p];l?l(e,3,R):e(...R),g=k}finally{Pi=P}}}else u.run()};return a&&a(E),u=new Md(h),u.scheduler=o?()=>o(E,!1):E,p=T=>ig(T,!1,u),d=u.onStop=()=>{const T=vo.get(u);if(T){if(l)l(T,4);else for(const k of T)k();vo.delete(u)}},e?i?E(!0):g=u.run():o?o(E.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function ni(n,e=1/0,t){if(e<=0||!Oe(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,ut(n))ni(n.value,e,t);else if(ae(n))for(let i=0;i<n.length;i++)ni(n[i],e,t);else if(wd(n)||as(n))n.forEach(i=>{ni(i,e,t)});else if(Cd(n)){for(const i in n)ni(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&ni(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mr(n,e,t,i){try{return i?n(...i):n()}catch(s){Ho(s,e,t)}}function bn(n,e,t,i){if(le(n)){const s=Mr(n,e,t,i);return s&&yd(s)&&s.catch(r=>{Ho(r,e,t)}),s}if(ae(n)){const s=[];for(let r=0;r<n.length;r++)s.push(bn(n[r],e,t,i));return s}}function Ho(n,e,t,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Me;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,l,c)===!1)return}a=a.parent}if(r){gi(),Mr(r,null,10,[n,l,c]),_i();return}}rg(n,t,s,i,o)}function rg(n,e,t,i=!0,s=!1){if(s)throw n;console.error(n)}const mt=[];let un=-1;const us=[];let Jn=null,ns=0;const Wd=Promise.resolve();let go=null;function $d(n){const e=go||Wd;return n?e.then(this?n.bind(this):n):e}function og(n){let e=un+1,t=mt.length;for(;e<t;){const i=e+t>>>1,s=mt[i],r=lr(s);r<n||r===n&&s.flags&2?e=i+1:t=i}return e}function Gl(n){if(!(n.flags&1)){const e=lr(n),t=mt[mt.length-1];!t||!(n.flags&2)&&e>=lr(t)?mt.push(n):mt.splice(og(e),0,n),n.flags|=1,Kd()}}function Kd(){go||(go=Wd.then(Xd))}function ag(n){ae(n)?us.push(...n):Jn&&n.id===-1?Jn.splice(ns+1,0,n):n.flags&1||(us.push(n),n.flags|=1),Kd()}function nu(n,e,t=un+1){for(;t<mt.length;t++){const i=mt[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;mt.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Yd(n){if(us.length){const e=[...new Set(us)].sort((t,i)=>lr(t)-lr(i));if(us.length=0,Jn){Jn.push(...e);return}for(Jn=e,ns=0;ns<Jn.length;ns++){const t=Jn[ns];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Jn=null,ns=0}}const lr=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Xd(n){try{for(un=0;un<mt.length;un++){const e=mt[un];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Mr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;un<mt.length;un++){const e=mt[un];e&&(e.flags&=-2)}un=-1,mt.length=0,Yd(),go=null,(mt.length||us.length)&&Xd()}}let Qt=null,Zd=null;function _o(n){const e=Qt;return Qt=n,Zd=n&&n.type.__scopeId||null,e}function lg(n,e=Qt,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&du(-1);const r=_o(e);let o;try{o=n(...s)}finally{_o(r),i._d&&du(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function wi(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(gi(),bn(l,t,8,[n.el,a,n,e]),_i())}}const cg=Symbol("_vte"),ug=n=>n.__isTeleport;function ql(n,e){n.shapeFlag&6&&n.component?(n.transition=e,ql(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Qd(n,e){return le(n)?pt({name:n.name},e,{setup:n}):n}function Jd(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function bo(n,e,t,i,s=!1){if(ae(n)){n.forEach((m,f)=>bo(m,e&&(ae(e)?e[f]:e),t,i,s));return}if(Qs(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&bo(n,e,t,i.component.subTree);return}const r=i.shapeFlag&4?Kl(i.component):i.el,o=s?null:r,{i:a,r:l}=n,c=e&&e.r,u=a.refs===Me?a.refs={}:a.refs,h=a.setupState,d=ye(h),p=h===Me?()=>!1:m=>xe(d,m);if(c!=null&&c!==l&&(qe(c)?(u[c]=null,p(c)&&(h[c]=null)):ut(c)&&(c.value=null)),le(l))Mr(l,a,12,[o,u]);else{const m=qe(l),f=ut(l);if(m||f){const v=()=>{if(n.f){const C=m?p(l)?h[l]:u[l]:l.value;s?ae(C)&&Bl(C,r):ae(C)?C.includes(r)||C.push(r):m?(u[l]=[r],p(l)&&(h[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else m?(u[l]=o,p(l)&&(h[l]=o)):f&&(l.value=o,n.k&&(u[n.k]=o))};o?(v.id=-1,Mt(v,t)):v()}}}Vo().requestIdleCallback;Vo().cancelIdleCallback;const Qs=n=>!!n.type.__asyncLoader,ep=n=>n.type.__isKeepAlive;function hg(n,e){tp(n,"a",e)}function dg(n,e){tp(n,"da",e)}function tp(n,e,t=lt){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Go(e,i,t),t){let s=t.parent;for(;s&&s.parent;)ep(s.parent.vnode)&&pg(i,e,t,s),s=s.parent}}function pg(n,e,t,i){const s=Go(e,n,i,!0);np(()=>{Bl(i[e],s)},t)}function Go(n,e,t=lt,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{gi();const a=Ar(t),l=bn(e,t,n,o);return a(),_i(),l});return i?s.unshift(r):s.push(r),r}}const Hn=n=>(e,t=lt)=>{(!ur||n==="sp")&&Go(n,(...i)=>e(...i),t)},fg=Hn("bm"),mg=Hn("m"),vg=Hn("bu"),gg=Hn("u"),_g=Hn("bum"),np=Hn("um"),bg=Hn("sp"),wg=Hn("rtg"),yg=Hn("rtc");function xg(n,e=lt){Go("ec",n,e)}const ip="components";function fT(n,e){return rp(ip,n,!0,e)||n}const sp=Symbol.for("v-ndc");function mT(n){return qe(n)?rp(ip,n,!1)||n:n||sp}function rp(n,e,t=!0,i=!1){const s=Qt||lt;if(s){const r=s.type;{const a=h_(r,!1);if(a&&(a===e||a===Wt(e)||a===No(Wt(e))))return r}const o=iu(s[n]||r[n],e)||iu(s.appContext[n],e);return!o&&i?r:o}}function iu(n,e){return n&&(n[e]||n[Wt(e)]||n[No(Wt(e))])}function vT(n,e,t,i){let s;const r=t,o=ae(n);if(o||qe(n)){const a=o&&ls(n);let l=!1;a&&(l=!qt(n),n=Uo(n)),s=new Array(n.length);for(let c=0,u=n.length;c<u;c++)s[c]=e(l?ot(n[c]):n[c],c,void 0,r)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,r)}else if(Oe(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(n[u],u,l,r)}}else s=[];return s}const Za=n=>n?Tp(n)?Kl(n):Za(n.parent):null,Js=pt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Za(n.parent),$root:n=>Za(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>ap(n),$forceUpdate:n=>n.f||(n.f=()=>{Gl(n.update)}),$nextTick:n=>n.n||(n.n=$d.bind(n.proxy)),$watch:n=>Hg.bind(n)}),ha=(n,e)=>n!==Me&&!n.__isScriptSetup&&xe(n,e),Cg={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(ha(i,e))return o[e]=1,i[e];if(s!==Me&&xe(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&xe(c,e))return o[e]=3,r[e];if(t!==Me&&xe(t,e))return o[e]=4,t[e];Qa&&(o[e]=0)}}const u=Js[e];let h,d;if(u)return e==="$attrs"&&rt(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Me&&xe(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,xe(d,e))return d[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return ha(s,e)?(s[e]=t,!0):i!==Me&&xe(i,e)?(i[e]=t,!0):xe(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!t[o]||n!==Me&&xe(n,o)||ha(e,o)||(a=r[0])&&xe(a,o)||xe(i,o)||xe(Js,o)||xe(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:xe(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function su(n){return ae(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Qa=!0;function Eg(n){const e=ap(n),t=n.proxy,i=n.ctx;Qa=!1,e.beforeCreate&&ru(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:m,activated:f,deactivated:v,beforeDestroy:C,beforeUnmount:g,destroyed:E,unmounted:T,render:k,renderTracked:P,renderTriggered:R,errorCaptured:_,serverPrefetch:w,expose:b,inheritAttrs:I,components:B,directives:z,filters:D}=e;if(c&&Sg(c,i,null),o)for(const U in o){const $=o[U];le($)&&(i[U]=$.bind(t))}if(s){const U=s.call(t,t);Oe(U)&&(n.data=jo(U))}if(Qa=!0,r)for(const U in r){const $=r[U],Z=le($)?$.bind(t,t):le($.get)?$.get.bind(t,t):gn,ne=!le($)&&le($.set)?$.set.bind(t):gn,oe=Zt({get:Z,set:ne});Object.defineProperty(i,U,{enumerable:!0,configurable:!0,get:()=>oe.value,set:J=>oe.value=J})}if(a)for(const U in a)op(a[U],i,t,U);if(l){const U=le(l)?l.call(t):l;Reflect.ownKeys(U).forEach($=>{ro($,U[$])})}u&&ru(u,n,"c");function L(U,$){ae($)?$.forEach(Z=>U(Z.bind(t))):$&&U($.bind(t))}if(L(fg,h),L(mg,d),L(vg,p),L(gg,m),L(hg,f),L(dg,v),L(xg,_),L(yg,P),L(wg,R),L(_g,g),L(np,T),L(bg,w),ae(b))if(b.length){const U=n.exposed||(n.exposed={});b.forEach($=>{Object.defineProperty(U,$,{get:()=>t[$],set:Z=>t[$]=Z})})}else n.exposed||(n.exposed={});k&&n.render===gn&&(n.render=k),I!=null&&(n.inheritAttrs=I),B&&(n.components=B),z&&(n.directives=z),w&&Jd(n)}function Sg(n,e,t=gn){ae(n)&&(n=Ja(n));for(const i in n){const s=n[i];let r;Oe(s)?"default"in s?r=tn(s.from||i,s.default,!0):r=tn(s.from||i):r=tn(s),ut(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function ru(n,e,t){bn(ae(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function op(n,e,t,i){let s=i.includes(".")?yp(t,i):()=>t[i];if(qe(n)){const r=e[n];le(r)&&oo(s,r)}else if(le(n))oo(s,n.bind(t));else if(Oe(n))if(ae(n))n.forEach(r=>op(r,e,t,i));else{const r=le(n.handler)?n.handler.bind(t):e[n.handler];le(r)&&oo(s,r,n)}}function ap(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>wo(l,c,o,!0)),wo(l,e,o)),Oe(e)&&r.set(e,l),l}function wo(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&wo(n,r,t,!0),s&&s.forEach(o=>wo(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=Pg[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const Pg={data:ou,props:au,emits:au,methods:qs,computed:qs,beforeCreate:ft,created:ft,beforeMount:ft,mounted:ft,beforeUpdate:ft,updated:ft,beforeDestroy:ft,beforeUnmount:ft,destroyed:ft,unmounted:ft,activated:ft,deactivated:ft,errorCaptured:ft,serverPrefetch:ft,components:qs,directives:qs,watch:Mg,provide:ou,inject:Tg};function ou(n,e){return e?n?function(){return pt(le(n)?n.call(this,this):n,le(e)?e.call(this,this):e)}:e:n}function Tg(n,e){return qs(Ja(n),Ja(e))}function Ja(n){if(ae(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ft(n,e){return n?[...new Set([].concat(n,e))]:e}function qs(n,e){return n?pt(Object.create(null),n,e):e}function au(n,e){return n?ae(n)&&ae(e)?[...new Set([...n,...e])]:pt(Object.create(null),su(n),su(e??{})):e}function Mg(n,e){if(!n)return e;if(!e)return n;const t=pt(Object.create(null),n);for(const i in e)t[i]=ft(n[i],e[i]);return t}function lp(){return{app:null,config:{isNativeTag:gv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ag=0;function Rg(n,e){return function(i,s=null){le(i)||(i=pt({},i)),s!=null&&!Oe(s)&&(s=null);const r=lp(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:Ag++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:p_,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&le(u.install)?(o.add(u),u.install(c,...h)):le(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,d){if(!l){const p=c._ceVNode||Bt(i,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),n(p,u,d),l=!0,c._container=u,u.__vue_app__=c,Kl(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(bn(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=hs;hs=c;try{return u()}finally{hs=h}}};return c}}let hs=null;function ro(n,e){if(lt){let t=lt.provides;const i=lt.parent&&lt.parent.provides;i===t&&(t=lt.provides=Object.create(i)),t[n]=e}}function tn(n,e,t=!1){const i=lt||Qt;if(i||hs){const s=hs?hs._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&le(e)?e.call(i&&i.proxy):e}}const cp={},up=()=>Object.create(cp),hp=n=>Object.getPrototypeOf(n)===cp;function kg(n,e,t,i=!1){const s={},r=up();n.propsDefaults=Object.create(null),dp(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:jd(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function Ig(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=ye(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(qo(n.emitsOptions,d))continue;const p=e[d];if(l)if(xe(r,d))p!==r[d]&&(r[d]=p,c=!0);else{const m=Wt(d);s[m]=el(l,a,m,p,n,!1)}else p!==r[d]&&(r[d]=p,c=!0)}}}else{dp(n,e,s,r)&&(c=!0);let u;for(const h in a)(!e||!xe(e,h)&&((u=Wi(h))===h||!xe(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(s[h]=el(l,a,h,void 0,n,!0)):delete s[h]);if(r!==a)for(const h in r)(!e||!xe(e,h))&&(delete r[h],c=!0)}c&&Ln(n.attrs,"set","")}function dp(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ys(l))continue;const c=e[l];let u;s&&xe(s,u=Wt(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:qo(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=ye(t),c=a||Me;for(let u=0;u<r.length;u++){const h=r[u];t[h]=el(s,l,h,c[h],n,!xe(c,h))}}return o}function el(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=xe(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&le(l)){const{propsDefaults:c}=s;if(t in c)i=c[t];else{const u=Ar(s);i=c[t]=l.call(null,e),u()}}else i=l;s.ce&&s.ce._setProp(t,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Wi(t))&&(i=!0))}return i}const Bg=new WeakMap;function pp(n,e,t=!1){const i=t?Bg:e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!le(n)){const u=h=>{l=!0;const[d,p]=pp(h,e,!0);pt(o,d),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return Oe(n)&&i.set(n,os),os;if(ae(r))for(let u=0;u<r.length;u++){const h=Wt(r[u]);lu(h)&&(o[h]=Me)}else if(r)for(const u in r){const h=Wt(u);if(lu(h)){const d=r[u],p=o[h]=ae(d)||le(d)?{type:d}:pt({},d),m=p.type;let f=!1,v=!0;if(ae(m))for(let C=0;C<m.length;++C){const g=m[C],E=le(g)&&g.name;if(E==="Boolean"){f=!0;break}else E==="String"&&(v=!1)}else f=le(m)&&m.name==="Boolean";p[0]=f,p[1]=v,(f||xe(p,"default"))&&a.push(h)}}const c=[o,a];return Oe(n)&&i.set(n,c),c}function lu(n){return n[0]!=="$"&&!Ys(n)}const fp=n=>n[0]==="_"||n==="$stable",Wl=n=>ae(n)?n.map(dn):[dn(n)],Og=(n,e,t)=>{if(e._n)return e;const i=lg((...s)=>Wl(e(...s)),t);return i._c=!1,i},mp=(n,e,t)=>{const i=n._ctx;for(const s in n){if(fp(s))continue;const r=n[s];if(le(r))e[s]=Og(s,r,i);else if(r!=null){const o=Wl(r);e[s]=()=>o}}},vp=(n,e)=>{const t=Wl(e);n.slots.default=()=>t},gp=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},Lg=(n,e,t)=>{const i=n.slots=up();if(n.vnode.shapeFlag&32){const s=e._;s?(gp(i,e,t),t&&Ed(i,"_",s,!0)):mp(e,i)}else e&&vp(n,e)},zg=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=Me;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:gp(s,e,t):(r=!e.$stable,mp(e,s)),o=e}else e&&(vp(n,e),o={default:1});if(r)for(const a in s)!fp(a)&&o[a]==null&&delete s[a]},Mt=Xg;function Fg(n){return Dg(n)}function Dg(n,e){const t=Vo();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=gn,insertStaticContent:m}=n,f=(S,M,O,V=null,H=null,G=null,X=void 0,Y=null,K=!!M.dynamicChildren)=>{if(S===M)return;S&&!Is(S,M)&&(V=q(S),J(S,H,G,!0),S=null),M.patchFlag===-2&&(K=!1,M.dynamicChildren=null);const{type:W,ref:ee,shapeFlag:Q}=M;switch(W){case Wo:v(S,M,O,V);break;case Ni:C(S,M,O,V);break;case pa:S==null&&g(M,O,V,X);break;case Bn:B(S,M,O,V,H,G,X,Y,K);break;default:Q&1?k(S,M,O,V,H,G,X,Y,K):Q&6?z(S,M,O,V,H,G,X,Y,K):(Q&64||Q&128)&&W.process(S,M,O,V,H,G,X,Y,K,A)}ee!=null&&H&&bo(ee,S&&S.ref,G,M||S,!M)},v=(S,M,O,V)=>{if(S==null)i(M.el=a(M.children),O,V);else{const H=M.el=S.el;M.children!==S.children&&c(H,M.children)}},C=(S,M,O,V)=>{S==null?i(M.el=l(M.children||""),O,V):M.el=S.el},g=(S,M,O,V)=>{[S.el,S.anchor]=m(S.children,M,O,V,S.el,S.anchor)},E=({el:S,anchor:M},O,V)=>{let H;for(;S&&S!==M;)H=d(S),i(S,O,V),S=H;i(M,O,V)},T=({el:S,anchor:M})=>{let O;for(;S&&S!==M;)O=d(S),s(S),S=O;s(M)},k=(S,M,O,V,H,G,X,Y,K)=>{M.type==="svg"?X="svg":M.type==="math"&&(X="mathml"),S==null?P(M,O,V,H,G,X,Y,K):w(S,M,H,G,X,Y,K)},P=(S,M,O,V,H,G,X,Y)=>{let K,W;const{props:ee,shapeFlag:Q,transition:se,dirs:re}=S;if(K=S.el=o(S.type,G,ee&&ee.is,ee),Q&8?u(K,S.children):Q&16&&_(S.children,K,null,V,H,da(S,G),X,Y),re&&wi(S,null,V,"created"),R(K,S,S.scopeId,X,V),ee){for(const ve in ee)ve!=="value"&&!Ys(ve)&&r(K,ve,null,ee[ve],G,V);"value"in ee&&r(K,"value",null,ee.value,G),(W=ee.onVnodeBeforeMount)&&on(W,V,S)}re&&wi(S,null,V,"beforeMount");const ce=Ng(H,se);ce&&se.beforeEnter(K),i(K,M,O),((W=ee&&ee.onVnodeMounted)||ce||re)&&Mt(()=>{W&&on(W,V,S),ce&&se.enter(K),re&&wi(S,null,V,"mounted")},H)},R=(S,M,O,V,H)=>{if(O&&p(S,O),V)for(let G=0;G<V.length;G++)p(S,V[G]);if(H){let G=H.subTree;if(M===G||Cp(G.type)&&(G.ssContent===M||G.ssFallback===M)){const X=H.vnode;R(S,X,X.scopeId,X.slotScopeIds,H.parent)}}},_=(S,M,O,V,H,G,X,Y,K=0)=>{for(let W=K;W<S.length;W++){const ee=S[W]=Y?ei(S[W]):dn(S[W]);f(null,ee,M,O,V,H,G,X,Y)}},w=(S,M,O,V,H,G,X)=>{const Y=M.el=S.el;let{patchFlag:K,dynamicChildren:W,dirs:ee}=M;K|=S.patchFlag&16;const Q=S.props||Me,se=M.props||Me;let re;if(O&&yi(O,!1),(re=se.onVnodeBeforeUpdate)&&on(re,O,M,S),ee&&wi(M,S,O,"beforeUpdate"),O&&yi(O,!0),(Q.innerHTML&&se.innerHTML==null||Q.textContent&&se.textContent==null)&&u(Y,""),W?b(S.dynamicChildren,W,Y,O,V,da(M,H),G):X||$(S,M,Y,null,O,V,da(M,H),G,!1),K>0){if(K&16)I(Y,Q,se,O,H);else if(K&2&&Q.class!==se.class&&r(Y,"class",null,se.class,H),K&4&&r(Y,"style",Q.style,se.style,H),K&8){const ce=M.dynamicProps;for(let ve=0;ve<ce.length;ve++){const pe=ce[ve],Xe=Q[pe],We=se[pe];(We!==Xe||pe==="value")&&r(Y,pe,Xe,We,H,O)}}K&1&&S.children!==M.children&&u(Y,M.children)}else!X&&W==null&&I(Y,Q,se,O,H);((re=se.onVnodeUpdated)||ee)&&Mt(()=>{re&&on(re,O,M,S),ee&&wi(M,S,O,"updated")},V)},b=(S,M,O,V,H,G,X)=>{for(let Y=0;Y<M.length;Y++){const K=S[Y],W=M[Y],ee=K.el&&(K.type===Bn||!Is(K,W)||K.shapeFlag&70)?h(K.el):O;f(K,W,ee,null,V,H,G,X,!0)}},I=(S,M,O,V,H)=>{if(M!==O){if(M!==Me)for(const G in M)!Ys(G)&&!(G in O)&&r(S,G,M[G],null,H,V);for(const G in O){if(Ys(G))continue;const X=O[G],Y=M[G];X!==Y&&G!=="value"&&r(S,G,Y,X,H,V)}"value"in O&&r(S,"value",M.value,O.value,H)}},B=(S,M,O,V,H,G,X,Y,K)=>{const W=M.el=S?S.el:a(""),ee=M.anchor=S?S.anchor:a("");let{patchFlag:Q,dynamicChildren:se,slotScopeIds:re}=M;re&&(Y=Y?Y.concat(re):re),S==null?(i(W,O,V),i(ee,O,V),_(M.children||[],O,ee,H,G,X,Y,K)):Q>0&&Q&64&&se&&S.dynamicChildren?(b(S.dynamicChildren,se,O,H,G,X,Y),(M.key!=null||H&&M===H.subTree)&&_p(S,M,!0)):$(S,M,O,ee,H,G,X,Y,K)},z=(S,M,O,V,H,G,X,Y,K)=>{M.slotScopeIds=Y,S==null?M.shapeFlag&512?H.ctx.activate(M,O,V,X,K):D(M,O,V,H,G,X,K):N(S,M,K)},D=(S,M,O,V,H,G,X)=>{const Y=S.component=o_(S,V,H);if(ep(S)&&(Y.ctx.renderer=A),a_(Y,!1,X),Y.asyncDep){if(H&&H.registerDep(Y,L,X),!S.el){const K=Y.subTree=Bt(Ni);C(null,K,M,O)}}else L(Y,S,M,O,H,G,X)},N=(S,M,O)=>{const V=M.component=S.component;if(Kg(S,M,O))if(V.asyncDep&&!V.asyncResolved){U(V,M,O);return}else V.next=M,V.update();else M.el=S.el,V.vnode=M},L=(S,M,O,V,H,G,X)=>{const Y=()=>{if(S.isMounted){let{next:Q,bu:se,u:re,parent:ce,vnode:ve}=S;{const st=bp(S);if(st){Q&&(Q.el=ve.el,U(S,Q,X)),st.asyncDep.then(()=>{S.isUnmounted||Y()});return}}let pe=Q,Xe;yi(S,!1),Q?(Q.el=ve.el,U(S,Q,X)):Q=ve,se&&oa(se),(Xe=Q.props&&Q.props.onVnodeBeforeUpdate)&&on(Xe,ce,Q,ve),yi(S,!0);const We=uu(S),it=S.subTree;S.subTree=We,f(it,We,h(it.el),q(it),S,H,G),Q.el=We.el,pe===null&&Yg(S,We.el),re&&Mt(re,H),(Xe=Q.props&&Q.props.onVnodeUpdated)&&Mt(()=>on(Xe,ce,Q,ve),H)}else{let Q;const{el:se,props:re}=M,{bm:ce,m:ve,parent:pe,root:Xe,type:We}=S,it=Qs(M);yi(S,!1),ce&&oa(ce),!it&&(Q=re&&re.onVnodeBeforeMount)&&on(Q,pe,M),yi(S,!0);{Xe.ce&&Xe.ce._injectChildStyle(We);const st=S.subTree=uu(S);f(null,st,O,V,S,H,G),M.el=st.el}if(ve&&Mt(ve,H),!it&&(Q=re&&re.onVnodeMounted)){const st=M;Mt(()=>on(Q,pe,st),H)}(M.shapeFlag&256||pe&&Qs(pe.vnode)&&pe.vnode.shapeFlag&256)&&S.a&&Mt(S.a,H),S.isMounted=!0,M=O=V=null}};S.scope.on();const K=S.effect=new Md(Y);S.scope.off();const W=S.update=K.run.bind(K),ee=S.job=K.runIfDirty.bind(K);ee.i=S,ee.id=S.uid,K.scheduler=()=>Gl(ee),yi(S,!0),W()},U=(S,M,O)=>{M.component=S;const V=S.vnode.props;S.vnode=M,S.next=null,Ig(S,M.props,V,O),zg(S,M.children,O),gi(),nu(S),_i()},$=(S,M,O,V,H,G,X,Y,K=!1)=>{const W=S&&S.children,ee=S?S.shapeFlag:0,Q=M.children,{patchFlag:se,shapeFlag:re}=M;if(se>0){if(se&128){ne(W,Q,O,V,H,G,X,Y,K);return}else if(se&256){Z(W,Q,O,V,H,G,X,Y,K);return}}re&8?(ee&16&&Fe(W,H,G),Q!==W&&u(O,Q)):ee&16?re&16?ne(W,Q,O,V,H,G,X,Y,K):Fe(W,H,G,!0):(ee&8&&u(O,""),re&16&&_(Q,O,V,H,G,X,Y,K))},Z=(S,M,O,V,H,G,X,Y,K)=>{S=S||os,M=M||os;const W=S.length,ee=M.length,Q=Math.min(W,ee);let se;for(se=0;se<Q;se++){const re=M[se]=K?ei(M[se]):dn(M[se]);f(S[se],re,O,null,H,G,X,Y,K)}W>ee?Fe(S,H,G,!0,!1,Q):_(M,O,V,H,G,X,Y,K,Q)},ne=(S,M,O,V,H,G,X,Y,K)=>{let W=0;const ee=M.length;let Q=S.length-1,se=ee-1;for(;W<=Q&&W<=se;){const re=S[W],ce=M[W]=K?ei(M[W]):dn(M[W]);if(Is(re,ce))f(re,ce,O,null,H,G,X,Y,K);else break;W++}for(;W<=Q&&W<=se;){const re=S[Q],ce=M[se]=K?ei(M[se]):dn(M[se]);if(Is(re,ce))f(re,ce,O,null,H,G,X,Y,K);else break;Q--,se--}if(W>Q){if(W<=se){const re=se+1,ce=re<ee?M[re].el:V;for(;W<=se;)f(null,M[W]=K?ei(M[W]):dn(M[W]),O,ce,H,G,X,Y,K),W++}}else if(W>se)for(;W<=Q;)J(S[W],H,G,!0),W++;else{const re=W,ce=W,ve=new Map;for(W=ce;W<=se;W++){const he=M[W]=K?ei(M[W]):dn(M[W]);he.key!=null&&ve.set(he.key,W)}let pe,Xe=0;const We=se-ce+1;let it=!1,st=0;const Kt=new Array(We);for(W=0;W<We;W++)Kt[W]=0;for(W=re;W<=Q;W++){const he=S[W];if(Xe>=We){J(he,H,G,!0);continue}let rn;if(he.key!=null)rn=ve.get(he.key);else for(pe=ce;pe<=se;pe++)if(Kt[pe-ce]===0&&Is(he,M[pe])){rn=pe;break}rn===void 0?J(he,H,G,!0):(Kt[rn-ce]=W+1,rn>=st?st=rn:it=!0,f(he,M[rn],O,null,H,G,X,Y,K),Xe++)}const qn=it?Vg(Kt):os;for(pe=qn.length-1,W=We-1;W>=0;W--){const he=ce+W,rn=M[he],Wc=he+1<ee?M[he+1].el:V;Kt[W]===0?f(null,rn,O,Wc,H,G,X,Y,K):it&&(pe<0||W!==qn[pe]?oe(rn,O,Wc,2):pe--)}}},oe=(S,M,O,V,H=null)=>{const{el:G,type:X,transition:Y,children:K,shapeFlag:W}=S;if(W&6){oe(S.component.subTree,M,O,V);return}if(W&128){S.suspense.move(M,O,V);return}if(W&64){X.move(S,M,O,A);return}if(X===Bn){i(G,M,O);for(let Q=0;Q<K.length;Q++)oe(K[Q],M,O,V);i(S.anchor,M,O);return}if(X===pa){E(S,M,O);return}if(V!==2&&W&1&&Y)if(V===0)Y.beforeEnter(G),i(G,M,O),Mt(()=>Y.enter(G),H);else{const{leave:Q,delayLeave:se,afterLeave:re}=Y,ce=()=>i(G,M,O),ve=()=>{Q(G,()=>{ce(),re&&re()})};se?se(G,ce,ve):ve()}else i(G,M,O)},J=(S,M,O,V=!1,H=!1)=>{const{type:G,props:X,ref:Y,children:K,dynamicChildren:W,shapeFlag:ee,patchFlag:Q,dirs:se,cacheIndex:re}=S;if(Q===-2&&(H=!1),Y!=null&&bo(Y,null,O,S,!0),re!=null&&(M.renderCache[re]=void 0),ee&256){M.ctx.deactivate(S);return}const ce=ee&1&&se,ve=!Qs(S);let pe;if(ve&&(pe=X&&X.onVnodeBeforeUnmount)&&on(pe,M,S),ee&6)ze(S.component,O,V);else{if(ee&128){S.suspense.unmount(O,V);return}ce&&wi(S,null,M,"beforeUnmount"),ee&64?S.type.remove(S,M,O,A,V):W&&!W.hasOnce&&(G!==Bn||Q>0&&Q&64)?Fe(W,M,O,!1,!0):(G===Bn&&Q&384||!H&&ee&16)&&Fe(K,M,O),V&&Ie(S)}(ve&&(pe=X&&X.onVnodeUnmounted)||ce)&&Mt(()=>{pe&&on(pe,M,S),ce&&wi(S,null,M,"unmounted")},O)},Ie=S=>{const{type:M,el:O,anchor:V,transition:H}=S;if(M===Bn){Ee(O,V);return}if(M===pa){T(S);return}const G=()=>{s(O),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(S.shapeFlag&1&&H&&!H.persisted){const{leave:X,delayLeave:Y}=H,K=()=>X(O,G);Y?Y(S.el,G,K):K()}else G()},Ee=(S,M)=>{let O;for(;S!==M;)O=d(S),s(S),S=O;s(M)},ze=(S,M,O)=>{const{bum:V,scope:H,job:G,subTree:X,um:Y,m:K,a:W}=S;cu(K),cu(W),V&&oa(V),H.stop(),G&&(G.flags|=8,J(X,S,M,O)),Y&&Mt(Y,M),Mt(()=>{S.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Fe=(S,M,O,V=!1,H=!1,G=0)=>{for(let X=G;X<S.length;X++)J(S[X],M,O,V,H)},q=S=>{if(S.shapeFlag&6)return q(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const M=d(S.anchor||S.el),O=M&&M[cg];return O?d(O):M};let j=!1;const y=(S,M,O)=>{S==null?M._vnode&&J(M._vnode,null,null,!0):f(M._vnode||null,S,M,null,null,null,O),M._vnode=S,j||(j=!0,nu(),Yd(),j=!1)},A={p:f,um:J,m:oe,r:Ie,mt:D,mc:_,pc:$,pbc:b,n:q,o:n};return{render:y,hydrate:void 0,createApp:Rg(y)}}function da({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function yi({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Ng(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function _p(n,e,t=!1){const i=n.children,s=e.children;if(ae(i)&&ae(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=ei(s[r]),a.el=o.el),!t&&a.patchFlag!==-2&&_p(o,a)),a.type===Wo&&(a.el=o.el)}}function Vg(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<c?r=a+1:o=a;c<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function bp(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:bp(e)}function cu(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Ug=Symbol.for("v-scx"),jg=()=>tn(Ug);function oo(n,e,t){return wp(n,e,t)}function wp(n,e,t=Me){const{immediate:i,deep:s,flush:r,once:o}=t,a=pt({},t),l=e&&i||!e&&r!=="post";let c;if(ur){if(r==="sync"){const p=jg();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=gn,p.resume=gn,p.pause=gn,p}}const u=lt;a.call=(p,m,f)=>bn(p,u,m,f);let h=!1;r==="post"?a.scheduler=p=>{Mt(p,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(p,m)=>{m?p():Gl(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=sg(n,e,a);return ur&&(c?c.push(d):l&&d()),d}function Hg(n,e,t){const i=this.proxy,s=qe(n)?n.includes(".")?yp(i,n):()=>i[n]:n.bind(i,i);let r;le(e)?r=e:(r=e.handler,t=e);const o=Ar(this),a=wp(s,r.bind(i),t);return o(),a}function yp(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}const Gg=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Wt(e)}Modifiers`]||n[`${Wi(e)}Modifiers`];function qg(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Me;let s=t;const r=e.startsWith("update:"),o=r&&Gg(i,e.slice(7));o&&(o.trim&&(s=t.map(u=>qe(u)?u.trim():u)),o.number&&(s=t.map(xv)));let a,l=i[a=ra(e)]||i[a=ra(Wt(e))];!l&&r&&(l=i[a=ra(Wi(e))]),l&&bn(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,bn(c,n,6,s)}}function xp(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!le(n)){const l=c=>{const u=xp(c,e,!0);u&&(a=!0,pt(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Oe(n)&&i.set(n,null),null):(ae(r)?r.forEach(l=>o[l]=null):pt(o,r),Oe(n)&&i.set(n,o),o)}function qo(n,e){return!n||!zo(e)?!1:(e=e.slice(2).replace(/Once$/,""),xe(n,e[0].toLowerCase()+e.slice(1))||xe(n,Wi(e))||xe(n,e))}function uu(n){const{type:e,vnode:t,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:d,setupState:p,ctx:m,inheritAttrs:f}=n,v=_o(n);let C,g;try{if(t.shapeFlag&4){const T=s||i,k=T;C=dn(c.call(k,T,u,h,p,d,m)),g=a}else{const T=e;C=dn(T.length>1?T(h,{attrs:a,slots:o,emit:l}):T(h,null)),g=e.props?a:Wg(a)}}catch(T){er.length=0,Ho(T,n,1),C=Bt(Ni)}let E=C;if(g&&f!==!1){const T=Object.keys(g),{shapeFlag:k}=E;T.length&&k&7&&(r&&T.some(Il)&&(g=$g(g,r)),E=gs(E,g,!1,!0))}return t.dirs&&(E=gs(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(t.dirs):t.dirs),t.transition&&ql(E,t.transition),C=E,_o(v),C}const Wg=n=>{let e;for(const t in n)(t==="class"||t==="style"||zo(t))&&((e||(e={}))[t]=n[t]);return e},$g=(n,e)=>{const t={};for(const i in n)(!Il(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function Kg(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?hu(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!qo(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?hu(i,o,c):!0:!!o;return!1}function hu(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!qo(t,r))return!0}return!1}function Yg({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const Cp=n=>n.__isSuspense;function Xg(n,e){e&&e.pendingBranch?ae(n)?e.effects.push(...n):e.effects.push(n):ag(n)}const Bn=Symbol.for("v-fgt"),Wo=Symbol.for("v-txt"),Ni=Symbol.for("v-cmt"),pa=Symbol.for("v-stc"),er=[];let It=null;function Zg(n=!1){er.push(It=n?null:[])}function Qg(){er.pop(),It=er[er.length-1]||null}let cr=1;function du(n,e=!1){cr+=n,n<0&&It&&e&&(It.hasOnce=!0)}function Ep(n){return n.dynamicChildren=cr>0?It||os:null,Qg(),cr>0&&It&&It.push(n),n}function gT(n,e,t,i,s,r){return Ep(Pp(n,e,t,i,s,r,!0))}function Jg(n,e,t,i,s){return Ep(Bt(n,e,t,i,s,!0))}function yo(n){return n?n.__v_isVNode===!0:!1}function Is(n,e){return n.type===e.type&&n.key===e.key}const Sp=({key:n})=>n??null,ao=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?qe(n)||ut(n)||le(n)?{i:Qt,r:n,k:e,f:!!t}:n:null);function Pp(n,e=null,t=null,i=0,s=null,r=n===Bn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Sp(e),ref:e&&ao(e),scopeId:Zd,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Qt};return a?($l(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=qe(t)?8:16),cr>0&&!o&&It&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&It.push(l),l}const Bt=e_;function e_(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===sp)&&(n=Ni),yo(n)){const a=gs(n,e,!0);return t&&$l(a,t),cr>0&&!r&&It&&(a.shapeFlag&6?It[It.indexOf(n)]=a:It.push(a)),a.patchFlag=-2,a}if(d_(n)&&(n=n.__vccOpts),e){e=t_(e);let{class:a,style:l}=e;a&&!qe(a)&&(e.class=zl(a)),Oe(l)&&(Hl(l)&&!ae(l)&&(l=pt({},l)),e.style=Ll(l))}const o=qe(n)?1:Cp(n)?128:ug(n)?64:Oe(n)?4:le(n)?2:0;return Pp(n,e,t,i,s,o,r,!0)}function t_(n){return n?Hl(n)||hp(n)?pt({},n):n:null}function gs(n,e,t=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=n,c=e?i_(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&Sp(c),ref:e&&e.ref?t&&r?ae(r)?r.concat(ao(e)):[r,ao(e)]:ao(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Bn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&gs(n.ssContent),ssFallback:n.ssFallback&&gs(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&ql(u,l.clone(u)),u}function n_(n=" ",e=0){return Bt(Wo,null,n,e)}function _T(n="",e=!1){return e?(Zg(),Jg(Ni,null,n)):Bt(Ni,null,n)}function dn(n){return n==null||typeof n=="boolean"?Bt(Ni):ae(n)?Bt(Bn,null,n.slice()):yo(n)?ei(n):Bt(Wo,null,String(n))}function ei(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:gs(n)}function $l(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(ae(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),$l(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!hp(e)?e._ctx=Qt:s===3&&Qt&&(Qt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else le(e)?(e={default:e,_ctx:Qt},t=32):(e=String(e),i&64?(t=16,e=[n_(e)]):t=8);n.children=e,n.shapeFlag|=t}function i_(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=zl([e.class,i.class]));else if(s==="style")e.style=Ll([e.style,i.style]);else if(zo(s)){const r=e[s],o=i[s];o&&r!==o&&!(ae(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function on(n,e,t,i=null){bn(n,e,7,[t,i])}const s_=lp();let r_=0;function o_(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||s_,r={uid:r_++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Rv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pp(i,s),emitsOptions:xp(i,s),emit:null,emitted:null,propsDefaults:Me,inheritAttrs:i.inheritAttrs,ctx:Me,data:Me,props:Me,attrs:Me,slots:Me,refs:Me,setupState:Me,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=qg.bind(null,r),n.ce&&n.ce(r),r}let lt=null,xo,tl;{const n=Vo(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};xo=e("__VUE_INSTANCE_SETTERS__",t=>lt=t),tl=e("__VUE_SSR_SETTERS__",t=>ur=t)}const Ar=n=>{const e=lt;return xo(n),n.scope.on(),()=>{n.scope.off(),xo(e)}},pu=()=>{lt&&lt.scope.off(),xo(null)};function Tp(n){return n.vnode.shapeFlag&4}let ur=!1;function a_(n,e=!1,t=!1){e&&tl(e);const{props:i,children:s}=n.vnode,r=Tp(n);kg(n,i,r,e),Lg(n,s,t);const o=r?l_(n,e):void 0;return e&&tl(!1),o}function l_(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Cg);const{setup:i}=t;if(i){gi();const s=n.setupContext=i.length>1?u_(n):null,r=Ar(n),o=Mr(i,n,0,[n.props,s]),a=yd(o);if(_i(),r(),(a||n.sp)&&!Qs(n)&&Jd(n),a){if(o.then(pu,pu),e)return o.then(l=>{fu(n,l)}).catch(l=>{Ho(l,n,0)});n.asyncDep=o}else fu(n,o)}else Mp(n)}function fu(n,e,t){le(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Oe(e)&&(n.setupState=qd(e)),Mp(n)}function Mp(n,e,t){const i=n.type;n.render||(n.render=i.render||gn);{const s=Ar(n);gi();try{Eg(n)}finally{_i(),s()}}}const c_={get(n,e){return rt(n,"get",""),n[e]}};function u_(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,c_),slots:n.slots,emit:n.emit,expose:e}}function Kl(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(qd(Xv(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Js)return Js[t](n)},has(e,t){return t in e||t in Js}})):n.proxy}function h_(n,e=!0){return le(n)?n.displayName||n.name:n.name||e&&n.__name}function d_(n){return le(n)&&"__vccOpts"in n}const Zt=(n,e)=>ng(n,e,ur);function Ap(n,e,t){const i=arguments.length;return i===2?Oe(e)&&!ae(e)?yo(e)?Bt(n,null,[e]):Bt(n,e):Bt(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&yo(t)&&(t=[t]),Bt(n,e,t))}const p_="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nl;const mu=typeof window<"u"&&window.trustedTypes;if(mu)try{nl=mu.createPolicy("vue",{createHTML:n=>n})}catch{}const Rp=nl?n=>nl.createHTML(n):n=>n,f_="http://www.w3.org/2000/svg",m_="http://www.w3.org/1998/Math/MathML",kn=typeof document<"u"?document:null,vu=kn&&kn.createElement("template"),v_={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?kn.createElementNS(f_,n):e==="mathml"?kn.createElementNS(m_,n):t?kn.createElement(n,{is:t}):kn.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>kn.createTextNode(n),createComment:n=>kn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>kn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{vu.innerHTML=Rp(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=vu.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},g_=Symbol("_vtc");function __(n,e,t){const i=n[g_];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const gu=Symbol("_vod"),b_=Symbol("_vsh"),w_=Symbol(""),y_=/(^|;)\s*display\s*:/;function x_(n,e,t){const i=n.style,s=qe(t);let r=!1;if(t&&!s){if(e)if(qe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&lo(i,a,"")}else for(const o in e)t[o]==null&&lo(i,o,"");for(const o in t)o==="display"&&(r=!0),lo(i,o,t[o])}else if(s){if(e!==t){const o=i[w_];o&&(t+=";"+o),i.cssText=t,r=y_.test(t)}}else e&&n.removeAttribute("style");gu in n&&(n[gu]=r?i.display:"",n[b_]&&(i.display="none"))}const _u=/\s*!important$/;function lo(n,e,t){if(ae(t))t.forEach(i=>lo(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=C_(n,e);_u.test(t)?n.setProperty(Wi(i),t.replace(_u,""),"important"):n[i]=t}}const bu=["Webkit","Moz","ms"],fa={};function C_(n,e){const t=fa[e];if(t)return t;let i=Wt(e);if(i!=="filter"&&i in n)return fa[e]=i;i=No(i);for(let s=0;s<bu.length;s++){const r=bu[s]+i;if(r in n)return fa[e]=r}return e}const wu="http://www.w3.org/1999/xlink";function yu(n,e,t,i,s,r=Mv(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(wu,e.slice(6,e.length)):n.setAttributeNS(wu,e,t):t==null||r&&!Sd(t)?n.removeAttribute(e):n.setAttribute(e,r?"":vi(t)?String(t):t)}function xu(n,e,t,i,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Rp(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=Sd(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function E_(n,e,t,i){n.addEventListener(e,t,i)}function S_(n,e,t,i){n.removeEventListener(e,t,i)}const Cu=Symbol("_vei");function P_(n,e,t,i,s=null){const r=n[Cu]||(n[Cu]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=T_(e);if(i){const c=r[e]=R_(i,s);E_(n,a,c,l)}else o&&(S_(n,a,o,l),r[e]=void 0)}}const Eu=/(?:Once|Passive|Capture)$/;function T_(n){let e;if(Eu.test(n)){e={};let i;for(;i=n.match(Eu);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Wi(n.slice(2)),e]}let ma=0;const M_=Promise.resolve(),A_=()=>ma||(M_.then(()=>ma=0),ma=Date.now());function R_(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;bn(k_(i,t.value),e,5,[i])};return t.value=n,t.attached=A_(),t}function k_(n,e){if(ae(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Su=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,I_=(n,e,t,i,s,r)=>{const o=s==="svg";e==="class"?__(n,i,o):e==="style"?x_(n,t,i):zo(e)?Il(e)||P_(n,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):B_(n,e,i,o))?(xu(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&yu(n,e,i,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!qe(i))?xu(n,Wt(e),i,r,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),yu(n,e,i,o))};function B_(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&Su(e)&&le(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Su(e)&&qe(t)?!1:e in n}const O_=pt({patchProp:I_},v_);let Pu;function L_(){return Pu||(Pu=Fg(O_))}const bT=(...n)=>{const e=L_().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=F_(i);if(!s)return;const r=e._component;!le(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,z_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function z_(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function F_(n){return qe(n)?document.querySelector(n):n}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const is=typeof document<"u";function kp(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function D_(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&kp(n.default)}const we=Object.assign;function va(n,e){const t={};for(const i in e){const s=e[i];t[i]=nn(s)?s.map(n):n(s)}return t}const tr=()=>{},nn=Array.isArray,Ip=/#/g,N_=/&/g,V_=/\//g,U_=/=/g,j_=/\?/g,Bp=/\+/g,H_=/%5B/g,G_=/%5D/g,Op=/%5E/g,q_=/%60/g,Lp=/%7B/g,W_=/%7C/g,zp=/%7D/g,$_=/%20/g;function Yl(n){return encodeURI(""+n).replace(W_,"|").replace(H_,"[").replace(G_,"]")}function K_(n){return Yl(n).replace(Lp,"{").replace(zp,"}").replace(Op,"^")}function il(n){return Yl(n).replace(Bp,"%2B").replace($_,"+").replace(Ip,"%23").replace(N_,"%26").replace(q_,"`").replace(Lp,"{").replace(zp,"}").replace(Op,"^")}function Y_(n){return il(n).replace(U_,"%3D")}function X_(n){return Yl(n).replace(Ip,"%23").replace(j_,"%3F")}function Z_(n){return n==null?"":X_(n).replace(V_,"%2F")}function hr(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const Q_=/\/$/,J_=n=>n.replace(Q_,"");function ga(n,e,t="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=n(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=i0(i??e,t),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:hr(o)}}function e0(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Tu(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function t0(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&_s(e.matched[i],t.matched[s])&&Fp(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function _s(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Fp(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!n0(n[t],e[t]))return!1;return!0}function n0(n,e){return nn(n)?Mu(n,e):nn(e)?Mu(e,n):n===e}function Mu(n,e){return nn(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function i0(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var dr;(function(n){n.pop="pop",n.push="push"})(dr||(dr={}));var nr;(function(n){n.back="back",n.forward="forward",n.unknown=""})(nr||(nr={}));function s0(n){if(!n)if(is){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),J_(n)}const r0=/^[^#]+#/;function o0(n,e){return n.replace(r0,"#")+e}function a0(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const $o=()=>({left:window.scrollX,top:window.scrollY});function l0(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=a0(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Au(n,e){return(history.state?history.state.position-e:-1)+n}const sl=new Map;function c0(n,e){sl.set(n,e)}function u0(n){const e=sl.get(n);return sl.delete(n),e}let h0=()=>location.protocol+"//"+location.host;function Dp(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Tu(l,"")}return Tu(t,n)+i+s}function d0(n,e,t,i){let s=[],r=[],o=null;const a=({state:d})=>{const p=Dp(n,location),m=t.value,f=e.value;let v=0;if(d){if(t.value=p,e.value=d,o&&o===m){o=null;return}v=f?d.position-f.position:0}else i(p);s.forEach(C=>{C(t.value,m,{delta:v,type:dr.pop,direction:v?v>0?nr.forward:nr.back:nr.unknown})})};function l(){o=t.value}function c(d){s.push(d);const p=()=>{const m=s.indexOf(d);m>-1&&s.splice(m,1)};return r.push(p),p}function u(){const{history:d}=window;d.state&&d.replaceState(we({},d.state,{scroll:$o()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Ru(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?$o():null}}function p0(n){const{history:e,location:t}=window,i={value:Dp(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=n.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:h0()+n+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(p){console.error(p),t[u?"replace":"assign"](d)}}function o(l,c){const u=we({},e.state,Ru(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=we({},s.value,e.state,{forward:l,scroll:$o()});r(u.current,u,!0);const h=we({},Ru(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function f0(n){n=s0(n);const e=p0(n),t=d0(n,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=we({location:"",base:n,go:i,createHref:o0.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function wT(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),f0(n)}function m0(n){return typeof n=="string"||n&&typeof n=="object"}function Np(n){return typeof n=="string"||typeof n=="symbol"}const Vp=Symbol("");var ku;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(ku||(ku={}));function bs(n,e){return we(new Error,{type:n,[Vp]:!0},e)}function En(n,e){return n instanceof Error&&Vp in n&&(e==null||!!(n.type&e))}const Iu="[^/]+?",v0={sensitive:!1,strict:!1,start:!0,end:!0},g0=/[.+*?^${}()[\]/\\]/g;function _0(n,e){const t=we({},v0,e),i=[];let s=t.start?"^":"";const r=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let p=40+(t.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(g0,"\\$&"),p+=40;else if(d.type===1){const{value:m,repeatable:f,optional:v,regexp:C}=d;r.push({name:m,repeatable:f,optional:v});const g=C||Iu;if(g!==Iu){p+=10;try{new RegExp(`(${g})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${m}" (${g}): `+T.message)}}let E=f?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;h||(E=v&&c.length<2?`(?:/${E})`:"/"+E),v&&(E+="?"),s+=E,p+=20,v&&(p+=-8),f&&(p+=-20),g===".*"&&(p+=-50)}u.push(p)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",m=r[d-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const d of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of d)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:f,optional:v}=p,C=m in c?c[m]:"";if(nn(C)&&!f)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const g=nn(C)?C.join("/"):C;if(!g)if(v)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=g}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function b0(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Up(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=b0(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(Bu(i))return 1;if(Bu(s))return-1}return s.length-i.length}function Bu(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const w0={type:0,value:""},y0=/[a-zA-Z0-9_]/;function x0(n){if(!n)return[[]];if(n==="/")return[[w0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=0,i=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):d();break;case 4:d(),t=i;break;case 1:l==="("?t=2:y0.test(l)?d():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function C0(n,e,t){const i=_0(x0(n.path),t),s=we(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function E0(n,e){const t=[],i=new Map;e=Fu({strict:!1,end:!0,sensitive:!1},e);function s(h){return i.get(h)}function r(h,d,p){const m=!p,f=Lu(h);f.aliasOf=p&&p.record;const v=Fu(e,h),C=[f];if("alias"in h){const T=typeof h.alias=="string"?[h.alias]:h.alias;for(const k of T)C.push(Lu(we({},f,{components:p?p.record.components:f.components,path:k,aliasOf:p?p.record:f})))}let g,E;for(const T of C){const{path:k}=T;if(d&&k[0]!=="/"){const P=d.record.path,R=P[P.length-1]==="/"?"":"/";T.path=d.record.path+(k&&R+k)}if(g=C0(T,d,v),p?p.alias.push(g):(E=E||g,E!==g&&E.alias.push(g),m&&h.name&&!zu(g)&&o(h.name)),jp(g)&&l(g),f.children){const P=f.children;for(let R=0;R<P.length;R++)r(P[R],g,p&&p.children[R])}p=p||g}return E?()=>{o(E)}:tr}function o(h){if(Np(h)){const d=i.get(h);d&&(i.delete(h),t.splice(t.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=t.indexOf(h);d>-1&&(t.splice(d,1),h.record.name&&i.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return t}function l(h){const d=T0(h,t);t.splice(d,0,h),h.record.name&&!zu(h)&&i.set(h.record.name,h)}function c(h,d){let p,m={},f,v;if("name"in h&&h.name){if(p=i.get(h.name),!p)throw bs(1,{location:h});v=p.record.name,m=we(Ou(d.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),h.params&&Ou(h.params,p.keys.map(E=>E.name))),f=p.stringify(m)}else if(h.path!=null)f=h.path,p=t.find(E=>E.re.test(f)),p&&(m=p.parse(f),v=p.record.name);else{if(p=d.name?i.get(d.name):t.find(E=>E.re.test(d.path)),!p)throw bs(1,{location:h,currentLocation:d});v=p.record.name,m=we({},d.params,h.params),f=p.stringify(m)}const C=[];let g=p;for(;g;)C.unshift(g.record),g=g.parent;return{name:v,path:f,params:m,matched:C,meta:P0(C)}}n.forEach(h=>r(h));function u(){t.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Ou(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function Lu(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:S0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function S0(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function zu(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function P0(n){return n.reduce((e,t)=>we(e,t.meta),{})}function Fu(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function T0(n,e){let t=0,i=e.length;for(;t!==i;){const r=t+i>>1;Up(n,e[r])<0?i=r:t=r+1}const s=M0(n);return s&&(i=e.lastIndexOf(s,i-1)),i}function M0(n){let e=n;for(;e=e.parent;)if(jp(e)&&Up(n,e)===0)return e}function jp({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function A0(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(Bp," "),o=r.indexOf("="),a=hr(o<0?r:r.slice(0,o)),l=o<0?null:hr(r.slice(o+1));if(a in e){let c=e[a];nn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Du(n){let e="";for(let t in n){const i=n[t];if(t=Y_(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(nn(i)?i.map(r=>r&&il(r)):[i&&il(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function R0(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=nn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const k0=Symbol(""),Nu=Symbol(""),Ko=Symbol(""),Xl=Symbol(""),rl=Symbol("");function Bs(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function ti(n,e,t,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(bs(4,{from:t,to:e})):d instanceof Error?l(d):m0(d)?l(bs(2,{from:e,to:d})):(o&&i.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},u=r(()=>n.call(i&&i.instances[s],e,t,c));let h=Promise.resolve(u);n.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function _a(n,e,t,i,s=r=>r()){const r=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(kp(l)){const u=(l.__vccOpts||l)[e];u&&r.push(ti(u,t,i,o,a,s))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=D_(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&ti(p,t,i,o,a,s)()}))}}return r}function Vu(n){const e=tn(Ko),t=tn(Xl),i=Zt(()=>{const l=cs(n.to);return e.resolve(l)}),s=Zt(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(_s.bind(null,u));if(d>-1)return d;const p=Uu(l[c-2]);return c>1&&Uu(u)===p&&h[h.length-1].path!==p?h.findIndex(_s.bind(null,l[c-2])):d}),r=Zt(()=>s.value>-1&&z0(t.params,i.value.params)),o=Zt(()=>s.value>-1&&s.value===t.matched.length-1&&Fp(t.params,i.value.params));function a(l={}){if(L0(l)){const c=e[cs(n.replace)?"replace":"push"](cs(n.to)).catch(tr);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:Zt(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}function I0(n){return n.length===1?n[0]:n}const B0=Qd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Vu,setup(n,{slots:e}){const t=jo(Vu(n)),{options:i}=tn(Ko),s=Zt(()=>({[ju(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[ju(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&I0(e.default(t));return n.custom?r:Ap("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),O0=B0;function L0(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function z0(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!nn(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Uu(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const ju=(n,e,t)=>n??e??t,F0=Qd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=tn(rl),s=Zt(()=>n.route||i.value),r=tn(Nu,0),o=Zt(()=>{let c=cs(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Zt(()=>s.value.matched[o.value]);ro(Nu,Zt(()=>o.value+1)),ro(k0,a),ro(rl,s);const l=Zv();return oo(()=>[l.value,a.value,n.name],([c,u,h],[d,p,m])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!_s(u,p)||!d)&&(u.enterCallbacks[h]||[]).forEach(f=>f(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,h=a.value,d=h&&h.components[u];if(!d)return Hu(t.default,{Component:d,route:c});const p=h.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=Ap(d,we({},m,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Hu(t.default,{Component:v,route:c})||v}}});function Hu(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const D0=F0;function yT(n){const e=E0(n.routes,n),t=n.parseQuery||A0,i=n.stringifyQuery||Du,s=n.history,r=Bs(),o=Bs(),a=Bs(),l=Qv(Wn);let c=Wn;is&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=va.bind(null,q=>""+q),h=va.bind(null,Z_),d=va.bind(null,hr);function p(q,j){let y,A;return Np(q)?(y=e.getRecordMatcher(q),A=j):A=q,e.addRoute(A,y)}function m(q){const j=e.getRecordMatcher(q);j&&e.removeRoute(j)}function f(){return e.getRoutes().map(q=>q.record)}function v(q){return!!e.getRecordMatcher(q)}function C(q,j){if(j=we({},j||l.value),typeof q=="string"){const O=ga(t,q,j.path),V=e.resolve({path:O.path},j),H=s.createHref(O.fullPath);return we(O,V,{params:d(V.params),hash:hr(O.hash),redirectedFrom:void 0,href:H})}let y;if(q.path!=null)y=we({},q,{path:ga(t,q.path,j.path).path});else{const O=we({},q.params);for(const V in O)O[V]==null&&delete O[V];y=we({},q,{params:h(O)}),j.params=h(j.params)}const A=e.resolve(y,j),F=q.hash||"";A.params=u(d(A.params));const S=e0(i,we({},q,{hash:K_(F),path:A.path})),M=s.createHref(S);return we({fullPath:S,hash:F,query:i===Du?R0(q.query):q.query||{}},A,{redirectedFrom:void 0,href:M})}function g(q){return typeof q=="string"?ga(t,q,l.value.path):we({},q)}function E(q,j){if(c!==q)return bs(8,{from:j,to:q})}function T(q){return R(q)}function k(q){return T(we(g(q),{replace:!0}))}function P(q){const j=q.matched[q.matched.length-1];if(j&&j.redirect){const{redirect:y}=j;let A=typeof y=="function"?y(q):y;return typeof A=="string"&&(A=A.includes("?")||A.includes("#")?A=g(A):{path:A},A.params={}),we({query:q.query,hash:q.hash,params:A.path!=null?{}:q.params},A)}}function R(q,j){const y=c=C(q),A=l.value,F=q.state,S=q.force,M=q.replace===!0,O=P(y);if(O)return R(we(g(O),{state:typeof O=="object"?we({},F,O.state):F,force:S,replace:M}),j||y);const V=y;V.redirectedFrom=j;let H;return!S&&t0(i,A,y)&&(H=bs(16,{to:V,from:A}),oe(A,A,!0,!1)),(H?Promise.resolve(H):b(V,A)).catch(G=>En(G)?En(G,2)?G:ne(G):$(G,V,A)).then(G=>{if(G){if(En(G,2))return R(we({replace:M},g(G.to),{state:typeof G.to=="object"?we({},F,G.to.state):F,force:S}),j||V)}else G=B(V,A,!0,M,F);return I(V,A,G),G})}function _(q,j){const y=E(q,j);return y?Promise.reject(y):Promise.resolve()}function w(q){const j=Ee.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(q):q()}function b(q,j){let y;const[A,F,S]=N0(q,j);y=_a(A.reverse(),"beforeRouteLeave",q,j);for(const O of A)O.leaveGuards.forEach(V=>{y.push(ti(V,q,j))});const M=_.bind(null,q,j);return y.push(M),Fe(y).then(()=>{y=[];for(const O of r.list())y.push(ti(O,q,j));return y.push(M),Fe(y)}).then(()=>{y=_a(F,"beforeRouteUpdate",q,j);for(const O of F)O.updateGuards.forEach(V=>{y.push(ti(V,q,j))});return y.push(M),Fe(y)}).then(()=>{y=[];for(const O of S)if(O.beforeEnter)if(nn(O.beforeEnter))for(const V of O.beforeEnter)y.push(ti(V,q,j));else y.push(ti(O.beforeEnter,q,j));return y.push(M),Fe(y)}).then(()=>(q.matched.forEach(O=>O.enterCallbacks={}),y=_a(S,"beforeRouteEnter",q,j,w),y.push(M),Fe(y))).then(()=>{y=[];for(const O of o.list())y.push(ti(O,q,j));return y.push(M),Fe(y)}).catch(O=>En(O,8)?O:Promise.reject(O))}function I(q,j,y){a.list().forEach(A=>w(()=>A(q,j,y)))}function B(q,j,y,A,F){const S=E(q,j);if(S)return S;const M=j===Wn,O=is?history.state:{};y&&(A||M?s.replace(q.fullPath,we({scroll:M&&O&&O.scroll},F)):s.push(q.fullPath,F)),l.value=q,oe(q,j,y,M),ne()}let z;function D(){z||(z=s.listen((q,j,y)=>{if(!ze.listening)return;const A=C(q),F=P(A);if(F){R(we(F,{replace:!0,force:!0}),A).catch(tr);return}c=A;const S=l.value;is&&c0(Au(S.fullPath,y.delta),$o()),b(A,S).catch(M=>En(M,12)?M:En(M,2)?(R(we(g(M.to),{force:!0}),A).then(O=>{En(O,20)&&!y.delta&&y.type===dr.pop&&s.go(-1,!1)}).catch(tr),Promise.reject()):(y.delta&&s.go(-y.delta,!1),$(M,A,S))).then(M=>{M=M||B(A,S,!1),M&&(y.delta&&!En(M,8)?s.go(-y.delta,!1):y.type===dr.pop&&En(M,20)&&s.go(-1,!1)),I(A,S,M)}).catch(tr)}))}let N=Bs(),L=Bs(),U;function $(q,j,y){ne(q);const A=L.list();return A.length?A.forEach(F=>F(q,j,y)):console.error(q),Promise.reject(q)}function Z(){return U&&l.value!==Wn?Promise.resolve():new Promise((q,j)=>{N.add([q,j])})}function ne(q){return U||(U=!q,D(),N.list().forEach(([j,y])=>q?y(q):j()),N.reset()),q}function oe(q,j,y,A){const{scrollBehavior:F}=n;if(!is||!F)return Promise.resolve();const S=!y&&u0(Au(q.fullPath,0))||(A||!y)&&history.state&&history.state.scroll||null;return $d().then(()=>F(q,j,S)).then(M=>M&&l0(M)).catch(M=>$(M,q,j))}const J=q=>s.go(q);let Ie;const Ee=new Set,ze={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:f,resolve:C,options:n,push:T,replace:k,go:J,back:()=>J(-1),forward:()=>J(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:L.add,isReady:Z,install(q){const j=this;q.component("RouterLink",O0),q.component("RouterView",D0),q.config.globalProperties.$router=j,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>cs(l)}),is&&!Ie&&l.value===Wn&&(Ie=!0,T(s.location).catch(F=>{}));const y={};for(const F in Wn)Object.defineProperty(y,F,{get:()=>l.value[F],enumerable:!0});q.provide(Ko,j),q.provide(Xl,jd(y)),q.provide(rl,l);const A=q.unmount;Ee.add(q),q.unmount=function(){Ee.delete(q),Ee.size<1&&(c=Wn,z&&z(),z=null,l.value=Wn,Ie=!1,U=!1),A()}}};function Fe(q){return q.reduce((j,y)=>j.then(()=>w(y)),Promise.resolve())}return ze}function N0(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(n.matched.find(c=>_s(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>_s(c,l))||s.push(l))}return[t,i,s]}function xT(){return tn(Ko)}function CT(n){return tn(Xl)}(function(e,t){var i=t.documentElement,s=e.devicePixelRatio||1;function r(){t.body?t.body.style.fontSize=12*s+"px":t.addEventListener("DOMContentLoaded",r)}r();function o(){var c=i.clientWidth/10;i.style.fontSize=c+"px"}if(o(),e.addEventListener("resize",o),e.addEventListener("pageshow",function(c){c.persisted&&o()}),s>=2){var a=t.createElement("body"),l=t.createElement("div");l.style.border=".5px solid transparent",a.appendChild(l),i.appendChild(a),l.offsetHeight===1&&i.classList.add("hairlines"),i.removeChild(a)}})(window,document);/**
 * postprocessing v6.36.4 build Tue Nov 05 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rschen
 * @license Zlib
 */var ba=1/1e3,V0=1e3,U0=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*ba}get fixedDelta(){return this._fixedDelta*ba}set fixedDelta(n){this._fixedDelta=n*V0}get elapsed(){return this._elapsed*ba}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},j0=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new so;return t.setAttribute("position",new Kc(n,3)),t.setAttribute("uv",new Kc(e,2)),t})(),sn=class ol{static get fullscreenGeometry(){return j0}constructor(e="Pass",t=new $c,i=new hv){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Rn(ol.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new $c),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Lo){}render(e,t,i,s,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof mi||t instanceof _d||t instanceof bd||t instanceof ol)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},H0=class extends sn{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,s){const r=n.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},G0=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Hp="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Gp=class extends qi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Pe(null),opacity:new Pe(1)},blending:Ps,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:G0,vertexShader:Hp})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},q0=class extends sn{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Gp,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new mi(1,1,{minFilter:mo,magFilter:mo,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Fi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===at&&(this.renderTarget.texture.colorSpace=at))}},Gu=new fv,qp=class extends sn{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,s){const r=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=r!==null,c=o>=0;l?(n.getClearColor(Gu),n.setClearColor(r,c?o:a)):c&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(Gu,a):c&&n.setClearAlpha(a)}},W0=class extends sn{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new qp(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,s){const r=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.stencil.setFunc(r.ALWAYS,u,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,e),c.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(r.EQUAL,1,4294967295),o.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.stencil.setLocked(!0)}},ET=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new q0,this.depthTexture=null,this.passes=[],this.timer=new U0,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new wt),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Fi&&n.outputColorSpace===at&&(this.inputBuffer.texture.colorSpace=at,this.outputBuffer.texture.colorSpace=at,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new av;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=lv,n.type=cv):n.type=uv,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const s=this.renderer,r=s===null?new wt:s.getDrawingBufferSize(new wt),o={minFilter:mo,magFilter:mo,stencilBuffer:e,depthBuffer:n,type:t},a=new mi(r.width,r.height,o);return i>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=i),t===Fi&&s!==null&&s.outputColorSpace===at&&(a.texture.colorSpace=at),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new wt),r=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,r,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(n of t)n.setDepthTexture(a)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(a,l)=>a||l.needsDepthTexture;e.reduce(r,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,r=!1,o,a,l;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(e,i,s,n,r),c.needsSwap&&(r&&(t.renderToScreen=c.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,i,s,n,r),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=s,s=l),c instanceof W0?r=!0:c instanceof H0&&(r=!1))}setSize(n,e,t){const i=this.renderer,s=i.getSize(new wt);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&i.setSize(n,e,t);const r=i.getDrawingBufferSize(new wt);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const o of this.passes)o.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),sn.fullscreenGeometry.dispose()}},ki={NONE:0,DEPTH:1,CONVOLUTION:2},_e={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},$0=class{constructor(){this.shaderParts=new Map([[_e.FRAGMENT_HEAD,null],[_e.FRAGMENT_MAIN_UV,null],[_e.FRAGMENT_MAIN_IMAGE,null],[_e.VERTEX_HEAD,null],[_e.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ki.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=md}},wa=!1,qu=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Gr:t=this.materialsFlatShadedDoubleSide;break;case Hr:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Gr:t=this.materialsDoubleSide;break;case Hr:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof qi))return n.clone();const e=n.uniforms,t=new Map;for(const s in e){const r=e[s].value;r.isRenderTargetTexture&&(e[s].value=null,t.set(s,r))}const i=n.clone();for(const s of t)e[s[0]].value=s[1],i.uniforms[s[0]].value=s[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=dv;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Hr,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Gr,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Hr,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Gr,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,wa){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return wa}static set workaroundEnabled(n){wa=n}},$n=-1,fn=class extends Rl{constructor(n,e=$n,t=$n,i=1){super(),this.resizable=n,this.baseSize=new wt(1,1),this.preferredSize=new wt(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new wt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==$n?t.width=e.width:e.height!==$n?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==$n?t.height=e.height:e.width!==$n?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar($n),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return $n}},de={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},K0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Y0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",X0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Z0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Q0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",J0="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",eb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",tb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",nb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",ib="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",sb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",rb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",ob="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",ab="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",lb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",cb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",ub="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",hb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",db="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",pb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",fb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",mb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",vb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",gb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",_b="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",bb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",wb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",yb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",xb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Cb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Eb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Sb="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Pb=new Map([[de.ADD,K0],[de.ALPHA,Y0],[de.AVERAGE,X0],[de.COLOR,Z0],[de.COLOR_BURN,Q0],[de.COLOR_DODGE,J0],[de.DARKEN,eb],[de.DIFFERENCE,tb],[de.DIVIDE,nb],[de.DST,null],[de.EXCLUSION,ib],[de.HARD_LIGHT,sb],[de.HARD_MIX,rb],[de.HUE,ob],[de.INVERT,ab],[de.INVERT_RGB,lb],[de.LIGHTEN,cb],[de.LINEAR_BURN,ub],[de.LINEAR_DODGE,hb],[de.LINEAR_LIGHT,db],[de.LUMINOSITY,pb],[de.MULTIPLY,fb],[de.NEGATION,mb],[de.NORMAL,vb],[de.OVERLAY,gb],[de.PIN_LIGHT,_b],[de.REFLECT,bb],[de.SATURATION,wb],[de.SCREEN,yb],[de.SOFT_LIGHT,xb],[de.SRC,Cb],[de.SUBTRACT,Eb],[de.VIVID_LIGHT,Sb]]),Tb=class extends Rl{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new Pe(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return Pb.get(this.blendFunction)}},Zl={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Mb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Ab="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Rb=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],kb=class extends qi{constructor(n=new Yc){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Pe(null),texelSize:new Pe(new Yc),scale:new Pe(1),kernel:new Pe(0)},blending:Ps,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Mb,vertexShader:Ab}),this.setTexelSize(n.x,n.y),this.kernelSize=Zl.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return Rb[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},Ib=class extends sn{constructor({kernelSize:n=Zl.MEDIUM,resolutionScale:e=.5,width:t=fn.AUTO_SIZE,height:i=fn.AUTO_SIZE,resolutionX:s=t,resolutionY:r=i}={}){super("KawaseBlurPass"),this.renderTargetA=new mi(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new fn(this,s,r,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new kb,this._blurMaterial.kernelSize=n,this.copyMaterial=new Gp}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const r=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let h=e;this.fullscreenMaterial=c;for(let d=0,p=u.length;d<p;++d){const m=d&1?l:a;c.kernel=u[d],c.inputBuffer=h.texture,n.setRenderTarget(m),n.render(r,o),h=m}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(r,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Fi?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===at&&(this.renderTargetA.texture.colorSpace=at,this.renderTargetB.texture.colorSpace=at))}static get AUTO_SIZE(){return fn.AUTO_SIZE}},Bb=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Ob=class extends qi{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:gd.replace(/\D+/g,"")},uniforms:{inputBuffer:new Pe(null),threshold:new Pe(0),smoothing:new Pe(1),range:new Pe(null)},blending:Ps,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Bb,vertexShader:Hp}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},Lb=class extends sn{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:s=fn.AUTO_SIZE,height:r=fn.AUTO_SIZE,resolutionX:o=s,resolutionY:a=r}={}){super("LuminancePass"),this.fullscreenMaterial=new Ob(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new mi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new fn(this,o,a,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,s){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Fi&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},zb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Fb="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Db=class extends qi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Pe(null),texelSize:new Pe(new wt)},blending:Ps,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:zb,vertexShader:Fb})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Nb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Vb="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Ub=class extends qi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Pe(null),supportBuffer:new Pe(null),texelSize:new Pe(new wt),radius:new Pe(.85)},blending:Ps,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Nb,vertexShader:Vb})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},jb=class extends sn{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new mi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Db,this.upsamplingMaterial=new Ub,this.resolution=new wt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const s=e.clone();s.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,s){const{scene:r,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let h=e;this.fullscreenMaterial=a;for(let d=0,p=c.length;d<p;++d){const m=c[d];a.setSize(h.width,h.height),a.inputBuffer=h.texture,n.setRenderTarget(m),n.render(r,o),h=m}this.fullscreenMaterial=l;for(let d=u.length-1;d>=0;--d){const p=u[d];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=c[d].texture,n.setRenderTarget(p),n.render(r,o),h=p}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,s=t.height;for(let r=0,o=this.downsamplingMipmaps.length;r<o;++r)i=Math.round(i*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(i,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(i,s)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of i)s.texture.type=t;if(t!==Fi)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===at)for(const s of i)s.texture.colorSpace=at}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},Hb=class extends Rl{constructor(n,e,{attributes:t=ki.NONE,blendFunction:i=de.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=s,this.uniforms=r,this.extensions=o,this.blendMode=new Tb(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=md,this._outputColorSpace=vd}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Lo){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof mi||e instanceof _d||e instanceof bd||e instanceof sn)&&this[n].dispose()}}},Gb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,ST=class extends Hb{constructor({blendFunction:n=de.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:s=1,radius:r=.85,levels:o=8,kernelSize:a=Zl.LARGE,resolutionScale:l=.5,width:c=fn.AUTO_SIZE,height:u=fn.AUTO_SIZE,resolutionX:h=c,resolutionY:d=u}={}){super("BloomEffect",Gb,{blendFunction:n,uniforms:new Map([["map",new Pe(null)],["intensity",new Pe(s)]])}),this.renderTarget=new mi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Ib({kernelSize:a}),this.luminancePass=new Lb({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new jb,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new fn(this,h,d,l);p.addEventListener("change",m=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,s.renderTarget):this.blurPass.render(n,s.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===at&&(this.renderTarget.texture.colorSpace=at))}},PT=class extends sn{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new qp,this.overrideMaterialManager=t===null?null:new qu(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new qu(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,s){const r=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=r.background,u=n.shadowMap.autoUpdate,h=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,r,o):n.render(r,o),o.layers.mask=l,r.background=c,n.shadowMap.autoUpdate=u}},qb=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Wb="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",$b=class extends qi{constructor(n,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:gd.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Pe(null),depthBuffer:new Pe(null),resolution:new Pe(new wt),texelSize:new Pe(new wt),cameraNear:new Pe(.3),cameraFar:new Pe(1e3),aspect:new Pe(1),time:new Pe(0)},blending:Ps,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Lo){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=qb.replace(_e.FRAGMENT_HEAD,n.get(_e.FRAGMENT_HEAD)||"").replace(_e.FRAGMENT_MAIN_UV,n.get(_e.FRAGMENT_MAIN_UV)||"").replace(_e.FRAGMENT_MAIN_IMAGE,n.get(_e.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Wb.replace(_e.VERTEX_HEAD,n.get(_e.VERTEX_HEAD)||"").replace(_e.VERTEX_MAIN_SUPPORT,n.get(_e.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof pv?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return _e}};function Wu(n,e,t){for(const i of e){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),r=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(r,s))}}function Kb(n,e,t){let i=e.getFragmentShader(),s=e.getVertexShader();const r=i!==void 0&&/mainImage/.test(i),o=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&ki.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!r&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let c=l.get(_e.FRAGMENT_HEAD)||"",u=l.get(_e.FRAGMENT_MAIN_UV)||"",h=l.get(_e.FRAGMENT_MAIN_IMAGE)||"",d=l.get(_e.VERTEX_HEAD)||"",p=l.get(_e.VERTEX_MAIN_SUPPORT)||"";const m=new Set,f=new Set;if(o&&(u+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const g=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);p+=`	${n}MainSupport(`,p+=g?`vUv);
`:`);
`;for(const E of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const T of E[1].split(/\s*,\s*/))t.varyings.add(T),m.add(T),f.add(T);for(const E of s.matchAll(a))f.add(E[1])}for(const g of i.matchAll(a))f.add(g[1]);for(const g of e.defines.keys())f.add(g.replace(/\([\w\s,]*\)/g,""));for(const g of e.uniforms.keys())f.add(g);f.delete("while"),f.delete("for"),f.delete("if"),e.uniforms.forEach((g,E)=>t.uniforms.set(n+E.charAt(0).toUpperCase()+E.slice(1),g)),e.defines.forEach((g,E)=>t.defines.set(n+E.charAt(0).toUpperCase()+E.slice(1),g));const v=new Map([["fragment",i],["vertex",s]]);Wu(n,f,t.defines),Wu(n,f,v),i=v.get("fragment"),s=v.get("vertex");const C=e.blendMode;if(t.blendModes.set(C.blendFunction,C),r){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(h+=e.inputColorSpace===at?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==vd?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const g=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${n}MainImage(color0, UV, `,t.attributes&ki.DEPTH&&g.test(i)&&(h+="depth, ",t.readDepth=!0),h+=`color1);
	`;const E=n+"BlendOpacity";t.uniforms.set(E,C.opacity),h+=`color0 = blend${C.blendFunction}(color0, color1, ${E});

	`,c+=`uniform float ${E};

`}if(c+=i+`
`,s!==null&&(d+=s+`
`),l.set(_e.FRAGMENT_HEAD,c),l.set(_e.FRAGMENT_MAIN_UV,u),l.set(_e.FRAGMENT_MAIN_IMAGE,h),l.set(_e.VERTEX_HEAD,d),l.set(_e.VERTEX_MAIN_SUPPORT,p),e.extensions!==null)for(const g of e.extensions)t.extensions.add(g)}}var TT=class extends sn{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new $b(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new $0;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===de.DST)n.attributes|=o.getAttributes()&ki.DEPTH;else{if(n.attributes&o.getAttributes()&ki.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);Kb("e"+e++,o,n)}let t=n.shaderParts.get(_e.FRAGMENT_HEAD),i=n.shaderParts.get(_e.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(_e.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(r,`blend${o.blendFunction}`)+`
`;n.attributes&ki.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===at&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(_e.FRAGMENT_HEAD,t),n.shaderParts.set(_e.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(_e.FRAGMENT_MAIN_UV,s);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Lo){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,s){for(const r of this.effects)r.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Fi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}};function Rr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Kr(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wp={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,s,r){function o(c,u){if(!s[c]){if(!i[c]){var h=typeof Kr=="function"&&Kr;if(!u&&h)return h(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}u=s[c]={exports:{}},i[c][0].call(u.exports,function(d){var p=i[c][1][d];return o(p||d)},u,u.exports,t,i,s,r)}return s[c].exports}for(var a=typeof Kr=="function"&&Kr,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var m=t("crypto");function f(P,R){R=g(P,R);var _;return(_=R.algorithm!=="passthrough"?m.createHash(R.algorithm):new k).write===void 0&&(_.write=_.update,_.end=_.update),T(R,_).dispatch(P),_.update||_.end(""),_.digest?_.digest(R.encoding==="buffer"?void 0:R.encoding):(P=_.read(),R.encoding!=="buffer"?P.toString(R.encoding):P)}(s=i.exports=f).sha1=function(P){return f(P)},s.keys=function(P){return f(P,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(P){return f(P,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(P){return f(P,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=m.getHashes?m.getHashes().slice():["sha1","md5"],C=(v.push("passthrough"),["buffer","hex","binary","base64"]);function g(P,R){var _={};if(_.algorithm=(R=R||{}).algorithm||"sha1",_.encoding=R.encoding||"hex",_.excludeValues=!!R.excludeValues,_.algorithm=_.algorithm.toLowerCase(),_.encoding=_.encoding.toLowerCase(),_.ignoreUnknown=R.ignoreUnknown===!0,_.respectType=R.respectType!==!1,_.respectFunctionNames=R.respectFunctionNames!==!1,_.respectFunctionProperties=R.respectFunctionProperties!==!1,_.unorderedArrays=R.unorderedArrays===!0,_.unorderedSets=R.unorderedSets!==!1,_.unorderedObjects=R.unorderedObjects!==!1,_.replacer=R.replacer||void 0,_.excludeKeys=R.excludeKeys||void 0,P===void 0)throw new Error("Object argument required.");for(var w=0;w<v.length;++w)v[w].toLowerCase()===_.algorithm.toLowerCase()&&(_.algorithm=v[w]);if(v.indexOf(_.algorithm)===-1)throw new Error('Algorithm "'+_.algorithm+'"  not supported. supported values: '+v.join(", "));if(C.indexOf(_.encoding)===-1&&_.algorithm!=="passthrough")throw new Error('Encoding "'+_.encoding+'"  not supported. supported values: '+C.join(", "));return _}function E(P){if(typeof P=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(P))!=null}function T(P,R,_){_=_||[];function w(b){return R.update?R.update(b,"utf8"):R.write(b,"utf8")}return{dispatch:function(b){return this["_"+((b=P.replacer?P.replacer(b):b)===null?"null":typeof b)](b)},_object:function(b){var I,B=Object.prototype.toString.call(b),z=/\[object (.*)\]/i.exec(B);if(z=(z=z?z[1]:"unknown:["+B+"]").toLowerCase(),0<=(B=_.indexOf(b)))return this.dispatch("[CIRCULAR:"+B+"]");if(_.push(b),a!==void 0&&a.isBuffer&&a.isBuffer(b))return w("buffer:"),w(b);if(z==="object"||z==="function"||z==="asyncfunction")return B=Object.keys(b),P.unorderedObjects&&(B=B.sort()),P.respectType===!1||E(b)||B.splice(0,0,"prototype","__proto__","constructor"),P.excludeKeys&&(B=B.filter(function(D){return!P.excludeKeys(D)})),w("object:"+B.length+":"),I=this,B.forEach(function(D){I.dispatch(D),w(":"),P.excludeValues||I.dispatch(b[D]),w(",")});if(!this["_"+z]){if(P.ignoreUnknown)return w("["+z+"]");throw new Error('Unknown object type "'+z+'"')}this["_"+z](b)},_array:function(b,D){D=D!==void 0?D:P.unorderedArrays!==!1;var B=this;if(w("array:"+b.length+":"),!D||b.length<=1)return b.forEach(function(N){return B.dispatch(N)});var z=[],D=b.map(function(N){var L=new k,U=_.slice();return T(P,L,U).dispatch(N),z=z.concat(U.slice(_.length)),L.read().toString()});return _=_.concat(z),D.sort(),this._array(D,!1)},_date:function(b){return w("date:"+b.toJSON())},_symbol:function(b){return w("symbol:"+b.toString())},_error:function(b){return w("error:"+b.toString())},_boolean:function(b){return w("bool:"+b.toString())},_string:function(b){w("string:"+b.length+":"),w(b.toString())},_function:function(b){w("fn:"),E(b)?this.dispatch("[native]"):this.dispatch(b.toString()),P.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(b.name)),P.respectFunctionProperties&&this._object(b)},_number:function(b){return w("number:"+b.toString())},_xml:function(b){return w("xml:"+b.toString())},_null:function(){return w("Null")},_undefined:function(){return w("Undefined")},_regexp:function(b){return w("regex:"+b.toString())},_uint8array:function(b){return w("uint8array:"),this.dispatch(Array.prototype.slice.call(b))},_uint8clampedarray:function(b){return w("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(b))},_int8array:function(b){return w("int8array:"),this.dispatch(Array.prototype.slice.call(b))},_uint16array:function(b){return w("uint16array:"),this.dispatch(Array.prototype.slice.call(b))},_int16array:function(b){return w("int16array:"),this.dispatch(Array.prototype.slice.call(b))},_uint32array:function(b){return w("uint32array:"),this.dispatch(Array.prototype.slice.call(b))},_int32array:function(b){return w("int32array:"),this.dispatch(Array.prototype.slice.call(b))},_float32array:function(b){return w("float32array:"),this.dispatch(Array.prototype.slice.call(b))},_float64array:function(b){return w("float64array:"),this.dispatch(Array.prototype.slice.call(b))},_arraybuffer:function(b){return w("arraybuffer:"),this.dispatch(new Uint8Array(b))},_url:function(b){return w("url:"+b.toString())},_map:function(b){return w("map:"),b=Array.from(b),this._array(b,P.unorderedSets!==!1)},_set:function(b){return w("set:"),b=Array.from(b),this._array(b,P.unorderedSets!==!1)},_file:function(b){return w("file:"),this.dispatch([b.name,b.size,b.type,b.lastModfied])},_blob:function(){if(P.ignoreUnknown)return w("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return w("domwindow")},_bigint:function(b){return w("bigint:"+b.toString())},_process:function(){return w("process")},_timer:function(){return w("timer")},_pipe:function(){return w("pipe")},_tcp:function(){return w("tcp")},_udp:function(){return w("udp")},_tty:function(){return w("tty")},_statwatcher:function(){return w("statwatcher")},_securecontext:function(){return w("securecontext")},_connection:function(){return w("connection")},_zlib:function(){return w("zlib")},_context:function(){return w("context")},_nodescript:function(){return w("nodescript")},_httpparser:function(){return w("httpparser")},_dataview:function(){return w("dataview")},_signal:function(){return w("signal")},_fsevent:function(){return w("fsevent")},_tlswrap:function(){return w("tlswrap")}}}function k(){return{buf:"",write:function(P){this.buf+=P},end:function(P){this.buf+=P},read:function(){return this.buf}}}s.writeToStream=function(P,R,_){return _===void 0&&(_=R,R={}),T(R=g(P,R),_).dispatch(P)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){(function(m){var f=typeof Uint8Array<"u"?Uint8Array:Array,v=43,C=47,g=48,E=97,T=65,k=45,P=95;function R(_){return _=_.charCodeAt(0),_===v||_===k?62:_===C||_===P?63:_<g?-1:_<g+10?_-g+26+26:_<T+26?_-T:_<E+26?_-E+26:void 0}m.toByteArray=function(_){var w,b;if(0<_.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var I=_.length,I=_.charAt(I-2)==="="?2:_.charAt(I-1)==="="?1:0,B=new f(3*_.length/4-I),z=0<I?_.length-4:_.length,D=0;function N(L){B[D++]=L}for(w=0;w<z;w+=4,0)N((16711680&(b=R(_.charAt(w))<<18|R(_.charAt(w+1))<<12|R(_.charAt(w+2))<<6|R(_.charAt(w+3))))>>16),N((65280&b)>>8),N(255&b);return I==2?N(255&(b=R(_.charAt(w))<<2|R(_.charAt(w+1))>>4)):I==1&&(N((b=R(_.charAt(w))<<10|R(_.charAt(w+1))<<4|R(_.charAt(w+2))>>2)>>8&255),N(255&b)),B},m.fromByteArray=function(_){var w,b,I,B,z=_.length%3,D="";function N(L){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(L)}for(w=0,I=_.length-z;w<I;w+=3)b=(_[w]<<16)+(_[w+1]<<8)+_[w+2],D+=N((B=b)>>18&63)+N(B>>12&63)+N(B>>6&63)+N(63&B);switch(z){case 1:D=(D+=N((b=_[_.length-1])>>2))+N(b<<4&63)+"==";break;case 2:D=(D=(D+=N((b=(_[_.length-2]<<8)+_[_.length-1])>>10))+N(b>>4&63))+N(b<<2&63)+"="}return D}})(s===void 0?this.base64js={}:s)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,i,s){(function(r,o,v,l,c,u,h,d,p){var m=t("base64-js"),f=t("ieee754");function v(y,A,F){if(!(this instanceof v))return new v(y,A,F);var S,M,O,V,H=typeof y;if(A==="base64"&&H=="string")for(y=(V=y).trim?V.trim():V.replace(/^\s+|\s+$/g,"");y.length%4!=0;)y+="=";if(H=="number")S=$(y);else if(H=="string")S=v.byteLength(y,A);else{if(H!="object")throw new Error("First argument needs to be a number, array or string.");S=$(y.length)}if(v._useTypedArrays?M=v._augment(new Uint8Array(S)):((M=this).length=S,M._isBuffer=!0),v._useTypedArrays&&typeof y.byteLength=="number")M._set(y);else if(Z(V=y)||v.isBuffer(V)||V&&typeof V=="object"&&typeof V.length=="number")for(O=0;O<S;O++)v.isBuffer(y)?M[O]=y.readUInt8(O):M[O]=y[O];else if(H=="string")M.write(y,0,A);else if(H=="number"&&!v._useTypedArrays&&!F)for(O=0;O<S;O++)M[O]=0;return M}function C(y,A,F,S){return v._charsWritten=Ie(function(M){for(var O=[],V=0;V<M.length;V++)O.push(255&M.charCodeAt(V));return O}(A),y,F,S)}function g(y,A,F,S){return v._charsWritten=Ie(function(M){for(var O,V,H=[],G=0;G<M.length;G++)V=M.charCodeAt(G),O=V>>8,V=V%256,H.push(V),H.push(O);return H}(A),y,F,S)}function E(y,A,F){var S="";F=Math.min(y.length,F);for(var M=A;M<F;M++)S+=String.fromCharCode(y[M]);return S}function T(y,A,F,O){O||(j(typeof F=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+1<y.length,"Trying to read beyond buffer length"));var M,O=y.length;if(!(O<=A))return F?(M=y[A],A+1<O&&(M|=y[A+1]<<8)):(M=y[A]<<8,A+1<O&&(M|=y[A+1])),M}function k(y,A,F,O){O||(j(typeof F=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+3<y.length,"Trying to read beyond buffer length"));var M,O=y.length;if(!(O<=A))return F?(A+2<O&&(M=y[A+2]<<16),A+1<O&&(M|=y[A+1]<<8),M|=y[A],A+3<O&&(M+=y[A+3]<<24>>>0)):(A+1<O&&(M=y[A+1]<<16),A+2<O&&(M|=y[A+2]<<8),A+3<O&&(M|=y[A+3]),M+=y[A]<<24>>>0),M}function P(y,A,F,S){if(S||(j(typeof F=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+1<y.length,"Trying to read beyond buffer length")),!(y.length<=A))return S=T(y,A,F,!0),32768&S?-1*(65535-S+1):S}function R(y,A,F,S){if(S||(j(typeof F=="boolean","missing or invalid endian"),j(A!=null,"missing offset"),j(A+3<y.length,"Trying to read beyond buffer length")),!(y.length<=A))return S=k(y,A,F,!0),2147483648&S?-1*(4294967295-S+1):S}function _(y,A,F,S){return S||(j(typeof F=="boolean","missing or invalid endian"),j(A+3<y.length,"Trying to read beyond buffer length")),f.read(y,A,F,23,4)}function w(y,A,F,S){return S||(j(typeof F=="boolean","missing or invalid endian"),j(A+7<y.length,"Trying to read beyond buffer length")),f.read(y,A,F,52,8)}function b(y,A,F,S,M){if(M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(F!=null,"missing offset"),j(F+1<y.length,"trying to write beyond buffer length"),ze(A,65535)),M=y.length,!(M<=F))for(var O=0,V=Math.min(M-F,2);O<V;O++)y[F+O]=(A&255<<8*(S?O:1-O))>>>8*(S?O:1-O)}function I(y,A,F,S,M){if(M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(F!=null,"missing offset"),j(F+3<y.length,"trying to write beyond buffer length"),ze(A,4294967295)),M=y.length,!(M<=F))for(var O=0,V=Math.min(M-F,4);O<V;O++)y[F+O]=A>>>8*(S?O:3-O)&255}function B(y,A,F,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(F!=null,"missing offset"),j(F+1<y.length,"Trying to write beyond buffer length"),Fe(A,32767,-32768)),y.length<=F||b(y,0<=A?A:65535+A+1,F,S,M)}function z(y,A,F,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(F!=null,"missing offset"),j(F+3<y.length,"Trying to write beyond buffer length"),Fe(A,2147483647,-2147483648)),y.length<=F||I(y,0<=A?A:4294967295+A+1,F,S,M)}function D(y,A,F,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(F!=null,"missing offset"),j(F+3<y.length,"Trying to write beyond buffer length"),q(A,34028234663852886e22,-34028234663852886e22)),y.length<=F||f.write(y,A,F,S,23,4)}function N(y,A,F,S,M){M||(j(A!=null,"missing value"),j(typeof S=="boolean","missing or invalid endian"),j(F!=null,"missing offset"),j(F+7<y.length,"Trying to write beyond buffer length"),q(A,17976931348623157e292,-17976931348623157e292)),y.length<=F||f.write(y,A,F,S,52,8)}s.Buffer=v,s.SlowBuffer=v,s.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var y=new ArrayBuffer(0),A=new Uint8Array(y);return A.foo=function(){return 42},A.foo()===42&&typeof A.subarray=="function"}catch{return!1}}(),v.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(y){return!(y==null||!y._isBuffer)},v.byteLength=function(y,A){var F;switch(y+="",A||"utf8"){case"hex":F=y.length/2;break;case"utf8":case"utf-8":F=oe(y).length;break;case"ascii":case"binary":case"raw":F=y.length;break;case"base64":F=J(y).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":F=2*y.length;break;default:throw new Error("Unknown encoding")}return F},v.concat=function(y,A){if(j(Z(y),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),y.length===0)return new v(0);if(y.length===1)return y[0];if(typeof A!="number")for(M=A=0;M<y.length;M++)A+=y[M].length;for(var F=new v(A),S=0,M=0;M<y.length;M++){var O=y[M];O.copy(F,S),S+=O.length}return F},v.prototype.write=function(y,A,F,S){isFinite(A)?isFinite(F)||(S=F,F=void 0):(G=S,S=A,A=F,F=G),A=Number(A)||0;var M,O,V,H,G=this.length-A;switch((!F||G<(F=Number(F)))&&(F=G),S=String(S||"utf8").toLowerCase()){case"hex":M=function(X,Y,K,W){K=Number(K)||0;var ee=X.length-K;(!W||ee<(W=Number(W)))&&(W=ee),j((ee=Y.length)%2==0,"Invalid hex string"),ee/2<W&&(W=ee/2);for(var Q=0;Q<W;Q++){var se=parseInt(Y.substr(2*Q,2),16);j(!isNaN(se),"Invalid hex string"),X[K+Q]=se}return v._charsWritten=2*Q,Q}(this,y,A,F);break;case"utf8":case"utf-8":O=this,V=A,H=F,M=v._charsWritten=Ie(oe(y),O,V,H);break;case"ascii":case"binary":M=C(this,y,A,F);break;case"base64":O=this,V=A,H=F,M=v._charsWritten=Ie(J(y),O,V,H);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":M=g(this,y,A,F);break;default:throw new Error("Unknown encoding")}return M},v.prototype.toString=function(y,A,F){var S,M,O,V,H=this;if(y=String(y||"utf8").toLowerCase(),A=Number(A)||0,(F=F!==void 0?Number(F):H.length)===A)return"";switch(y){case"hex":S=function(G,X,Y){var K=G.length;(!X||X<0)&&(X=0),(!Y||Y<0||K<Y)&&(Y=K);for(var W="",ee=X;ee<Y;ee++)W+=ne(G[ee]);return W}(H,A,F);break;case"utf8":case"utf-8":S=function(G,X,Y){var K="",W="";Y=Math.min(G.length,Y);for(var ee=X;ee<Y;ee++)G[ee]<=127?(K+=Ee(W)+String.fromCharCode(G[ee]),W=""):W+="%"+G[ee].toString(16);return K+Ee(W)}(H,A,F);break;case"ascii":case"binary":S=E(H,A,F);break;case"base64":M=H,V=F,S=(O=A)===0&&V===M.length?m.fromByteArray(M):m.fromByteArray(M.slice(O,V));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":S=function(G,X,Y){for(var K=G.slice(X,Y),W="",ee=0;ee<K.length;ee+=2)W+=String.fromCharCode(K[ee]+256*K[ee+1]);return W}(H,A,F);break;default:throw new Error("Unknown encoding")}return S},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(y,A,F,S){if(A=A||0,(S=S||S===0?S:this.length)!==(F=F||0)&&y.length!==0&&this.length!==0){j(F<=S,"sourceEnd < sourceStart"),j(0<=A&&A<y.length,"targetStart out of bounds"),j(0<=F&&F<this.length,"sourceStart out of bounds"),j(0<=S&&S<=this.length,"sourceEnd out of bounds"),S>this.length&&(S=this.length);var M=(S=y.length-A<S-F?y.length-A+F:S)-F;if(M<100||!v._useTypedArrays)for(var O=0;O<M;O++)y[O+A]=this[O+F];else y._set(this.subarray(F,F+M),A)}},v.prototype.slice=function(y,A){var F=this.length;if(y=U(y,F,0),A=U(A,F,F),v._useTypedArrays)return v._augment(this.subarray(y,A));for(var S=A-y,M=new v(S,void 0,!0),O=0;O<S;O++)M[O]=this[O+y];return M},v.prototype.get=function(y){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(y)},v.prototype.set=function(y,A){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(y,A)},v.prototype.readUInt8=function(y,A){if(A||(j(y!=null,"missing offset"),j(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return this[y]},v.prototype.readUInt16LE=function(y,A){return T(this,y,!0,A)},v.prototype.readUInt16BE=function(y,A){return T(this,y,!1,A)},v.prototype.readUInt32LE=function(y,A){return k(this,y,!0,A)},v.prototype.readUInt32BE=function(y,A){return k(this,y,!1,A)},v.prototype.readInt8=function(y,A){if(A||(j(y!=null,"missing offset"),j(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return 128&this[y]?-1*(255-this[y]+1):this[y]},v.prototype.readInt16LE=function(y,A){return P(this,y,!0,A)},v.prototype.readInt16BE=function(y,A){return P(this,y,!1,A)},v.prototype.readInt32LE=function(y,A){return R(this,y,!0,A)},v.prototype.readInt32BE=function(y,A){return R(this,y,!1,A)},v.prototype.readFloatLE=function(y,A){return _(this,y,!0,A)},v.prototype.readFloatBE=function(y,A){return _(this,y,!1,A)},v.prototype.readDoubleLE=function(y,A){return w(this,y,!0,A)},v.prototype.readDoubleBE=function(y,A){return w(this,y,!1,A)},v.prototype.writeUInt8=function(y,A,F){F||(j(y!=null,"missing value"),j(A!=null,"missing offset"),j(A<this.length,"trying to write beyond buffer length"),ze(y,255)),A>=this.length||(this[A]=y)},v.prototype.writeUInt16LE=function(y,A,F){b(this,y,A,!0,F)},v.prototype.writeUInt16BE=function(y,A,F){b(this,y,A,!1,F)},v.prototype.writeUInt32LE=function(y,A,F){I(this,y,A,!0,F)},v.prototype.writeUInt32BE=function(y,A,F){I(this,y,A,!1,F)},v.prototype.writeInt8=function(y,A,F){F||(j(y!=null,"missing value"),j(A!=null,"missing offset"),j(A<this.length,"Trying to write beyond buffer length"),Fe(y,127,-128)),A>=this.length||(0<=y?this.writeUInt8(y,A,F):this.writeUInt8(255+y+1,A,F))},v.prototype.writeInt16LE=function(y,A,F){B(this,y,A,!0,F)},v.prototype.writeInt16BE=function(y,A,F){B(this,y,A,!1,F)},v.prototype.writeInt32LE=function(y,A,F){z(this,y,A,!0,F)},v.prototype.writeInt32BE=function(y,A,F){z(this,y,A,!1,F)},v.prototype.writeFloatLE=function(y,A,F){D(this,y,A,!0,F)},v.prototype.writeFloatBE=function(y,A,F){D(this,y,A,!1,F)},v.prototype.writeDoubleLE=function(y,A,F){N(this,y,A,!0,F)},v.prototype.writeDoubleBE=function(y,A,F){N(this,y,A,!1,F)},v.prototype.fill=function(y,A,F){if(A=A||0,F=F||this.length,j(typeof(y=typeof(y=y||0)=="string"?y.charCodeAt(0):y)=="number"&&!isNaN(y),"value is not a number"),j(A<=F,"end < start"),F!==A&&this.length!==0){j(0<=A&&A<this.length,"start out of bounds"),j(0<=F&&F<=this.length,"end out of bounds");for(var S=A;S<F;S++)this[S]=y}},v.prototype.inspect=function(){for(var y=[],A=this.length,F=0;F<A;F++)if(y[F]=ne(this[F]),F===s.INSPECT_MAX_BYTES){y[F+1]="...";break}return"<Buffer "+y.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var y=new Uint8Array(this.length),A=0,F=y.length;A<F;A+=1)y[A]=this[A];return y.buffer};var L=v.prototype;function U(y,A,F){return typeof y!="number"?F:A<=(y=~~y)?A:0<=y||0<=(y+=A)?y:0}function $(y){return(y=~~Math.ceil(+y))<0?0:y}function Z(y){return(Array.isArray||function(A){return Object.prototype.toString.call(A)==="[object Array]"})(y)}function ne(y){return y<16?"0"+y.toString(16):y.toString(16)}function oe(y){for(var A=[],F=0;F<y.length;F++){var S=y.charCodeAt(F);if(S<=127)A.push(y.charCodeAt(F));else for(var M=F,O=(55296<=S&&S<=57343&&F++,encodeURIComponent(y.slice(M,F+1)).substr(1).split("%")),V=0;V<O.length;V++)A.push(parseInt(O[V],16))}return A}function J(y){return m.toByteArray(y)}function Ie(y,A,F,S){for(var M=0;M<S&&!(M+F>=A.length||M>=y.length);M++)A[M+F]=y[M];return M}function Ee(y){try{return decodeURIComponent(y)}catch{return""}}function ze(y,A){j(typeof y=="number","cannot write a non-number as a number"),j(0<=y,"specified a negative value for writing an unsigned value"),j(y<=A,"value is larger than maximum value for type"),j(Math.floor(y)===y,"value has a fractional component")}function Fe(y,A,F){j(typeof y=="number","cannot write a non-number as a number"),j(y<=A,"value larger than maximum allowed value"),j(F<=y,"value smaller than minimum allowed value"),j(Math.floor(y)===y,"value has a fractional component")}function q(y,A,F){j(typeof y=="number","cannot write a non-number as a number"),j(y<=A,"value larger than maximum allowed value"),j(F<=y,"value smaller than minimum allowed value")}function j(y,A){if(!y)throw new Error(A||"Failed assertion")}v._augment=function(y){return y._isBuffer=!0,y._get=y.get,y._set=y.set,y.get=L.get,y.set=L.set,y.write=L.write,y.toString=L.toString,y.toLocaleString=L.toString,y.toJSON=L.toJSON,y.copy=L.copy,y.slice=L.slice,y.readUInt8=L.readUInt8,y.readUInt16LE=L.readUInt16LE,y.readUInt16BE=L.readUInt16BE,y.readUInt32LE=L.readUInt32LE,y.readUInt32BE=L.readUInt32BE,y.readInt8=L.readInt8,y.readInt16LE=L.readInt16LE,y.readInt16BE=L.readInt16BE,y.readInt32LE=L.readInt32LE,y.readInt32BE=L.readInt32BE,y.readFloatLE=L.readFloatLE,y.readFloatBE=L.readFloatBE,y.readDoubleLE=L.readDoubleLE,y.readDoubleBE=L.readDoubleBE,y.writeUInt8=L.writeUInt8,y.writeUInt16LE=L.writeUInt16LE,y.writeUInt16BE=L.writeUInt16BE,y.writeUInt32LE=L.writeUInt32LE,y.writeUInt32BE=L.writeUInt32BE,y.writeInt8=L.writeInt8,y.writeInt16LE=L.writeInt16LE,y.writeInt16BE=L.writeInt16BE,y.writeInt32LE=L.writeInt32LE,y.writeInt32BE=L.writeInt32BE,y.writeFloatLE=L.writeFloatLE,y.writeFloatBE=L.writeFloatBE,y.writeDoubleLE=L.writeDoubleLE,y.writeDoubleBE=L.writeDoubleBE,y.fill=L.fill,y.inspect=L.inspect,y.toArrayBuffer=L.toArrayBuffer,y}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,i,s){(function(r,o,m,l,c,u,h,d,p){var m=t("buffer").Buffer,f=4,v=new m(f);v.fill(0),i.exports={hash:function(C,g,E,T){for(var k=g(function(b,I){b.length%f!=0&&(B=b.length+(f-b.length%f),b=m.concat([b,v],B));for(var B,z=[],D=I?b.readInt32BE:b.readInt32LE,N=0;N<b.length;N+=f)z.push(D.call(b,N));return z}(C=m.isBuffer(C)?C:new m(C),T),8*C.length),g=T,P=new m(E),R=g?P.writeInt32BE:P.writeInt32LE,_=0;_<k.length;_++)R.call(P,k[_],4*_,!0);return P}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,i,s){(function(r,o,m,l,c,u,h,d,p){var m=t("buffer").Buffer,f=t("./sha"),v=t("./sha256"),C=t("./rng"),g={sha1:f,sha256:v,md5:t("./md5")},E=64,T=new m(E);function k(b,I){var B=g[b=b||"sha1"],z=[];return B||P("algorithm:",b,"is not yet supported"),{update:function(D){return m.isBuffer(D)||(D=new m(D)),z.push(D),D.length,this},digest:function(D){var N=m.concat(z),N=I?function(L,U,$){m.isBuffer(U)||(U=new m(U)),m.isBuffer($)||($=new m($)),U.length>E?U=L(U):U.length<E&&(U=m.concat([U,T],E));for(var Z=new m(E),ne=new m(E),oe=0;oe<E;oe++)Z[oe]=54^U[oe],ne[oe]=92^U[oe];return $=L(m.concat([Z,$])),L(m.concat([ne,$]))}(B,I,N):B(N);return z=null,D?N.toString(D):N}}}function P(){var b=[].slice.call(arguments).join(" ");throw new Error([b,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}T.fill(0),s.createHash=function(b){return k(b)},s.createHmac=k,s.randomBytes=function(b,I){if(!I||!I.call)return new m(C(b));try{I.call(this,void 0,new m(C(b)))}catch(B){I(B)}};var R,_=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],w=function(b){s[b]=function(){P("sorry,",b,"is not implemented yet")}};for(R in _)w(_[R])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var m=t("./helpers");function f(P,R){P[R>>5]|=128<<R%32,P[14+(R+64>>>9<<4)]=R;for(var _=1732584193,w=-271733879,b=-1732584194,I=271733878,B=0;B<P.length;B+=16){var z=_,D=w,N=b,L=I,_=C(_,w,b,I,P[B+0],7,-680876936),I=C(I,_,w,b,P[B+1],12,-389564586),b=C(b,I,_,w,P[B+2],17,606105819),w=C(w,b,I,_,P[B+3],22,-1044525330);_=C(_,w,b,I,P[B+4],7,-176418897),I=C(I,_,w,b,P[B+5],12,1200080426),b=C(b,I,_,w,P[B+6],17,-1473231341),w=C(w,b,I,_,P[B+7],22,-45705983),_=C(_,w,b,I,P[B+8],7,1770035416),I=C(I,_,w,b,P[B+9],12,-1958414417),b=C(b,I,_,w,P[B+10],17,-42063),w=C(w,b,I,_,P[B+11],22,-1990404162),_=C(_,w,b,I,P[B+12],7,1804603682),I=C(I,_,w,b,P[B+13],12,-40341101),b=C(b,I,_,w,P[B+14],17,-1502002290),_=g(_,w=C(w,b,I,_,P[B+15],22,1236535329),b,I,P[B+1],5,-165796510),I=g(I,_,w,b,P[B+6],9,-1069501632),b=g(b,I,_,w,P[B+11],14,643717713),w=g(w,b,I,_,P[B+0],20,-373897302),_=g(_,w,b,I,P[B+5],5,-701558691),I=g(I,_,w,b,P[B+10],9,38016083),b=g(b,I,_,w,P[B+15],14,-660478335),w=g(w,b,I,_,P[B+4],20,-405537848),_=g(_,w,b,I,P[B+9],5,568446438),I=g(I,_,w,b,P[B+14],9,-1019803690),b=g(b,I,_,w,P[B+3],14,-187363961),w=g(w,b,I,_,P[B+8],20,1163531501),_=g(_,w,b,I,P[B+13],5,-1444681467),I=g(I,_,w,b,P[B+2],9,-51403784),b=g(b,I,_,w,P[B+7],14,1735328473),_=E(_,w=g(w,b,I,_,P[B+12],20,-1926607734),b,I,P[B+5],4,-378558),I=E(I,_,w,b,P[B+8],11,-2022574463),b=E(b,I,_,w,P[B+11],16,1839030562),w=E(w,b,I,_,P[B+14],23,-35309556),_=E(_,w,b,I,P[B+1],4,-1530992060),I=E(I,_,w,b,P[B+4],11,1272893353),b=E(b,I,_,w,P[B+7],16,-155497632),w=E(w,b,I,_,P[B+10],23,-1094730640),_=E(_,w,b,I,P[B+13],4,681279174),I=E(I,_,w,b,P[B+0],11,-358537222),b=E(b,I,_,w,P[B+3],16,-722521979),w=E(w,b,I,_,P[B+6],23,76029189),_=E(_,w,b,I,P[B+9],4,-640364487),I=E(I,_,w,b,P[B+12],11,-421815835),b=E(b,I,_,w,P[B+15],16,530742520),_=T(_,w=E(w,b,I,_,P[B+2],23,-995338651),b,I,P[B+0],6,-198630844),I=T(I,_,w,b,P[B+7],10,1126891415),b=T(b,I,_,w,P[B+14],15,-1416354905),w=T(w,b,I,_,P[B+5],21,-57434055),_=T(_,w,b,I,P[B+12],6,1700485571),I=T(I,_,w,b,P[B+3],10,-1894986606),b=T(b,I,_,w,P[B+10],15,-1051523),w=T(w,b,I,_,P[B+1],21,-2054922799),_=T(_,w,b,I,P[B+8],6,1873313359),I=T(I,_,w,b,P[B+15],10,-30611744),b=T(b,I,_,w,P[B+6],15,-1560198380),w=T(w,b,I,_,P[B+13],21,1309151649),_=T(_,w,b,I,P[B+4],6,-145523070),I=T(I,_,w,b,P[B+11],10,-1120210379),b=T(b,I,_,w,P[B+2],15,718787259),w=T(w,b,I,_,P[B+9],21,-343485551),_=k(_,z),w=k(w,D),b=k(b,N),I=k(I,L)}return Array(_,w,b,I)}function v(P,R,_,w,b,I){return k((R=k(k(R,P),k(w,I)))<<b|R>>>32-b,_)}function C(P,R,_,w,b,I,B){return v(R&_|~R&w,P,R,b,I,B)}function g(P,R,_,w,b,I,B){return v(R&w|_&~w,P,R,b,I,B)}function E(P,R,_,w,b,I,B){return v(R^_^w,P,R,b,I,B)}function T(P,R,_,w,b,I,B){return v(_^(R|~w),P,R,b,I,B)}function k(P,R){var _=(65535&P)+(65535&R);return(P>>16)+(R>>16)+(_>>16)<<16|65535&_}i.exports=function(P){return m.hash(P,f,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){i.exports=function(m){for(var f,v=new Array(m),C=0;C<m;C++)!(3&C)&&(f=4294967296*Math.random()),v[C]=f>>>((3&C)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var m=t("./helpers");function f(g,E){g[E>>5]|=128<<24-E%32,g[15+(E+64>>9<<4)]=E;for(var T,k,P,R=Array(80),_=1732584193,w=-271733879,b=-1732584194,I=271733878,B=-1009589776,z=0;z<g.length;z+=16){for(var D=_,N=w,L=b,U=I,$=B,Z=0;Z<80;Z++){R[Z]=Z<16?g[z+Z]:C(R[Z-3]^R[Z-8]^R[Z-14]^R[Z-16],1);var ne=v(v(C(_,5),(ne=w,k=b,P=I,(T=Z)<20?ne&k|~ne&P:!(T<40)&&T<60?ne&k|ne&P|k&P:ne^k^P)),v(v(B,R[Z]),(T=Z)<20?1518500249:T<40?1859775393:T<60?-1894007588:-899497514)),B=I,I=b,b=C(w,30),w=_,_=ne}_=v(_,D),w=v(w,N),b=v(b,L),I=v(I,U),B=v(B,$)}return Array(_,w,b,I,B)}function v(g,E){var T=(65535&g)+(65535&E);return(g>>16)+(E>>16)+(T>>16)<<16|65535&T}function C(g,E){return g<<E|g>>>32-E}i.exports=function(g){return m.hash(g,f,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){function m(E,T){var k=(65535&E)+(65535&T);return(E>>16)+(T>>16)+(k>>16)<<16|65535&k}function f(E,T){var k,P=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),R=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);E[T>>5]|=128<<24-T%32,E[15+(T+64>>9<<4)]=T;for(var w,b,I=0;I<E.length;I+=16){for(var B=R[0],z=R[1],D=R[2],N=R[3],L=R[4],U=R[5],$=R[6],Z=R[7],ne=0;ne<64;ne++)_[ne]=ne<16?E[ne+I]:m(m(m((b=_[ne-2],C(b,17)^C(b,19)^g(b,10)),_[ne-7]),(b=_[ne-15],C(b,7)^C(b,18)^g(b,3))),_[ne-16]),k=m(m(m(m(Z,C(b=L,6)^C(b,11)^C(b,25)),L&U^~L&$),P[ne]),_[ne]),w=m(C(w=B,2)^C(w,13)^C(w,22),B&z^B&D^z&D),Z=$,$=U,U=L,L=m(N,k),N=D,D=z,z=B,B=m(k,w);R[0]=m(B,R[0]),R[1]=m(z,R[1]),R[2]=m(D,R[2]),R[3]=m(N,R[3]),R[4]=m(L,R[4]),R[5]=m(U,R[5]),R[6]=m($,R[6]),R[7]=m(Z,R[7])}return R}var v=t("./helpers"),C=function(E,T){return E>>>T|E<<32-T},g=function(E,T){return E>>>T};i.exports=function(E){return v.hash(E,f,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){s.read=function(m,f,v,C,I){var E,T,k=8*I-C-1,P=(1<<k)-1,R=P>>1,_=-7,w=v?I-1:0,b=v?-1:1,I=m[f+w];for(w+=b,E=I&(1<<-_)-1,I>>=-_,_+=k;0<_;E=256*E+m[f+w],w+=b,_-=8);for(T=E&(1<<-_)-1,E>>=-_,_+=C;0<_;T=256*T+m[f+w],w+=b,_-=8);if(E===0)E=1-R;else{if(E===P)return T?NaN:1/0*(I?-1:1);T+=Math.pow(2,C),E-=R}return(I?-1:1)*T*Math.pow(2,E-C)},s.write=function(m,f,v,C,g,B){var T,k,P=8*B-g-1,R=(1<<P)-1,_=R>>1,w=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=C?0:B-1,I=C?1:-1,B=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(k=isNaN(f)?1:0,T=R):(T=Math.floor(Math.log(f)/Math.LN2),f*(C=Math.pow(2,-T))<1&&(T--,C*=2),2<=(f+=1<=T+_?w/C:w*Math.pow(2,1-_))*C&&(T++,C/=2),R<=T+_?(k=0,T=R):1<=T+_?(k=(f*C-1)*Math.pow(2,g),T+=_):(k=f*Math.pow(2,_-1)*Math.pow(2,g),T=0));8<=g;m[v+b]=255&k,b+=I,k/=256,g-=8);for(T=T<<g|k,P+=g;0<P;m[v+b]=255&T,b+=I,T/=256,P-=8);m[v+b-I]|=128*B}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,i,s){(function(r,o,a,l,c,u,h,d,p){var m,f,v;function C(){}(r=i.exports={}).nextTick=(f=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,f?function(g){return window.setImmediate(g)}:v?(m=[],window.addEventListener("message",function(g){var E=g.source;E!==window&&E!==null||g.data!=="process-tick"||(g.stopPropagation(),0<m.length&&m.shift()())},!0),function(g){m.push(g),window.postMessage("process-tick","*")}):function(g){setTimeout(g,0)}),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=C,r.addListener=C,r.once=C,r.off=C,r.removeListener=C,r.removeAllListeners=C,r.emit=C,r.binding=function(g){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(g){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Wp);var Yb=Wp.exports;const MT=Rr(Yb);var $p=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],Xb=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],Kp=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],Zb=$p,Qb=Zb.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),al=Kp;al=al.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});var Jb=al.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),ew=uw,tw=$p,$u=Xb,nw=Kp,iw=Qb,sw=Jb,Yt=999,Ku=9999,ya=0,xa=1,Yu=2,Xu=3,Zu=4,Os=5,rw=6,ow=7,aw=8,Qu=9,lw=10,Ju=11,cw=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function uw(n){var e=0,t=0,i=Yt,s,r,o=[],a=[],l=1,c=0,u=0,h=!1,d=!1,p="",m;n=n||{};var f=nw,v=tw;n.version==="300 es"&&(f=sw,v=iw);for(var C={},g={},e=0;e<f.length;e++)C[f[e]]=!0;for(var e=0;e<v.length;e++)g[v[e]]=!0;return function(U){return a=[],U!==null?T(U):k()};function E(U){U.length&&a.push({type:cw[i],data:U,position:u,line:l,column:c})}function T(U){e=0,U.toString&&(U=U.toString()),p+=U.replace(/\r\n/g,`
`),m=p.length;for(var $;s=p[e],e<m;){switch($=e,i){case ya:e=b();break;case xa:e=w();break;case Yu:e=_();break;case Xu:e=I();break;case Zu:e=D();break;case Ju:e=z();break;case Os:e=N();break;case Ku:e=L();break;case Qu:e=R();break;case Yt:e=P();break}if($!==e)switch(p[$]){case`
`:c=0,++l;break;default:++c;break}}return t+=e,p=p.slice(e),a}function k(U){return o.length&&E(o.join("")),i=lw,E("(eof)"),a}function P(){return o=o.length?[]:o,r==="/"&&s==="*"?(u=t+e-1,i=ya,r=s,e+1):r==="/"&&s==="/"?(u=t+e-1,i=xa,r=s,e+1):s==="#"?(i=Yu,u=t+e,e):/\s/.test(s)?(i=Qu,u=t+e,e):(h=/\d/.test(s),d=/[^\w_]/.test(s),u=t+e,i=h?Zu:d?Xu:Ku,e)}function R(){return/[^\s]/g.test(s)?(E(o.join("")),i=Yt,e):(o.push(s),r=s,e+1)}function _(){return(s==="\r"||s===`
`)&&r!=="\\"?(E(o.join("")),i=Yt,e):(o.push(s),r=s,e+1)}function w(){return _()}function b(){return s==="/"&&r==="*"?(o.push(s),E(o.join("")),i=Yt,e+1):(o.push(s),r=s,e+1)}function I(){if(r==="."&&/\d/.test(s))return i=Os,e;if(r==="/"&&s==="*")return i=ya,e;if(r==="/"&&s==="/")return i=xa,e;if(s==="."&&o.length){for(;B(o););return i=Os,e}if(s===";"||s===")"||s==="("){if(o.length)for(;B(o););return E(s),i=Yt,e+1}var U=o.length===2&&s!=="=";if(/[\w_\d\s]/.test(s)||U){for(;B(o););return i=Yt,e}return o.push(s),r=s,e+1}function B(U){var $=0,Z,ne;do{if(Z=$u.indexOf(U.slice(0,U.length+$).join("")),ne=$u[Z],Z===-1){if($--+U.length>0)continue;ne=U.slice(0,1).join("")}return E(ne),u+=ne.length,o=o.slice(ne.length),o.length}while(!0)}function z(){return/[^a-fA-F0-9]/.test(s)?(E(o.join("")),i=Yt,e):(o.push(s),r=s,e+1)}function D(){return s==="."||/[eE]/.test(s)?(o.push(s),i=Os,r=s,e+1):s==="x"&&o.length===1&&o[0]==="0"?(i=Ju,o.push(s),r=s,e+1):/[^\d]/.test(s)?(E(o.join("")),i=Yt,e):(o.push(s),r=s,e+1)}function N(){return s==="f"&&(o.push(s),r=s,e+=1),/[eE]/.test(s)||(s==="-"||s==="+")&&/[eE]/.test(r)?(o.push(s),r=s,e+1):/[^\d]/.test(s)?(E(o.join("")),i=Yt,e):(o.push(s),r=s,e+1)}function L(){if(/[^\d\w_]/.test(s)){var U=o.join("");return g[U]?i=aw:C[U]?i=ow:i=rw,E(o.join("")),i=Yt,e}return o.push(s),r=s,e+1}}var hw=ew,dw=pw;function pw(n,e){var t=hw(e),i=[];return i=i.concat(t(n)),i=i.concat(t(null)),i}const AT=Rr(dw);var fw=mw;function mw(n){for(var e=[],t=0;t<n.length;t++)n[t].type!=="eof"&&e.push(n[t].data);return e.join("")}const RT=Rr(fw);var vw=gw;function gw(n){var e=null,t=null,i=0,s=0,r=0,o=0,a=0,l=[],c,u,h;for(c=0,u;c<n.length;c++)if(h=n[c],h.data==="{"){if(i&&i++||(u=p(c,Kn(")"),Kn()),u<0)||(o=u,u=p(u,Kn("("),Kn(")")),u<0)||(a=u,u=p(u,Ls),u<0)||n[u].type!=="ident"||(t=n[u].data,u=p(u,Ls),u<0))continue;i=1,s=c,e=n[u].data,r=u;var d=p(u,Ls);switch(n[d]&&n[d].data){case"lowp":case"highp":case"mediump":r=d}}else if(i&&h.data==="}"){if(--i)continue;l.push({name:t,type:e,body:[s+1,c],args:[a,o+1],outer:[r,c+1]})}for(c=0;c<n.length;c++)if(h=n[c],h.data===";"){if(u=p(c,Kn(")"),Kn()),u<0||(o=u,u=p(u,Kn("("),Kn(")")),u<0)||(a=u,u=p(u,Ls),u<0)||n[u].type!=="ident"||(t=n[u].data,u=p(u,Ls),u<0)||n[u].type==="operator"||n[u].data==="return")continue;e=n[u].data,l.push({name:t,type:e,body:!1,args:[a,o+1],outer:[u,c+1]})}return l.sort(function(m,f){return m.outer[0]-f.outer[0]});function p(m,f,v){for(var C=m-1;C>=0;C--){if(f(n[C]))return C;if(v&&v(n[C]))return-1}return-1}}function Kn(n){return function(e){return e.type==="operator"&&(!n||e.data===n)}}function Ls(n){return n.type!=="whitespace"}const kT=Rr(vw);function In(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Yp(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Lt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ws={duration:.5,overwrite:!1,delay:0},Ql,ht,Be,jt=1e8,Ae=1/jt,ll=Math.PI*2,_w=ll/4,bw=0,Xp=Math.sqrt,ww=Math.cos,yw=Math.sin,et=function(e){return typeof e=="string"},He=function(e){return typeof e=="function"},Dn=function(e){return typeof e=="number"},Jl=function(e){return typeof e>"u"},wn=function(e){return typeof e=="object"},xt=function(e){return e!==!1},ec=function(){return typeof window<"u"},Yr=function(e){return He(e)||et(e)},Zp=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},dt=Array.isArray,cl=/(?:-?\.?\d|\.)+/gi,Qp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ss=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ca=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Jp=/[+-]=-?[.\d]+/,ef=/[^,'"\[\]\s]+/gi,xw=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,De,hn,ul,tc,zt={},Co={},tf,nf=function(e){return(Co=Vi(e,zt))&&Pt},nc=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},pr=function(e,t){return!t&&console.warn(e)},sf=function(e,t){return e&&(zt[e]=t)&&Co&&(Co[e]=t)||zt},fr=function(){return 0},Cw={suppressEvents:!0,isStart:!0,kill:!1},co={suppressEvents:!0,kill:!1},Ew={suppressEvents:!0},ic={},li=[],hl={},rf,Rt={},Ea={},eh=30,uo=[],sc="",rc=function(e){var t=e[0],i,s;if(wn(t)||He(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(s=uo.length;s--&&!uo[s].targetTest(t););i=uo[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new Af(e[s],i)))||e.splice(s,1);return e},Ii=function(e){return e._gsap||rc(Ht(e))[0]._gsap},of=function(e,t,i){return(i=e[t])&&He(i)?e[t]():Jl(i)&&e.getAttribute&&e.getAttribute(t)||i},Ct=function(e,t){return(e=e.split(",")).forEach(t)||e},Ge=function(e){return Math.round(e*1e5)/1e5||0},Je=function(e){return Math.round(e*1e7)/1e7||0},ds=function(e,t){var i=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+s:i==="-"?e-s:i==="*"?e*s:e/s},Sw=function(e,t){for(var i=t.length,s=0;e.indexOf(t[s])<0&&++s<i;);return s<i},Eo=function(){var e=li.length,t=li.slice(0),i,s;for(hl={},li.length=0,i=0;i<e;i++)s=t[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},af=function(e,t,i,s){li.length&&!ht&&Eo(),e.render(t,i,ht&&t<0&&(e._initted||e._startAt)),li.length&&!ht&&Eo()},lf=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(ef).length<2?t:et(e)?e.trim():e},cf=function(e){return e},$t=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Pw=function(e){return function(t,i){for(var s in i)s in t||s==="duration"&&e||s==="ease"||(t[s]=i[s])}},Vi=function(e,t){for(var i in t)e[i]=t[i];return e},th=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=wn(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},So=function(e,t){var i={},s;for(s in e)s in t||(i[s]=e[s]);return i},ir=function(e){var t=e.parent||De,i=e.keyframes?Pw(dt(e.keyframes)):$t;if(xt(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Tw=function(e,t){for(var i=e.length,s=i===t.length;s&&i--&&e[i]===t[i];);return i<0},uf=function(e,t,i,s,r){var o=e[s],a;if(r)for(a=t[r];o&&o[r]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},Yo=function(e,t,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},di=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Bi=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Mw=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},dl=function(e,t,i,s){return e._startAt&&(ht?e._startAt.revert(co):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},Aw=function n(e){return!e||e._ts&&n(e.parent)},nh=function(e){return e._repeat?ys(e._tTime,e=e.duration()+e._rDelay)*e:0},ys=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Po=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Xo=function(e){return e._end=Je(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ae)||0))},Zo=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Je(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Xo(e),i._dirty||Bi(i,e)),e},hf=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Po(e.rawTime(),t),(!t._dur||kr(0,t.totalDuration(),i)-t._tTime>Ae)&&t.render(i,!0)),Bi(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Ae}},pn=function(e,t,i,s){return t.parent&&di(t),t._start=Je((Dn(i)?i:i||e!==De?Ut(e,i,t):e._time)+t._delay),t._end=Je(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),uf(e,t,"_first","_last",e._sort?"_start":0),pl(t)||(e._recent=t),s||hf(e,t),e._ts<0&&Zo(e,e._tTime),e},df=function(e,t){return(zt.ScrollTrigger||nc("scrollTrigger",t))&&zt.ScrollTrigger.create(t,e)},pf=function(e,t,i,s,r){if(ac(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!ht&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&rf!==kt.frame)return li.push(e),e._lazy=[r,s],1},Rw=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},pl=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},kw=function(e,t,i,s){var r=e.ratio,o=t<0||!t&&(!e._start&&Rw(e)&&!(!e._initted&&pl(e))||(e._ts<0||e._dp._ts<0)&&!pl(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=kr(0,e._tDur,t),u=ys(l,a),e._yoyo&&u&1&&(o=1-o),u!==ys(e._tTime,a)&&(r=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==r||ht||s||e._zTime===Ae||!t&&e._zTime){if(!e._initted&&pf(e,t,s,i,l))return;for(h=e._zTime,e._zTime=t||(i?Ae:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&dl(e,t,i,!0),e._onUpdate&&!i&&Ot(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Ot(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&di(e,1),!i&&!ht&&(Ot(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Iw=function(e,t,i){var s;if(i>t)for(s=e._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},xs=function(e,t,i,s){var r=e._repeat,o=Je(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:Je(o*(r+1)+e._rDelay*r):o,a>0&&!s&&Zo(e,e._tTime=e._tDur*a),e.parent&&Xo(e),i||Bi(e.parent,e),e},ih=function(e){return e instanceof vt?Bi(e):xs(e,e._dur)},Bw={_start:0,endTime:fr,totalDuration:fr},Ut=function n(e,t,i){var s=e.labels,r=e._recent||Bw,o=e.duration()>=jt?r.endTime(!1):e._dur,a,l,c;return et(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?r:i).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(dt(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},sr=function(e,t,i){var s=Dn(t[1]),r=(s?2:1)+(e<2?0:1),o=t[r],a,l;if(s&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=xt(l.vars.inherit)&&l.parent;o.immediateRender=xt(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[r-1]}return new Ke(t[0],o,t[r+1])},bi=function(e,t){return e||e===0?t(e):t},kr=function(e,t,i){return i<e?e:i>t?t:i},ct=function(e,t){return!et(e)||!(t=xw.exec(e))?"":t[1]},Ow=function(e,t,i){return bi(i,function(s){return kr(e,t,s)})},fl=[].slice,ff=function(e,t){return e&&wn(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&wn(e[0]))&&!e.nodeType&&e!==hn},Lw=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(s){var r;return et(s)&&!t||ff(s,1)?(r=i).push.apply(r,Ht(s)):i.push(s)})||i},Ht=function(e,t,i){return Be&&!t&&Be.selector?Be.selector(e):et(e)&&!i&&(ul||!Cs())?fl.call((t||tc).querySelectorAll(e),0):dt(e)?Lw(e,i):ff(e)?fl.call(e,0):e?[e]:[]},ml=function(e){return e=Ht(e)[0]||pr("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Ht(t,i.querySelectorAll?i:i===e?pr("Invalid scope")||tc.createElement("div"):e)}},mf=function(e){return e.sort(function(){return .5-Math.random()})},vf=function(e){if(He(e))return e;var t=wn(e)?e:{each:e},i=Oi(t.ease),s=t.from||0,r=parseFloat(t.base)||0,o={},a=s>0&&s<1,l=isNaN(s)||a,c=t.axis,u=s,h=s;return et(s)?u=h={center:.5,edges:.5,end:1}[s]||0:!a&&l&&(u=s[0],h=s[1]),function(d,p,m){var f=(m||t).length,v=o[f],C,g,E,T,k,P,R,_,w;if(!v){if(w=t.grid==="auto"?0:(t.grid||[1,jt])[1],!w){for(R=-jt;R<(R=m[w++].getBoundingClientRect().left)&&w<f;);w<f&&w--}for(v=o[f]=[],C=l?Math.min(w,f)*u-.5:s%w,g=w===jt?0:l?f*h/w-.5:s/w|0,R=0,_=jt,P=0;P<f;P++)E=P%w-C,T=g-(P/w|0),v[P]=k=c?Math.abs(c==="y"?T:E):Xp(E*E+T*T),k>R&&(R=k),k<_&&(_=k);s==="random"&&mf(v),v.max=R-_,v.min=_,v.v=f=(parseFloat(t.amount)||parseFloat(t.each)*(w>f?f-1:c?c==="y"?f/w:w:Math.max(w,f/w))||0)*(s==="edges"?-1:1),v.b=f<0?r-f:r,v.u=ct(t.amount||t.each)||0,i=i&&f<0?Pf(i):i}return f=(v[d]-v.min)/v.max||0,Je(v.b+(i?i(f):f)*v.v)+v.u}},vl=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var s=Je(Math.round(parseFloat(i)/e)*e*t);return(s-s%1)/t+(Dn(i)?0:ct(i))}},gf=function(e,t){var i=dt(e),s,r;return!i&&wn(e)&&(s=i=e.radius||jt,e.values?(e=Ht(e.values),(r=!Dn(e[0]))&&(s*=s)):e=vl(e.increment)),bi(t,i?He(e)?function(o){return r=e(o),Math.abs(r-o)<=s?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),c=jt,u=0,h=e.length,d,p;h--;)r?(d=e[h].x-a,p=e[h].y-l,d=d*d+p*p):d=Math.abs(e[h]-a),d<c&&(c=d,u=h);return u=!s||c<=s?e[u]:o,r||u===o||Dn(o)?u:u+ct(o)}:vl(e))},_f=function(e,t,i,s){return bi(dt(e)?!t:i===!0?!!(i=0):!s,function(){return dt(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*s)/s})},zw=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduce(function(r,o){return o(r)},s)}},Fw=function(e,t){return function(i){return e(parseFloat(i))+(t||ct(i))}},Dw=function(e,t,i){return wf(e,t,0,1,i)},bf=function(e,t,i){return bi(i,function(s){return e[~~t(s)]})},Nw=function n(e,t,i){var s=t-e;return dt(e)?bf(e,n(0,e.length),t):bi(i,function(r){return(s+(r-e)%s)%s+e})},Vw=function n(e,t,i){var s=t-e,r=s*2;return dt(e)?bf(e,n(0,e.length-1),t):bi(i,function(o){return o=(r+(o-e)%r)%r||0,e+(o>s?r-o:o)})},mr=function(e){for(var t=0,i="",s,r,o,a;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a=e.charAt(s+7)==="[",r=e.substr(s+7,o-s-7).match(a?ef:cl),i+=e.substr(t,s-t)+_f(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},wf=function(e,t,i,s,r){var o=t-e,a=s-i;return bi(r,function(l){return i+((l-e)/o*a||0)})},Uw=function n(e,t,i,s){var r=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!r){var o=et(e),a={},l,c,u,h,d;if(i===!0&&(s=1)&&(i=null),o)e={p:e},t={p:t};else if(dt(e)&&!dt(t)){for(u=[],h=e.length,d=h-2,c=1;c<h;c++)u.push(n(e[c-1],e[c]));h--,r=function(m){m*=h;var f=Math.min(d,~~m);return u[f](m-f)},i=t}else s||(e=Vi(dt(e)?[]:{},e));if(!u){for(l in t)oc.call(a,e,l,"get",t[l]);r=function(m){return uc(m,a)||(o?e.p:e)}}}return bi(i,r)},sh=function(e,t,i){var s=e.labels,r=jt,o,a,l;for(o in s)a=s[o]-t,a<0==!!i&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},Ot=function(e,t,i){var s=e.vars,r=s[t],o=Be,a=e._ctx,l,c,u;if(r)return l=s[t+"Params"],c=s.callbackScope||e,i&&li.length&&Eo(),a&&(Be=a),u=l?r.apply(c,l):r.call(c),Be=o,u},Ws=function(e){return di(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ht),e.progress()<1&&Ot(e,"onInterrupt"),e},rs,yf=[],xf=function(e){if(e)if(e=!e.name&&e.default||e,ec()||e.headless){var t=e.name,i=He(e),s=t&&!i&&e.init?function(){this._props=[]}:e,r={init:fr,render:uc,add:oc,kill:iy,modifier:ny,rawVars:0},o={targetTest:0,get:0,getSetter:cc,aliases:{},register:0};if(Cs(),e!==s){if(Rt[t])return;$t(s,$t(So(e,r),o)),Vi(s.prototype,Vi(r,So(e,o))),Rt[s.prop=t]=s,e.targetTest&&(uo.push(s),ic[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}sf(t,s),e.register&&e.register(Pt,s,Et)}else yf.push(e)},Se=255,$s={aqua:[0,Se,Se],lime:[0,Se,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Se],navy:[0,0,128],white:[Se,Se,Se],olive:[128,128,0],yellow:[Se,Se,0],orange:[Se,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Se,0,0],pink:[Se,192,203],cyan:[0,Se,Se],transparent:[Se,Se,Se,0]},Sa=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Se+.5|0},Cf=function(e,t,i){var s=e?Dn(e)?[e>>16,e>>8&Se,e&Se]:0:$s.black,r,o,a,l,c,u,h,d,p,m;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),$s[e])s=$s[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+r+r+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Se,s&Se,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Se,e&Se]}else if(e.substr(0,3)==="hsl"){if(s=m=e.match(cl),!t)l=+s[0]%360/360,c=+s[1]/100,u=+s[2]/100,o=u<=.5?u*(c+1):u+c-u*c,r=u*2-o,s.length>3&&(s[3]*=1),s[0]=Sa(l+1/3,r,o),s[1]=Sa(l,r,o),s[2]=Sa(l-1/3,r,o);else if(~e.indexOf("="))return s=e.match(Qp),i&&s.length<4&&(s[3]=1),s}else s=e.match(cl)||$s.transparent;s=s.map(Number)}return t&&!m&&(r=s[0]/Se,o=s[1]/Se,a=s[2]/Se,h=Math.max(r,o,a),d=Math.min(r,o,a),u=(h+d)/2,h===d?l=c=0:(p=h-d,c=u>.5?p/(2-h-d):p/(h+d),l=h===r?(o-a)/p+(o<a?6:0):h===o?(a-r)/p+2:(r-o)/p+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(u*100+.5)),i&&s.length<4&&(s[3]=1),s},Ef=function(e){var t=[],i=[],s=-1;return e.split(ci).forEach(function(r){var o=r.match(ss)||[];t.push.apply(t,o),i.push(s+=o.length+1)}),t.c=i,t},rh=function(e,t,i){var s="",r=(e+s).match(ci),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!r)return e;if(r=r.map(function(d){return(d=Cf(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(u=Ef(e),l=i.c,l.join(s)!==u.c.join(s)))for(c=e.replace(ci,"1").split(ss),h=c.length-1;a<h;a++)s+=c[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!c)for(c=e.split(ci),h=c.length-1;a<h;a++)s+=c[a]+r[a];return s+c[h]},ci=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in $s)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),jw=/hsl[a]?\(/,Sf=function(e){var t=e.join(" "),i;if(ci.lastIndex=0,ci.test(t))return i=jw.test(t),e[1]=rh(e[1],i),e[0]=rh(e[0],i,Ef(e[1])),!0},vr,kt=function(){var n=Date.now,e=500,t=33,i=n(),s=i,r=1e3/240,o=r,a=[],l,c,u,h,d,p,m=function f(v){var C=n()-s,g=v===!0,E,T,k,P;if((C>e||C<0)&&(i+=C-t),s+=C,k=s-i,E=k-o,(E>0||g)&&(P=++h.frame,d=k-h.time*1e3,h.time=k=k/1e3,o+=E+(E>=r?4:r-E),T=1),g||(l=c(f)),T)for(p=0;p<a.length;p++)a[p](k,d,P,v)};return h={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(v){return d/(1e3/(v||60))},wake:function(){tf&&(!ul&&ec()&&(hn=ul=window,tc=hn.document||{},zt.gsap=Pt,(hn.gsapVersions||(hn.gsapVersions=[])).push(Pt.version),nf(Co||hn.GreenSockGlobals||!hn.gsap&&hn||{}),yf.forEach(xf)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(v){return setTimeout(v,o-h.time*1e3+1|0)},vr=1,m(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),vr=0,c=fr},lagSmoothing:function(v,C){e=v||1/0,t=Math.min(C||33,e)},fps:function(v){r=1e3/(v||240),o=h.time*1e3+r},add:function(v,C,g){var E=C?function(T,k,P,R){v(T,k,P,R),h.remove(E)}:v;return h.remove(v),a[g?"unshift":"push"](E),Cs(),E},remove:function(v,C){~(C=a.indexOf(v))&&a.splice(C,1)&&p>=C&&p--},_listeners:a},h}(),Cs=function(){return!vr&&kt.wake()},fe={},Hw=/^[\d.\-M][\d.\-,\s]/,Gw=/["']/g,qw=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),s=i[0],r=1,o=i.length,a,l,c;r<o;r++)l=i[r],a=r!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[s]=isNaN(c)?c.replace(Gw,"").trim():+c,s=l.substr(a+1).trim();return t},Ww=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<i?e.indexOf(")",i+1):i)},$w=function(e){var t=(e+"").split("("),i=fe[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[qw(t[1])]:Ww(e).split(",").map(lf)):fe._CE&&Hw.test(e)?fe._CE("",e):i},Pf=function(e){return function(t){return 1-e(1-t)}},Tf=function n(e,t){for(var i=e._first,s;i;)i instanceof vt?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=t)),i=i._next},Oi=function(e,t){return e&&(He(e)?e:fe[e]||$w(e))||t},$i=function(e,t,i,s){i===void 0&&(i=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:s},o;return Ct(e,function(a){fe[a]=zt[a]=r,fe[o=a.toLowerCase()]=i;for(var l in r)fe[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=fe[a+"."+l]=r[l]}),r},Mf=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Pa=function n(e,t,i){var s=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),o=r/ll*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*yw((u-o)*r)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Mf(a);return r=ll/r,l.config=function(c,u){return n(e,c,u)},l},Ta=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:Mf(i);return s.config=function(r){return n(e,r)},s};Ct("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;$i(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});fe.Linear.easeNone=fe.none=fe.Linear.easeIn;$i("Elastic",Pa("in"),Pa("out"),Pa());(function(n,e){var t=1/e,i=2*t,s=2.5*t,r=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<s?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};$i("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);$i("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});$i("Circ",function(n){return-(Xp(1-n*n)-1)});$i("Sine",function(n){return n===1?1:-ww(n*_w)+1});$i("Back",Ta("in"),Ta("out"),Ta());fe.SteppedEase=fe.steps=zt.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,s=e+(t?0:1),r=t?1:0,o=1-Ae;return function(a){return((s*kr(0,o,a)|0)+r)*i}}};ws.ease=fe["quad.out"];Ct("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return sc+=n+","+n+"Params,"});var Af=function(e,t){this.id=bw++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:of,this.set=t?t.getSetter:cc},gr=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,xs(this,+t.duration,1,1),this.data=t.data,Be&&(this._ctx=Be,Be.data.push(this)),vr||kt.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,xs(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,s){if(Cs(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Zo(this,i),!r._dp||r.parent||hf(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&pn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Ae||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),af(this,i,s)),this},e.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+nh(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},e.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+nh(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?ys(this._tTime,r)+1:1},e.timeScale=function(i,s){if(!arguments.length)return this._rts===-Ae?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Po(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Ae?0:this._rts,this.totalTime(kr(-Math.abs(this._delay),this._tDur,r),s!==!1),Xo(this),Mw(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Cs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ae&&(this._tTime-=Ae)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&pn(s,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(xt(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Po(s.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=Ew);var s=ht;return ht=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ht=s,this},e.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,ih(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,ih(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,s){return this.totalTime(Ut(this,i),xt(s))},e.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,xt(s))},e.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},e.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Ae:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ae,this},e.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-Ae)},e.eventCallback=function(i,s,r){var o=this.vars;return arguments.length>1?(s?(o[i]=s,r&&(o[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete o[i],this):o[i]},e.then=function(i){var s=this;return new Promise(function(r){var o=He(i)?i:cf,a=function(){var c=s.then;s.then=null,He(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=c),r(o),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){Ws(this)},n}();$t(gr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ae,_prom:0,_ps:!1,_rts:1});var vt=function(n){Yp(e,n);function e(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=xt(i.sortChildren),De&&pn(i.parent||De,In(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&df(In(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(s,r,o){return sr(0,arguments,this),this},t.from=function(s,r,o){return sr(1,arguments,this),this},t.fromTo=function(s,r,o,a){return sr(2,arguments,this),this},t.set=function(s,r,o){return r.duration=0,r.parent=this,ir(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new Ke(s,r,Ut(this,o),1),this},t.call=function(s,r,o){return pn(this,Ke.delayedCall(0,s,r),o)},t.staggerTo=function(s,r,o,a,l,c,u){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Ke(s,o,Ut(this,l)),this},t.staggerFrom=function(s,r,o,a,l,c,u){return o.runBackwards=1,ir(o).immediateRender=xt(o.immediateRender),this.staggerTo(s,r,o,a,l,c,u)},t.staggerFromTo=function(s,r,o,a,l,c,u,h){return a.startAt=o,ir(a).immediateRender=xt(a.immediateRender),this.staggerTo(s,r,a,l,c,u,h)},t.render=function(s,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=s<=0?0:Je(s),h=this._zTime<0!=s<0&&(this._initted||!c),d,p,m,f,v,C,g,E,T,k,P,R;if(this!==De&&u>l&&s>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,s+=this._time-a),d=u,T=this._start,E=this._ts,C=!E,h&&(c||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(P=this._yoyo,v=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(v*100+s,r,o);if(d=Je(u%v),u===l?(f=this._repeat,d=c):(f=~~(u/v),f&&f===u/v&&(d=c,f--),d>c&&(d=c)),k=ys(this._tTime,v),!a&&this._tTime&&k!==f&&this._tTime-k*v-this._dur<=0&&(k=f),P&&f&1&&(d=c-d,R=1),f!==k&&!this._lock){var _=P&&k&1,w=_===(P&&f&1);if(f<k&&(_=!_),a=_?0:u%c?c:u,this._lock=1,this.render(a||(R?0:Je(f*v)),r,!c)._lock=0,this._tTime=u,!r&&this.parent&&Ot(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,w&&(this._lock=2,a=_?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Tf(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=Iw(this,Je(a),Je(d)),g&&(u-=d-(d=g._start))),this._tTime=u,this._time=d,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&d&&!r&&!f&&(Ot(this,"onStart"),this._tTime!==u))return this;if(d>=a&&s>=0)for(p=this._first;p;){if(m=p._next,(p._act||d>=p._start)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,r,o),d!==this._time||!this._ts&&!C){g=0,m&&(u+=this._zTime=-Ae);break}}p=m}else{p=this._last;for(var b=s<0?s:d;p;){if(m=p._prev,(p._act||b<=p._end)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(b-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(b-p._start)*p._ts,r,o||ht&&(p._initted||p._startAt)),d!==this._time||!this._ts&&!C){g=0,m&&(u+=this._zTime=b?-Ae:Ae);break}}p=m}}if(g&&!r&&(this.pause(),g.render(d>=a?0:-Ae)._zTime=d>=a?1:-1,this._ts))return this._start=T,Xo(this),this.render(s,r,o);this._onUpdate&&!r&&Ot(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(T===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&di(this,1),!r&&!(s<0&&!a)&&(u||a||!l)&&(Ot(this,u===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var o=this;if(Dn(r)||(r=Ut(this,r,s)),!(s instanceof gr)){if(dt(s))return s.forEach(function(a){return o.add(a,r)}),this;if(et(s))return this.addLabel(s,r);if(He(s))s=Ke.delayedCall(0,s);else return this}return this!==s?pn(this,s,r):this},t.getChildren=function(s,r,o,a){s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-jt);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Ke?r&&l.push(c):(o&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,r,o)))),c=c._next;return l},t.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},t.remove=function(s){return et(s)?this.removeLabel(s):He(s)?this.killTweensOf(s):(Yo(this,s),s===this._recent&&(this._recent=this._last),Bi(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Je(kt.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=Ut(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,o){var a=Ke.delayedCall(0,r||fr,o);return a.data="isPause",this._hasPause=1,pn(this,a,Ut(this,s))},t.removePause=function(s){var r=this._first;for(s=Ut(this,s);r;)r._start===s&&r.data==="isPause"&&di(r),r=r._next},t.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),l=a.length;l--;)ii!==a[l]&&a[l].kill(s,r);return this},t.getTweensOf=function(s,r){for(var o=[],a=Ht(s),l=this._first,c=Dn(r),u;l;)l instanceof Ke?Sw(l._targets,a)&&(c?(!ii||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(u=l.getTweensOf(a,r)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(s,r){r=r||{};var o=this,a=Ut(o,s),l=r,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,p,m=Ke.to(o,$t({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Ae,onStart:function(){if(o.pause(),!p){var v=r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());m._dur!==v&&xs(m,v,0,1).render(m._time,!0,!0),p=1}u&&u.apply(m,h||[])}},r));return d?m.render(0):m},t.tweenFromTo=function(s,r,o){return this.tweenTo(r,$t({startAt:{time:Ut(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),sh(this,Ut(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),sh(this,Ut(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Ae)},t.shiftChildren=function(s,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(c in l)l[c]>=o&&(l[c]+=s);return Bi(this)},t.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Bi(this)},t.totalDuration=function(s){var r=0,o=this,a=o._last,l=jt,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,pn(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(r-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=c;xs(o,o===De&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(De._ts&&(af(De,Po(s,De)),rf=kt.frame),kt.frame>=eh){eh+=Lt.autoSleep||120;var r=De._first;if((!r||!r._ts)&&Lt.autoSleep&&kt._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||kt.sleep()}}},e}(gr);$t(vt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Kw=function(e,t,i,s,r,o,a){var l=new Et(this._pt,e,t,0,1,Lf,null,r),c=0,u=0,h,d,p,m,f,v,C,g;for(l.b=i,l.e=s,i+="",s+="",(C=~s.indexOf("random("))&&(s=mr(s)),o&&(g=[i,s],o(g,e,t),i=g[0],s=g[1]),d=i.match(Ca)||[];h=Ca.exec(s);)m=h[0],f=s.substring(c,h.index),p?p=(p+1)%5:f.substr(-5)==="rgba("&&(p=1),m!==d[u++]&&(v=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:f||u===1?f:",",s:v,c:m.charAt(1)==="="?ds(v,m)-v:parseFloat(m)-v,m:p&&p<4?Math.round:0},c=Ca.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=a,(Jp.test(s)||C)&&(l.e=0),this._pt=l,l},oc=function(e,t,i,s,r,o,a,l,c,u){He(s)&&(s=s(r||0,e,o));var h=e[t],d=i!=="get"?i:He(h)?c?e[t.indexOf("set")||!He(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,p=He(h)?c?Jw:Bf:lc,m;if(et(s)&&(~s.indexOf("random(")&&(s=mr(s)),s.charAt(1)==="="&&(m=ds(d,s)+(ct(d)||0),(m||m===0)&&(s=m))),!u||d!==s||gl)return!isNaN(d*s)&&s!==""?(m=new Et(this._pt,e,t,+d||0,s-(d||0),typeof h=="boolean"?ty:Of,0,p),c&&(m.fp=c),a&&m.modifier(a,this,e),this._pt=m):(!h&&!(t in e)&&nc(t,s),Kw.call(this,e,t,d,s,p,l||Lt.stringFilter,c))},Yw=function(e,t,i,s,r){if(He(e)&&(e=rr(e,r,t,i,s)),!wn(e)||e.style&&e.nodeType||dt(e)||Zp(e))return et(e)?rr(e,r,t,i,s):e;var o={},a;for(a in e)o[a]=rr(e[a],r,t,i,s);return o},Rf=function(e,t,i,s,r,o){var a,l,c,u;if(Rt[e]&&(a=new Rt[e]).init(r,a.rawVars?t[e]:Yw(t[e],s,r,o,i),i,s,o)!==!1&&(i._pt=l=new Et(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==rs))for(c=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)c[a._props[u]]=l;return a},ii,gl,ac=function n(e,t,i){var s=e.vars,r=s.ease,o=s.startAt,a=s.immediateRender,l=s.lazy,c=s.onUpdate,u=s.runBackwards,h=s.yoyoEase,d=s.keyframes,p=s.autoRevert,m=e._dur,f=e._startAt,v=e._targets,C=e.parent,g=C&&C.data==="nested"?C.vars.targets:v,E=e._overwrite==="auto"&&!Ql,T=e.timeline,k,P,R,_,w,b,I,B,z,D,N,L,U;if(T&&(!d||!r)&&(r="none"),e._ease=Oi(r,ws.ease),e._yEase=h?Pf(Oi(h===!0?r:h,ws.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!T&&!!s.runBackwards,!T||d&&!s.stagger){if(B=v[0]?Ii(v[0]).harness:0,L=B&&s[B.prop],k=So(s,ic),f&&(f._zTime<0&&f.progress(1),t<0&&u&&a&&!p?f.render(-1,!0):f.revert(u&&m?co:Cw),f._lazy=0),o){if(di(e._startAt=Ke.set(v,$t({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!f&&xt(l),startAt:null,delay:0,onUpdate:c&&function(){return Ot(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ht||!a&&!p)&&e._startAt.revert(co),a&&m&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&m&&!f){if(t&&(a=!1),R=$t({overwrite:!1,data:"isFromStart",lazy:a&&!f&&xt(l),immediateRender:a,stagger:0,parent:C},k),L&&(R[B.prop]=L),di(e._startAt=Ke.set(v,R)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ht?e._startAt.revert(co):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Ae,Ae);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&xt(l)||l&&!m,P=0;P<v.length;P++){if(w=v[P],I=w._gsap||rc(v)[P]._gsap,e._ptLookup[P]=D={},hl[I.id]&&li.length&&Eo(),N=g===v?P:g.indexOf(w),B&&(z=new B).init(w,L||k,e,N,g)!==!1&&(e._pt=_=new Et(e._pt,w,z.name,0,1,z.render,z,0,z.priority),z._props.forEach(function($){D[$]=_}),z.priority&&(b=1)),!B||L)for(R in k)Rt[R]&&(z=Rf(R,k,e,N,w,g))?z.priority&&(b=1):D[R]=_=oc.call(e,w,R,"get",k[R],N,g,0,s.stringFilter);e._op&&e._op[P]&&e.kill(w,e._op[P]),E&&e._pt&&(ii=e,De.killTweensOf(w,D,e.globalTime(t)),U=!e.parent,ii=0),e._pt&&l&&(hl[I.id]=1)}b&&zf(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!U,d&&t<=0&&T.render(jt,!0,!0)},Xw=function(e,t,i,s,r,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,d,p;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,p=e._targets.length;p--;){if(u=d[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return gl=1,e.vars[t]="+=0",ac(e,a),gl=0,l?pr(t+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)h=c[p],u=h._pt||h,u.s=(s||s===0)&&!r?s:u.s+(s||0)+o*u.c,u.c=i-u.s,h.e&&(h.e=Ge(i)+ct(h.e)),h.b&&(h.b=u.s+ct(h.b))},Zw=function(e,t){var i=e[0]?Ii(e[0]).harness:0,s=i&&i.aliases,r,o,a,l;if(!s)return t;r=Vi({},t);for(o in s)if(o in r)for(l=s[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},Qw=function(e,t,i,s){var r=t.ease||s||"power1.inOut",o,a;if(dt(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:r})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:r})},rr=function(e,t,i,s,r){return He(e)?e.call(t,i,s,r):et(e)&&~e.indexOf("random(")?mr(e):e},kf=sc+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",If={};Ct(kf+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return If[n]=1});var Ke=function(n){Yp(e,n);function e(i,s,r,o){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=n.call(this,o?s:ir(s))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,p=l.overwrite,m=l.keyframes,f=l.defaults,v=l.scrollTrigger,C=l.yoyoEase,g=s.parent||De,E=(dt(i)||Zp(i)?Dn(i[0]):"length"in s)?[i]:Ht(i),T,k,P,R,_,w,b,I;if(a._targets=E.length?rc(E):pr("GSAP target "+i+" not found. https://gsap.com",!Lt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,m||d||Yr(c)||Yr(u)){if(s=a.vars,T=a.timeline=new vt({data:"nested",defaults:f||{},targets:g&&g.data==="nested"?g.vars.targets:E}),T.kill(),T.parent=T._dp=In(a),T._start=0,d||Yr(c)||Yr(u)){if(R=E.length,b=d&&vf(d),wn(d))for(_ in d)~kf.indexOf(_)&&(I||(I={}),I[_]=d[_]);for(k=0;k<R;k++)P=So(s,If),P.stagger=0,C&&(P.yoyoEase=C),I&&Vi(P,I),w=E[k],P.duration=+rr(c,In(a),k,w,E),P.delay=(+rr(u,In(a),k,w,E)||0)-a._delay,!d&&R===1&&P.delay&&(a._delay=u=P.delay,a._start+=u,P.delay=0),T.to(w,P,b?b(k,w,E):0),T._ease=fe.none;T.duration()?c=u=0:a.timeline=0}else if(m){ir($t(T.vars.defaults,{ease:"none"})),T._ease=Oi(m.ease||s.ease||"none");var B=0,z,D,N;if(dt(m))m.forEach(function(L){return T.to(E,L,">")}),T.duration();else{P={};for(_ in m)_==="ease"||_==="easeEach"||Qw(_,m[_],P,m.easeEach);for(_ in P)for(z=P[_].sort(function(L,U){return L.t-U.t}),B=0,k=0;k<z.length;k++)D=z[k],N={ease:D.e,duration:(D.t-(k?z[k-1].t:0))/100*c},N[_]=D.v,T.to(E,N,B),B+=N.duration;T.duration()<c&&T.to({},{duration:c-T.duration()})}}c||a.duration(c=T.duration())}else a.timeline=0;return p===!0&&!Ql&&(ii=In(a),De.killTweensOf(E),ii=0),pn(g,In(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(h||!c&&!m&&a._start===Je(g._time)&&xt(h)&&Aw(In(a))&&g.data!=="nested")&&(a._tTime=-Ae,a.render(Math.max(0,-u)||0)),v&&df(In(a),v),a}var t=e.prototype;return t.render=function(s,r,o){var a=this._time,l=this._tDur,c=this._dur,u=s<0,h=s>l-Ae&&!u?l:s<Ae?0:s,d,p,m,f,v,C,g,E,T;if(!c)kw(this,s,r,o);else if(h!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,E=this.timeline,this._repeat){if(f=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(f*100+s,r,o);if(d=Je(h%f),h===l?(m=this._repeat,d=c):(m=~~(h/f),m&&m===Je(h/f)&&(d=c,m--),d>c&&(d=c)),C=this._yoyo&&m&1,C&&(T=this._yEase,d=c-d),v=ys(this._tTime,f),d===a&&!o&&this._initted&&m===v)return this._tTime=h,this;m!==v&&(E&&this._yEase&&Tf(E,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==f&&this._initted&&(this._lock=o=1,this.render(Je(f*m),!0).invalidate()._lock=0))}if(!this._initted){if(pf(this,u?s:d,o,r,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&m!==v))return this;if(c!==this._dur)return this.render(s,r,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(T||this._ease)(d/c),this._from&&(this.ratio=g=1-g),d&&!a&&!r&&!m&&(Ot(this,"onStart"),this._tTime!==h))return this;for(p=this._pt;p;)p.r(g,p.d),p=p._next;E&&E.render(s<0?s:E._dur*E._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&dl(this,s,r,o),Ot(this,"onUpdate")),this._repeat&&m!==v&&this.vars.onRepeat&&!r&&this.parent&&Ot(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&dl(this,s,!0,!0),(s||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&di(this,1),!r&&!(u&&!a)&&(h||a||C)&&(Ot(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},t.resetTo=function(s,r,o,a,l){vr||kt.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||ac(this,c),u=this._ease(c/this._dur),Xw(this,s,r,o,a,u,c,l)?this.resetTo(s,r,o,a,1):(Zo(this,0),this.parent||uf(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Ws(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,ii&&ii.vars.overwrite!==!0)._first||Ws(this),this.parent&&o!==this.timeline.totalDuration()&&xs(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=s?Ht(s):a,c=this._ptLookup,u=this._pt,h,d,p,m,f,v,C;if((!r||r==="all")&&Tw(a,l))return r==="all"&&(this._pt=0),Ws(this);for(h=this._op=this._op||[],r!=="all"&&(et(r)&&(f={},Ct(r,function(g){return f[g]=1}),r=f),r=Zw(a,r)),C=a.length;C--;)if(~l.indexOf(a[C])){d=c[C],r==="all"?(h[C]=r,m=d,p={}):(p=h[C]=h[C]||{},m=r);for(f in m)v=d&&d[f],v&&((!("kill"in v.d)||v.d.kill(f)===!0)&&Yo(this,v,"_pt"),delete d[f]),p!=="all"&&(p[f]=1)}return this._initted&&!this._pt&&u&&Ws(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return sr(1,arguments)},e.delayedCall=function(s,r,o,a){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,r,o){return sr(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,o){return De.killTweensOf(s,r,o)},e}(gr);$t(Ke.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ct("staggerTo,staggerFrom,staggerFromTo",function(n){Ke[n]=function(){var e=new vt,t=fl.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var lc=function(e,t,i){return e[t]=i},Bf=function(e,t,i){return e[t](i)},Jw=function(e,t,i,s){return e[t](s.fp,i)},ey=function(e,t,i){return e.setAttribute(t,i)},cc=function(e,t){return He(e[t])?Bf:Jl(e[t])&&e.setAttribute?ey:lc},Of=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},ty=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Lf=function(e,t){var i=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+s,i=i._next;s+=t.c}t.set(t.t,t.p,s,t)},uc=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},ny=function(e,t,i,s){for(var r=this._pt,o;r;)o=r._next,r.p===s&&r.modifier(e,t,i),r=o},iy=function(e){for(var t=this._pt,i,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?Yo(this,t,"_pt"):t.dep||(i=1),t=s;return!i},sy=function(e,t,i,s){s.mSet(e,t,s.m.call(s.tween,i,s.mt),s)},zf=function(e){for(var t=e._pt,i,s,r,o;t;){for(i=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:o=t,t=i}e._pt=r},Et=function(){function n(t,i,s,r,o,a,l,c,u){this.t=i,this.s=r,this.c=o,this.p=s,this.r=a||Of,this.d=l||this,this.set=c||lc,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=sy,this.m=i,this.mt=r,this.tween=s},n}();Ct(sc+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return ic[n]=1});zt.TweenMax=zt.TweenLite=Ke;zt.TimelineLite=zt.TimelineMax=vt;De=new vt({sortChildren:!1,defaults:ws,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Lt.stringFilter=Sf;var Li=[],ho={},ry=[],oh=0,oy=0,Ma=function(e){return(ho[e]||ry).map(function(t){return t()})},_l=function(){var e=Date.now(),t=[];e-oh>2&&(Ma("matchMediaInit"),Li.forEach(function(i){var s=i.queries,r=i.conditions,o,a,l,c;for(a in s)o=hn.matchMedia(s[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),Ma("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),oh=e,Ma("matchMedia"))},Ff=function(){function n(t,i){this.selector=i&&ml(i),this.data=[],this._r=[],this.isReverted=!1,this.id=oy++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,s,r){He(i)&&(r=s,s=i,i=He);var o=this,a=function(){var c=Be,u=o.selector,h;return c&&c!==o&&c.data.push(o),r&&(o.selector=ml(r)),Be=o,h=s.apply(o,arguments),He(h)&&o._r.push(h),Be=c,o.selector=u,o.isReverted=!1,h};return o.last=a,i===He?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var s=Be;Be=null,i(this),Be=s},e.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof Ke&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,s){var r=this;if(i?function(){for(var a=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=r.data.length;l--;)c=r.data[l],c instanceof vt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Ke)&&c.revert&&c.revert(i);r._r.forEach(function(u){return u(i,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Li.length;o--;)Li[o].id===this.id&&Li.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),ay=function(){function n(t){this.contexts=[],this.scope=t,Be&&Be.data.push(this)}var e=n.prototype;return e.add=function(i,s,r){wn(i)||(i={matches:i});var o=new Ff(0,r||this.scope),a=o.conditions={},l,c,u;Be&&!o.selector&&(o.selector=Be.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=i;for(c in i)c==="all"?u=1:(l=hn.matchMedia(i[c]),l&&(Li.indexOf(o)<0&&Li.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(_l):l.addEventListener("change",_l)));return u&&s(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),To={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){return xf(s)})},timeline:function(e){return new vt(e)},getTweensOf:function(e,t){return De.getTweensOf(e,t)},getProperty:function(e,t,i,s){et(e)&&(e=Ht(e)[0]);var r=Ii(e||{}).get,o=i?cf:lf;return i==="native"&&(i=""),e&&(t?o((Rt[t]&&Rt[t].get||r)(e,t,i,s)):function(a,l,c){return o((Rt[a]&&Rt[a].get||r)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Ht(e),e.length>1){var s=e.map(function(u){return Pt.quickSetter(u,t,i)}),r=s.length;return function(u){for(var h=r;h--;)s[h](u)}}e=e[0]||{};var o=Rt[t],a=Ii(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;rs._pt=0,h.init(e,i?u+i:u,rs,0,[e]),h.render(1,h),rs._pt&&uc(1,rs)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var s,r=Pt.to(e,Vi((s={},s[t]="+=0.1",s.paused=!0,s),i||{})),o=function(l,c,u){return r.resetTo(t,l,c,u)};return o.tween=r,o},isTweening:function(e){return De.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Oi(e.ease,ws.ease)),th(ws,e||{})},config:function(e){return th(Lt,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.plugins,r=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Rt[a]&&!zt[a]&&pr(t+" effect requires "+a+" plugin.")}),Ea[t]=function(a,l,c){return i(Ht(a),$t(l||{},r),c)},o&&(vt.prototype[t]=function(a,l,c){return this.add(Ea[t](a,wn(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){fe[e]=Oi(t)},parseEase:function(e,t){return arguments.length?Oi(e,t):fe},getById:function(e){return De.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new vt(e),s,r;for(i.smoothChildTiming=xt(e.smoothChildTiming),De.remove(i),i._dp=0,i._time=i._tTime=De._time,s=De._first;s;)r=s._next,(t||!(!s._dur&&s instanceof Ke&&s.vars.onComplete===s._targets[0]))&&pn(i,s,s._start-s._delay),s=r;return pn(De,i,0),i},context:function(e,t){return e?new Ff(e,t):Be},matchMedia:function(e){return new ay(e)},matchMediaRefresh:function(){return Li.forEach(function(e){var t=e.conditions,i,s;for(s in t)t[s]&&(t[s]=!1,i=1);i&&e.revert()})||_l()},addEventListener:function(e,t){var i=ho[e]||(ho[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=ho[e],s=i&&i.indexOf(t);s>=0&&i.splice(s,1)},utils:{wrap:Nw,wrapYoyo:Vw,distribute:vf,random:_f,snap:gf,normalize:Dw,getUnit:ct,clamp:Ow,splitColor:Cf,toArray:Ht,selector:ml,mapRange:wf,pipe:zw,unitize:Fw,interpolate:Uw,shuffle:mf},install:nf,effects:Ea,ticker:kt,updateRoot:vt.updateRoot,plugins:Rt,globalTimeline:De,core:{PropTween:Et,globals:sf,Tween:Ke,Timeline:vt,Animation:gr,getCache:Ii,_removeLinkedListItem:Yo,reverting:function(){return ht},context:function(e){return e&&Be&&(Be.data.push(e),e._ctx=Be),Be},suppressOverwrites:function(e){return Ql=e}}};Ct("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return To[n]=Ke[n]});kt.add(vt.updateRoot);rs=To.to({},{duration:0});var ly=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},cy=function(e,t){var i=e._targets,s,r,o;for(s in t)for(r=i.length;r--;)o=e._ptLookup[r][s],o&&(o=o.d)&&(o._pt&&(o=ly(o,s)),o&&o.modifier&&o.modifier(t[s],e,i[r],s))},Aa=function(e,t){return{name:e,rawVars:1,init:function(s,r,o){o._onInit=function(a){var l,c;if(et(r)&&(l={},Ct(r,function(u){return l[u]=1}),r=l),t){l={};for(c in r)l[c]=t(r[c]);r=l}cy(a,r)}}}},Pt=To.registerPlugin({name:"attr",init:function(e,t,i,s,r){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],s,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)ht?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Aa("roundProps",vl),Aa("modifiers"),Aa("snap",gf))||To;Ke.version=vt.version=Pt.version="3.12.5";tf=1;ec()&&Cs();fe.Power0;fe.Power1;fe.Power2;fe.Power3;fe.Power4;fe.Linear;fe.Quad;fe.Cubic;fe.Quart;fe.Quint;fe.Strong;fe.Elastic;fe.Back;fe.SteppedEase;fe.Bounce;fe.Sine;fe.Expo;fe.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ah,si,ps,hc,Ai,lh,dc,uy=function(){return typeof window<"u"},Nn={},Ti=180/Math.PI,fs=Math.PI/180,Zi=Math.atan2,ch=1e8,pc=/([A-Z])/g,hy=/(left|right|width|margin|padding|x)/i,dy=/[\s,\(]\S/,mn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},bl=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},py=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},fy=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},my=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Df=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Nf=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},vy=function(e,t,i){return e.style[t]=i},gy=function(e,t,i){return e.style.setProperty(t,i)},_y=function(e,t,i){return e._gsap[t]=i},by=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},wy=function(e,t,i,s,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},yy=function(e,t,i,s,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},Ve="transform",St=Ve+"Origin",xy=function n(e,t){var i=this,s=this.target,r=s.style,o=s._gsap;if(e in Nn&&r){if(this.tfm=this.tfm||{},e!=="transform")e=mn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=On(s,a)}):this.tfm[e]=o.x?o[e]:On(s,e),e===St&&(this.tfm.zOrigin=o.zOrigin);else return mn.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(Ve)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(St,t,"")),e=Ve}(r||t)&&this.props.push(e,t,r[e])},Vf=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Cy=function(){var e=this.props,t=this.target,i=t.style,s=t._gsap,r,o;for(r=0;r<e.length;r+=3)e[r+1]?t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(pc,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=dc(),(!r||!r.isStart)&&!i[Ve]&&(Vf(i),s.zOrigin&&i[St]&&(i[St]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Uf=function(e,t){var i={target:e,props:[],revert:Cy,save:xy};return e._gsap||Pt.core.getCache(e),t&&t.split(",").forEach(function(s){return i.save(s)}),i},jf,wl=function(e,t){var i=si.createElementNS?si.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):si.createElement(e);return i&&i.style?i:si.createElement(e)},_n=function n(e,t,i){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(pc,"-$1").toLowerCase())||s.getPropertyValue(t)||!i&&n(e,Es(t)||t,1)||""},uh="O,Moz,ms,Ms,Webkit".split(","),Es=function(e,t,i){var s=t||Ai,r=s.style,o=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(uh[o]+e in r););return o<0?null:(o===3?"ms":o>=0?uh[o]:"")+e},yl=function(){uy()&&window.document&&(ah=window,si=ah.document,ps=si.documentElement,Ai=wl("div")||{style:{}},wl("div"),Ve=Es(Ve),St=Ve+"Origin",Ai.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jf=!!Es("perspective"),dc=Pt.core.reverting,hc=1)},Ra=function n(e){var t=wl("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,o;if(ps.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),ps.removeChild(t),this.style.cssText=r,o},hh=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Hf=function(e){var t;try{t=e.getBBox()}catch{t=Ra.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Ra||(t=Ra.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+hh(e,["x","cx","x1"])||0,y:+hh(e,["y","cy","y1"])||0,width:0,height:0}:t},Gf=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Hf(e))},Ui=function(e,t){if(t){var i=e.style,s;t in Nn&&t!==St&&(t=Ve),i.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(s==="--"?t:t.replace(pc,"-$1").toLowerCase())):i.removeAttribute(t)}},ri=function(e,t,i,s,r,o){var a=new Et(e._pt,t,i,0,1,o?Nf:Df);return e._pt=a,a.b=s,a.e=r,e._props.push(i),a},dh={deg:1,rad:1,turn:1},Ey={grid:1,flex:1},pi=function n(e,t,i,s){var r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",a=Ai.style,l=hy.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=s==="px",p=s==="%",m,f,v,C;if(s===o||!r||dh[s]||dh[o])return r;if(o!=="px"&&!d&&(r=n(e,t,i,"px")),C=e.getCTM&&Gf(e),(p||o==="%")&&(Nn[t]||~t.indexOf("adius")))return m=C?e.getBBox()[l?"width":"height"]:e[u],Ge(p?r/m*h:r/100*m);if(a[l?"width":"height"]=h+(d?o:s),f=~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,C&&(f=(e.ownerSVGElement||{}).parentNode),(!f||f===si||!f.appendChild)&&(f=si.body),v=f._gsap,v&&p&&v.width&&l&&v.time===kt.time&&!v.uncache)return Ge(r/v.width*h);if(p&&(t==="height"||t==="width")){var g=e.style[t];e.style[t]=h+s,m=e[u],g?e.style[t]=g:Ui(e,t)}else(p||o==="%")&&!Ey[_n(f,"display")]&&(a.position=_n(e,"position")),f===e&&(a.position="static"),f.appendChild(Ai),m=Ai[u],f.removeChild(Ai),a.position="absolute";return l&&p&&(v=Ii(f),v.time=kt.time,v.width=f[u]),Ge(d?m*r/h:m&&r?h/m*r:0)},On=function(e,t,i,s){var r;return hc||yl(),t in mn&&t!=="transform"&&(t=mn[t],~t.indexOf(",")&&(t=t.split(",")[0])),Nn[t]&&t!=="transform"?(r=br(e,s),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:Ao(_n(e,St))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Mo[t]&&Mo[t](e,t,i)||_n(e,t)||of(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?pi(e,t,r,i)+i:r},Sy=function(e,t,i,s){if(!i||i==="none"){var r=Es(t,e,1),o=r&&_n(e,r,1);o&&o!==i?(t=r,i=o):t==="borderColor"&&(i=_n(e,"borderTopColor"))}var a=new Et(this._pt,e.style,t,0,1,Lf),l=0,c=0,u,h,d,p,m,f,v,C,g,E,T,k;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(f=e.style[t],e.style[t]=s,s=_n(e,t)||s,f?e.style[t]=f:Ui(e,t)),u=[i,s],Sf(u),i=u[0],s=u[1],d=i.match(ss)||[],k=s.match(ss)||[],k.length){for(;h=ss.exec(s);)v=h[0],g=s.substring(l,h.index),m?m=(m+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(m=1),v!==(f=d[c++]||"")&&(p=parseFloat(f)||0,T=f.substr((p+"").length),v.charAt(1)==="="&&(v=ds(p,v)+T),C=parseFloat(v),E=v.substr((C+"").length),l=ss.lastIndex-E.length,E||(E=E||Lt.units[t]||T,l===s.length&&(s+=E,a.e+=E)),T!==E&&(p=pi(e,t,f,E)||0),a._pt={_next:a._pt,p:g||c===1?g:",",s:p,c:C-p,m:m&&m<4||t==="zIndex"?Math.round:0});a.c=l<s.length?s.substring(l,s.length):""}else a.r=t==="display"&&s==="none"?Nf:Df;return Jp.test(s)&&(a.e=0),this._pt=a,a},ph={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Py=function(e){var t=e.split(" "),i=t[0],s=t[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(e=i,i=s,s=e),t[0]=ph[i]||i,t[1]=ph[s]||s,t.join(" ")},Ty=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,s=i.style,r=t.u,o=i._gsap,a,l,c;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)a=r[c],Nn[a]&&(l=1,a=a==="transformOrigin"?St:Ve),Ui(i,a);l&&(Ui(i,Ve),o&&(o.svg&&i.removeAttribute("transform"),br(i,1),o.uncache=1,Vf(s)))}},Mo={clearProps:function(e,t,i,s,r){if(r.data!=="isFromStart"){var o=e._pt=new Et(e._pt,t,i,0,0,Ty);return o.u=s,o.pr=-10,o.tween=r,e._props.push(i),1}}},_r=[1,0,0,1,0,0],qf={},Wf=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},fh=function(e){var t=_n(e,Ve);return Wf(t)?_r:t.substr(7).match(Qp).map(Ge)},fc=function(e,t){var i=e._gsap||Ii(e),s=e.style,r=fh(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?_r:r):(r===_r&&!e.offsetParent&&e!==ps&&!i.svg&&(l=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,ps.appendChild(e)),r=fh(e),l?s.display=l:Ui(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):ps.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},xl=function(e,t,i,s,r,o){var a=e._gsap,l=r||fc(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,p=l[0],m=l[1],f=l[2],v=l[3],C=l[4],g=l[5],E=t.split(" "),T=parseFloat(E[0])||0,k=parseFloat(E[1])||0,P,R,_,w;i?l!==_r&&(R=p*v-m*f)&&(_=T*(v/R)+k*(-f/R)+(f*g-v*C)/R,w=T*(-m/R)+k*(p/R)-(p*g-m*C)/R,T=_,k=w):(P=Hf(e),T=P.x+(~E[0].indexOf("%")?T/100*P.width:T),k=P.y+(~(E[1]||E[0]).indexOf("%")?k/100*P.height:k)),s||s!==!1&&a.smooth?(C=T-c,g=k-u,a.xOffset=h+(C*p+g*f)-C,a.yOffset=d+(C*m+g*v)-g):a.xOffset=a.yOffset=0,a.xOrigin=T,a.yOrigin=k,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!i,e.style[St]="0px 0px",o&&(ri(o,a,"xOrigin",c,T),ri(o,a,"yOrigin",u,k),ri(o,a,"xOffset",h,a.xOffset),ri(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",T+" "+k)},br=function(e,t){var i=e._gsap||new Af(e);if("x"in i&&!t&&!i.uncache)return i;var s=e.style,r=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=_n(e,St)||"0",u,h,d,p,m,f,v,C,g,E,T,k,P,R,_,w,b,I,B,z,D,N,L,U,$,Z,ne,oe,J,Ie,Ee,ze;return u=h=d=f=v=C=g=E=T=0,p=m=1,i.svg=!!(e.getCTM&&Gf(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[Ve]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Ve]!=="none"?l[Ve]:"")),s.scale=s.rotate=s.translate="none"),R=fc(e,i.svg),i.svg&&(i.uncache?($=e.getBBox(),c=i.xOrigin-$.x+"px "+(i.yOrigin-$.y)+"px",U=""):U=!t&&e.getAttribute("data-svg-origin"),xl(e,U||c,!!U||i.originIsAbsolute,i.smooth!==!1,R)),k=i.xOrigin||0,P=i.yOrigin||0,R!==_r&&(I=R[0],B=R[1],z=R[2],D=R[3],u=N=R[4],h=L=R[5],R.length===6?(p=Math.sqrt(I*I+B*B),m=Math.sqrt(D*D+z*z),f=I||B?Zi(B,I)*Ti:0,g=z||D?Zi(z,D)*Ti+f:0,g&&(m*=Math.abs(Math.cos(g*fs))),i.svg&&(u-=k-(k*I+P*z),h-=P-(k*B+P*D))):(ze=R[6],Ie=R[7],ne=R[8],oe=R[9],J=R[10],Ee=R[11],u=R[12],h=R[13],d=R[14],_=Zi(ze,J),v=_*Ti,_&&(w=Math.cos(-_),b=Math.sin(-_),U=N*w+ne*b,$=L*w+oe*b,Z=ze*w+J*b,ne=N*-b+ne*w,oe=L*-b+oe*w,J=ze*-b+J*w,Ee=Ie*-b+Ee*w,N=U,L=$,ze=Z),_=Zi(-z,J),C=_*Ti,_&&(w=Math.cos(-_),b=Math.sin(-_),U=I*w-ne*b,$=B*w-oe*b,Z=z*w-J*b,Ee=D*b+Ee*w,I=U,B=$,z=Z),_=Zi(B,I),f=_*Ti,_&&(w=Math.cos(_),b=Math.sin(_),U=I*w+B*b,$=N*w+L*b,B=B*w-I*b,L=L*w-N*b,I=U,N=$),v&&Math.abs(v)+Math.abs(f)>359.9&&(v=f=0,C=180-C),p=Ge(Math.sqrt(I*I+B*B+z*z)),m=Ge(Math.sqrt(L*L+ze*ze)),_=Zi(N,L),g=Math.abs(_)>2e-4?_*Ti:0,T=Ee?1/(Ee<0?-Ee:Ee):0),i.svg&&(U=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Wf(_n(e,Ve)),U&&e.setAttribute("transform",U))),Math.abs(g)>90&&Math.abs(g)<270&&(r?(p*=-1,g+=f<=0?180:-180,f+=f<=0?180:-180):(m*=-1,g+=g<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=Ge(p),i.scaleY=Ge(m),i.rotation=Ge(f)+a,i.rotationX=Ge(v)+a,i.rotationY=Ge(C)+a,i.skewX=g+a,i.skewY=E+a,i.transformPerspective=T+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(s[St]=Ao(c)),i.xOffset=i.yOffset=0,i.force3D=Lt.force3D,i.renderTransform=i.svg?Ay:jf?$f:My,i.uncache=0,i},Ao=function(e){return(e=e.split(" "))[0]+" "+e[1]},ka=function(e,t,i){var s=ct(t);return Ge(parseFloat(t)+parseFloat(pi(e,"x",i+"px",s)))+s},My=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,$f(e,t)},xi="0deg",zs="0px",Ci=") ",$f=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,h=i.rotationX,d=i.skewX,p=i.skewY,m=i.scaleX,f=i.scaleY,v=i.transformPerspective,C=i.force3D,g=i.target,E=i.zOrigin,T="",k=C==="auto"&&e&&e!==1||C===!0;if(E&&(h!==xi||u!==xi)){var P=parseFloat(u)*fs,R=Math.sin(P),_=Math.cos(P),w;P=parseFloat(h)*fs,w=Math.cos(P),o=ka(g,o,R*w*-E),a=ka(g,a,-Math.sin(P)*-E),l=ka(g,l,_*w*-E+E)}v!==zs&&(T+="perspective("+v+Ci),(s||r)&&(T+="translate("+s+"%, "+r+"%) "),(k||o!==zs||a!==zs||l!==zs)&&(T+=l!==zs||k?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ci),c!==xi&&(T+="rotate("+c+Ci),u!==xi&&(T+="rotateY("+u+Ci),h!==xi&&(T+="rotateX("+h+Ci),(d!==xi||p!==xi)&&(T+="skew("+d+", "+p+Ci),(m!==1||f!==1)&&(T+="scale("+m+", "+f+Ci),g.style[Ve]=T||"translate(0, 0)"},Ay=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,h=i.scaleX,d=i.scaleY,p=i.target,m=i.xOrigin,f=i.yOrigin,v=i.xOffset,C=i.yOffset,g=i.forceCSS,E=parseFloat(o),T=parseFloat(a),k,P,R,_,w;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=fs,c*=fs,k=Math.cos(l)*h,P=Math.sin(l)*h,R=Math.sin(l-c)*-d,_=Math.cos(l-c)*d,c&&(u*=fs,w=Math.tan(c-u),w=Math.sqrt(1+w*w),R*=w,_*=w,u&&(w=Math.tan(u),w=Math.sqrt(1+w*w),k*=w,P*=w)),k=Ge(k),P=Ge(P),R=Ge(R),_=Ge(_)):(k=h,_=d,P=R=0),(E&&!~(o+"").indexOf("px")||T&&!~(a+"").indexOf("px"))&&(E=pi(p,"x",o,"px"),T=pi(p,"y",a,"px")),(m||f||v||C)&&(E=Ge(E+m-(m*k+f*R)+v),T=Ge(T+f-(m*P+f*_)+C)),(s||r)&&(w=p.getBBox(),E=Ge(E+s/100*w.width),T=Ge(T+r/100*w.height)),w="matrix("+k+","+P+","+R+","+_+","+E+","+T+")",p.setAttribute("transform",w),g&&(p.style[Ve]=w)},Ry=function(e,t,i,s,r){var o=360,a=et(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?Ti:1),c=l-s,u=s+c+"deg",h,d;return a&&(h=r.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*ch)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*ch)%o-~~(c/o)*o)),e._pt=d=new Et(e._pt,t,i,s,c,py),d.e=u,d.u="deg",e._props.push(i),d},mh=function(e,t){for(var i in t)e[i]=t[i];return e},ky=function(e,t,i){var s=mh({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,h,d,p,m;s.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[Ve]=t,a=br(i,1),Ui(i,Ve),i.setAttribute("transform",c)):(c=getComputedStyle(i)[Ve],o[Ve]=t,a=br(i,1),o[Ve]=c);for(l in Nn)c=s[l],u=a[l],c!==u&&r.indexOf(l)<0&&(p=ct(c),m=ct(u),h=p!==m?pi(i,l,c,m):parseFloat(c),d=parseFloat(u),e._pt=new Et(e._pt,a,l,h,d-h,bl),e._pt.u=m||0,e._props.push(l));mh(a,s)};Ct("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",s="Bottom",r="Left",o=(e<3?[t,i,s,r]:[t+r,t+i,s+i,s+r]).map(function(a){return e<2?n+a:"border"+a+n});Mo[e>1?"border"+n:n]=function(a,l,c,u,h){var d,p;if(arguments.length<4)return d=o.map(function(m){return On(a,m,c)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(u+"").split(" "),p={},o.forEach(function(m,f){return p[m]=d[f]=d[f]||d[(f-1)/2|0]}),a.init(l,p,h)}});var Kf={name:"css",register:yl,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,s,r){var o=this._props,a=e.style,l=i.vars.startAt,c,u,h,d,p,m,f,v,C,g,E,T,k,P,R,_;hc||yl(),this.styles=this.styles||Uf(e),_=this.styles.props,this.tween=i;for(f in t)if(f!=="autoRound"&&(u=t[f],!(Rt[f]&&Rf(f,t,i,s,e,r)))){if(p=typeof u,m=Mo[f],p==="function"&&(u=u.call(i,s,e,r),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=mr(u)),m)m(this,e,f,u,i)&&(R=1);else if(f.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(f)+"").trim(),u+="",ci.lastIndex=0,ci.test(c)||(v=ct(c),C=ct(u)),C?v!==C&&(c=pi(e,f,c,C)+C):v&&(u+=v),this.add(a,"setProperty",c,u,s,r,0,0,f),o.push(f),_.push(f,0,a[f]);else if(p!=="undefined"){if(l&&f in l?(c=typeof l[f]=="function"?l[f].call(i,s,e,r):l[f],et(c)&&~c.indexOf("random(")&&(c=mr(c)),ct(c+"")||c==="auto"||(c+=Lt.units[f]||ct(On(e,f))||""),(c+"").charAt(1)==="="&&(c=On(e,f))):c=On(e,f),d=parseFloat(c),g=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),g&&(u=u.substr(2)),h=parseFloat(u),f in mn&&(f==="autoAlpha"&&(d===1&&On(e,"visibility")==="hidden"&&h&&(d=0),_.push("visibility",0,a.visibility),ri(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),f!=="scale"&&f!=="transform"&&(f=mn[f],~f.indexOf(",")&&(f=f.split(",")[0]))),E=f in Nn,E){if(this.styles.save(f),T||(k=e._gsap,k.renderTransform&&!t.parseTransform||br(e,t.parseTransform),P=t.smoothOrigin!==!1&&k.smooth,T=this._pt=new Et(this._pt,a,Ve,0,1,k.renderTransform,k,0,-1),T.dep=1),f==="scale")this._pt=new Et(this._pt,k,"scaleY",k.scaleY,(g?ds(k.scaleY,g+h):h)-k.scaleY||0,bl),this._pt.u=0,o.push("scaleY",f),f+="X";else if(f==="transformOrigin"){_.push(St,0,a[St]),u=Py(u),k.svg?xl(e,u,0,P,0,this):(C=parseFloat(u.split(" ")[2])||0,C!==k.zOrigin&&ri(this,k,"zOrigin",k.zOrigin,C),ri(this,a,f,Ao(c),Ao(u)));continue}else if(f==="svgOrigin"){xl(e,u,1,P,0,this);continue}else if(f in qf){Ry(this,k,f,d,g?ds(d,g+u):u);continue}else if(f==="smoothOrigin"){ri(this,k,"smooth",k.smooth,u);continue}else if(f==="force3D"){k[f]=u;continue}else if(f==="transform"){ky(this,u,e);continue}}else f in a||(f=Es(f)||f);if(E||(h||h===0)&&(d||d===0)&&!dy.test(u)&&f in a)v=(c+"").substr((d+"").length),h||(h=0),C=ct(u)||(f in Lt.units?Lt.units[f]:v),v!==C&&(d=pi(e,f,c,C)),this._pt=new Et(this._pt,E?k:a,f,d,(g?ds(d,g+h):h)-d,!E&&(C==="px"||f==="zIndex")&&t.autoRound!==!1?my:bl),this._pt.u=C||0,v!==C&&C!=="%"&&(this._pt.b=c,this._pt.r=fy);else if(f in a)Sy.call(this,e,f,c,g?g+u:u);else if(f in e)this.add(e,f,c||e[f],g?g+u:u,s,r);else if(f!=="parseTransform"){nc(f,u);continue}E||(f in a?_.push(f,0,a[f]):_.push(f,1,c||e[f])),o.push(f)}}R&&zf(this)},render:function(e,t){if(t.tween._time||!dc())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:On,aliases:mn,getSetter:function(e,t,i){var s=mn[t];return s&&s.indexOf(",")<0&&(t=s),t in Nn&&t!==St&&(e._gsap.x||On(e,"x"))?i&&lh===i?t==="scale"?by:_y:(lh=i||{})&&(t==="scale"?wy:yy):e.style&&!Jl(e.style[t])?vy:~t.indexOf("-")?gy:cc(e,t)},core:{_removeProperty:Ui,_getMatrix:fc}};Pt.utils.checkPrefix=Es;Pt.core.getStyleSaver=Uf;(function(n,e,t,i){var s=Ct(n+","+e+","+t,function(r){Nn[r]=1});Ct(e,function(r){Lt.units[r]="deg",qf[r]=1}),mn[s[13]]=n+","+e,Ct(i,function(r){var o=r.split(":");mn[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ct("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Lt.units[n]="px"});Pt.registerPlugin(Kf);var Iy=Pt.registerPlugin(Kf)||Pt;Iy.core.Tween;/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function Re(n){return n==null}function mc(n){return n!==null&&typeof n=="object"}function Cl(n){return n!==null&&typeof n=="object"}function By(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function ji(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,s)=>{const r=n[s],o=e[s];return Cl(r)&&Cl(o)?Object.assign(Object.assign({},i),{[s]:ji(r,o)}):Object.assign(Object.assign({},i),{[s]:s in e?o:r})},{})}function vc(n){return mc(n)?"target"in n:!1}const Oy={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class je{static alreadyDisposed(){return new je({type:"alreadydisposed"})}static notBindable(){return new je({type:"notbindable"})}static notCompatible(e,t){return new je({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new je({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new je({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=Oy[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class Ro{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!Ro.isBindable(i))throw je.notBindable();if(!(e in i))throw je.propertyNotFound(e);i[e]=t}}let Ye=class{constructor(){this.observers_={}}on(e,t,i){var s;let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:t,key:(s=i==null?void 0:i.key)!==null&&s!==void 0?s:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(s=>s.key!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(s=>{s.handler(t)})}};class Ly{constructor(e,t){var i;this.constraint_=t==null?void 0:t.constraint,this.equals_=(i=t==null?void 0:t.equals)!==null&&i!==void 0?i:(s,r)=>s===r,this.emitter=new Ye,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,s)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:s,sender:this}))}}class zy{constructor(e){this.emitter=new Ye,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.value_;s===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:this.value_,sender:this}))}}class Fy{constructor(e){this.emitter=new Ye,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Le(n,e){const t=e==null?void 0:e.constraint,i=e==null?void 0:e.equals;return!t&&!i?new zy(n):new Ly(n,e)}function Dy(n){return[new Fy(n),(e,t)=>{n.setRawValue(e,t)}]}class ue{constructor(e){this.emitter=new Ye,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,s)=>Object.assign(i,{[s]:Le(e[s])}),{})}static fromObject(e){const t=this.createCore(e);return new ue(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class Ir{constructor(e){this.values=ue.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}}class Ny{constructor(e){this.values=ue.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let s=e;return Re(i)||(s=Math.max(s,i)),Re(t)||(s=Math.min(s,t)),s}}class Vy{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}}class Uy{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const jy={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};class Hy{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=jy[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Gy={"+":n=>n,"-":n=>-n,"~":n=>~n};class qy{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=Gy[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function gc(n){return(e,t)=>{for(let i=0;i<n.length;i++){const s=n[i](e,t);if(s!=="")return s}return""}}function wr(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Wy(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function yr(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function $y(n,e){const t=yr(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const s=yr(n,e);return s===""?"":i+s}function _c(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=$y(n,e);return i===""?"":t+i}function Yf(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=Wy(n,e);return e+=i.length,i===""?"":i+yr(n,e)}function Ky(n,e){const t=Yf(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const s=yr(n,e);return e+=s.length,t+i+s+_c(n,e)}function Yy(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=yr(n,e);return e+=i.length,i===""?"":t+i+_c(n,e)}function Xy(n,e){const t=Yf(n,e);return e+=t.length,t===""?"":t+_c(n,e)}const Zy=gc([Ky,Yy,Xy]);function Qy(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Jy(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=Qy(n,e);return i===""?"":t+i}function ex(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function tx(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=ex(n,e);return i===""?"":t+i}function nx(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function ix(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=nx(n,e);return i===""?"":t+i}const sx=gc([Jy,tx,ix]),rx=gc([sx,Zy]);function ox(n,e){const t=rx(n,e);return e+=t.length,t===""?null:{evaluable:new Uy(t),cursor:e}}function ax(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=Zf(n,e);if(!i)return null;e=i.cursor,e+=wr(n,e).length;const s=n.substr(e,1);return e+=s.length,s!==")"?null:{evaluable:i.evaluable,cursor:e}}function lx(n,e){var t;return(t=ox(n,e))!==null&&t!==void 0?t:ax(n,e)}function Xf(n,e){const t=lx(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const s=Xf(n,e);return s?(e=s.cursor,{cursor:e,evaluable:new qy(i,s.evaluable)}):null}function cx(n,e,t){t+=wr(e,t).length;const i=n.filter(s=>e.startsWith(s,t))[0];return i?(t+=i.length,t+=wr(e,t).length,{cursor:t,operator:i}):null}function ux(n,e){return(t,i)=>{const s=n(t,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const o=cx(e,t,i);if(!o)break;i=o.cursor;const a=n(t,i);if(!a)return null;i=a.cursor,r=new Hy(o.operator,r,a.evaluable)}return r?{cursor:i,evaluable:r}:null}}const hx=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>ux(n,e),Xf);function Zf(n,e){return e+=wr(n,e).length,hx(n,e)}function dx(n){const e=Zf(n,0);return!e||e.cursor+wr(n,e.cursor).length!==n.length?null:e.evaluable}function Vn(n){var e;const t=dx(n);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function Qf(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=Vn(n);if(!Re(e))return e}return 0}function px(n){return String(n)}function Tt(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function Ce(n,e,t,i,s){const r=(n-e)/(t-e);return i+r*(s-i)}function vh(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Qe(n,e,t){return Math.min(Math.max(n,e),t)}function Jf(n,e){return(n%e+e)%e}function fx(n,e){return Re(n.step)?Math.max(vh(e),2):vh(n.step)}function em(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function tm(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function nm(n,e){return Re(n.step)?null:new Vy(n.step,e)}function im(n){return!Re(n.max)&&!Re(n.min)?new Ir({max:n.max,min:n.min}):!Re(n.max)||!Re(n.min)?new Ny({max:n.max,min:n.min}):null}function sm(n,e){var t,i,s;return{formatter:(t=n.format)!==null&&t!==void 0?t:Tt(fx(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:em(n),pointerScale:(s=n.pointerScale)!==null&&s!==void 0?s:tm(n,e)}}function rm(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function bc(n){return{constraint:n.constraint,textProps:ue.fromObject(sm(n.params,n.initialValue))}}class Ki{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class Qo{constructor(e){this.target=e}}class Br extends Qo{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}}class mx extends Qo{constructor(e,t){super(e),this.expanded=t}}class vx extends Qo{constructor(e,t){super(e),this.index=t}}class gx extends Qo{constructor(e,t){super(e),this.native=t}}class xr extends Ki{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ye,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Br(this,t.binding.target.read(),e.options.last))}}class _x{constructor(e,t){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Ye}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function bx(n){if(!("binding"in n))return!1;const e=n.binding;return vc(e)&&"read"in e&&"write"in e}function wx(n,e){const i=Object.keys(e).reduce((s,r)=>{if(s===void 0)return;const o=e[r],a=o(n[r]);return a.succeeded?Object.assign(Object.assign({},s),{[r]:a.value}):void 0},{});return i}function yx(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const s=e(i);if(!(!s.succeeded||s.value===void 0))return[...t,s.value]},[])}function xx(n){return n===null?!1:typeof n=="object"}function Sn(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function gh(n){return{custom:e=>Sn(e)(n),boolean:Sn(e=>typeof e=="boolean"?e:void 0)(n),number:Sn(e=>typeof e=="number"?e:void 0)(n),string:Sn(e=>typeof e=="string"?e:void 0)(n),function:Sn(e=>typeof e=="function"?e:void 0)(n),constant:e=>Sn(t=>t===e?e:void 0)(n),raw:Sn(e=>e)(n),object:e=>Sn(t=>{if(xx(t))return wx(t,e)})(n),array:e=>Sn(t=>{if(Array.isArray(t))return yx(t,e)})(n)}}const El={optional:gh(!0),required:gh(!1)};function Ue(n,e){const t=e(El),i=El.required.object(t)(n);return i.succeeded?i.value:void 0}function Ft(n,e,t,i){if(e&&!e(n))return!1;const s=Ue(n,t);return s?i(s):!1}function Dt(n,e){var t;return ji((t=n==null?void 0:n())!==null&&t!==void 0?t:{},e)}function zi(n){return"value"in n}function om(n){if(!mc(n)||!("binding"in n))return!1;const e=n.binding;return vc(e)}const vn="http://www.w3.org/2000/svg";function ko(n){n.offsetHeight}function Cx(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function wc(n){return n.ontouchstart!==void 0}function Ex(){return globalThis}function Sx(){return Ex().document}function Px(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const Tx={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Jo(n,e){const t=n.createElementNS(vn,"svg");return t.innerHTML=Tx[e],t}function am(n,e,t){n.insertBefore(e,n.children[t])}function yc(n){n.parentElement&&n.parentElement.removeChild(n)}function lm(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function Mx(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function cm(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function Fn(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function yn(n,e,t){Fn(n.value(e),t)}const Ax="tp";function me(n){return(t,i)=>[Ax,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const Fs=me("lbl");function Rx(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(s=>n.createTextNode(s)).forEach((s,r)=>{r>0&&t.appendChild(n.createElement("br")),t.appendChild(s)}),t}class um{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Fs()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Fs("l")),yn(t.props,"label",r=>{Re(r)?this.element.classList.add(Fs(void 0,"nol")):(this.element.classList.remove(Fs(void 0,"nol")),Mx(i),i.appendChild(Rx(e,r)))}),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("div");s.classList.add(Fs("v")),this.element.appendChild(s),this.valueElement=s}}class hm{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new um(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Ft(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Dt(null,{label:this.props.get("label")})}}function kx(){return["veryfirst","first","last","verylast"]}const _h=me(""),bh={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class ea{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{kx().forEach(i=>{t.classList.remove(_h(void 0,bh[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(_h(void 0,bh[i]))})}),this.viewProps.handleDispose(()=>{yc(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Ft(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Dt(null,Object.assign({},this.viewProps.exportState()))}}class Hi extends ea{constructor(e,t){if(t.value!==t.valueController.value)throw je.shouldNeverHappen();const i=t.valueController.viewProps,s=new hm(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new um(e,{props:t.props,viewProps:i}),viewProps:i})),this.labelController=s,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Ft(e,t=>{var i,s,r;return super.importState(t)&&this.labelController.importProps(t)&&((r=(s=(i=this.valueController).importProps)===null||s===void 0?void 0:s.call(i,e))!==null&&r!==void 0?r:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,i;return Dt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}))}}function wh(n){const e=Object.assign({},n);return delete e.value,e}class dm extends Hi{constructor(e,t){super(e,t),this.tag=t.tag}importState(e){return Ft(e,t=>super.importState(wh(e)),t=>({tag:t.optional.string}),t=>(this.tag=t.tag,!0))}exportState(){return Dt(()=>wh(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Ix(n){return zi(n)&&om(n.value)}class Bx extends dm{importState(e){return Ft(e,t=>super.importState(t),t=>({binding:t.required.object({value:t.required.raw})}),t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0))}}function Ox(n){return zi(n)&&bx(n.value)}function pm(n,e){for(;n.length<e;)n.push(void 0)}function Lx(n){const e=[];return pm(e,n),e}function zx(n){const e=n.indexOf(void 0);return e<0?n:n.slice(0,e)}function Fx(n,e){const t=[...zx(n),e];return t.length>n.length?t.splice(0,t.length-n.length):pm(t,n.length),t}class Dx{constructor(e){this.emitter=new Ye,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Le(Lx(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=Fx(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Nx(n){if(!("binding"in n))return!1;const e=n.binding;return vc(e)&&"read"in e&&!("write"in e)}class Vx extends dm{exportState(){return Dt(()=>super.exportState(),{binding:{readonly:!0}})}}function Ux(n){return zi(n)&&Nx(n.value)}class jx extends Ki{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,r=>{i(new gx(this,r.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}}function Hx(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function Ts(n,e){return t=>{Hx(n,e,t)}}function xc(n,e){Fn(n,t=>{e.textContent=t??""})}const Ia=me("btn");class Gx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ia()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(Ia("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(Ia("t")),xc(t.props.value("title"),s),this.buttonElement.appendChild(s)}}class qx{constructor(e,t){this.emitter=new Ye,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Gx(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Ft(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Dt(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class yh extends ea{constructor(e,t){const i=new qx(e,{props:t.buttonProps,viewProps:t.viewProps}),s=new hm(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:s.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=s}importState(e){return Ft(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Dt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class fm{constructor(e){const[t,i]=e.split("-"),s=t.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const Ms=new fm("2.0.5");function _t(n){return Object.assign({core:Ms},n)}const Wx=_t({id:"button",type:"blade",accept(n){const e=Ue(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new yh(n.document,{blade:n.blade,buttonProps:ue.fromObject({title:n.params.title}),labelProps:ue.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof yh?new jx(n.controller):null}});function $x(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Kx(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Yx(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Xx(n){return mc(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Zx(n,e){if(!Ro.isBindable(n))throw je.notBindable();return new Ro(n,e)}class Qx{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Ye,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const s=i??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,Zx(e,t),s),a=this.pool_.createBindingApi(o);return this.add(a,s.index)}addFolder(e){return Kx(this,e)}addButton(e){return $x(this,e)}addTab(e){return Yx(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),s=this.pool_.createApi(i);return this.add(s,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{Xx(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),s=om(t.value)?t.value.binding:null;this.emitter_.emit("change",new Br(i,s?s.target.read():t.value.rawValue,e.options.last))}}class Cc extends Ki{constructor(e,t){super(e),this.rackApi_=new Qx(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class Ec extends ea{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Ft(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,s)=>i.importState(t.children[s])))}exportState(){return Dt(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function Sl(n){return"rackController"in n}class Jx{constructor(e){this.emitter=new Ye,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw je.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(s=>{this.cache_.delete(s)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function e1(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(zi(i)&&i.value===e)return i}return null}function t1(n){return Sl(n)?n.rackController.rack.bcSet_:null}class n1{constructor(e){var t,i;this.emitter=new Ye,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Jx(t1),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),zi(i))i.value.emitter.on("change",this.onChildValueChange_);else if(Sl(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(zi(i))i.value.emitter.off("change",this.onChildValueChange_);else if(Sl(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(s=>{const r=[];s===t&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),s===i&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),s.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=e1(this.find(zi),e.sender);if(!t)throw je.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Sc{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new n1({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&am(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&yc(e.bladeController.view.element)}}function As(){return new ue({positions:Le([],{equals:By})})}class Or extends ue{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=ue.createCore(t);return new Or(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Re(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};yn(this,"expanded",i),yn(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function i1(n,e){let t=0;return Cx(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),ko(e),t=e.clientHeight,n.set("temporaryExpanded",null),ko(e)}),t}function xh(n,e){e.style.height=n.styleHeight}function Pc(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),Re(n.get("expandedHeight"))){const t=i1(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),ko(e)}),n.emitter.on("change",()=>{xh(n,e)}),xh(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}class mm extends Cc{constructor(e,t){super(e,t),this.emitter_=new Ye,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new mx(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const vm=me("cnt");class s1{constructor(e,t){var i;this.className_=me((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),vm()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),yn(this.foldable_,"completed",Ts(this.element,this.className_(void 0,"cpl")));const s=e.createElement("button");s.classList.add(this.className_("b")),yn(t.props,"title",c=>{Re(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),xc(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Pl extends Ec{constructor(e,t){var i;const s=Or.create((i=t.expanded)!==null&&i!==void 0?i:!0),r=new s1(e,{foldable:s,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Sc({blade:t.blade,element:r.containerElement,root:t.root,viewProps:t.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=s,Pc(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Ft(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Dt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const r1=_t({id:"folder",type:"blade",accept(n){const e=Ue(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new Pl(n.document,{blade:n.blade,expanded:n.params.expanded,props:ue.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Pl?new mm(n.controller,n.pool):null}}),o1=me("");function Ch(n,e){return Ts(n,o1(void 0,e))}class Gn extends ue{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Dy(Le(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,s;const r=e??{};return new Gn(ue.createCore({disabled:(t=r.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=r.hidden)!==null&&i!==void 0?i:!1,parent:(s=r.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Fn(this.globalDisabled_,Ch(e,"disabled")),yn(this,"hidden",Ch(e,"hidden"))}bindDisabled(e){Fn(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){Fn(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Eh=me("tbp");class a1{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Eh()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Eh("c")),this.element.appendChild(i),this.containerElement=i}}const Ds=me("tbi");class l1{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ds()),t.viewProps.bindClassModifiers(this.element),yn(t.props,"selected",r=>{r?this.element.classList.add(Ds(void 0,"sel")):this.element.classList.remove(Ds(void 0,"sel"))});const i=e.createElement("button");i.classList.add(Ds("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(Ds("t")),xc(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class c1{constructor(e,t){this.emitter=new Ye,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new l1(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Tl extends Ec{constructor(e,t){const i=new a1(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Sc({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new c1(e,{props:t.itemProps,viewProps:Gn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,yn(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(e){return Ft(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Dt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class u1 extends Cc{constructor(e,t){super(e,t),this.emitter_=new Ye,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new Tl(t,{blade:As(),itemProps:ue.fromObject({selected:!1,title:e.title}),props:ue.fromObject({selected:!1}),viewProps:Gn.create()}),s=this.pool_.createApi(i);return this.rackApi_.add(s,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new vx(this,e.rawValue))}}class h1 extends Cc{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}}const Sh=-1;class d1{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Le(!0),this.selectedIndex=Le(Sh),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Sh,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,s)=>{i.rawValue=s===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const Ns=me("tab");class p1{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ns(),vm()),t.viewProps.bindClassModifiers(this.element),Fn(t.empty,Ts(this.element,Ns(void 0,"nop")));const i=e.createElement("div");i.classList.add(Ns("t")),this.element.appendChild(i),this.itemsElement=i;const s=e.createElement("div");s.classList.add(Ns("i")),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(Ns("c")),this.element.appendChild(r),this.contentsElement=r}}class Ph extends Ec{constructor(e,t){const i=new d1,s=new p1(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Sc({blade:t.blade,element:s.contentsElement,viewProps:t.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;am(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;yc(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}const gm=_t({id:"tab",type:"blade",accept(n){const e=Ue(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new Ph(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new Tl(n.document,{blade:As(),itemProps:ue.fromObject({selected:!1,title:t.title}),props:ue.fromObject({selected:!1}),viewProps:Gn.create()});e.add(i)}),e},api(n){return n.controller instanceof Ph?new u1(n.controller,n.pool):n.controller instanceof Tl?new h1(n.controller,n.pool):null}});function f1(n,e){const t=n.accept(e.params);if(!t)return null;const i=Ue(e.params,s=>({disabled:s.optional.boolean,hidden:s.optional.boolean}));return n.controller({blade:As(),document:e.document,params:Object.assign(Object.assign({},t.params),{disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden}),viewProps:Gn.create({disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden})})}class Tc extends xr{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class m1{constructor(){this.disabled=!1,this.emitter=new Ye}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class v1{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Ye,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Lr{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}}function Io(n,e){if(n instanceof e)return n;if(n instanceof Lr){const t=n.constraints.reduce((i,s)=>i||(s instanceof e?s:null),null);if(t)return t}return null}class zr{constructor(e){this.values=ue.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(s=>s.value===e).length>0?e:t[0].value}}function Fr(n){var e;const t=El;if(Array.isArray(n))return(e=Ue({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function Mc(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function Ac(n){return Re(n)?null:new zr(Mc(n))}const Ba=me("lst");class g1{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(Ba()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(Ba("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const s=e.createElement("div");s.classList.add(Ba("m")),s.appendChild(Jo(e,"dropdown")),this.element.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,yn(this.props_,"options",r=>{lm(this.selectElement),r.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class fi{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new g1(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return Ft(e,null,t=>({options:t.required.custom(Fr)}),t=>(this.props.set("options",Mc(t.options)),!0))}exportProps(){return Dt(null,{options:this.props.get("options")})}}const Th=me("pop");class _1{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Th()),t.viewProps.bindClassModifiers(this.element),Fn(t.shows,Ts(this.element,Th(void 0,"v")))}}class _m{constructor(e,t){this.shows=Le(!1),this.viewProps=t.viewProps,this.view=new _1(e,{shows:this.shows,viewProps:this.viewProps})}}const Mh=me("txt");class b1{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Mh()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(Mh("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Cr{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new b1(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);Re(s)||(this.value.rawValue=s),this.view.refresh()}}function w1(n){return String(n)}function bm(n){return n==="false"?!1:!!n}function Ah(n){return w1(n)}function y1(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const x1=Tt(0);function Bo(n){return x1(n)+"%"}function wm(n){return String(n)}function Ml(n){return n}function Rs({primary:n,secondary:e,forward:t,backward:i}){let s=!1;function r(o){s||(s=!0,o(),s=!1)}n.emitter.on("change",o=>{r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function yt(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Er(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function Un(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function C1(n){return n==="ArrowUp"||n==="ArrowDown"}function ym(n){return C1(n)||n==="ArrowLeft"||n==="ArrowRight"}function Oa(n,e){var t,i;const s=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:n.pageX-(((t=s&&s.scrollX)!==null&&t!==void 0?t:0)+r.left),y:n.pageY-(((i=s&&s.scrollY)!==null&&i!==void 0?i:0)+r.top)}}class Yi{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ye,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Oa(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Oa(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Oa(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-s.left,y:i.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Vt=me("txt");class E1{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Vt(),Vt(void 0,"num")),t.arrayPosition&&this.element.classList.add(Vt(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Vt("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Vt()),this.inputElement.classList.add(Vt("i"));const s=e.createElement("div");s.classList.add(Vt("k")),this.element.appendChild(s),this.knobElement=s;const r=e.createElementNS(vn,"svg");r.classList.add(Vt("g")),this.knobElement.appendChild(r);const o=e.createElementNS(vn,"path");o.classList.add(Vt("gb")),r.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(vn,"path");a.classList.add(Vt("gh")),r.appendChild(a),this.guideHeadElem_=a;const l=e.createElement("div");l.classList.add(me("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Vt(void 0,"drg"));return}this.element.classList.add(Vt(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),s=Qe(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+s},0 L${i},4 L${i+s},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class Dr{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=Le(null),this.view=new E1(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new Yi(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const s=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),r=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return s!==void 0&&(o=Math.max(o,s)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);Re(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(e){const t=yt(this.props.get("keyScale"),Er(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){yt(this.props.get("keyScale"),Er(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const La=me("sld");class S1{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(La()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(La("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const s=e.createElement("div");s.classList.add(La("k")),this.trackElement.appendChild(s),this.knobElement=s,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=Qe(Ce(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class P1{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new S1(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yi(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(Ce(Qe(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=yt(this.props.get("keyScale"),Un(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){yt(this.props.get("keyScale"),Un(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const za=me("sldtxt");class T1{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(za());const i=e.createElement("div");i.classList.add(za("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(za("t")),this.textView_=t.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class Oo{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new P1(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new Dr(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new T1(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Ft(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Dt(null,{max:e.get("max"),min:e.get("min")})}}function xm(n){return{sliderProps:new ue({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new ue({formatter:Le(n.formatter),keyScale:n.keyScale,pointerScale:Le(n.pointerScale)})}}const M1={containerUnitSize:"cnt-usz"};function Cm(n){return`--${M1[n]}`}function Sr(n){return rm(n)}function oi(n){if(Cl(n))return Ue(n,Sr)}function zn(n,e){if(!n)return;const t=[],i=nm(n,e);i&&t.push(i);const s=im(n);return s&&t.push(s),new Lr(t)}function A1(n){return n?n.major===Ms.major:!1}function Em(n){if(n==="inline"||n==="popup")return n}function Nr(n,e){n.write(e)}const Xr=me("ckb");class R1{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Xr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(Xr("l")),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("input");s.classList.add(Xr("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,t.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(Xr("w")),this.labelElement.appendChild(r);const o=Jo(e,"check");r.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class k1{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new R1(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function I1(n){const e=[],t=Ac(n.options);return t&&e.push(t),new Lr(e)}const B1=_t({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=Ue(e,i=>({options:i.optional.custom(Fr),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>bm,constraint:n=>I1(n.params),writer:n=>Nr},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&Io(i,zr);return s?new fi(e,{props:new ue({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new k1(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof fi?new Tc(n.controller):null}}),Ei=me("col");class O1{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ei()),t.foldable.bindExpandedClass(this.element,Ei(void 0,"expanded")),yn(t.foldable,"completed",Ts(this.element,Ei(void 0,"cpl")));const i=e.createElement("div");i.classList.add(Ei("h")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Ei("s")),i.appendChild(s),this.swatchElement=s;const r=e.createElement("div");if(r.classList.add(Ei("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Ei("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function L1(n,e,t){const i=Qe(n/255,0,1),s=Qe(e/255,0,1),r=Qe(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c=0,u=0;const h=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),i===o?c=(s-r)/l:s===o?c=2+(r-i)/l:c=4+(i-s)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function z1(n,e,t){const i=(n%360+360)%360,s=Qe(e/100,0,1),r=Qe(t/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o/2;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function F1(n,e,t){const i=Qe(n/255,0,1),s=Qe(e/255,0,1),r=Qe(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c;l===0?c=0:o===i?c=60*(((s-r)/l%6+6)%6):o===s?c=60*((r-i)/l+2):c=60*((i-s)/l+4);const u=o===0?0:l/o,h=o;return[c,u*100,h*100]}function Sm(n,e,t){const i=Jf(n,360),s=Qe(e/100,0,1),r=Qe(t/100,0,1),o=r*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function D1(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function N1(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function xn(n){return[n[0],n[1],n[2]]}function ta(n,e){return[n[0],n[1],n[2],e]}const V1={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:D1,rgb:z1},hsv:{hsl:N1,hsv:(n,e,t)=>[n,e,t],rgb:Sm},rgb:{hsl:L1,hsv:F1,rgb:(n,e,t)=>[n,e,t]}};function Ss(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function U1(n,e){return n===e?e:Jf(n,e)}function Pm(n,e,t){var i;const s=Ss(e,t);return[e==="rgb"?Qe(n[0],0,s[0]):U1(n[0],s[0]),Qe(n[1],0,s[1]),Qe(n[2],0,s[2]),Qe((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function Rh(n,e,t,i){const s=Ss(e,t),r=Ss(e,i);return n.map((o,a)=>o/s[a]*r[a])}function Tm(n,e,t){const i=Rh(n,e.mode,e.type,"int"),s=V1[e.mode][t.mode](...i);return Rh(s,t.mode,"int",t.type)}class be{static black(){return new be([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=Pm(e,t,this.type)}getComponents(e){return ta(Tm(xn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Yn=me("colp");class j1{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Yn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Yn("hsv"));const s=e.createElement("div");s.classList.add(Yn("sv")),this.svPaletteView_=t.svPaletteView,s.appendChild(this.svPaletteView_.element),i.appendChild(s);const r=e.createElement("div");r.classList.add(Yn("h")),this.hPaletteView_=t.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(Yn("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const a=e.createElement("div");a.classList.add(Yn("a"));const l=e.createElement("div");l.classList.add(Yn("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=e.createElement("div");c.classList.add(Yn("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function H1(n){return n==="int"?"int":n==="float"?"float":void 0}function Rc(n){return Ue(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(H1)}),expanded:e.optional.boolean,picker:e.optional.custom(Em),readonly:e.optional.constant(!1)}))}function Gi(n){return n?.1:1}function Mm(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}class kc{constructor(e,t){this.type="float",this.mode=t,this.comps_=Pm(e,t,this.type)}getComponents(e){return ta(Tm(xn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const G1={int:(n,e)=>new be(n,e),float:(n,e)=>new kc(n,e)};function Ic(n,e,t){return G1[t](n,e)}function q1(n){return n.type==="float"}function W1(n){return n.type==="int"}function $1(n){const e=n.getComponents(),t=Ss(n.mode,"int");return new be([Math.round(Ce(e[0],0,1,0,t[0])),Math.round(Ce(e[1],0,1,0,t[1])),Math.round(Ce(e[2],0,1,0,t[2])),e[3]],n.mode)}function K1(n){const e=n.getComponents(),t=Ss(n.mode,"int");return new kc([Ce(e[0],0,t[0],0,1),Ce(e[1],0,t[1],0,1),Ce(e[2],0,t[2],0,1),e[3]],n.mode)}function gt(n,e){if(n.type===e)return n;if(W1(n)&&e==="float")return K1(n);if(q1(n)&&e==="int")return $1(n);throw je.shouldNeverHappen()}function Y1(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function Gt(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const X1={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function Am(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return X1[i](t)}function Rm(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Gt(e[1],255),Gt(e[2],255),Gt(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function Z1(n){const e=Rm(n);return e?new be(e,"rgb"):null}function km(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Gt(e[1],255),Gt(e[2],255),Gt(e[3],255),Gt(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function Q1(n){const e=km(n);return e?new be(e,"rgb"):null}function Im(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Am(e[1]),Gt(e[2],100),Gt(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function J1(n){const e=Im(n);return e?new be(e,"hsl"):null}function Bm(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Am(e[1]),Gt(e[2],100),Gt(e[3],100),Gt(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function eC(n){const e=Bm(n);return e?new be(e,"hsl"):null}function Om(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function tC(n){const e=Om(n);return e?new be(e,"rgb"):null}function Lm(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Ce(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),Ce(parseInt(t[4],16),0,255,0,1)]:null}function nC(n){const e=Lm(n);return e?new be(e,"rgb"):null}function zm(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function iC(n){return e=>{const t=zm(e);return t?Ic(t,"rgb",n):null}}function Fm(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function sC(n){return e=>{const t=Fm(e);return t?Ic(t,"rgb",n):null}}const rC=[{parser:Om,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Lm,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Rm,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:km,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Im,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Bm,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:zm,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Fm,result:{alpha:!0,mode:"rgb",notation:"object"}}];function oC(n){return rC.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function aC(n,e="int"){const t=oC(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function Vr(n){const e=[tC,nC,Z1,Q1,J1,eC];e.push(iC("int"),sC("int"));const t=y1(e);return i=>{const s=t(i);return s?gt(s,n):null}}function lC(n){const e=Vr("int");if(typeof n!="string")return be.black();const t=e(n);return t??be.black()}function Dm(n){const e=Qe(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function Bc(n,e="#"){const t=xn(n.getComponents("rgb")).map(Dm).join("");return`${e}${t}`}function Oc(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(Dm).join("");return`${e}${i}`}function Nm(n){const e=Tt(0),t=gt(n,"int");return`rgb(${xn(t.getComponents("rgb")).map(s=>e(s)).join(", ")})`}function po(n){const e=Tt(2),t=Tt(0);return`rgba(${gt(n,"int").getComponents("rgb").map((r,o)=>(o===3?e:t)(r)).join(", ")})`}function cC(n){const e=[Tt(0),Bo,Bo],t=gt(n,"int");return`hsl(${xn(t.getComponents("hsl")).map((s,r)=>e[r](s)).join(", ")})`}function uC(n){const e=[Tt(0),Bo,Bo,Tt(2)];return`hsla(${gt(n,"int").getComponents("hsl").map((s,r)=>e[r](s)).join(", ")})`}function Vm(n,e){const t=Tt(e==="float"?2:0),i=["r","g","b"],s=gt(n,e);return`{${xn(s.getComponents("rgb")).map((o,a)=>`${i[a]}: ${t(o)}`).join(", ")}}`}function hC(n){return e=>Vm(e,n)}function Um(n,e){const t=Tt(2),i=Tt(e==="float"?2:0),s=["r","g","b","a"];return`{${gt(n,e).getComponents("rgb").map((a,l)=>{const c=l===3?t:i;return`${s[l]}: ${c(a)}`}).join(", ")}}`}function dC(n){return e=>Um(e,n)}const pC=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Bc},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Oc},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Nm},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:po},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:cC},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:uC},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:hC(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:dC(e)}],[])];function jm(n){return pC.reduce((e,t)=>e||(Y1(t.format,n)?t.stringifier:null),null)}const Vs=me("apl");class fC{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Vs()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Vs("b")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Vs("c")),i.appendChild(s),this.colorElem_=s;const r=e.createElement("div");r.classList.add(Vs("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Vs("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new be([t[0],t[1],t[2],0],"rgb"),s=new be([t[0],t[1],t[2],255],"rgb"),r=["to right",po(i),po(s)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=po(e);const o=Ce(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class mC{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new fC(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,s=this.value.rawValue,[r,o,a]=s.getComponents("hsv");this.value.setRawValue(new be([r,o,a,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=yt(Gi(!0),Un(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new be([s,r,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){yt(Gi(!0),Un(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Qi=me("coltxt");function vC(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,s)=>{const r=n.createElement("option");return r.textContent=s.text,r.value=s.value,i.appendChild(r),i},n.createDocumentFragment())),e}class gC{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Qi()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Qi("m")),this.modeElem_=vC(e),this.modeElem_.classList.add(Qi("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const s=e.createElement("div");s.classList.add(Qi("mm")),s.appendChild(Jo(e,"dropdown")),i.appendChild(s),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Qi("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=t.inputViews,this.applyInputViews_(),Fn(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){lm(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(Qi("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}}function _C(n){return Tt(n==="float"?2:0)}function bC(n,e,t){const i=Ss(n,e)[t];return new Ir({min:0,max:i})}function wC(n,e,t){return new Dr(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:ue.fromObject({formatter:_C(e.colorType),keyScale:Gi(!1),pointerScale:e.colorType==="float"?.01:1}),value:Le(0,{constraint:bC(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function yC(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:Vn,viewProps:e.viewProps};return[0,1,2].map(i=>{const s=wC(n,t,i);return Rs({primary:e.value,secondary:s.value,forward(r){return gt(r,e.colorType).getComponents(e.colorMode)[i]},backward(r,o){const a=e.colorMode,c=gt(r,e.colorType).getComponents(a);c[i]=o;const u=Ic(ta(xn(c),c[3]),a,e.colorType);return gt(u,"int")}}),s})}function xC(n,e){const t=new Cr(n,{parser:Vr("int"),props:ue.fromObject({formatter:Bc}),value:Le(be.black()),viewProps:e.viewProps});return Rs({primary:e.value,secondary:t.value,forward:i=>new be(xn(i.getComponents()),i.mode),backward:(i,s)=>new be(ta(xn(s.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function CC(n){return n!=="hex"}class EC{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=Le(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new gC(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return CC(t)?yC(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):xC(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const Fa=me("hpl");class SC{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Fa()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Fa("c")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Fa("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Nm(new be([t,100,100],"hsv"));const i=Ce(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class PC{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new SC(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=Ce(Qe(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),s=this.value.rawValue,[,r,o,a]=s.getComponents("hsv");this.value.setRawValue(new be([i,r,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=yt(Gi(!1),Un(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new be([s+t,r,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){yt(Gi(!1),Un(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Da=me("svp"),kh=64;class TC{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Da()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=kh,i.width=kh,i.classList.add(Da("c")),this.element.appendChild(i),this.canvasElement=i;const s=e.createElement("div");s.classList.add(Da("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=Px(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,s,r),a=o.data;for(let u=0;u<r;u++)for(let h=0;h<s;h++){const d=Ce(h,0,s,0,100),p=Ce(u,0,r,100,0),m=Sm(i[0],d,p),f=(u*s+h)*4;a[f]=m[0],a[f+1]=m[1],a[f+2]=m[2],a[f+3]=255}e.putImageData(o,0,0);const l=Ce(i[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=Ce(i[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class MC{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new TC(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=Ce(e.point.x,0,e.bounds.width,0,100),s=Ce(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new be([r,i,s,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){ym(e.key)&&e.preventDefault();const[t,i,s,r]=this.value.rawValue.getComponents("hsv"),o=Gi(!1),a=yt(o,Un(e)),l=yt(o,Er(e));a===0&&l===0||this.value.setRawValue(new be([t,i+a,s+l,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Gi(!1),i=yt(t,Un(e)),s=yt(t,Er(e));i===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class AC{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new PC(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new MC(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new mC(e,{value:this.value,viewProps:this.viewProps}),text:new Dr(e,{parser:Vn,props:ue.fromObject({pointerScale:.01,keyScale:.1,formatter:Tt(2)}),value:Le(0,{constraint:new Ir({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Rs({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,s)=>{const r=i.getComponents();return r[3]=s,new be(r,i.mode)}}),this.textsC_=new EC(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new j1(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Na=me("colsw");class RC{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Na()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Na("sw")),this.element.appendChild(i),this.swatchElem_=i;const s=e.createElement("button");s.classList.add(Na("b")),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=Oc(e)}onValueChange_(){this.update_()}}class kC{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new RC(e,{value:this.value,viewProps:this.viewProps})}}class Lc{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Or.create(t.expanded),this.swatchC_=new kC(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Cr(e,{parser:t.parser,props:ue.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new O1(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new _m(e,{viewProps:this.viewProps}):null;const s=new AC(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),Rs({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Pc(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=cm(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!wc(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function IC(n){return xn(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function BC(n){return n.getComponents("rgb").reduce((e,t,i)=>{const s=Math.floor(i===3?t*255:t)&255;return e<<8|s},0)>>>0}function OC(n){return new be([n>>16&255,n>>8&255,n&255],"rgb")}function LC(n){return new be([n>>24&255,n>>16&255,n>>8&255,Ce(n&255,0,255,0,1)],"rgb")}function zC(n){return typeof n!="number"?be.black():OC(n)}function FC(n){return typeof n!="number"?be.black():LC(n)}function fo(n,e){return typeof n!="object"||Re(n)?!1:e in n&&typeof n[e]=="number"}function Hm(n){return fo(n,"r")&&fo(n,"g")&&fo(n,"b")}function Gm(n){return Hm(n)&&fo(n,"a")}function qm(n){return Hm(n)}function zc(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let s=0;s<t.length;s++)if(t[s]!==i[s])return!1;return!0}function Ih(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function DC(n){const e=jm(n);return e?(t,i)=>{Nr(t,e(i))}:null}function NC(n){const e=n?BC:IC;return(t,i)=>{Nr(t,e(i))}}function VC(n,e,t){const s=gt(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b),n.writeProperty("a",s.a)}function UC(n,e,t){const s=gt(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b)}function jC(n,e){return(t,i)=>{n?VC(t,i,e):UC(t,i,e)}}function HC(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function GC(n){return n?e=>Oc(e,"0x"):e=>Bc(e,"0x")}function qC(n){return"color"in n||n.view==="color"}const WC=_t({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!qC(e))return null;const t=Rc(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:HC(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?FC:zC,equals:zc,writer:n=>NC(n.params.supportsAlpha)},controller:n=>{var e,t;return new Lc(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:GC(n.params.supportsAlpha),parser:Vr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function $C(n,e){if(!qm(n))return gt(be.black(),e);if(e==="int"){const t=Ih(n);return new be(t,"rgb")}if(e==="float"){const t=Ih(n);return new kc(t,"rgb")}return gt(be.black(),"int")}function KC(n){return Gm(n)}function YC(n){return e=>{const t=$C(e,n);return gt(t,"int")}}function XC(n,e){return t=>n?Um(t,e):Vm(t,e)}const ZC=_t({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!qm(n))return null;const i=Rc(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=Mm(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>YC(n.params.colorType),equals:zc,writer:n=>jC(KC(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=Gm(n.initialValue);return new Lc(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:XC(i,n.params.colorType),parser:Vr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}}),QC=_t({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=aC(n,Mm(e));if(!t)return null;const i=jm(t);if(!i)return null;const s=Rc(e);return s?{initialValue:n,params:Object.assign(Object.assign({},s),{format:t,stringifier:i})}:null},binding:{reader:()=>lC,equals:zc,writer:n=>{const e=DC(n.params.format);if(!e)throw je.notBindable();return e}},controller:n=>{var e,t;return new Lc(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:Vr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class Fc{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,s)=>{var r,o;return(o=(r=this.components[s])===null||r===void 0?void 0:r.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}}const Bh=me("pndtxt");class JC{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Bh()),this.textViews.forEach(i=>{const s=e.createElement("div");s.classList.add(Bh("a")),s.appendChild(i.element),this.element.appendChild(s)})}}function eE(n,e,t){return new Dr(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:Le(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class Dc{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,s)=>eE(e,t,s)),this.acs_.forEach((i,s)=>{Rs({primary:this.value,secondary:i.value,forward:r=>t.assembly.toComponents(r)[s],backward:(r,o)=>{const a=t.assembly.toComponents(r);return a[s]=o,t.assembly.fromComponents(a)}})}),this.view=new JC(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class tE extends xr{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function nE(n,e){const t=[],i=nm(n,e);i&&t.push(i);const s=im(n);s&&t.push(s);const r=Ac(n.options);return r&&t.push(r),new Lr(t)}const iE=_t({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=Ue(e,i=>Object.assign(Object.assign({},rm(i)),{options:i.optional.custom(Fr),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Qf,constraint:n=>nE(n.params,n.initialValue),writer:n=>Nr},controller:n=>{const e=n.value,t=n.constraint,i=t&&Io(t,zr);if(i)return new fi(n.document,{props:new ue({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const s=sm(n.params,e.rawValue),r=t&&Io(t,Ir);return r?new Oo(n.document,Object.assign(Object.assign({},xm(Object.assign(Object.assign({},s),{keyScale:Le(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:Vn,value:e,viewProps:n.viewProps})):new Dr(n.document,{parser:Vn,props:ue.fromObject(s),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof Oo?new tE(n.controller):n.controller.valueController instanceof fi?new Tc(n.controller):null}});class ui{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(Re(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const Wm={toComponents:n=>n.getComponents(),fromComponents:n=>new ui(...n)},Ji=me("p2d");class sE{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ji()),t.viewProps.bindClassModifiers(this.element),Fn(t.expanded,Ts(this.element,Ji(void 0,"expanded")));const i=e.createElement("div");i.classList.add(Ji("h")),this.element.appendChild(i);const s=e.createElement("button");s.classList.add(Ji("b")),s.appendChild(Jo(e,"p2dpad")),t.viewProps.bindDisabled(s),i.appendChild(s),this.buttonElement=s;const r=e.createElement("div");if(r.classList.add(Ji("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Ji("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const Xn=me("p2dp");class rE{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Xn()),t.layout==="popup"&&this.element.classList.add(Xn(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Xn("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const s=e.createElementNS(vn,"svg");s.classList.add(Xn("g")),this.padElement.appendChild(s),this.svgElem_=s;const r=e.createElementNS(vn,"line");r.classList.add(Xn("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(vn,"line");o.classList.add(Xn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(vn,"line");a.classList.add(Xn("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=e.createElement("div");l.classList.add(Xn("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),s=Ce(e,-i,+i,0,100),r=Ce(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Oh(n,e,t){return[yt(e[0],Un(n)),yt(e[1],Er(n))*(t?1:-1)]}class oE{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new rE(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yi(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),s=Ce(e.point.x,0,e.bounds.width,-i,+i),r=Ce(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new ui(s,r),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){ym(e.key)&&e.preventDefault();const[t,i]=Oh(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new ui(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=Oh(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class aE{constructor(e,t){var i,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Or.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new _m(e,{viewProps:this.viewProps}):null;const r=new oE(e,{layout:t.pickerLayout,props:new ue({invertsY:Le(t.invertsY),max:Le(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new Dc(e,{assembly:Wm,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new sE(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Rs({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Pc(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=cm(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!wc(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function lE(n){return ui.isObject(n)?new ui(n.x,n.y):new ui}function cE(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function uE(n,e){return new Fc({assembly:Wm,components:[zn(Object.assign(Object.assign({},n),n.x),e.x),zn(Object.assign(Object.assign({},n),n.y),e.y)]})}function Lh(n,e){var t,i;if(!Re(n.min)||!Re(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const s=em(n);return Math.max(Math.abs(s)*10,Math.abs(e)*10)}function hE(n,e){var t,i;const s=Lh(ji(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),r=Lh(ji(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(s,r)}function dE(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}const pE=_t({id:"input-point2d",type:"input",accept:(n,e)=>{if(!ui.isObject(n))return null;const t=Ue(e,i=>Object.assign(Object.assign({},Sr(i)),{expanded:i.optional.boolean,picker:i.optional.custom(Em),readonly:i.optional.constant(!1),x:i.optional.custom(oi),y:i.optional.object(Object.assign(Object.assign({},Sr(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>lE,constraint:n=>uE(n.params,n.initialValue),equals:ui.equals,writer:()=>cE},controller:n=>{var e,t;const i=n.document,s=n.value,r=n.constraint,o=[n.params.x,n.params.y];return new aE(i,{axes:s.rawValue.getComponents().map((a,l)=>{var c;return bc({constraint:r.components[l],initialValue:a,params:ji(n.params,(c=o[l])!==null&&c!==void 0?c:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:dE(n.params),max:hE(n.params,s.rawValue),parser:Vn,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:s,viewProps:n.viewProps})}});class ms{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Re(e))return!1;const t=e.x,i=e.y,s=e.z;return!(typeof t!="number"||typeof i!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const $m={toComponents:n=>n.getComponents(),fromComponents:n=>new ms(...n)};function fE(n){return ms.isObject(n)?new ms(n.x,n.y,n.z):new ms}function mE(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function vE(n,e){return new Fc({assembly:$m,components:[zn(Object.assign(Object.assign({},n),n.x),e.x),zn(Object.assign(Object.assign({},n),n.y),e.y),zn(Object.assign(Object.assign({},n),n.z),e.z)]})}const gE=_t({id:"input-point3d",type:"input",accept:(n,e)=>{if(!ms.isObject(n))return null;const t=Ue(e,i=>Object.assign(Object.assign({},Sr(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(oi),y:i.optional.custom(oi),z:i.optional.custom(oi)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>fE,constraint:n=>vE(n.params,n.initialValue),equals:ms.equals,writer:n=>mE},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new Dc(n.document,{assembly:$m,axes:e.rawValue.getComponents().map((s,r)=>{var o;return bc({constraint:t.components[r],initialValue:s,params:ji(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Vn,value:e,viewProps:n.viewProps})}});class vs{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.z=i,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Re(e))return!1;const t=e.x,i=e.y,s=e.z,r=e.w;return!(typeof t!="number"||typeof i!="number"||typeof s!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Km={toComponents:n=>n.getComponents(),fromComponents:n=>new vs(...n)};function _E(n){return vs.isObject(n)?new vs(n.x,n.y,n.z,n.w):new vs}function bE(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function wE(n,e){return new Fc({assembly:Km,components:[zn(Object.assign(Object.assign({},n),n.x),e.x),zn(Object.assign(Object.assign({},n),n.y),e.y),zn(Object.assign(Object.assign({},n),n.z),e.z),zn(Object.assign(Object.assign({},n),n.w),e.w)]})}const yE=_t({id:"input-point4d",type:"input",accept:(n,e)=>{if(!vs.isObject(n))return null;const t=Ue(e,i=>Object.assign(Object.assign({},Sr(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(oi),x:i.optional.custom(oi),y:i.optional.custom(oi),z:i.optional.custom(oi)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>_E,constraint:n=>wE(n.params,n.initialValue),equals:vs.equals,writer:n=>bE},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new Dc(n.document,{assembly:Km,axes:e.rawValue.getComponents().map((s,r)=>{var o;return bc({constraint:t.components[r],initialValue:s,params:ji(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Vn,value:e,viewProps:n.viewProps})}});function xE(n){const e=[],t=Ac(n.options);return t&&e.push(t),new Lr(e)}const CE=_t({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=Ue(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(Fr)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>wm,constraint:n=>xE(n.params),writer:n=>Nr},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&Io(i,zr);return s?new fi(e,{props:new ue({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new Cr(e,{parser:r=>r,props:ue.fromObject({formatter:Ml}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof fi?new Tc(n.controller):null}}),Ur={monitor:{defaultInterval:200,defaultRows:3}},zh=me("mll");class EE{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(zh()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(zh("i")),i.style.height=`calc(var(${Cm("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(s=>{s!==void 0&&i.push(this.formatter_(s))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class Nc{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new EE(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const Fh=me("sgl");class SE{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Fh()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Fh("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class Vc{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new SE(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}const PE=_t({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=Ue(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>bm},controller:n=>{var e;return n.value.rawValue.length===1?new Vc(n.document,{formatter:Ah,value:n.value,viewProps:n.viewProps}):new Nc(n.document,{formatter:Ah,rows:(e=n.params.rows)!==null&&e!==void 0?e:Ur.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class TE extends xr{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Zn=me("grl");class ME{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Zn()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(vn,"svg");i.classList.add(Zn("g")),i.style.height=`calc(var(${Cm("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const s=e.createElementNS(vn,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const r=e.createElement("div");r.classList.add(Zn("t"),me("tt")()),this.element.appendChild(r),this.tooltipElem_=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,s=this.props_.get("min"),r=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,d)=>{if(h===void 0)return;const p=Ce(d,0,i,0,e),m=Ce(h,s,r,t,0);o.push([p,m].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(Zn("t","a"));return}const c=Ce(this.cursor_.rawValue,0,i,0,e),u=Ce(l,s,r,t,0);a.style.left=`${c}px`,a.style.top=`${u}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(Zn("t","a"))||(a.classList.add(Zn("t","a"),Zn("t","in")),ko(a),a.classList.remove(Zn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Ym{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=Le(-1),this.view=new ME(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!wc(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new Yi(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Ft(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Dt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(Ce(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ce(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Al(n){return Re(n.format)?Tt(2):n.format}function AE(n){var e;return n.value.rawValue.length===1?new Vc(n.document,{formatter:Al(n.params),value:n.value,viewProps:n.viewProps}):new Nc(n.document,{formatter:Al(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Ur.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function RE(n){var e,t,i;return new Ym(n.document,{formatter:Al(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Ur.monitor.defaultRows,props:ue.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function Dh(n){return n.view==="graph"}const kE=_t({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=Ue(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>Dh(n)?64:1,reader:n=>Qf},controller:n=>Dh(n.params)?RE(n):AE(n),api:n=>n.controller.valueController instanceof Ym?new TE(n.controller):null}),IE=_t({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=Ue(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>wm},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new Nc(n.document,{formatter:Ml,rows:(e=n.params.rows)!==null&&e!==void 0?e:Ur.monitor.defaultRows,value:t,viewProps:n.viewProps}):new Vc(n.document,{formatter:Ml,value:t,viewProps:n.viewProps})}});class BE{constructor(){this.map_=new Map}get(e){var t;return(t=this.map_.get(e))!==null&&t!==void 0?t:null}has(e){return this.map_.has(e)}add(e,t){return this.map_.set(e,t),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),t}}class OE{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function LE(n,e){var t;const i=n.accept(e.target.read(),e.params);if(Re(i))return null;const s={target:e.target,initialValue:i.initialValue,params:i.params},r=Ue(e.params,h=>({disabled:h.optional.boolean,hidden:h.optional.boolean,label:h.optional.string,tag:h.optional.string})),o=n.binding.reader(s),a=n.binding.constraint?n.binding.constraint(s):void 0,l=new OE({reader:o,target:e.target,writer:n.binding.writer(s)}),c=new _x(Le(o(i.initialValue),{constraint:a,equals:n.binding.equals}),l),u=n.controller({constraint:a,document:e.document,initialValue:i.initialValue,params:i.params,value:c,viewProps:Gn.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})});return new Bx(e.document,{blade:As(),props:ue.fromObject({label:"label"in e.params?(t=r==null?void 0:r.label)!==null&&t!==void 0?t:null:e.target.key}),tag:r==null?void 0:r.tag,value:c,valueController:u})}class zE{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function FE(n,e){return e===0?new m1:new v1(n,e??Ur.monitor.defaultInterval)}function DE(n,e){var t,i,s;const r=n.accept(e.target.read(),e.params);if(Re(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},a=Ue(e.params,d=>({bufferSize:d.optional.number,disabled:d.optional.boolean,hidden:d.optional.boolean,interval:d.optional.number,label:d.optional.string})),l=n.binding.reader(o),c=(i=(t=a==null?void 0:a.bufferSize)!==null&&t!==void 0?t:n.binding.defaultBufferSize&&n.binding.defaultBufferSize(r.params))!==null&&i!==void 0?i:1,u=new Dx({binding:new zE({reader:l,target:e.target}),bufferSize:c,ticker:FE(e.document,a==null?void 0:a.interval)}),h=n.controller({document:e.document,params:r.params,value:u,viewProps:Gn.create({disabled:a==null?void 0:a.disabled,hidden:a==null?void 0:a.hidden})});return h.viewProps.bindDisabled(u.ticker),h.viewProps.handleDispose(()=>{u.ticker.dispose()}),new Vx(e.document,{blade:As(),props:ue.fromObject({label:"label"in e.params?(s=a==null?void 0:a.label)!==null&&s!==void 0?s:null:e.target.key}),value:u,valueController:h})}class NE{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,t){if(!A1(t.core))throw je.notCompatible(e,t.id);t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput_(e,t,i){return this.pluginsMap_.inputs.reduce((s,r)=>s??LE(r,{document:e,target:t,params:i}),null)}createMonitor_(e,t,i){return this.pluginsMap_.monitors.reduce((s,r)=>s??DE(r,{document:e,params:i,target:t}),null)}createBinding(e,t,i){const s=t.read();if(Re(s))throw new je({context:{key:t.key},type:"nomatchingcontroller"});const r=this.createInput_(e,t,i);if(r)return r;const o=this.createMonitor_(e,t,i);if(o)return o;throw new je({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const i=this.pluginsMap_.blades.reduce((s,r)=>s??f1(r,{document:e,params:t}),null);if(!i)throw new je({type:"nomatchingview",context:{params:t}});return i}createInputBindingApi_(e){const t=this.pluginsMap_.inputs.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new xr(e))}createMonitorBindingApi_(e){const t=this.pluginsMap_.monitors.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new xr(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Ox(e))return this.createInputBindingApi_(e);if(Ux(e))return this.createMonitorBindingApi_(e);throw je.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Ix(e))return this.createBindingApi(e);const t=this.pluginsMap_.blades.reduce((i,s)=>i??s.api({controller:e,pool:this}),null);if(!t)throw je.shouldNeverHappen();return this.apiCache_.add(e,t)}}const VE=new BE;function UE(){const n=new NE(VE);return[pE,gE,yE,CE,iE,QC,ZC,WC,B1,PE,IE,kE,Wx,r1,gm].forEach(e=>{n.register("core",e)}),n}class jE extends Ki{constructor(e){super(e),this.emitter_=new Ye,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Br(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class HE extends Ki{}class GE extends Ki{constructor(e){super(e),this.emitter_=new Ye,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Br(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class qE extends Ki{constructor(e){super(e),this.emitter_=new Ye,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Br(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const WE=function(){return{id:"list",type:"blade",core:Ms,accept(n){const e=Ue(n,t=>({options:t.required.custom(Fr),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}));return e?{params:e}:null},controller(n){const e=new zr(Mc(n.params.options)),t=Le(n.params.value,{constraint:e}),i=new fi(n.document,{props:new ue({options:e.values.value("options")}),value:t,viewProps:n.viewProps});return new Hi(n.document,{blade:n.blade,props:ue.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof Hi)||!(n.controller.valueController instanceof fi)?null:new jE(n.controller)}}}();class $E extends mm{constructor(e,t){super(e,t)}get element(){return this.controller.view.element}}class KE extends Pl{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const Nh=me("spr");class YE{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Nh()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("hr");i.classList.add(Nh("r")),this.element.appendChild(i)}}class Vh extends ea{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new YE(e,{viewProps:t.viewProps})}))}}const XE={id:"separator",type:"blade",core:Ms,accept(n){const e=Ue(n,t=>({view:t.required.constant("separator")}));return e?{params:e}:null},controller(n){return new Vh(n.document,{blade:n.blade,viewProps:n.viewProps})},api(n){return n.controller instanceof Vh?new HE(n.controller):null}},ZE={id:"slider",type:"blade",core:Ms,accept(n){const e=Ue(n,t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}));return e?{params:e}:null},controller(n){var e,t;const i=(e=n.params.value)!==null&&e!==void 0?e:0,s=new Ir({max:n.params.max,min:n.params.min}),r=Le(i,{constraint:s}),o=new Oo(n.document,Object.assign(Object.assign({},xm({formatter:(t=n.params.format)!==null&&t!==void 0?t:px,keyScale:Le(1),max:s.values.value("max"),min:s.values.value("min"),pointerScale:tm(n.params,i)})),{parser:Vn,value:r,viewProps:n.viewProps}));return new Hi(n.document,{blade:n.blade,props:ue.fromObject({label:n.params.label}),value:r,valueController:o})},api(n){return!(n.controller instanceof Hi)||!(n.controller.valueController instanceof Oo)?null:new GE(n.controller)}},QE=function(){return{id:"text",type:"blade",core:Ms,accept(n){const e=Ue(n,t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}));return e?{params:e}:null},controller(n){var e;const t=Le(n.params.value),i=new Cr(n.document,{parser:n.params.parse,props:ue.fromObject({formatter:(e=n.params.format)!==null&&e!==void 0?e:s=>String(s)}),value:t,viewProps:n.viewProps});return new Hi(n.document,{blade:n.blade,props:ue.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof Hi)||!(n.controller.valueController instanceof Cr)?null:new qE(n.controller)}}}();function JE(n){const e=n.createElement("div");return e.classList.add(me("dfw")()),n.body&&n.body.appendChild(e),e}function eS(n,e,t){if(n.querySelector(`style[data-tp-style=${e}]`))return;const i=n.createElement("style");i.dataset.tpStyle=e,i.textContent=t,n.head.appendChild(i)}class BT extends $E{constructor(e){var t,i;const s=e??{},r=(t=s.document)!==null&&t!==void 0?t:Sx(),o=UE(),a=new KE(r,{expanded:s.expanded,blade:As(),props:ue.fromObject({title:s.title}),viewProps:Gn.create()});super(a,o),this.pool_=o,this.containerElem_=(i=s.container)!==null&&i!==void 0?i:JE(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!s.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw je.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw je.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&eS(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(i=>{this.pool_.register(e.id,i)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[WE,XE,ZE,gm,QE]})}}new fm("4.0.5");class Jt{constructor(e){e===void 0&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){e===void 0&&(e=new x);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){t===void 0&&(t=new x);const i=this.elements,s=e.x,r=e.y,o=e.z;return t.x=i[0]*s+i[1]*r+i[2]*o,t.y=i[3]*s+i[4]*r+i[5]*o,t.z=i[6]*s+i[7]*r+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){t===void 0&&(t=new Jt);const i=this.elements,s=e.elements,r=t.elements,o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],d=i[6],p=i[7],m=i[8],f=s[0],v=s[1],C=s[2],g=s[3],E=s[4],T=s[5],k=s[6],P=s[7],R=s[8];return r[0]=o*f+a*g+l*k,r[1]=o*v+a*E+l*P,r[2]=o*C+a*T+l*R,r[3]=c*f+u*g+h*k,r[4]=c*v+u*E+h*P,r[5]=c*C+u*T+h*R,r[6]=d*f+p*g+m*k,r[7]=d*v+p*E+m*P,r[8]=d*C+p*T+m*R,t}scale(e,t){t===void 0&&(t=new Jt);const i=this.elements,s=t.elements;for(let r=0;r!==3;r++)s[3*r+0]=e.x*i[3*r+0],s[3*r+1]=e.y*i[3*r+1],s[3*r+2]=e.z*i[3*r+2];return t}solve(e,t){t===void 0&&(t=new x);const i=3,s=4,r=[];let o,a;for(o=0;o<i*s;o++)r.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)r[o+s*a]=this.elements[o+3*a];r[3+4*0]=e.x,r[3+4*1]=e.y,r[3+4*2]=e.z;let l=3;const c=l;let u;const h=4;let d;do{if(o=c-l,r[o+s*o]===0){for(a=o+1;a<c;a++)if(r[o+s*a]!==0){u=h;do d=h-u,r[d+s*o]+=r[d+s*a];while(--u);break}}if(r[o+s*o]!==0)for(a=o+1;a<c;a++){const p=r[o+s*a]/r[o+s*o];u=h;do d=h-u,r[d+s*a]=d<=o?0:r[d+s*a]-r[d+s*o]*p;while(--u)}}while(--l);if(t.z=r[2*s+3]/r[2*s+2],t.y=(r[1*s+3]-r[1*s+2]*t.z)/r[1*s+1],t.x=(r[0*s+3]-r[0*s+2]*t.z-r[0*s+1]*t.y)/r[0*s+0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(i===void 0)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";const t=",";for(let i=0;i<9;i++)e+=this.elements[i]+t;return e}reverse(e){e===void 0&&(e=new Jt);const t=3,i=6,s=tS;let r,o;for(r=0;r<3;r++)for(o=0;o<3;o++)s[r+i*o]=this.elements[r+3*o];s[3+6*0]=1,s[3+6*1]=0,s[3+6*2]=0,s[4+6*0]=0,s[4+6*1]=1,s[4+6*2]=0,s[5+6*0]=0,s[5+6*1]=0,s[5+6*2]=1;let a=3;const l=a;let c;const u=i;let h;do{if(r=l-a,s[r+i*r]===0){for(o=r+1;o<l;o++)if(s[r+i*o]!==0){c=u;do h=u-c,s[h+i*r]+=s[h+i*o];while(--c);break}}if(s[r+i*r]!==0)for(o=r+1;o<l;o++){const d=s[r+i*o]/s[r+i*r];c=u;do h=u-c,s[h+i*o]=h<=r?0:s[h+i*o]-s[h+i*r]*d;while(--c)}}while(--a);r=2;do{o=r-1;do{const d=s[r+i*o]/s[r+i*r];c=i;do h=i-c,s[h+i*o]=s[h+i*o]-s[h+i*r]*d;while(--c)}while(o--)}while(--r);r=2;do{const d=1/s[r+i*r];c=i;do h=i-c,s[h+i*r]=s[h+i*r]*d;while(--c)}while(r--);r=2;do{o=2;do{if(h=s[t+o+i*r],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(r,o,h)}while(o--)}while(r--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,s=e.z,r=e.w,o=t+t,a=i+i,l=s+s,c=t*o,u=t*a,h=t*l,d=i*a,p=i*l,m=s*l,f=r*o,v=r*a,C=r*l,g=this.elements;return g[3*0+0]=1-(d+m),g[3*0+1]=u-C,g[3*0+2]=h+v,g[3*1+0]=u+C,g[3*1+1]=1-(c+m),g[3*1+2]=p-f,g[3*2+0]=h-v,g[3*2+1]=p+f,g[3*2+2]=1-(c+d),this}transpose(e){e===void 0&&(e=new Jt);const t=this.elements,i=e.elements;let s;return i[0]=t[0],i[4]=t[4],i[8]=t[8],s=t[1],i[1]=t[3],i[3]=s,s=t[2],i[2]=t[6],i[6]=s,s=t[5],i[5]=t[7],i[7]=s,e}}const tS=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class x{constructor(e,t,i){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){t===void 0&&(t=new x);const i=e.x,s=e.y,r=e.z,o=this.x,a=this.y,l=this.z;return t.x=a*r-l*s,t.y=l*i-o*r,t.z=o*s-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(t)t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z;else return new x(this.x+e.x,this.y+e.y,this.z+e.z)}vsub(e,t){if(t)t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z;else return new x(this.x-e.x,this.y-e.y,this.z-e.z)}crossmat(){return new Jt([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,s=Math.sqrt(e*e+t*t+i*i);if(s>0){const r=1/s;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return s}unit(e){e===void 0&&(e=new x);const t=this.x,i=this.y,s=this.z;let r=Math.sqrt(t*t+i*i+s*s);return r>0?(r=1/r,e.x=t*r,e.y=i*r,e.z=s*r):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z;return Math.sqrt((r-t)*(r-t)+(o-i)*(o-i)+(a-s)*(a-s))}distanceSquared(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z;return(r-t)*(r-t)+(o-i)*(o-i)+(a-s)*(a-s)}scale(e,t){t===void 0&&(t=new x);const i=this.x,s=this.y,r=this.z;return t.x=e*i,t.y=e*s,t.z=e*r,t}vmul(e,t){return t===void 0&&(t=new x),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return i===void 0&&(i=new x),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(e){return e===void 0&&(e=new x),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const s=nS,r=1/i;s.set(this.x*r,this.y*r,this.z*r);const o=iS;Math.abs(s.x)<.9?(o.set(1,0,0),s.cross(o,e)):(o.set(0,1,0),s.cross(o,e)),s.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const s=this.x,r=this.y,o=this.z;i.x=s+(e.x-s)*t,i.y=r+(e.y-r)*t,i.z=o+(e.z-o)*t}almostEquals(e,t){return t===void 0&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return e===void 0&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(Uh),Uh.almostEquals(e,t)}clone(){return new x(this.x,this.y,this.z)}}x.ZERO=new x(0,0,0);x.UNIT_X=new x(1,0,0);x.UNIT_Y=new x(0,1,0);x.UNIT_Z=new x(0,0,1);const nS=new x,iS=new x,Uh=new x;class Nt{constructor(e){e===void 0&&(e={}),this.lowerBound=new x,this.upperBound=new x,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,s){const r=this.lowerBound,o=this.upperBound,a=i;r.copy(e[0]),a&&a.vmult(r,r),o.copy(r);for(let l=1;l<e.length;l++){let c=e[l];a&&(a.vmult(c,jh),c=jh),c.x>o.x&&(o.x=c.x),c.x<r.x&&(r.x=c.x),c.y>o.y&&(o.y=c.y),c.y<r.y&&(r.y=c.y),c.z>o.z&&(o.z=c.z),c.z<r.z&&(r.z=c.z)}return t&&(t.vadd(r,r),t.vadd(o,o)),s&&(r.x-=s,r.y-=s,r.z-=s,o.x+=s,o.y+=s,o.z+=s),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return new Nt().copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,s=e.lowerBound,r=e.upperBound,o=s.x<=i.x&&i.x<=r.x||t.x<=r.x&&r.x<=i.x,a=s.y<=i.y&&i.y<=r.y||t.y<=r.y&&r.y<=i.y,l=s.z<=i.z&&i.z<=r.z||t.z<=r.z&&r.z<=i.z;return o&&a&&l}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,s=e.lowerBound,r=e.upperBound;return t.x<=s.x&&i.x>=r.x&&t.y<=s.y&&i.y>=r.y&&t.z<=s.z&&i.z>=r.z}getCorners(e,t,i,s,r,o,a,l){const c=this.lowerBound,u=this.upperBound;e.copy(c),t.set(u.x,c.y,c.z),i.set(u.x,u.y,c.z),s.set(c.x,u.y,u.z),r.set(u.x,c.y,u.z),o.set(c.x,u.y,c.z),a.set(c.x,c.y,u.z),l.copy(u)}toLocalFrame(e,t){const i=Hh,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(s,r,o,a,l,c,u,h);for(let d=0;d!==8;d++){const p=i[d];e.pointToLocal(p,p)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=Hh,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(s,r,o,a,l,c,u,h);for(let d=0;d!==8;d++){const p=i[d];e.pointToWorld(p,p)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,s=1/t.x,r=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*s,l=(this.upperBound.x-i.x)*s,c=(this.lowerBound.y-i.y)*r,u=(this.upperBound.y-i.y)*r,h=(this.lowerBound.z-i.z)*o,d=(this.upperBound.z-i.z)*o,p=Math.max(Math.max(Math.min(a,l),Math.min(c,u)),Math.min(h,d)),m=Math.min(Math.min(Math.max(a,l),Math.max(c,u)),Math.max(h,d));return!(m<0||p>m)}}const jh=new x,Hh=[new x,new x,new x,new x,new x,new x,new x,new x];class Gh{constructor(){this.matrix=[]}get(e,t){let{index:i}=e,{index:s}=t;if(s>i){const r=s;s=i,i=r}return this.matrix[(i*(i+1)>>1)+s-1]}set(e,t,i){let{index:s}=e,{index:r}=t;if(r>s){const o=r;r=s,s=o}this.matrix[(s*(s+1)>>1)+r-1]=i?1:0}reset(){for(let e=0,t=this.matrix.length;e!==t;e++)this.matrix[e]=0}setNumObjects(e){this.matrix.length=e*(e-1)>>1}}class Xm{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;return i[e]===void 0&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return!!(i[e]!==void 0&&i[e].includes(t))}hasAnyEventListener(e){return this._listeners===void 0?!1:this._listeners[e]!==void 0}removeEventListener(e,t){if(this._listeners===void 0)return this;const i=this._listeners;if(i[e]===void 0)return this;const s=i[e].indexOf(t);return s!==-1&&i[e].splice(s,1),this}dispatchEvent(e){if(this._listeners===void 0)return this;const i=this._listeners[e.type];if(i!==void 0){e.target=this;for(let s=0,r=i.length;s<r;s++)i[s].call(this,e)}return this}}class Ne{constructor(e,t,i,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=1),this.x=e,this.y=t,this.z=i,this.w=s}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(t*.5);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(t*.5),this}toAxisAngle(e){e===void 0&&(e=new x),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=sS,s=rS;e.tangents(i,s),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){t===void 0&&(t=new Ne);const i=this.x,s=this.y,r=this.z,o=this.w,a=e.x,l=e.y,c=e.z,u=e.w;return t.x=i*u+o*a+s*c-r*l,t.y=s*u+o*l+r*a-i*c,t.z=r*u+o*c+i*l-s*a,t.w=o*u-i*a-s*l-r*c,t}inverse(e){e===void 0&&(e=new Ne);const t=this.x,i=this.y,s=this.z,r=this.w;this.conjugate(e);const o=1/(t*t+i*i+s*s+r*r);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return e===void 0&&(e=new Ne),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){t===void 0&&(t=new x);const i=e.x,s=e.y,r=e.z,o=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*r-l*s,h=c*s+l*i-o*r,d=c*r+o*s-a*i,p=-o*i-a*s-l*r;return t.x=u*c+p*-o+h*-l-d*-a,t.y=h*c+p*-a+d*-o-u*-l,t.z=d*c+p*-l+u*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){t===void 0&&(t="YZX");let i,s,r;const o=this.x,a=this.y,l=this.z,c=this.w;switch(t){case"YZX":const u=o*a+l*c;if(u>.499&&(i=2*Math.atan2(o,c),s=Math.PI/2,r=0),u<-.499&&(i=-2*Math.atan2(o,c),s=-Math.PI/2,r=0),i===void 0){const h=o*o,d=a*a,p=l*l;i=Math.atan2(2*a*c-2*o*l,1-2*d-2*p),s=Math.asin(2*u),r=Math.atan2(2*o*c-2*a*l,1-2*h-2*p)}break;default:throw new Error(`Euler order ${t} not supported yet.`)}e.y=i,e.z=s,e.x=r}setFromEuler(e,t,i,s){s===void 0&&(s="XYZ");const r=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(t/2),u=Math.sin(i/2);return s==="XYZ"?(this.x=l*o*a+r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a-l*c*u):s==="YXZ"?(this.x=l*o*a+r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a+l*c*u):s==="ZXY"?(this.x=l*o*a-r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a-l*c*u):s==="ZYX"?(this.x=l*o*a-r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a+l*c*u):s==="YZX"?(this.x=l*o*a+r*c*u,this.y=r*c*a+l*o*u,this.z=r*o*u-l*c*a,this.w=r*o*a-l*c*u):s==="XZY"&&(this.x=l*o*a-r*c*u,this.y=r*c*a-l*o*u,this.z=r*o*u+l*c*a,this.w=r*o*a+l*c*u),this}clone(){return new Ne(this.x,this.y,this.z,this.w)}slerp(e,t,i){i===void 0&&(i=new Ne);const s=this.x,r=this.y,o=this.z,a=this.w;let l=e.x,c=e.y,u=e.z,h=e.w,d,p,m,f,v;return p=s*l+r*c+o*u+a*h,p<0&&(p=-p,l=-l,c=-c,u=-u,h=-h),1-p>1e-6?(d=Math.acos(p),m=Math.sin(d),f=Math.sin((1-t)*d)/m,v=Math.sin(t*d)/m):(f=1-t,v=t),i.x=f*s+v*l,i.y=f*r+v*c,i.z=f*o+v*u,i.w=f*a+v*h,i}integrate(e,t,i,s){s===void 0&&(s=new Ne);const r=e.x*i.x,o=e.y*i.y,a=e.z*i.z,l=this.x,c=this.y,u=this.z,h=this.w,d=t*.5;return s.x+=d*(r*h+o*u-a*c),s.y+=d*(o*h+a*l-r*u),s.z+=d*(a*h+r*c-o*l),s.w+=d*(-r*l-o*c-a*u),s}}const sS=new x,rS=new x,oS={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class te{constructor(e){e===void 0&&(e={}),this.id=te.idCounter++,this.type=e.type||0,this.boundingSphereRadius=0,this.collisionResponse=e.collisionResponse?e.collisionResponse:!0,this.collisionFilterGroup=e.collisionFilterGroup!==void 0?e.collisionFilterGroup:1,this.collisionFilterMask=e.collisionFilterMask!==void 0?e.collisionFilterMask:-1,this.material=e.material?e.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(e,t){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(e,t,i,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}te.idCounter=0;te.types=oS;class ge{constructor(e){e===void 0&&(e={}),this.position=new x,this.quaternion=new Ne,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return ge.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return ge.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return t===void 0&&(t=new x),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,s){return s===void 0&&(s=new x),i.vsub(e,s),t.conjugate(qh),qh.vmult(s,s),s}static pointToWorldFrame(e,t,i,s){return s===void 0&&(s=new x),t.vmult(i,s),s.vadd(e,s),s}static vectorToWorldFrame(e,t,i){return i===void 0&&(i=new x),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,s){return s===void 0&&(s=new x),t.w*=-1,t.vmult(i,s),t.w*=-1,s}}const qh=new Ne;class hi extends te{constructor(e){e===void 0&&(e={});const{vertices:t=[],faces:i=[],normals:s=[],axes:r,boundingSphereRadius:o}=e;super({type:te.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=s,this.faceNormals.length===0&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=r?r.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const s=new x;for(let r=0;r!==e.length;r++){const o=e[r],a=o.length;for(let l=0;l!==a;l++){const c=(l+1)%a;t[o[l]].vsub(t[o[c]],s),s.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(s)||i[h].almostEquals(s)){u=!0;break}u||i.push(s.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let s=0;s<this.faces[e].length;s++)if(!this.vertices[this.faces[e][s]])throw new Error(`Vertex ${this.faces[e][s]} not found!`);const t=this.faceNormals[e]||new x;this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t;const i=this.vertices[this.faces[e][0]];if(t.dot(i)<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let s=0;s<this.faces[e].length;s++)console.warn(`.vertices[${this.faces[e][s]}] = Vec3(${this.vertices[this.faces[e][s]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e],s=this.vertices[i[0]],r=this.vertices[i[1]],o=this.vertices[i[2]];hi.computeNormal(s,r,o,t)}static computeNormal(e,t,i,s){const r=new x,o=new x;t.vsub(e,o),i.vsub(t,r),r.cross(o,s),s.isZero()||s.normalize()}clipAgainstHull(e,t,i,s,r,o,a,l,c){const u=new x;let h=-1,d=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),r.vmult(u,u);const f=u.dot(o);f>d&&(d=f,h=m)}const p=[];for(let m=0;m<i.faces[h].length;m++){const f=i.vertices[i.faces[h][m]],v=new x;v.copy(f),r.vmult(v,v),s.vadd(v,v),p.push(v)}h>=0&&this.clipFaceAgainstHull(o,e,t,p,a,l,c)}findSeparatingAxis(e,t,i,s,r,o,a,l){const c=new x,u=new x,h=new x,d=new x,p=new x,m=new x;let f=Number.MAX_VALUE;const v=this;if(v.uniqueAxes)for(let C=0;C!==v.uniqueAxes.length;C++){i.vmult(v.uniqueAxes[C],c);const g=v.testSepAxis(c,e,t,i,s,r);if(g===!1)return!1;g<f&&(f=g,o.copy(c))}else{const C=a?a.length:v.faces.length;for(let g=0;g<C;g++){const E=a?a[g]:g;c.copy(v.faceNormals[E]),i.vmult(c,c);const T=v.testSepAxis(c,e,t,i,s,r);if(T===!1)return!1;T<f&&(f=T,o.copy(c))}}if(e.uniqueAxes)for(let C=0;C!==e.uniqueAxes.length;C++){r.vmult(e.uniqueAxes[C],u);const g=v.testSepAxis(u,e,t,i,s,r);if(g===!1)return!1;g<f&&(f=g,o.copy(u))}else{const C=l?l.length:e.faces.length;for(let g=0;g<C;g++){const E=l?l[g]:g;u.copy(e.faceNormals[E]),r.vmult(u,u);const T=v.testSepAxis(u,e,t,i,s,r);if(T===!1)return!1;T<f&&(f=T,o.copy(u))}}for(let C=0;C!==v.uniqueEdges.length;C++){i.vmult(v.uniqueEdges[C],d);for(let g=0;g!==e.uniqueEdges.length;g++)if(r.vmult(e.uniqueEdges[g],p),d.cross(p,m),!m.almostZero()){m.normalize();const E=v.testSepAxis(m,e,t,i,s,r);if(E===!1)return!1;E<f&&(f=E,o.copy(m))}}return s.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,s,r,o){const a=this;hi.project(a,e,i,s,Va),hi.project(t,e,r,o,Ua);const l=Va[0],c=Va[1],u=Ua[0],h=Ua[1];if(l<h||u<c)return!1;const d=l-h,p=u-c;return d<p?d:p}calculateLocalInertia(e,t){const i=new x,s=new x;this.computeLocalAABB(s,i);const r=i.x-s.x,o=i.y-s.y,a=i.z-s.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*r*2*r+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*r*2*r)}getPlaneConstantOfFace(e){const t=this.faces[e],i=this.faceNormals[e],s=this.vertices[t[0]];return-i.dot(s)}clipFaceAgainstHull(e,t,i,s,r,o,a){const l=new x,c=new x,u=new x,h=new x,d=new x,p=new x,m=new x,f=new x,v=this,C=[],g=s,E=C;let T=-1,k=Number.MAX_VALUE;for(let b=0;b<v.faces.length;b++){l.copy(v.faceNormals[b]),i.vmult(l,l);const I=l.dot(e);I<k&&(k=I,T=b)}if(T<0)return;const P=v.faces[T];P.connectedFaces=[];for(let b=0;b<v.faces.length;b++)for(let I=0;I<v.faces[b].length;I++)P.indexOf(v.faces[b][I])!==-1&&b!==T&&P.connectedFaces.indexOf(b)===-1&&P.connectedFaces.push(b);const R=P.length;for(let b=0;b<R;b++){const I=v.vertices[P[b]],B=v.vertices[P[(b+1)%R]];I.vsub(B,c),u.copy(c),i.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[T]),i.vmult(h,h),t.vadd(h,h),u.cross(h,d),d.negate(d),p.copy(I),i.vmult(p,p),t.vadd(p,p);const z=P.connectedFaces[b];m.copy(this.faceNormals[z]);const D=this.getPlaneConstantOfFace(z);f.copy(m),i.vmult(f,f);const N=D-f.dot(t);for(this.clipFaceAgainstPlane(g,E,f,N);g.length;)g.shift();for(;E.length;)g.push(E.shift())}m.copy(this.faceNormals[T]);const _=this.getPlaneConstantOfFace(T);f.copy(m),i.vmult(f,f);const w=_-f.dot(t);for(let b=0;b<g.length;b++){let I=f.dot(g[b])+w;if(I<=r&&(console.log(`clamped: depth=${I} to minDist=${r}`),I=r),I<=o){const B=g[b];if(I<=1e-6){const z={point:B,normal:f,depth:I};a.push(z)}}}}clipFaceAgainstPlane(e,t,i,s){let r,o;const a=e.length;if(a<2)return t;let l=e[e.length-1],c=e[0];r=i.dot(l)+s;for(let u=0;u<a;u++){if(c=e[u],o=i.dot(c)+s,r<0)if(o<0){const h=new x;h.copy(c),t.push(h)}else{const h=new x;l.lerp(c,r/(r-o),h),t.push(h)}else if(o<0){const h=new x;l.lerp(c,r/(r-o),h),t.push(h),t.push(c)}l=c,r=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new x);const i=this.vertices,s=this.worldVertices;for(let r=0;r!==this.vertices.length;r++)t.vmult(i[r],s[r]),e.vadd(s[r],s[r]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let s=0;s<this.vertices.length;s++){const r=i[s];r.x<e.x?e.x=r.x:r.x>t.x&&(t.x=r.x),r.y<e.y?e.y=r.y:r.y>t.y&&(t.y=r.y),r.z<e.z?e.z=r.z:r.z>t.z&&(t.z=r.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new x);const i=this.faceNormals,s=this.worldFaceNormals;for(let r=0;r!==t;r++)e.vmult(i[r],s[r]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const s=t[i].lengthSquared();s>e&&(e=s)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,s){const r=this.vertices;let o,a,l,c,u,h,d=new x;for(let p=0;p<r.length;p++){d.copy(r[p]),t.vmult(d,d),e.vadd(d,d);const m=d;(o===void 0||m.x<o)&&(o=m.x),(c===void 0||m.x>c)&&(c=m.x),(a===void 0||m.y<a)&&(a=m.y),(u===void 0||m.y>u)&&(u=m.y),(l===void 0||m.z<l)&&(l=m.z),(h===void 0||m.z>h)&&(h=m.z)}i.set(o,a,l),s.set(c,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){e===void 0&&(e=new x);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,s=this.vertices;if(t){for(let r=0;r<i;r++){const o=s[r];t.vmult(o,o)}for(let r=0;r<this.faceNormals.length;r++){const o=this.faceNormals[r];t.vmult(o,o)}}if(e)for(let r=0;r<i;r++){const o=s[r];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,s=this.faceNormals,r=null,o=new x;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let l=s[a];const c=t[i[a][0]],u=new x;e.vsub(c,u);const h=l.dot(u),d=new x;o.vsub(c,d);const p=l.dot(d);if(h<0&&p>0||h>0&&p<0)return!1}return r?1:-1}static project(e,t,i,s,r){const o=e.vertices.length,a=aS;let l=0,c=0;const u=lS,h=e.vertices;u.setZero(),ge.vectorToLocalFrame(i,s,t,a),ge.pointToLocalFrame(i,s,u,u);const d=u.dot(a);c=l=h[0].dot(a);for(let p=1;p<o;p++){const m=h[p].dot(a);m>l&&(l=m),m<c&&(c=m)}if(c-=d,l-=d,c>l){const p=c;c=l,l=p}r[0]=l,r[1]=c}}const Va=[],Ua=[];new x;const aS=new x,lS=new x;class Uc extends te{constructor(e){super({type:te.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,s=x,r=[new s(-e,-t,-i),new s(e,-t,-i),new s(e,t,-i),new s(-e,t,-i),new s(-e,-t,i),new s(e,-t,i),new s(e,t,i),new s(-e,t,i)],o=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],a=[new s(0,0,1),new s(0,1,0),new s(1,0,0)],l=new hi({vertices:r,faces:o,axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,t){return t===void 0&&(t=new x),Uc.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const s=e;i.x=1/12*t*(2*s.y*2*s.y+2*s.z*2*s.z),i.y=1/12*t*(2*s.x*2*s.x+2*s.z*2*s.z),i.z=1/12*t*(2*s.y*2*s.y+2*s.x*2*s.x)}getSideNormals(e,t){const i=e,s=this.halfExtents;if(i[0].set(s.x,0,0),i[1].set(0,s.y,0),i[2].set(0,0,s.z),i[3].set(-s.x,0,0),i[4].set(0,-s.y,0),i[5].set(0,0,-s.z),t!==void 0)for(let r=0;r!==i.length;r++)t.vmult(i[r],i[r]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const s=this.halfExtents,r=[[s.x,s.y,s.z],[-s.x,s.y,s.z],[-s.x,-s.y,s.z],[-s.x,-s.y,-s.z],[s.x,-s.y,-s.z],[s.x,s.y,-s.z],[-s.x,s.y,-s.z],[s.x,-s.y,s.z]];for(let o=0;o<r.length;o++)Qn.set(r[o][0],r[o][1],r[o][2]),t.vmult(Qn,Qn),e.vadd(Qn,Qn),i(Qn.x,Qn.y,Qn.z)}calculateWorldAABB(e,t,i,s){const r=this.halfExtents;an[0].set(r.x,r.y,r.z),an[1].set(-r.x,r.y,r.z),an[2].set(-r.x,-r.y,r.z),an[3].set(-r.x,-r.y,-r.z),an[4].set(r.x,-r.y,-r.z),an[5].set(r.x,r.y,-r.z),an[6].set(-r.x,r.y,-r.z),an[7].set(r.x,-r.y,r.z);const o=an[0];t.vmult(o,o),e.vadd(o,o),s.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=an[a];t.vmult(l,l),e.vadd(l,l);const c=l.x,u=l.y,h=l.z;c>s.x&&(s.x=c),u>s.y&&(s.y=u),h>s.z&&(s.z=h),c<i.x&&(i.x=c),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const Qn=new x,an=[new x,new x,new x,new x,new x,new x,new x,new x],jc={DYNAMIC:1,STATIC:2,KINEMATIC:4},Hc={AWAKE:0,SLEEPY:1,SLEEPING:2};class ie extends Xm{constructor(e){e===void 0&&(e={}),super(),this.id=ie.idCounter++,this.index=-1,this.world=null,this.vlambda=new x,this.collisionFilterGroup=typeof e.collisionFilterGroup=="number"?e.collisionFilterGroup:1,this.collisionFilterMask=typeof e.collisionFilterMask=="number"?e.collisionFilterMask:-1,this.collisionResponse=typeof e.collisionResponse=="boolean"?e.collisionResponse:!0,this.position=new x,this.previousPosition=new x,this.interpolatedPosition=new x,this.initPosition=new x,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new x,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new x,this.force=new x;const t=typeof e.mass=="number"?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping=typeof e.linearDamping=="number"?e.linearDamping:.01,this.type=t<=0?ie.STATIC:ie.DYNAMIC,typeof e.type==typeof ie.STATIC&&(this.type=e.type),this.allowSleep=typeof e.allowSleep<"u"?e.allowSleep:!0,this.sleepState=ie.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new x,this.quaternion=new Ne,this.initQuaternion=new Ne,this.previousQuaternion=new Ne,this.interpolatedQuaternion=new Ne,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new x,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new x,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new x,this.invInertia=new x,this.invInertiaWorld=new Jt,this.invMassSolve=0,this.invInertiaSolve=new x,this.invInertiaWorldSolve=new Jt,this.fixedRotation=typeof e.fixedRotation<"u"?e.fixedRotation:!1,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new x(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new x(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Nt,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new x,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=ie.AWAKE,this.wakeUpAfterNarrowphase=!1,e===ie.SLEEPING&&this.dispatchEvent(ie.wakeupEvent)}sleep(){this.sleepState=ie.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),s=this.sleepSpeedLimit**2;t===ie.AWAKE&&i<s?(this.sleepState=ie.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(ie.sleepyEvent)):t===ie.SLEEPY&&i>s?this.wakeUp():t===ie.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(ie.sleepEvent))}}updateSolveMassProperties(){this.sleepState===ie.SLEEPING||this.type===ie.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return t===void 0&&(t=new x),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return t===void 0&&(t=new x),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return t===void 0&&(t=new x),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return t===void 0&&(t=new x),this.quaternion.vmult(e,t),t}addShape(e,t,i){const s=new x,r=new Ne;return t&&s.copy(t),i&&r.copy(i),this.shapes.push(e),this.shapeOffsets.push(s),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return t===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let s=0;for(let r=0;r!==i;r++){const o=e[r];o.updateBoundingSphereRadius();const a=t[r].length(),l=o.boundingSphereRadius;a+l>s&&(s=a+l)}this.boundingRadius=s}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,s=e.length,r=cS,o=uS,a=this.quaternion,l=this.aabb,c=hS;for(let u=0;u!==s;u++){const h=e[u];a.vmult(t[u],r),r.vadd(this.position,r),a.mult(i[u],o),h.calculateWorldAABB(r,o,c.lowerBound,c.upperBound),u===0?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(!(t.x===t.y&&t.y===t.z&&!e)){const i=dS,s=pS;i.setRotationFromQuaternion(this.quaternion),i.transpose(s),i.scale(t,i),i.mmult(s,this.invInertiaWorld)}}applyForce(e,t){if(t===void 0&&(t=new x),this.type!==ie.DYNAMIC)return;this.sleepState===ie.SLEEPING&&this.wakeUp();const i=mS;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(t===void 0&&(t=new x),this.type!==ie.DYNAMIC)return;const i=vS,s=gS;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,s),this.applyForce(i,s)}applyTorque(e){this.type===ie.DYNAMIC&&(this.sleepState===ie.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(t===void 0&&(t=new x),this.type!==ie.DYNAMIC)return;this.sleepState===ie.SLEEPING&&this.wakeUp();const i=t,s=_S;s.copy(e),s.scale(this.invMass,s),this.velocity.vadd(s,this.velocity);const r=bS;i.cross(e,r),this.invInertiaWorld.vmult(r,r),this.angularVelocity.vadd(r,this.angularVelocity)}applyLocalImpulse(e,t){if(t===void 0&&(t=new x),this.type!==ie.DYNAMIC)return;const i=wS,s=yS;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,s),this.applyImpulse(i,s)}updateMassProperties(){const e=xS;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Uc.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new x;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===ie.DYNAMIC||this.type===ie.KINEMATIC)||this.sleepState===ie.SLEEPING)return;const s=this.velocity,r=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,u=this.invMass,h=this.invInertiaWorld,d=this.linearFactor,p=u*e;s.x+=a.x*p*d.x,s.y+=a.y*p*d.y,s.z+=a.z*p*d.z;const m=h.elements,f=this.angularFactor,v=l.x*f.x,C=l.y*f.y,g=l.z*f.z;r.x+=e*(m[0]*v+m[1]*C+m[2]*g),r.y+=e*(m[3]*v+m[4]*C+m[5]*g),r.z+=e*(m[6]*v+m[7]*C+m[8]*g),o.x+=s.x*e,o.y+=s.y*e,o.z+=s.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}ie.idCounter=0;ie.COLLIDE_EVENT_NAME="collide";ie.DYNAMIC=jc.DYNAMIC;ie.STATIC=jc.STATIC;ie.KINEMATIC=jc.KINEMATIC;ie.AWAKE=Hc.AWAKE;ie.SLEEPY=Hc.SLEEPY;ie.SLEEPING=Hc.SLEEPING;ie.wakeupEvent={type:"wakeup"};ie.sleepyEvent={type:"sleepy"};ie.sleepEvent={type:"sleep"};const cS=new x,uS=new Ne,hS=new Nt,dS=new Jt,pS=new Jt,fS=new Jt,mS=new x,vS=new x,gS=new x,_S=new x,bS=new x,wS=new x,yS=new x,xS=new x;class Zm{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(e,t,i){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(e,t){return!(!(e.collisionFilterGroup&t.collisionFilterMask)||!(t.collisionFilterGroup&e.collisionFilterMask)||(e.type&ie.STATIC||e.sleepState===ie.SLEEPING)&&(t.type&ie.STATIC||t.sleepState===ie.SLEEPING))}intersectionTest(e,t,i,s){this.useBoundingBoxes?this.doBoundingBoxBroadphase(e,t,i,s):this.doBoundingSphereBroadphase(e,t,i,s)}doBoundingSphereBroadphase(e,t,i,s){const r=CS;t.position.vsub(e.position,r);const o=(e.boundingRadius+t.boundingRadius)**2;r.lengthSquared()<o&&(i.push(e),s.push(t))}doBoundingBoxBroadphase(e,t,i,s){e.aabbNeedsUpdate&&e.updateAABB(),t.aabbNeedsUpdate&&t.updateAABB(),e.aabb.overlaps(t.aabb)&&(i.push(e),s.push(t))}makePairsUnique(e,t){const i=ES,s=SS,r=PS,o=e.length;for(let a=0;a!==o;a++)s[a]=e[a],r[a]=t[a];e.length=0,t.length=0;for(let a=0;a!==o;a++){const l=s[a].id,c=r[a].id,u=l<c?`${l},${c}`:`${c},${l}`;i[u]=a,i.keys.push(u)}for(let a=0;a!==i.keys.length;a++){const l=i.keys.pop(),c=i[l];e.push(s[c]),t.push(r[c]),delete i[l]}}setWorld(e){}static boundingSphereCheck(e,t){const i=new x;e.position.vsub(t.position,i);const s=e.shapes[0],r=t.shapes[0];return Math.pow(s.boundingSphereRadius+r.boundingSphereRadius,2)>i.lengthSquared()}aabbQuery(e,t,i){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const CS=new x;new x;new Ne;new x;const ES={keys:[]},SS=[],PS=[];new x;new x;new x;class TS extends Zm{constructor(){super()}collisionPairs(e,t,i){const s=e.bodies,r=s.length;let o,a;for(let l=0;l!==r;l++)for(let c=0;c!==l;c++)o=s[l],a=s[c],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,t,i)}aabbQuery(e,t,i){i===void 0&&(i=[]);for(let s=0;s<e.bodies.length;s++){const r=e.bodies[s];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(t)&&i.push(r)}return i}}class Pr{constructor(){this.rayFromWorld=new x,this.rayToWorld=new x,this.hitNormalWorld=new x,this.hitPointWorld=new x,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,s,r,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(s),this.shape=r,this.body=o,this.distance=a}}let Qm,Jm,ev,tv,nv,iv,sv;const Gc={CLOSEST:1,ANY:2,ALL:4};Qm=te.types.SPHERE;Jm=te.types.PLANE;ev=te.types.BOX;tv=te.types.CYLINDER;nv=te.types.CONVEXPOLYHEDRON;iv=te.types.HEIGHTFIELD;sv=te.types.TRIMESH;class $e{get[Qm](){return this._intersectSphere}get[Jm](){return this._intersectPlane}get[ev](){return this._intersectBox}get[tv](){return this._intersectConvex}get[nv](){return this._intersectConvex}get[iv](){return this._intersectHeightfield}get[sv](){return this._intersectTrimesh}constructor(e,t){e===void 0&&(e=new x),t===void 0&&(t=new x),this.from=e.clone(),this.to=t.clone(),this.direction=new x,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=$e.ANY,this.result=new Pr,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||$e.ANY,this.result=t.result||new Pr,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=typeof t.checkCollisionResponse<"u"?t.checkCollisionResponse:!0,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Wh),ja.length=0,e.broadphase.aabbQuery(e,Wh,ja),this.intersectBodies(ja),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const s=MS,r=AS;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if(!(i&&!l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],r),e.quaternion.vmult(e.shapeOffsets[o],s),s.vadd(e.position,s),this.intersectShape(l,r,s,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,s=e.length;!this.result.shouldStop&&i<s;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,s){const r=this.from;if(HS(r,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,s,e)}_intersectBox(e,t,i,s,r){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,s,r)}_intersectPlane(e,t,i,s,r){const o=this.from,a=this.to,l=this.direction,c=new x(0,0,1);t.vmult(c,c);const u=new x;o.vsub(i,u);const h=u.dot(c);a.vsub(i,u);const d=u.dot(c);if(h*d>0||o.distanceTo(a)<h)return;const p=c.dot(l);if(Math.abs(p)<this.precision)return;const m=new x,f=new x,v=new x;o.vsub(i,m);const C=-c.dot(m)/p;l.scale(C,f),o.vadd(f,v),this.reportIntersection(c,v,r,s,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,s=this.to,r=this.from;t.x=Math.min(s.x,r.x),t.y=Math.min(s.y,r.y),t.z=Math.min(s.z,r.z),i.x=Math.max(s.x,r.x),i.y=Math.max(s.y,r.y),i.z=Math.max(s.z,r.z)}_intersectHeightfield(e,t,i,s,r){e.data,e.elementSize;const o=RS;o.from.copy(this.from),o.to.copy(this.to),ge.pointToLocalFrame(i,t,o.from,o.from),ge.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=kS;let l,c,u,h;l=c=0,u=h=e.data.length-1;const d=new Nt;o.getAABB(d),e.getIndexOfPosition(d.lowerBound.x,d.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),e.getIndexOfPosition(d.upperBound.x,d.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let p=l;p<u;p++)for(let m=c;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(p,m,d),!!d.overlapsRay(o)){if(e.getConvexTrianglePillar(p,m,!1),ge.pointToWorldFrame(i,t,e.pillarOffset,Zr),this._intersectConvex(e.pillarConvex,t,Zr,s,r,$h),this.result.shouldStop)return;e.getConvexTrianglePillar(p,m,!0),ge.pointToWorldFrame(i,t,e.pillarOffset,Zr),this._intersectConvex(e.pillarConvex,t,Zr,s,r,$h)}}}_intersectSphere(e,t,i,s,r){const o=this.from,a=this.to,l=e.radius,c=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),h=(o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-l**2,d=u**2-4*c*h,p=IS,m=BS;if(!(d<0))if(d===0)o.lerp(a,d,p),p.vsub(i,m),m.normalize(),this.reportIntersection(m,p,r,s,-1);else{const f=(-u-Math.sqrt(d))/(2*c),v=(-u+Math.sqrt(d))/(2*c);if(f>=0&&f<=1&&(o.lerp(a,f,p),p.vsub(i,m),m.normalize(),this.reportIntersection(m,p,r,s,-1)),this.result.shouldStop)return;v>=0&&v<=1&&(o.lerp(a,v,p),p.vsub(i,m),m.normalize(),this.reportIntersection(m,p,r,s,-1))}}_intersectConvex(e,t,i,s,r,o){const a=OS,l=Kh,c=o&&o.faceList||null,u=e.faces,h=e.vertices,d=e.faceNormals,p=this.direction,m=this.from,f=this.to,v=m.distanceTo(f),C=c?c.length:u.length,g=this.result;for(let E=0;!g.shouldStop&&E<C;E++){const T=c?c[E]:E,k=u[T],P=d[T],R=t,_=i;l.copy(h[k[0]]),R.vmult(l,l),l.vadd(_,l),l.vsub(m,l),R.vmult(P,a);const w=p.dot(a);if(Math.abs(w)<this.precision)continue;const b=a.dot(l)/w;if(!(b<0)){p.scale(b,bt),bt.vadd(m,bt),Xt.copy(h[k[0]]),R.vmult(Xt,Xt),_.vadd(Xt,Xt);for(let I=1;!g.shouldStop&&I<k.length-1;I++){ln.copy(h[k[I]]),cn.copy(h[k[I+1]]),R.vmult(ln,ln),R.vmult(cn,cn),_.vadd(ln,ln),_.vadd(cn,cn);const B=bt.distanceTo(m);!($e.pointInTriangle(bt,Xt,ln,cn)||$e.pointInTriangle(bt,ln,Xt,cn))||B>v||this.reportIntersection(a,bt,r,s,T)}}}}_intersectTrimesh(e,t,i,s,r,o){const a=LS,l=US,c=jS,u=Kh,h=zS,d=FS,p=DS,m=VS,f=NS,v=e.indices;e.vertices;const C=this.from,g=this.to,E=this.direction;c.position.copy(i),c.quaternion.copy(t),ge.vectorToLocalFrame(i,t,E,h),ge.pointToLocalFrame(i,t,C,d),ge.pointToLocalFrame(i,t,g,p),p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,p.vsub(d,h),h.normalize();const T=d.distanceSquared(p);e.tree.rayQuery(this,c,l);for(let k=0,P=l.length;!this.result.shouldStop&&k!==P;k++){const R=l[k];e.getNormal(R,a),e.getVertex(v[R*3],Xt),Xt.vsub(d,u);const _=h.dot(a),w=a.dot(u)/_;if(w<0)continue;h.scale(w,bt),bt.vadd(d,bt),e.getVertex(v[R*3+1],ln),e.getVertex(v[R*3+2],cn);const b=bt.distanceSquared(d);!($e.pointInTriangle(bt,ln,Xt,cn)||$e.pointInTriangle(bt,Xt,ln,cn))||b>T||(ge.vectorToWorldFrame(t,a,f),ge.pointToWorldFrame(i,t,bt,m),this.reportIntersection(f,m,r,s,R))}l.length=0}reportIntersection(e,t,i,s,r){const o=this.from,a=this.to,l=o.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=typeof r<"u"?r:-1,this.mode){case $e.ALL:this.hasHit=!0,c.set(o,a,e,t,i,s,l),c.hasHit=!0,this.callback(c);break;case $e.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,s,l));break;case $e.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,s,l),c.shouldStop=!0;break}}static pointInTriangle(e,t,i,s){s.vsub(t,Mi),i.vsub(t,Us),e.vsub(t,Ha);const r=Mi.dot(Mi),o=Mi.dot(Us),a=Mi.dot(Ha),l=Us.dot(Us),c=Us.dot(Ha);let u,h;return(u=l*a-o*c)>=0&&(h=r*c-o*a)>=0&&u+h<r*l-o*o}}$e.CLOSEST=Gc.CLOSEST;$e.ANY=Gc.ANY;$e.ALL=Gc.ALL;const Wh=new Nt,ja=[],Us=new x,Ha=new x,MS=new x,AS=new Ne,bt=new x,Xt=new x,ln=new x,cn=new x;new x;new Pr;const $h={faceList:[0]},Zr=new x,RS=new $e,kS=[],IS=new x,BS=new x,OS=new x;new x;new x;const Kh=new x,LS=new x,zS=new x,FS=new x,DS=new x,NS=new x,VS=new x;new Nt;const US=[],jS=new ge,Mi=new x,Qr=new x;function HS(n,e,t){t.vsub(n,Mi);const i=Mi.dot(e);return e.scale(i,Qr),Qr.vadd(n,Qr),t.distanceTo(Qr)}class Ks extends Zm{static checkBounds(e,t,i){let s,r;i===0?(s=e.position.x,r=t.position.x):i===1?(s=e.position.y,r=t.position.y):i===2&&(s=e.position.z,r=t.position.z);const o=e.boundingRadius,a=t.boundingRadius,l=s+o;return r-a<l}static insertionSortX(e){for(let t=1,i=e.length;t<i;t++){const s=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.x<=s.aabb.lowerBound.x);r--)e[r+1]=e[r];e[r+1]=s}return e}static insertionSortY(e){for(let t=1,i=e.length;t<i;t++){const s=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.y<=s.aabb.lowerBound.y);r--)e[r+1]=e[r];e[r+1]=s}return e}static insertionSortZ(e){for(let t=1,i=e.length;t<i;t++){const s=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.z<=s.aabb.lowerBound.z);r--)e[r+1]=e[r];e[r+1]=s}return e}constructor(e){super(),this.axisList=[],this.world=null,this.axisIndex=0;const t=this.axisList;this._addBodyHandler=i=>{t.push(i.body)},this._removeBodyHandler=i=>{const s=t.indexOf(i.body);s!==-1&&t.splice(s,1)},e&&this.setWorld(e)}setWorld(e){this.axisList.length=0;for(let t=0;t<e.bodies.length;t++)this.axisList.push(e.bodies[t]);e.removeEventListener("addBody",this._addBodyHandler),e.removeEventListener("removeBody",this._removeBodyHandler),e.addEventListener("addBody",this._addBodyHandler),e.addEventListener("removeBody",this._removeBodyHandler),this.world=e,this.dirty=!0}collisionPairs(e,t,i){const s=this.axisList,r=s.length,o=this.axisIndex;let a,l;for(this.dirty&&(this.sortList(),this.dirty=!1),a=0;a!==r;a++){const c=s[a];for(l=a+1;l<r;l++){const u=s[l];if(this.needBroadphaseCollision(c,u)){if(!Ks.checkBounds(c,u,o))break;this.intersectionTest(c,u,t,i)}}}}sortList(){const e=this.axisList,t=this.axisIndex,i=e.length;for(let s=0;s!==i;s++){const r=e[s];r.aabbNeedsUpdate&&r.updateAABB()}t===0?Ks.insertionSortX(e):t===1?Ks.insertionSortY(e):t===2&&Ks.insertionSortZ(e)}autoDetectAxis(){let e=0,t=0,i=0,s=0,r=0,o=0;const a=this.axisList,l=a.length,c=1/l;for(let p=0;p!==l;p++){const m=a[p],f=m.position.x;e+=f,t+=f*f;const v=m.position.y;i+=v,s+=v*v;const C=m.position.z;r+=C,o+=C*C}const u=t-e*e*c,h=s-i*i*c,d=o-r*r*c;u>h?u>d?this.axisIndex=0:this.axisIndex=2:h>d?this.axisIndex=1:this.axisIndex=2}aabbQuery(e,t,i){i===void 0&&(i=[]),this.dirty&&(this.sortList(),this.dirty=!1);const s=this.axisIndex;let r="x";s===1&&(r="y"),s===2&&(r="z");const o=this.axisList;t.lowerBound[r],t.upperBound[r];for(let a=0;a<o.length;a++){const l=o[a];l.aabbNeedsUpdate&&l.updateAABB(),l.aabb.overlaps(t)&&i.push(l)}return i}}class qc{static defaults(e,t){e===void 0&&(e={});for(let i in t)i in e||(e[i]=t[i]);return e}}class Yh{constructor(){this.spatial=new x,this.rotational=new x}multiplyElement(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)}multiplyVectors(e,t){return e.dot(this.spatial)+t.dot(this.rotational)}}class jr{constructor(e,t,i,s){i===void 0&&(i=-1e6),s===void 0&&(s=1e6),this.id=jr.idCounter++,this.minForce=i,this.maxForce=s,this.bi=e,this.bj=t,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new Yh,this.jacobianElementB=new Yh,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(e,t,i){const s=t,r=e,o=i;this.a=4/(o*(1+4*s)),this.b=4*s/(1+4*s),this.eps=4/(o*o*r*(1+4*s))}computeB(e,t,i){const s=this.computeGW(),r=this.computeGq(),o=this.computeGiMf();return-r*e-s*t-o*i}computeGq(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.position,o=s.position;return e.spatial.dot(r)+t.spatial.dot(o)}computeGW(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.velocity,o=s.velocity,a=i.angularVelocity,l=s.angularVelocity;return e.multiplyVectors(r,a)+t.multiplyVectors(o,l)}computeGWlambda(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.vlambda,o=s.vlambda,a=i.wlambda,l=s.wlambda;return e.multiplyVectors(r,a)+t.multiplyVectors(o,l)}computeGiMf(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.force,o=i.torque,a=s.force,l=s.torque,c=i.invMassSolve,u=s.invMassSolve;return r.scale(c,Xh),a.scale(u,Zh),i.invInertiaWorldSolve.vmult(o,Qh),s.invInertiaWorldSolve.vmult(l,Jh),e.multiplyVectors(Xh,Qh)+t.multiplyVectors(Zh,Jh)}computeGiMGt(){const e=this.jacobianElementA,t=this.jacobianElementB,i=this.bi,s=this.bj,r=i.invMassSolve,o=s.invMassSolve,a=i.invInertiaWorldSolve,l=s.invInertiaWorldSolve;let c=r+o;return a.vmult(e.rotational,Jr),c+=Jr.dot(e.rotational),l.vmult(t.rotational,Jr),c+=Jr.dot(t.rotational),c}addToWlambda(e){const t=this.jacobianElementA,i=this.jacobianElementB,s=this.bi,r=this.bj,o=GS;s.vlambda.addScaledVector(s.invMassSolve*e,t.spatial,s.vlambda),r.vlambda.addScaledVector(r.invMassSolve*e,i.spatial,r.vlambda),s.invInertiaWorldSolve.vmult(t.rotational,o),s.wlambda.addScaledVector(e,o,s.wlambda),r.invInertiaWorldSolve.vmult(i.rotational,o),r.wlambda.addScaledVector(e,o,r.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}jr.idCounter=0;const Xh=new x,Zh=new x,Qh=new x,Jh=new x,Jr=new x,GS=new x;class qS extends jr{constructor(e,t,i){i===void 0&&(i=1e6),super(e,t,0,i),this.restitution=0,this.ri=new x,this.rj=new x,this.ni=new x}computeB(e){const t=this.a,i=this.b,s=this.bi,r=this.bj,o=this.ri,a=this.rj,l=WS,c=$S,u=s.velocity,h=s.angularVelocity;s.force,s.torque;const d=r.velocity,p=r.angularVelocity;r.force,r.torque;const m=KS,f=this.jacobianElementA,v=this.jacobianElementB,C=this.ni;o.cross(C,l),a.cross(C,c),C.negate(f.spatial),l.negate(f.rotational),v.spatial.copy(C),v.rotational.copy(c),m.copy(r.position),m.vadd(a,m),m.vsub(s.position,m),m.vsub(o,m);const g=C.dot(m),E=this.restitution+1,T=E*d.dot(C)-E*u.dot(C)+p.dot(c)-h.dot(l),k=this.computeGiMf();return-g*t-T*i-e*k}getImpactVelocityAlongNormal(){const e=YS,t=XS,i=ZS,s=QS,r=JS;return this.bi.position.vadd(this.ri,i),this.bj.position.vadd(this.rj,s),this.bi.getVelocityAtWorldPoint(i,e),this.bj.getVelocityAtWorldPoint(s,t),e.vsub(t,r),this.ni.dot(r)}}const WS=new x,$S=new x,KS=new x,YS=new x,XS=new x,ZS=new x,QS=new x,JS=new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;class ed extends jr{constructor(e,t,i){super(e,t,-i,i),this.ri=new x,this.rj=new x,this.t=new x}computeB(e){this.a;const t=this.b;this.bi,this.bj;const i=this.ri,s=this.rj,r=eP,o=tP,a=this.t;i.cross(a,r),s.cross(a,o);const l=this.jacobianElementA,c=this.jacobianElementB;a.negate(l.spatial),r.negate(l.rotational),c.spatial.copy(a),c.rotational.copy(o);const u=this.computeGW(),h=this.computeGiMf();return-u*t-e*h}}const eP=new x,tP=new x;class na{constructor(e,t,i){i=qc.defaults(i,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=na.idCounter++,this.materials=[e,t],this.friction=i.friction,this.restitution=i.restitution,this.contactEquationStiffness=i.contactEquationStiffness,this.contactEquationRelaxation=i.contactEquationRelaxation,this.frictionEquationStiffness=i.frictionEquationStiffness,this.frictionEquationRelaxation=i.frictionEquationRelaxation}}na.idCounter=0;class ia{constructor(e){e===void 0&&(e={});let t="";typeof e=="string"&&(t=e,e={}),this.name=t,this.id=ia.idCounter++,this.friction=typeof e.friction<"u"?e.friction:-1,this.restitution=typeof e.restitution<"u"?e.restitution:-1}}ia.idCounter=0;new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;new x;class nP{constructor(e){e===void 0&&(e={}),e=qc.defaults(e,{chassisConnectionPointLocal:new x,chassisConnectionPointWorld:new x,directionLocal:new x,directionWorld:new x,axleLocal:new x,axleWorld:new x,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:10.5,forwardAcceleration:1,sideAcceleration:1,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,slipInfo:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=e.maxSuspensionTravel,this.customSlidingRotationalSpeed=e.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=e.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=e.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=e.chassisConnectionPointWorld.clone(),this.directionLocal=e.directionLocal.clone(),this.directionWorld=e.directionWorld.clone(),this.axleLocal=e.axleLocal.clone(),this.axleWorld=e.axleWorld.clone(),this.suspensionRestLength=e.suspensionRestLength,this.suspensionMaxLength=e.suspensionMaxLength,this.radius=e.radius,this.suspensionStiffness=e.suspensionStiffness,this.dampingCompression=e.dampingCompression,this.dampingRelaxation=e.dampingRelaxation,this.frictionSlip=e.frictionSlip,this.forwardAcceleration=e.forwardAcceleration,this.sideAcceleration=e.sideAcceleration,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=e.rollInfluence,this.maxSuspensionForce=e.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=e.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.slipInfo=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new Pr,this.worldTransform=new ge,this.isInContact=!1}updateWheel(e){const t=this.raycastResult;if(this.isInContact){const i=t.hitNormalWorld.dot(t.directionWorld);t.hitPointWorld.vsub(e.position,nd),e.getVelocityAtWorldPoint(nd,td);const s=t.hitNormalWorld.dot(td);if(i>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=1/.1;else{const r=-1/i;this.suspensionRelativeVelocity=s*r,this.clippedInvContactDotSuspension=r}}else t.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.hitNormalWorld),this.clippedInvContactDotSuspension=1}}const td=new x,nd=new x;class OT{constructor(e){this.chassisBody=e.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=typeof e.indexRightAxis<"u"?e.indexRightAxis:2,this.indexForwardAxis=typeof e.indexForwardAxis<"u"?e.indexForwardAxis:0,this.indexUpAxis=typeof e.indexUpAxis<"u"?e.indexUpAxis:1,this.constraints=[],this.preStepCallback=()=>{},this.currentVehicleSpeedKmHour=0,this.numWheelsOnGround=0}addWheel(e){e===void 0&&(e={});const t=new nP(e),i=this.wheelInfos.length;return this.wheelInfos.push(t),i}setSteeringValue(e,t){const i=this.wheelInfos[t];i.steering=e}applyEngineForce(e,t){this.wheelInfos[t].engineForce=e}setBrake(e,t){this.wheelInfos[t].brake=e}addToWorld(e){e.addBody(this.chassisBody);const t=this;this.preStepCallback=()=>{t.updateVehicle(e.dt)},e.addEventListener("preStep",this.preStepCallback),this.world=e}getVehicleAxisWorld(e,t){t.set(e===0?1:0,e===1?1:0,e===2?1:0),this.chassisBody.vectorToWorldFrame(t,t)}updateVehicle(e){const t=this.wheelInfos,i=t.length,s=this.chassisBody;for(let h=0;h<i;h++)this.updateWheelTransform(h);this.currentVehicleSpeedKmHour=3.6*s.velocity.length();const r=new x;this.getVehicleAxisWorld(this.indexForwardAxis,r),r.dot(s.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(let h=0;h<i;h++)this.castRay(t[h]);this.updateSuspension(e);const o=new x,a=new x;for(let h=0;h<i;h++){const d=t[h];let p=d.suspensionForce;p>d.maxSuspensionForce&&(p=d.maxSuspensionForce),d.raycastResult.hitNormalWorld.scale(p*e,o),d.raycastResult.hitPointWorld.vsub(s.position,a),s.applyImpulse(o,a)}this.updateFriction(e);const l=new x,c=new x,u=new x;for(let h=0;h<i;h++){const d=t[h];s.getVelocityAtWorldPoint(d.chassisConnectionPointWorld,u);let p=1;switch(this.indexUpAxis){case 1:p=-1;break}if(d.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,c);const m=c.dot(d.raycastResult.hitNormalWorld);d.raycastResult.hitNormalWorld.scale(m,l),c.vsub(l,c);const f=c.dot(u);d.deltaRotation=p*f*e/d.radius}(d.sliding||!d.isInContact)&&d.engineForce!==0&&d.useCustomSlidingRotationalSpeed&&(d.deltaRotation=(d.engineForce>0?1:-1)*d.customSlidingRotationalSpeed*e),Math.abs(d.brake)>Math.abs(d.engineForce)&&(d.deltaRotation=0),d.rotation+=d.deltaRotation,d.deltaRotation*=.99}}updateSuspension(e){const i=this.chassisBody.mass,s=this.wheelInfos,r=s.length;for(let o=0;o<r;o++){const a=s[o];if(a.isInContact){let l;const c=a.suspensionRestLength,u=a.suspensionLength,h=c-u;l=a.suspensionStiffness*h*a.clippedInvContactDotSuspension;const d=a.suspensionRelativeVelocity;let p;d<0?p=a.dampingCompression:p=a.dampingRelaxation,l-=p*d,a.suspensionForce=l*i,a.suspensionForce<0&&(a.suspensionForce=0)}else a.suspensionForce=0}}removeFromWorld(e){this.constraints,e.removeBody(this.chassisBody),e.removeEventListener("preStep",this.preStepCallback),this.world=null}castRay(e){const t=oP,i=aP;this.updateWheelTransformWorld(e);const s=this.chassisBody;let r=-1;const o=e.suspensionRestLength+e.radius;e.directionWorld.scale(o,t);const a=e.chassisConnectionPointWorld;a.vadd(t,i);const l=e.raycastResult;l.reset();const c=s.collisionResponse;s.collisionResponse=!1,this.world.rayTest(a,i,l),s.collisionResponse=c;const u=l.body;if(e.raycastResult.groundObject=0,u){r=l.distance,e.raycastResult.hitNormalWorld=l.hitNormalWorld,e.isInContact=!0;const h=l.distance;e.suspensionLength=h-e.radius;const d=e.suspensionRestLength-e.maxSuspensionTravel,p=e.suspensionRestLength+e.maxSuspensionTravel;e.suspensionLength<d&&(e.suspensionLength=d),e.suspensionLength>p&&(e.suspensionLength=p,e.raycastResult.reset());const m=e.raycastResult.hitNormalWorld.dot(e.directionWorld),f=new x;s.getVelocityAtWorldPoint(e.raycastResult.hitPointWorld,f);const v=e.raycastResult.hitNormalWorld.dot(f);if(m>=-.1)e.suspensionRelativeVelocity=0,e.clippedInvContactDotSuspension=1/.1;else{const C=-1/m;e.suspensionRelativeVelocity=v*C,e.clippedInvContactDotSuspension=C}}else e.suspensionLength=e.suspensionRestLength+0*e.maxSuspensionTravel,e.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.raycastResult.hitNormalWorld),e.clippedInvContactDotSuspension=1;return r}updateWheelTransformWorld(e){e.isInContact=!1;const t=this.chassisBody;t.pointToWorldFrame(e.chassisConnectionPointLocal,e.chassisConnectionPointWorld),t.vectorToWorldFrame(e.directionLocal,e.directionWorld),t.vectorToWorldFrame(e.axleLocal,e.axleWorld)}updateWheelTransform(e){const t=iP,i=sP,s=rP,r=this.wheelInfos[e];this.updateWheelTransformWorld(r),r.directionLocal.scale(-1,t),i.copy(r.axleLocal),t.cross(i,s),s.normalize(),i.normalize();const o=r.steering,a=new Ne;a.setFromAxisAngle(t,o);const l=new Ne;l.setFromAxisAngle(i,r.rotation);const c=r.worldTransform.quaternion;this.chassisBody.quaternion.mult(a,c),c.mult(l,c),c.normalize();const u=r.worldTransform.position;u.copy(r.directionWorld),u.scale(r.suspensionLength,u),u.vadd(r.chassisConnectionPointWorld,u)}getWheelTransformWorld(e){return this.wheelInfos[e].worldTransform}updateFriction(e){const t=cP,i=this.wheelInfos,s=i.length,r=this.chassisBody,o=hP,a=uP;this.numWheelsOnGround=0;for(let u=0;u<s;u++){const h=i[u];h.raycastResult.body&&this.numWheelsOnGround++,h.sideImpulse=0,h.forwardImpulse=0,o[u]||(o[u]=new x),a[u]||(a[u]=new x)}for(let u=0;u<s;u++){const h=i[u],d=h.raycastResult.body;if(d){const p=a[u];this.getWheelTransformWorld(u).vectorToWorldFrame(lP[this.indexRightAxis],p);const f=h.raycastResult.hitNormalWorld,v=p.dot(f);f.scale(v,t),p.vsub(t,p),p.normalize(),f.cross(p,o[u]),o[u].normalize(),h.sideImpulse=EP(r,h.raycastResult.hitPointWorld,d,h.raycastResult.hitPointWorld,p),h.sideImpulse*=dP}}const l=1,c=.5;this.sliding=!1;for(let u=0;u<s;u++){const h=i[u],d=h.raycastResult.body;let p=0;if(h.slipInfo=1,d){const f=h.brake?h.brake:0;p=vP(r,d,h.raycastResult.hitPointWorld,o[u],f),p+=h.engineForce*e;const v=f/p;h.slipInfo*=v}if(h.forwardImpulse=0,h.skidInfo=1,d){h.skidInfo=1;const m=h.suspensionForce*e*h.frictionSlip,v=m*m;h.forwardImpulse=p;const C=h.forwardImpulse*c/h.forwardAcceleration,g=h.sideImpulse*l/h.sideAcceleration,E=C*C+g*g;if(h.sliding=!1,E>v){this.sliding=!0,h.sliding=!0;const T=m/Math.sqrt(E);h.skidInfo*=T}}}if(this.sliding)for(let u=0;u<s;u++){const h=i[u];h.sideImpulse!==0&&h.skidInfo<1&&(h.forwardImpulse*=h.skidInfo,h.sideImpulse*=h.skidInfo)}for(let u=0;u<s;u++){const h=i[u],d=new x;if(h.raycastResult.hitPointWorld.vsub(r.position,d),h.forwardImpulse!==0){const p=new x;o[u].scale(h.forwardImpulse,p),r.applyImpulse(p,d)}if(h.sideImpulse!==0){const p=h.raycastResult.body,m=new x;h.raycastResult.hitPointWorld.vsub(p.position,m);const f=new x;a[u].scale(h.sideImpulse,f),r.vectorToLocalFrame(d,d),d["xyz"[this.indexUpAxis]]*=h.rollInfluence,r.vectorToWorldFrame(d,d),r.applyImpulse(f,d),f.scale(-1,f),p.applyImpulse(f,m)}}}}new x;new x;new x;const iP=new x,sP=new x,rP=new x;new $e;new x;const oP=new x,aP=new x,lP=[new x(1,0,0),new x(0,1,0),new x(0,0,1)],cP=new x,uP=[],hP=[],dP=1,pP=new x,fP=new x,mP=new x;function vP(n,e,t,i,s){let r=0;const o=t,a=pP,l=fP,c=mP;n.getVelocityAtWorldPoint(o,a),e.getVelocityAtWorldPoint(o,l),a.vsub(l,c);const u=i.dot(c),h=id(n,t,i),d=id(e,t,i),m=1/(h+d);return r=-u*m,s<r&&(r=s),r<-s&&(r=-s),r}const gP=new x,_P=new x,bP=new x,wP=new x;function id(n,e,t){const i=gP,s=_P,r=bP,o=wP;return e.vsub(n.position,i),i.cross(t,s),n.invInertiaWorld.vmult(s,o),o.cross(i,r),n.invMass+t.dot(r)}const yP=new x,xP=new x,CP=new x;function EP(n,e,t,i,s){if(s.lengthSquared()>1.1)return 0;const o=yP,a=xP,l=CP;n.getVelocityAtWorldPoint(e,o),t.getVelocityAtWorldPoint(i,a),o.vsub(a,l);const c=s.dot(l),u=.2,h=1/(n.invMass+t.invMass);return-u*c*h}new x;new x;new x;new x;new x;new x;new x;new x;new x;class LT extends hi{constructor(e,t,i,s){if(e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=1),s===void 0&&(s=8),e<0)throw new Error("The cylinder radiusTop cannot be negative.");if(t<0)throw new Error("The cylinder radiusBottom cannot be negative.");const r=s,o=[],a=[],l=[],c=[],u=[],h=Math.cos,d=Math.sin;o.push(new x(-t*d(0),-i*.5,t*h(0))),c.push(0),o.push(new x(-e*d(0),i*.5,e*h(0))),u.push(1);for(let m=0;m<r;m++){const f=2*Math.PI/r*(m+1),v=2*Math.PI/r*(m+.5);m<r-1?(o.push(new x(-t*d(f),-i*.5,t*h(f))),c.push(2*m+2),o.push(new x(-e*d(f),i*.5,e*h(f))),u.push(2*m+3),l.push([2*m,2*m+1,2*m+3,2*m+2])):l.push([2*m,2*m+1,1,0]),(r%2===1||m<r/2)&&a.push(new x(-d(v),0,h(v)))}l.push(c),a.push(new x(0,1,0));const p=[];for(let m=0;m<u.length;m++)p.push(u[u.length-m-1]);l.push(p),super({vertices:o,faces:l,axes:a}),this.type=te.types.CYLINDER,this.radiusTop=e,this.radiusBottom=t,this.height=i,this.numSegments=s}}new x;class zT extends te{constructor(e,t){t===void 0&&(t={}),t=qc.defaults(t,{maxValue:null,minValue:null,elementSize:1}),super({type:te.types.HEIGHTFIELD}),this.data=e,this.maxValue=t.maxValue,this.minValue=t.minValue,this.elementSize=t.elementSize,t.minValue===null&&this.updateMinValue(),t.maxValue===null&&this.updateMaxValue(),this.cacheEnabled=!0,this.pillarConvex=new hi,this.pillarOffset=new x,this.updateBoundingSphereRadius(),this._cachedPillars={}}update(){this._cachedPillars={}}updateMinValue(){const e=this.data;let t=e[0][0];for(let i=0;i!==e.length;i++)for(let s=0;s!==e[i].length;s++){const r=e[i][s];r<t&&(t=r)}this.minValue=t}updateMaxValue(){const e=this.data;let t=e[0][0];for(let i=0;i!==e.length;i++)for(let s=0;s!==e[i].length;s++){const r=e[i][s];r>t&&(t=r)}this.maxValue=t}setHeightValueAtIndex(e,t,i){const s=this.data;s[e][t]=i,this.clearCachedConvexTrianglePillar(e,t,!1),e>0&&(this.clearCachedConvexTrianglePillar(e-1,t,!0),this.clearCachedConvexTrianglePillar(e-1,t,!1)),t>0&&(this.clearCachedConvexTrianglePillar(e,t-1,!0),this.clearCachedConvexTrianglePillar(e,t-1,!1)),t>0&&e>0&&this.clearCachedConvexTrianglePillar(e-1,t-1,!0)}getRectMinMax(e,t,i,s,r){r===void 0&&(r=[]);const o=this.data;let a=this.minValue;for(let l=e;l<=i;l++)for(let c=t;c<=s;c++){const u=o[l][c];u>a&&(a=u)}r[0]=this.minValue,r[1]=a}getIndexOfPosition(e,t,i,s){const r=this.elementSize,o=this.data;let a=Math.floor(e/r),l=Math.floor(t/r);return i[0]=a,i[1]=l,s&&(a<0&&(a=0),l<0&&(l=0),a>=o.length-1&&(a=o.length-1),l>=o[0].length-1&&(l=o[0].length-1)),!(a<0||l<0||a>=o.length-1||l>=o[0].length-1)}getTriangleAt(e,t,i,s,r,o){const a=sd;this.getIndexOfPosition(e,t,a,i);let l=a[0],c=a[1];const u=this.data;i&&(l=Math.min(u.length-2,Math.max(0,l)),c=Math.min(u[0].length-2,Math.max(0,c)));const h=this.elementSize,d=(e/h-l)**2+(t/h-c)**2,p=(e/h-(l+1))**2+(t/h-(c+1))**2,m=d>p;return this.getTriangle(l,c,m,s,r,o),m}getNormalAt(e,t,i,s){const r=MP,o=AP,a=RP,l=kP,c=IP;this.getTriangleAt(e,t,i,r,o,a),o.vsub(r,l),a.vsub(r,c),l.cross(c,s),s.normalize()}getAabbAtIndex(e,t,i){let{lowerBound:s,upperBound:r}=i;const o=this.data,a=this.elementSize;s.set(e*a,t*a,o[e][t]),r.set((e+1)*a,(t+1)*a,o[e+1][t+1])}getHeightAt(e,t,i){const s=this.data,r=SP,o=PP,a=TP,l=sd;this.getIndexOfPosition(e,t,l,i);let c=l[0],u=l[1];i&&(c=Math.min(s.length-2,Math.max(0,c)),u=Math.min(s[0].length-2,Math.max(0,u)));const h=this.getTriangleAt(e,t,i,r,o,a);BP(e,t,r.x,r.y,o.x,o.y,a.x,a.y,rd);const d=rd;return h?s[c+1][u+1]*d.x+s[c][u+1]*d.y+s[c+1][u]*d.z:s[c][u]*d.x+s[c+1][u]*d.y+s[c][u+1]*d.z}getCacheConvexTrianglePillarKey(e,t,i){return`${e}_${t}_${i?1:0}`}getCachedConvexTrianglePillar(e,t,i){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,i)]}setCachedConvexTrianglePillar(e,t,i,s,r){this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,i)]={convex:s,offset:r}}clearCachedConvexTrianglePillar(e,t,i){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,i)]}getTriangle(e,t,i,s,r,o){const a=this.data,l=this.elementSize;i?(s.set((e+1)*l,(t+1)*l,a[e+1][t+1]),r.set(e*l,(t+1)*l,a[e][t+1]),o.set((e+1)*l,t*l,a[e+1][t])):(s.set(e*l,t*l,a[e][t]),r.set((e+1)*l,t*l,a[e+1][t]),o.set(e*l,(t+1)*l,a[e][t+1]))}getConvexTrianglePillar(e,t,i){let s=this.pillarConvex,r=this.pillarOffset;if(this.cacheEnabled){const h=this.getCachedConvexTrianglePillar(e,t,i);if(h){this.pillarConvex=h.convex,this.pillarOffset=h.offset;return}s=new hi,r=new x,this.pillarConvex=s,this.pillarOffset=r}const o=this.data,a=this.elementSize,l=s.faces;s.vertices.length=6;for(let h=0;h<6;h++)s.vertices[h]||(s.vertices[h]=new x);l.length=5;for(let h=0;h<5;h++)l[h]||(l[h]=[]);const c=s.vertices,u=(Math.min(o[e][t],o[e+1][t],o[e][t+1],o[e+1][t+1])-this.minValue)/2+this.minValue;i?(r.set((e+.75)*a,(t+.75)*a,u),c[0].set(.25*a,.25*a,o[e+1][t+1]-u),c[1].set(-.75*a,.25*a,o[e][t+1]-u),c[2].set(.25*a,-.75*a,o[e+1][t]-u),c[3].set(.25*a,.25*a,-Math.abs(u)-1),c[4].set(-.75*a,.25*a,-Math.abs(u)-1),c[5].set(.25*a,-.75*a,-Math.abs(u)-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=2,l[2][1]=5,l[2][2]=3,l[2][3]=0,l[3][0]=3,l[3][1]=4,l[3][2]=1,l[3][3]=0,l[4][0]=1,l[4][1]=4,l[4][2]=5,l[4][3]=2):(r.set((e+.25)*a,(t+.25)*a,u),c[0].set(-.25*a,-.25*a,o[e][t]-u),c[1].set(.75*a,-.25*a,o[e+1][t]-u),c[2].set(-.25*a,.75*a,o[e][t+1]-u),c[3].set(-.25*a,-.25*a,-Math.abs(u)-1),c[4].set(.75*a,-.25*a,-Math.abs(u)-1),c[5].set(-.25*a,.75*a,-Math.abs(u)-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=0,l[2][1]=2,l[2][2]=5,l[2][3]=3,l[3][0]=1,l[3][1]=0,l[3][2]=3,l[3][3]=4,l[4][0]=4,l[4][1]=5,l[4][2]=2,l[4][3]=1),s.computeNormals(),s.computeEdges(),s.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(e,t,i,s,r)}calculateLocalInertia(e,t){return t===void 0&&(t=new x),t.set(0,0,0),t}volume(){return Number.MAX_VALUE}calculateWorldAABB(e,t,i,s){i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),s.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)}updateBoundingSphereRadius(){const e=this.data,t=this.elementSize;this.boundingSphereRadius=new x(e.length*t,e[0].length*t,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).length()}setHeightsFromImage(e,t){const{x:i,z:s,y:r}=t,o=document.createElement("canvas");o.width=e.width,o.height=e.height;const a=o.getContext("2d");a.drawImage(e,0,0);const l=a.getImageData(0,0,e.width,e.height),c=this.data;c.length=0,this.elementSize=Math.abs(i)/l.width;for(let u=0;u<l.height;u++){const h=[];for(let d=0;d<l.width;d++){const p=l.data[(u*l.height+d)*4],m=l.data[(u*l.height+d)*4+1],f=l.data[(u*l.height+d)*4+2],v=(p+m+f)/4/255*s;i<0?h.push(v):h.unshift(v)}r<0?c.unshift(h):c.push(h)}this.updateMaxValue(),this.updateMinValue(),this.update()}}const sd=[],rd=new x,SP=new x,PP=new x,TP=new x,MP=new x,AP=new x,RP=new x,kP=new x,IP=new x;function BP(n,e,t,i,s,r,o,a,l){l.x=((r-a)*(n-o)+(o-s)*(e-a))/((r-a)*(t-o)+(o-s)*(i-a)),l.y=((a-i)*(n-o)+(t-o)*(e-a))/((r-a)*(t-o)+(o-s)*(i-a)),l.z=1-l.x-l.y}new x;new Nt;new x;new Nt;new x;new x;new x;new x;new x;new x;new x;new Nt;new x;new ge;new Nt;class OP{constructor(){this.equations=[]}solve(e,t){return 0}addEquation(e){e.enabled&&!e.bi.isTrigger&&!e.bj.isTrigger&&this.equations.push(e)}removeEquation(e){const t=this.equations,i=t.indexOf(e);i!==-1&&t.splice(i,1)}removeAllEquations(){this.equations.length=0}}class LP extends OP{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(e,t){let i=0;const s=this.iterations,r=this.tolerance*this.tolerance,o=this.equations,a=o.length,l=t.bodies,c=l.length,u=e;let h,d,p,m,f,v;if(a!==0)for(let T=0;T!==c;T++)l[T].updateSolveMassProperties();const C=FP,g=DP,E=zP;C.length=a,g.length=a,E.length=a;for(let T=0;T!==a;T++){const k=o[T];E[T]=0,g[T]=k.computeB(u),C[T]=1/k.computeC()}if(a!==0){for(let P=0;P!==c;P++){const R=l[P],_=R.vlambda,w=R.wlambda;_.set(0,0,0),w.set(0,0,0)}for(i=0;i!==s;i++){m=0;for(let P=0;P!==a;P++){const R=o[P];h=g[P],d=C[P],v=E[P],f=R.computeGWlambda(),p=d*(h-f-R.eps*v),v+p<R.minForce?p=R.minForce-v:v+p>R.maxForce&&(p=R.maxForce-v),E[P]+=p,m+=p>0?p:-p,R.addToWlambda(p)}if(m*m<r)break}for(let P=0;P!==c;P++){const R=l[P],_=R.velocity,w=R.angularVelocity;R.vlambda.vmul(R.linearFactor,R.vlambda),_.vadd(R.vlambda,_),R.wlambda.vmul(R.angularFactor,R.wlambda),w.vadd(R.wlambda,w)}let T=o.length;const k=1/u;for(;T--;)o[T].multiplier=E[T]*k}return i}}const zP=[],FP=[],DP=[];ie.STATIC;class NP{constructor(){this.objects=[],this.type=Object}release(){const e=arguments.length;for(let t=0;t!==e;t++)this.objects.push(t<0||arguments.length<=t?void 0:arguments[t]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(e){const t=this.objects;for(;t.length>e;)t.pop();for(;t.length<e;)t.push(this.constructObject());return this}}class VP extends NP{constructor(){super(...arguments),this.type=x}constructObject(){return new x}}const ke={sphereSphere:te.types.SPHERE,spherePlane:te.types.SPHERE|te.types.PLANE,boxBox:te.types.BOX|te.types.BOX,sphereBox:te.types.SPHERE|te.types.BOX,planeBox:te.types.PLANE|te.types.BOX,convexConvex:te.types.CONVEXPOLYHEDRON,sphereConvex:te.types.SPHERE|te.types.CONVEXPOLYHEDRON,planeConvex:te.types.PLANE|te.types.CONVEXPOLYHEDRON,boxConvex:te.types.BOX|te.types.CONVEXPOLYHEDRON,sphereHeightfield:te.types.SPHERE|te.types.HEIGHTFIELD,boxHeightfield:te.types.BOX|te.types.HEIGHTFIELD,convexHeightfield:te.types.CONVEXPOLYHEDRON|te.types.HEIGHTFIELD,sphereParticle:te.types.PARTICLE|te.types.SPHERE,planeParticle:te.types.PLANE|te.types.PARTICLE,boxParticle:te.types.BOX|te.types.PARTICLE,convexParticle:te.types.PARTICLE|te.types.CONVEXPOLYHEDRON,cylinderCylinder:te.types.CYLINDER,sphereCylinder:te.types.SPHERE|te.types.CYLINDER,planeCylinder:te.types.PLANE|te.types.CYLINDER,boxCylinder:te.types.BOX|te.types.CYLINDER,convexCylinder:te.types.CONVEXPOLYHEDRON|te.types.CYLINDER,heightfieldCylinder:te.types.HEIGHTFIELD|te.types.CYLINDER,particleCylinder:te.types.PARTICLE|te.types.CYLINDER,sphereTrimesh:te.types.SPHERE|te.types.TRIMESH,planeTrimesh:te.types.PLANE|te.types.TRIMESH};class UP{get[ke.sphereSphere](){return this.sphereSphere}get[ke.spherePlane](){return this.spherePlane}get[ke.boxBox](){return this.boxBox}get[ke.sphereBox](){return this.sphereBox}get[ke.planeBox](){return this.planeBox}get[ke.convexConvex](){return this.convexConvex}get[ke.sphereConvex](){return this.sphereConvex}get[ke.planeConvex](){return this.planeConvex}get[ke.boxConvex](){return this.boxConvex}get[ke.sphereHeightfield](){return this.sphereHeightfield}get[ke.boxHeightfield](){return this.boxHeightfield}get[ke.convexHeightfield](){return this.convexHeightfield}get[ke.sphereParticle](){return this.sphereParticle}get[ke.planeParticle](){return this.planeParticle}get[ke.boxParticle](){return this.boxParticle}get[ke.convexParticle](){return this.convexParticle}get[ke.cylinderCylinder](){return this.convexConvex}get[ke.sphereCylinder](){return this.sphereConvex}get[ke.planeCylinder](){return this.planeConvex}get[ke.boxCylinder](){return this.boxConvex}get[ke.convexCylinder](){return this.convexConvex}get[ke.heightfieldCylinder](){return this.heightfieldCylinder}get[ke.particleCylinder](){return this.particleCylinder}get[ke.sphereTrimesh](){return this.sphereTrimesh}get[ke.planeTrimesh](){return this.planeTrimesh}constructor(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new VP,this.world=e,this.currentContactMaterial=e.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(e,t,i,s,r,o){let a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=e,a.bj=t):a=new qS(e,t),a.enabled=e.collisionResponse&&t.collisionResponse&&i.collisionResponse&&s.collisionResponse;const l=this.currentContactMaterial;a.restitution=l.restitution,a.setSpookParams(l.contactEquationStiffness,l.contactEquationRelaxation,this.world.dt);const c=i.material||e.material,u=s.material||t.material;return c&&u&&c.restitution>=0&&u.restitution>=0&&(a.restitution=c.restitution*u.restitution),a.si=r||i,a.sj=o||s,a}createFrictionEquationsFromContact(e,t){const i=e.bi,s=e.bj,r=e.si,o=e.sj,a=this.world,l=this.currentContactMaterial;let c=l.friction;const u=r.material||i.material,h=o.material||s.material;if(u&&h&&u.friction>=0&&h.friction>=0&&(c=u.friction*h.friction),c>0){const d=c*(a.frictionGravity||a.gravity).length();let p=i.invMass+s.invMass;p>0&&(p=1/p);const m=this.frictionEquationPool,f=m.length?m.pop():new ed(i,s,d*p),v=m.length?m.pop():new ed(i,s,d*p);return f.bi=v.bi=i,f.bj=v.bj=s,f.minForce=v.minForce=-d*p,f.maxForce=v.maxForce=d*p,f.ri.copy(e.ri),f.rj.copy(e.rj),v.ri.copy(e.ri),v.rj.copy(e.rj),e.ni.tangents(f.t,v.t),f.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,a.dt),v.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,a.dt),f.enabled=v.enabled=e.enabled,t.push(f,v),!0}return!1}createFrictionFromAverage(e){let t=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(t,this.frictionResult)||e===1)return;const i=this.frictionResult[this.frictionResult.length-2],s=this.frictionResult[this.frictionResult.length-1];Si.setZero(),es.setZero(),ts.setZero();const r=t.bi;t.bj;for(let a=0;a!==e;a++)t=this.result[this.result.length-1-a],t.bi!==r?(Si.vadd(t.ni,Si),es.vadd(t.ri,es),ts.vadd(t.rj,ts)):(Si.vsub(t.ni,Si),es.vadd(t.rj,es),ts.vadd(t.ri,ts));const o=1/e;es.scale(o,i.ri),ts.scale(o,i.rj),s.ri.copy(i.ri),s.rj.copy(i.rj),Si.normalize(),Si.tangents(i.t,s.t)}getContacts(e,t,i,s,r,o,a){this.contactPointPool=r,this.frictionEquationPool=a,this.result=s,this.frictionResult=o;const l=GP,c=qP,u=jP,h=HP;for(let d=0,p=e.length;d!==p;d++){const m=e[d],f=t[d];let v=null;m.material&&f.material&&(v=i.getContactMaterial(m.material,f.material)||null);const C=m.type&ie.KINEMATIC&&f.type&ie.STATIC||m.type&ie.STATIC&&f.type&ie.KINEMATIC||m.type&ie.KINEMATIC&&f.type&ie.KINEMATIC;for(let g=0;g<m.shapes.length;g++){m.quaternion.mult(m.shapeOrientations[g],l),m.quaternion.vmult(m.shapeOffsets[g],u),u.vadd(m.position,u);const E=m.shapes[g];for(let T=0;T<f.shapes.length;T++){f.quaternion.mult(f.shapeOrientations[T],c),f.quaternion.vmult(f.shapeOffsets[T],h),h.vadd(f.position,h);const k=f.shapes[T];if(!(E.collisionFilterMask&k.collisionFilterGroup&&k.collisionFilterMask&E.collisionFilterGroup)||u.distanceTo(h)>E.boundingSphereRadius+k.boundingSphereRadius)continue;let P=null;E.material&&k.material&&(P=i.getContactMaterial(E.material,k.material)||null),this.currentContactMaterial=P||v||i.defaultContactMaterial;const R=E.type|k.type,_=this[R];if(_){let w=!1;E.type<k.type?w=_.call(this,E,k,u,h,l,c,m,f,E,k,C):w=_.call(this,k,E,h,u,c,l,f,m,E,k,C),w&&C&&(i.shapeOverlapKeeper.set(E.id,k.id),i.bodyOverlapKeeper.set(m.id,f.id))}}}}}sphereSphere(e,t,i,s,r,o,a,l,c,u,h){if(h)return i.distanceSquared(s)<(e.radius+t.radius)**2;const d=this.createContactEquation(a,l,e,t,c,u);s.vsub(i,d.ni),d.ni.normalize(),d.ri.copy(d.ni),d.rj.copy(d.ni),d.ri.scale(e.radius,d.ri),d.rj.scale(-t.radius,d.rj),d.ri.vadd(i,d.ri),d.ri.vsub(a.position,d.ri),d.rj.vadd(s,d.rj),d.rj.vsub(l.position,d.rj),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}spherePlane(e,t,i,s,r,o,a,l,c,u,h){const d=this.createContactEquation(a,l,e,t,c,u);if(d.ni.set(0,0,1),o.vmult(d.ni,d.ni),d.ni.negate(d.ni),d.ni.normalize(),d.ni.scale(e.radius,d.ri),i.vsub(s,eo),d.ni.scale(d.ni.dot(eo),od),eo.vsub(od,d.rj),-eo.dot(d.ni)<=e.radius){if(h)return!0;const p=d.ri,m=d.rj;p.vadd(i,p),p.vsub(a.position,p),m.vadd(s,m),m.vsub(l.position,m),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}}boxBox(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t.convexPolyhedronRepresentation,i,s,r,o,a,l,e,t,h)}sphereBox(e,t,i,s,r,o,a,l,c,u,h){const d=this.v3pool,p=g2;i.vsub(s,to),t.getSideNormals(p,o);const m=e.radius;let f=!1;const v=b2,C=w2,g=y2;let E=null,T=0,k=0,P=0,R=null;for(let L=0,U=p.length;L!==U&&f===!1;L++){const $=f2;$.copy(p[L]);const Z=$.length();$.normalize();const ne=to.dot($);if(ne<Z+m&&ne>0){const oe=m2,J=v2;oe.copy(p[(L+1)%3]),J.copy(p[(L+2)%3]);const Ie=oe.length(),Ee=J.length();oe.normalize(),J.normalize();const ze=to.dot(oe),Fe=to.dot(J);if(ze<Ie&&ze>-Ie&&Fe<Ee&&Fe>-Ee){const q=Math.abs(ne-Z-m);if((R===null||q<R)&&(R=q,k=ze,P=Fe,E=Z,v.copy($),C.copy(oe),g.copy(J),T++,h))return!0}}}if(T){f=!0;const L=this.createContactEquation(a,l,e,t,c,u);v.scale(-m,L.ri),L.ni.copy(v),L.ni.negate(L.ni),v.scale(E,v),C.scale(k,C),v.vadd(C,v),g.scale(P,g),v.vadd(g,L.rj),L.ri.vadd(i,L.ri),L.ri.vsub(a.position,L.ri),L.rj.vadd(s,L.rj),L.rj.vsub(l.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}let _=d.get();const w=_2;for(let L=0;L!==2&&!f;L++)for(let U=0;U!==2&&!f;U++)for(let $=0;$!==2&&!f;$++)if(_.set(0,0,0),L?_.vadd(p[0],_):_.vsub(p[0],_),U?_.vadd(p[1],_):_.vsub(p[1],_),$?_.vadd(p[2],_):_.vsub(p[2],_),s.vadd(_,w),w.vsub(i,w),w.lengthSquared()<m*m){if(h)return!0;f=!0;const Z=this.createContactEquation(a,l,e,t,c,u);Z.ri.copy(w),Z.ri.normalize(),Z.ni.copy(Z.ri),Z.ri.scale(m,Z.ri),Z.rj.copy(_),Z.ri.vadd(i,Z.ri),Z.ri.vsub(a.position,Z.ri),Z.rj.vadd(s,Z.rj),Z.rj.vsub(l.position,Z.rj),this.result.push(Z),this.createFrictionEquationsFromContact(Z,this.frictionResult)}d.release(_),_=null;const b=d.get(),I=d.get(),B=d.get(),z=d.get(),D=d.get(),N=p.length;for(let L=0;L!==N&&!f;L++)for(let U=0;U!==N&&!f;U++)if(L%3!==U%3){p[U].cross(p[L],b),b.normalize(),p[L].vadd(p[U],I),B.copy(i),B.vsub(I,B),B.vsub(s,B);const $=B.dot(b);b.scale($,z);let Z=0;for(;Z===L%3||Z===U%3;)Z++;D.copy(i),D.vsub(z,D),D.vsub(I,D),D.vsub(s,D);const ne=Math.abs($),oe=D.length();if(ne<p[Z].length()&&oe<m){if(h)return!0;f=!0;const J=this.createContactEquation(a,l,e,t,c,u);I.vadd(z,J.rj),J.rj.copy(J.rj),D.negate(J.ni),J.ni.normalize(),J.ri.copy(J.rj),J.ri.vadd(s,J.ri),J.ri.vsub(i,J.ri),J.ri.normalize(),J.ri.scale(m,J.ri),J.ri.vadd(i,J.ri),J.ri.vsub(a.position,J.ri),J.rj.vadd(s,J.rj),J.rj.vsub(l.position,J.rj),this.result.push(J),this.createFrictionEquationsFromContact(J,this.frictionResult)}}d.release(b,I,B,z,D)}planeBox(e,t,i,s,r,o,a,l,c,u,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,t.convexPolyhedronRepresentation.id=t.id,this.planeConvex(e,t.convexPolyhedronRepresentation,i,s,r,o,a,l,e,t,h)}convexConvex(e,t,i,s,r,o,a,l,c,u,h,d,p){const m=z2;if(!(i.distanceTo(s)>e.boundingSphereRadius+t.boundingSphereRadius)&&e.findSeparatingAxis(t,i,r,s,o,m,d,p)){const f=[],v=F2;e.clipAgainstHull(i,r,t,s,o,m,-100,100,f);let C=0;for(let g=0;g!==f.length;g++){if(h)return!0;const E=this.createContactEquation(a,l,e,t,c,u),T=E.ri,k=E.rj;m.negate(E.ni),f[g].normal.negate(v),v.scale(f[g].depth,v),f[g].point.vadd(v,T),k.copy(f[g].point),T.vsub(i,T),k.vsub(s,k),T.vadd(i,T),T.vsub(a.position,T),k.vadd(s,k),k.vsub(l.position,k),this.result.push(E),C++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(E,this.frictionResult)}this.enableFrictionReduction&&C&&this.createFrictionFromAverage(C)}}sphereConvex(e,t,i,s,r,o,a,l,c,u,h){const d=this.v3pool;i.vsub(s,x2);const p=t.faceNormals,m=t.faces,f=t.vertices,v=e.radius;let C=!1;for(let g=0;g!==f.length;g++){const E=f[g],T=P2;o.vmult(E,T),s.vadd(T,T);const k=S2;if(T.vsub(i,k),k.lengthSquared()<v*v){if(h)return!0;C=!0;const P=this.createContactEquation(a,l,e,t,c,u);P.ri.copy(k),P.ri.normalize(),P.ni.copy(P.ri),P.ri.scale(v,P.ri),T.vsub(s,P.rj),P.ri.vadd(i,P.ri),P.ri.vsub(a.position,P.ri),P.rj.vadd(s,P.rj),P.rj.vsub(l.position,P.rj),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult);return}}for(let g=0,E=m.length;g!==E&&C===!1;g++){const T=p[g],k=m[g],P=T2;o.vmult(T,P);const R=M2;o.vmult(f[k[0]],R),R.vadd(s,R);const _=A2;P.scale(-v,_),i.vadd(_,_);const w=R2;_.vsub(R,w);const b=w.dot(P),I=k2;if(i.vsub(R,I),b<0&&I.dot(P)>0){const B=[];for(let z=0,D=k.length;z!==D;z++){const N=d.get();o.vmult(f[k[z]],N),s.vadd(N,N),B.push(N)}if(p2(B,P,i)){if(h)return!0;C=!0;const z=this.createContactEquation(a,l,e,t,c,u);P.scale(-v,z.ri),P.negate(z.ni);const D=d.get();P.scale(-b,D);const N=d.get();P.scale(-v,N),i.vsub(s,z.rj),z.rj.vadd(N,z.rj),z.rj.vadd(D,z.rj),z.rj.vadd(s,z.rj),z.rj.vsub(l.position,z.rj),z.ri.vadd(i,z.ri),z.ri.vsub(a.position,z.ri),d.release(D),d.release(N),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult);for(let L=0,U=B.length;L!==U;L++)d.release(B[L]);return}else for(let z=0;z!==k.length;z++){const D=d.get(),N=d.get();o.vmult(f[k[(z+1)%k.length]],D),o.vmult(f[k[(z+2)%k.length]],N),s.vadd(D,D),s.vadd(N,N);const L=C2;N.vsub(D,L);const U=E2;L.unit(U);const $=d.get(),Z=d.get();i.vsub(D,Z);const ne=Z.dot(U);U.scale(ne,$),$.vadd(D,$);const oe=d.get();if($.vsub(i,oe),ne>0&&ne*ne<L.lengthSquared()&&oe.lengthSquared()<v*v){if(h)return!0;const J=this.createContactEquation(a,l,e,t,c,u);$.vsub(s,J.rj),$.vsub(i,J.ni),J.ni.normalize(),J.ni.scale(v,J.ri),J.rj.vadd(s,J.rj),J.rj.vsub(l.position,J.rj),J.ri.vadd(i,J.ri),J.ri.vsub(a.position,J.ri),this.result.push(J),this.createFrictionEquationsFromContact(J,this.frictionResult);for(let Ie=0,Ee=B.length;Ie!==Ee;Ie++)d.release(B[Ie]);d.release(D),d.release(N),d.release($),d.release(oe),d.release(Z);return}d.release(D),d.release(N),d.release($),d.release(oe),d.release(Z)}for(let z=0,D=B.length;z!==D;z++)d.release(B[z])}}}planeConvex(e,t,i,s,r,o,a,l,c,u,h){const d=I2,p=B2;p.set(0,0,1),r.vmult(p,p);let m=0;const f=O2;for(let v=0;v!==t.vertices.length;v++)if(d.copy(t.vertices[v]),o.vmult(d,d),s.vadd(d,d),d.vsub(i,f),p.dot(f)<=0){if(h)return!0;const g=this.createContactEquation(a,l,e,t,c,u),E=L2;p.scale(p.dot(f),E),d.vsub(E,E),E.vsub(i,g.ri),g.ni.copy(p),d.vsub(s,g.rj),g.ri.vadd(i,g.ri),g.ri.vsub(a.position,g.ri),g.rj.vadd(s,g.rj),g.rj.vsub(l.position,g.rj),this.result.push(g),m++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult)}this.enableFrictionReduction&&m&&this.createFrictionFromAverage(m)}boxConvex(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t,i,s,r,o,a,l,e,t,h)}sphereHeightfield(e,t,i,s,r,o,a,l,c,u,h){const d=t.data,p=e.radius,m=t.elementSize,f=Y2,v=K2;ge.pointToLocalFrame(s,o,i,v);let C=Math.floor((v.x-p)/m)-1,g=Math.ceil((v.x+p)/m)+1,E=Math.floor((v.y-p)/m)-1,T=Math.ceil((v.y+p)/m)+1;if(g<0||T<0||C>d.length||E>d[0].length)return;C<0&&(C=0),g<0&&(g=0),E<0&&(E=0),T<0&&(T=0),C>=d.length&&(C=d.length-1),g>=d.length&&(g=d.length-1),T>=d[0].length&&(T=d[0].length-1),E>=d[0].length&&(E=d[0].length-1);const k=[];t.getRectMinMax(C,E,g,T,k);const P=k[0],R=k[1];if(v.z-p>R||v.z+p<P)return;const _=this.result;for(let w=C;w<g;w++)for(let b=E;b<T;b++){const I=_.length;let B=!1;if(t.getConvexTrianglePillar(w,b,!1),ge.pointToWorldFrame(s,o,t.pillarOffset,f),i.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(B=this.sphereConvex(e,t.pillarConvex,i,f,r,o,a,l,e,t,h)),h&&B||(t.getConvexTrianglePillar(w,b,!0),ge.pointToWorldFrame(s,o,t.pillarOffset,f),i.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(B=this.sphereConvex(e,t.pillarConvex,i,f,r,o,a,l,e,t,h)),h&&B))return!0;if(_.length-I>2)return}}boxHeightfield(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,t,i,s,r,o,a,l,e,t,h)}convexHeightfield(e,t,i,s,r,o,a,l,c,u,h){const d=t.data,p=t.elementSize,m=e.boundingSphereRadius,f=W2,v=$2,C=q2;ge.pointToLocalFrame(s,o,i,C);let g=Math.floor((C.x-m)/p)-1,E=Math.ceil((C.x+m)/p)+1,T=Math.floor((C.y-m)/p)-1,k=Math.ceil((C.y+m)/p)+1;if(E<0||k<0||g>d.length||T>d[0].length)return;g<0&&(g=0),E<0&&(E=0),T<0&&(T=0),k<0&&(k=0),g>=d.length&&(g=d.length-1),E>=d.length&&(E=d.length-1),k>=d[0].length&&(k=d[0].length-1),T>=d[0].length&&(T=d[0].length-1);const P=[];t.getRectMinMax(g,T,E,k,P);const R=P[0],_=P[1];if(!(C.z-m>_||C.z+m<R))for(let w=g;w<E;w++)for(let b=T;b<k;b++){let I=!1;if(t.getConvexTrianglePillar(w,b,!1),ge.pointToWorldFrame(s,o,t.pillarOffset,f),i.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(I=this.convexConvex(e,t.pillarConvex,i,f,r,o,a,l,null,null,h,v,null)),h&&I||(t.getConvexTrianglePillar(w,b,!0),ge.pointToWorldFrame(s,o,t.pillarOffset,f),i.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(I=this.convexConvex(e,t.pillarConvex,i,f,r,o,a,l,null,null,h,v,null)),h&&I))return!0}}sphereParticle(e,t,i,s,r,o,a,l,c,u,h){const d=U2;if(d.set(0,0,1),s.vsub(i,d),d.lengthSquared()<=e.radius*e.radius){if(h)return!0;const m=this.createContactEquation(l,a,t,e,c,u);d.normalize(),m.rj.copy(d),m.rj.scale(e.radius,m.rj),m.ni.copy(d),m.ni.negate(m.ni),m.ri.set(0,0,0),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult)}}planeParticle(e,t,i,s,r,o,a,l,c,u,h){const d=D2;d.set(0,0,1),a.quaternion.vmult(d,d);const p=N2;if(s.vsub(a.position,p),d.dot(p)<=0){if(h)return!0;const f=this.createContactEquation(l,a,t,e,c,u);f.ni.copy(d),f.ni.negate(f.ni),f.ri.set(0,0,0);const v=V2;d.scale(d.dot(s),v),s.vsub(v,v),f.rj.copy(v),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}}boxParticle(e,t,i,s,r,o,a,l,c,u,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,t,i,s,r,o,a,l,e,t,h)}convexParticle(e,t,i,s,r,o,a,l,c,u,h){let d=-1;const p=H2,m=G2;let f=null;const v=j2;if(v.copy(s),v.vsub(i,v),r.conjugate(ad),ad.vmult(v,v),e.pointIsInside(v)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(i,r),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(r);for(let C=0,g=e.faces.length;C!==g;C++){const E=[e.worldVertices[e.faces[C][0]]],T=e.worldFaceNormals[C];s.vsub(E[0],ld);const k=-T.dot(ld);if(f===null||Math.abs(k)<Math.abs(f)){if(h)return!0;f=k,d=C,p.copy(T)}}if(d!==-1){const C=this.createContactEquation(l,a,t,e,c,u);p.scale(f,m),m.vadd(s,m),m.vsub(i,m),C.rj.copy(m),p.negate(C.ni),C.ri.set(0,0,0);const g=C.ri,E=C.rj;g.vadd(s,g),g.vsub(l.position,g),E.vadd(i,E),E.vsub(a.position,E),this.result.push(C),this.createFrictionEquationsFromContact(C,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(e,t,i,s,r,o,a,l,c,u,h){return this.convexHeightfield(t,e,s,i,o,r,l,a,c,u,h)}particleCylinder(e,t,i,s,r,o,a,l,c,u,h){return this.convexParticle(t,e,s,i,o,r,l,a,c,u,h)}sphereTrimesh(e,t,i,s,r,o,a,l,c,u,h){const d=JP,p=e2,m=t2,f=n2,v=i2,C=s2,g=l2,E=QP,T=XP,k=c2;ge.pointToLocalFrame(s,o,i,v);const P=e.radius;g.lowerBound.set(v.x-P,v.y-P,v.z-P),g.upperBound.set(v.x+P,v.y+P,v.z+P),t.getTrianglesInAABB(g,k);const R=ZP,_=e.radius*e.radius;for(let z=0;z<k.length;z++)for(let D=0;D<3;D++)if(t.getVertex(t.indices[k[z]*3+D],R),R.vsub(v,T),T.lengthSquared()<=_){if(E.copy(R),ge.pointToWorldFrame(s,o,E,R),R.vsub(i,T),h)return!0;let N=this.createContactEquation(a,l,e,t,c,u);N.ni.copy(T),N.ni.normalize(),N.ri.copy(N.ni),N.ri.scale(e.radius,N.ri),N.ri.vadd(i,N.ri),N.ri.vsub(a.position,N.ri),N.rj.copy(R),N.rj.vsub(l.position,N.rj),this.result.push(N),this.createFrictionEquationsFromContact(N,this.frictionResult)}for(let z=0;z<k.length;z++)for(let D=0;D<3;D++){t.getVertex(t.indices[k[z]*3+D],d),t.getVertex(t.indices[k[z]*3+(D+1)%3],p),p.vsub(d,m),v.vsub(p,C);const N=C.dot(m);v.vsub(d,C);let L=C.dot(m);if(L>0&&N<0&&(v.vsub(d,C),f.copy(m),f.normalize(),L=C.dot(f),f.scale(L,C),C.vadd(d,C),C.distanceTo(v)<e.radius)){if(h)return!0;const $=this.createContactEquation(a,l,e,t,c,u);C.vsub(v,$.ni),$.ni.normalize(),$.ni.scale(e.radius,$.ri),$.ri.vadd(i,$.ri),$.ri.vsub(a.position,$.ri),ge.pointToWorldFrame(s,o,C,C),C.vsub(l.position,$.rj),ge.vectorToWorldFrame(o,$.ni,$.ni),ge.vectorToWorldFrame(o,$.ri,$.ri),this.result.push($),this.createFrictionEquationsFromContact($,this.frictionResult)}}const w=r2,b=o2,I=a2,B=YP;for(let z=0,D=k.length;z!==D;z++){t.getTriangleVertices(k[z],w,b,I),t.getNormal(k[z],B),v.vsub(w,C);let N=C.dot(B);if(B.scale(N,C),v.vsub(C,C),N=C.distanceTo(v),$e.pointInTriangle(C,w,b,I)&&N<e.radius){if(h)return!0;let L=this.createContactEquation(a,l,e,t,c,u);C.vsub(v,L.ni),L.ni.normalize(),L.ni.scale(e.radius,L.ri),L.ri.vadd(i,L.ri),L.ri.vsub(a.position,L.ri),ge.pointToWorldFrame(s,o,C,C),C.vsub(l.position,L.rj),ge.vectorToWorldFrame(o,L.ni,L.ni),ge.vectorToWorldFrame(o,L.ri,L.ri),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}}k.length=0}planeTrimesh(e,t,i,s,r,o,a,l,c,u,h){const d=new x,p=WP;p.set(0,0,1),r.vmult(p,p);for(let m=0;m<t.vertices.length/3;m++){t.getVertex(m,d);const f=new x;f.copy(d),ge.pointToWorldFrame(s,o,f,d);const v=$P;if(d.vsub(i,v),p.dot(v)<=0){if(h)return!0;const g=this.createContactEquation(a,l,e,t,c,u);g.ni.copy(p);const E=KP;p.scale(v.dot(p),E),d.vsub(E,E),g.ri.copy(E),g.ri.vsub(a.position,g.ri),g.rj.copy(d),g.rj.vsub(l.position,g.rj),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult)}}}}const Si=new x,es=new x,ts=new x,jP=new x,HP=new x,GP=new Ne,qP=new Ne,WP=new x,$P=new x,KP=new x,YP=new x,XP=new x;new x;const ZP=new x,QP=new x,JP=new x,e2=new x,t2=new x,n2=new x,i2=new x,s2=new x,r2=new x,o2=new x,a2=new x,l2=new Nt,c2=[],eo=new x,od=new x,u2=new x,h2=new x,d2=new x;function p2(n,e,t){let i=null;const s=n.length;for(let r=0;r!==s;r++){const o=n[r],a=u2;n[(r+1)%s].vsub(o,a);const l=h2;a.cross(e,l);const c=d2;t.vsub(o,c);const u=l.dot(c);if(i===null||u>0&&i===!0||u<=0&&i===!1){i===null&&(i=u>0);continue}else return!1}return!0}const to=new x,f2=new x,m2=new x,v2=new x,g2=[new x,new x,new x,new x,new x,new x],_2=new x,b2=new x,w2=new x,y2=new x,x2=new x,C2=new x,E2=new x,S2=new x,P2=new x,T2=new x,M2=new x,A2=new x,R2=new x,k2=new x;new x;new x;const I2=new x,B2=new x,O2=new x,L2=new x,z2=new x,F2=new x,D2=new x,N2=new x,V2=new x,U2=new x,ad=new Ne,j2=new x;new x;const H2=new x,ld=new x,G2=new x,q2=new x,W2=new x,$2=[0],K2=new x,Y2=new x;class cd{constructor(){this.current=[],this.previous=[]}getKey(e,t){if(t<e){const i=t;t=e,e=i}return e<<16|t}set(e,t){const i=this.getKey(e,t),s=this.current;let r=0;for(;i>s[r];)r++;if(i!==s[r]){for(let o=s.length-1;o>=r;o--)s[o+1]=s[o];s[r]=i}}tick(){const e=this.current;this.current=this.previous,this.previous=e,this.current.length=0}getDiff(e,t){const i=this.current,s=this.previous,r=i.length,o=s.length;let a=0;for(let l=0;l<r;l++){let c=!1;const u=i[l];for(;u>s[a];)a++;c=u===s[a],c||ud(e,u)}a=0;for(let l=0;l<o;l++){let c=!1;const u=s[l];for(;u>i[a];)a++;c=i[a]===u,c||ud(t,u)}}}function ud(n,e){n.push((e&4294901760)>>16,e&65535)}const Ga=(n,e)=>n<e?`${n}-${e}`:`${e}-${n}`;class X2{constructor(){this.data={keys:[]}}get(e,t){const i=Ga(e,t);return this.data[i]}set(e,t,i){const s=Ga(e,t);this.get(e,t)||this.data.keys.push(s),this.data[s]=i}delete(e,t){const i=Ga(e,t),s=this.data.keys.indexOf(i);s!==-1&&this.data.keys.splice(s,1),delete this.data[i]}reset(){const e=this.data,t=e.keys;for(;t.length>0;){const i=t.pop();delete e[i]}}}class FT extends Xm{constructor(e){e===void 0&&(e={}),super(),this.dt=-1,this.allowSleep=!!e.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=e.quatNormalizeSkip!==void 0?e.quatNormalizeSkip:0,this.quatNormalizeFast=e.quatNormalizeFast!==void 0?e.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new x,e.gravity&&this.gravity.copy(e.gravity),e.frictionGravity&&(this.frictionGravity=new x,this.frictionGravity.copy(e.frictionGravity)),this.broadphase=e.broadphase!==void 0?e.broadphase:new TS,this.bodies=[],this.hasActiveBodies=!1,this.solver=e.solver!==void 0?e.solver:new LP,this.constraints=[],this.narrowphase=new UP(this),this.collisionMatrix=new Gh,this.collisionMatrixPrevious=new Gh,this.bodyOverlapKeeper=new cd,this.shapeOverlapKeeper=new cd,this.contactmaterials=[],this.contactMaterialTable=new X2,this.defaultMaterial=new ia("default"),this.defaultContactMaterial=new na(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(e,t){return this.contactMaterialTable.get(e.id,t.id)}collisionMatrixTick(){const e=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=e,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(e){this.constraints.push(e)}removeConstraint(e){const t=this.constraints.indexOf(e);t!==-1&&this.constraints.splice(t,1)}rayTest(e,t,i){i instanceof Pr?this.raycastClosest(e,t,{skipBackfaces:!0},i):this.raycastAll(e,t,{skipBackfaces:!0},i)}raycastAll(e,t,i,s){return i===void 0&&(i={}),i.mode=$e.ALL,i.from=e,i.to=t,i.callback=s,qa.intersectWorld(this,i)}raycastAny(e,t,i,s){return i===void 0&&(i={}),i.mode=$e.ANY,i.from=e,i.to=t,i.result=s,qa.intersectWorld(this,i)}raycastClosest(e,t,i,s){return i===void 0&&(i={}),i.mode=$e.CLOSEST,i.from=e,i.to=t,i.result=s,qa.intersectWorld(this,i)}addBody(e){this.bodies.includes(e)||(e.index=this.bodies.length,this.bodies.push(e),e.world=this,e.initPosition.copy(e.position),e.initVelocity.copy(e.velocity),e.timeLastSleepy=this.time,e instanceof ie&&(e.initAngularVelocity.copy(e.angularVelocity),e.initQuaternion.copy(e.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=e,this.idToBodyMap[e.id]=e,this.dispatchEvent(this.addBodyEvent))}removeBody(e){e.world=null;const t=this.bodies.length-1,i=this.bodies,s=i.indexOf(e);if(s!==-1){i.splice(s,1);for(let r=0;r!==i.length;r++)i[r].index=r;this.collisionMatrix.setNumObjects(t),this.removeBodyEvent.body=e,delete this.idToBodyMap[e.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(e){return this.idToBodyMap[e]}getShapeById(e){const t=this.bodies;for(let i=0;i<t.length;i++){const s=t[i].shapes;for(let r=0;r<s.length;r++){const o=s[r];if(o.id===e)return o}}return null}addContactMaterial(e){this.contactmaterials.push(e),this.contactMaterialTable.set(e.materials[0].id,e.materials[1].id,e)}removeContactMaterial(e){const t=this.contactmaterials.indexOf(e);t!==-1&&(this.contactmaterials.splice(t,1),this.contactMaterialTable.delete(e.materials[0].id,e.materials[1].id))}fixedStep(e,t){e===void 0&&(e=1/60),t===void 0&&(t=10);const i=Ze.now()/1e3;if(!this.lastCallTime)this.step(e,void 0,t);else{const s=i-this.lastCallTime;this.step(e,s,t)}this.lastCallTime=i}step(e,t,i){if(i===void 0&&(i=10),t===void 0)this.internalStep(e),this.time+=e;else{this.accumulator+=t;const s=Ze.now();let r=0;for(;this.accumulator>=e&&r<i&&(this.internalStep(e),this.accumulator-=e,r++,!(Ze.now()-s>e*1e3)););this.accumulator=this.accumulator%e;const o=this.accumulator/e;for(let a=0;a!==this.bodies.length;a++){const l=this.bodies[a];l.previousPosition.lerp(l.position,o,l.interpolatedPosition),l.previousQuaternion.slerp(l.quaternion,o,l.interpolatedQuaternion),l.previousQuaternion.normalize()}this.time+=t}}internalStep(e){this.dt=e;const t=this.contacts,i=tT,s=nT,r=this.bodies.length,o=this.bodies,a=this.solver,l=this.gravity,c=this.doProfiling,u=this.profile,h=ie.DYNAMIC;let d=-1/0;const p=this.constraints,m=eT;l.length();const f=l.x,v=l.y,C=l.z;let g=0;for(c&&(d=Ze.now()),g=0;g!==r;g++){const z=o[g];if(z.type===h){const D=z.force,N=z.mass;D.x+=N*f,D.y+=N*v,D.z+=N*C}}for(let z=0,D=this.subsystems.length;z!==D;z++)this.subsystems[z].update();c&&(d=Ze.now()),i.length=0,s.length=0,this.broadphase.collisionPairs(this,i,s),c&&(u.broadphase=Ze.now()-d);let E=p.length;for(g=0;g!==E;g++){const z=p[g];if(!z.collideConnected)for(let D=i.length-1;D>=0;D-=1)(z.bodyA===i[D]&&z.bodyB===s[D]||z.bodyB===i[D]&&z.bodyA===s[D])&&(i.splice(D,1),s.splice(D,1))}this.collisionMatrixTick(),c&&(d=Ze.now());const T=J2,k=t.length;for(g=0;g!==k;g++)T.push(t[g]);t.length=0;const P=this.frictionEquations.length;for(g=0;g!==P;g++)m.push(this.frictionEquations[g]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,s,this,t,T,this.frictionEquations,m),c&&(u.narrowphase=Ze.now()-d),c&&(d=Ze.now()),g=0;g<this.frictionEquations.length;g++)a.addEquation(this.frictionEquations[g]);const R=t.length;for(let z=0;z!==R;z++){const D=t[z],N=D.bi,L=D.bj,U=D.si,$=D.sj;let Z;if(N.material&&L.material?Z=this.getContactMaterial(N.material,L.material)||this.defaultContactMaterial:Z=this.defaultContactMaterial,Z.friction,N.material&&L.material&&(N.material.friction>=0&&L.material.friction>=0&&N.material.friction*L.material.friction,N.material.restitution>=0&&L.material.restitution>=0&&(D.restitution=N.material.restitution*L.material.restitution)),a.addEquation(D),N.allowSleep&&N.type===ie.DYNAMIC&&N.sleepState===ie.SLEEPING&&L.sleepState===ie.AWAKE&&L.type!==ie.STATIC){const ne=L.velocity.lengthSquared()+L.angularVelocity.lengthSquared(),oe=L.sleepSpeedLimit**2;ne>=oe*2&&(N.wakeUpAfterNarrowphase=!0)}if(L.allowSleep&&L.type===ie.DYNAMIC&&L.sleepState===ie.SLEEPING&&N.sleepState===ie.AWAKE&&N.type!==ie.STATIC){const ne=N.velocity.lengthSquared()+N.angularVelocity.lengthSquared(),oe=N.sleepSpeedLimit**2;ne>=oe*2&&(L.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(N,L,!0),this.collisionMatrixPrevious.get(N,L)||(js.body=L,js.contact=D,N.dispatchEvent(js),js.body=N,L.dispatchEvent(js)),this.bodyOverlapKeeper.set(N.id,L.id),this.shapeOverlapKeeper.set(U.id,$.id)}for(this.emitContactEvents(),c&&(u.makeContactConstraints=Ze.now()-d,d=Ze.now()),g=0;g!==r;g++){const z=o[g];z.wakeUpAfterNarrowphase&&(z.wakeUp(),z.wakeUpAfterNarrowphase=!1)}for(E=p.length,g=0;g!==E;g++){const z=p[g];z.update();for(let D=0,N=z.equations.length;D!==N;D++){const L=z.equations[D];a.addEquation(L)}}a.solve(e,this),c&&(u.solve=Ze.now()-d),a.removeAllEquations();const _=Math.pow;for(g=0;g!==r;g++){const z=o[g];if(z.type&h){const D=_(1-z.linearDamping,e),N=z.velocity;N.scale(D,N);const L=z.angularVelocity;if(L){const U=_(1-z.angularDamping,e);L.scale(U,L)}}}this.dispatchEvent(Q2),c&&(d=Ze.now());const b=this.stepnumber%(this.quatNormalizeSkip+1)===0,I=this.quatNormalizeFast;for(g=0;g!==r;g++)o[g].integrate(e,b,I);this.clearForces(),this.broadphase.dirty=!0,c&&(u.integrate=Ze.now()-d),this.stepnumber+=1,this.dispatchEvent(Z2);let B=!0;if(this.allowSleep)for(B=!1,g=0;g!==r;g++){const z=o[g];z.sleepTick(this.time),z.sleepState!==ie.SLEEPING&&(B=!0)}this.hasActiveBodies=B}emitContactEvents(){const e=this.hasAnyEventListener("beginContact"),t=this.hasAnyEventListener("endContact");if((e||t)&&this.bodyOverlapKeeper.getDiff(Pn,Tn),e){for(let r=0,o=Pn.length;r<o;r+=2)Hs.bodyA=this.getBodyById(Pn[r]),Hs.bodyB=this.getBodyById(Pn[r+1]),this.dispatchEvent(Hs);Hs.bodyA=Hs.bodyB=null}if(t){for(let r=0,o=Tn.length;r<o;r+=2)Gs.bodyA=this.getBodyById(Tn[r]),Gs.bodyB=this.getBodyById(Tn[r+1]),this.dispatchEvent(Gs);Gs.bodyA=Gs.bodyB=null}Pn.length=Tn.length=0;const i=this.hasAnyEventListener("beginShapeContact"),s=this.hasAnyEventListener("endShapeContact");if((i||s)&&this.shapeOverlapKeeper.getDiff(Pn,Tn),i){for(let r=0,o=Pn.length;r<o;r+=2){const a=this.getShapeById(Pn[r]),l=this.getShapeById(Pn[r+1]);Mn.shapeA=a,Mn.shapeB=l,a&&(Mn.bodyA=a.body),l&&(Mn.bodyB=l.body),this.dispatchEvent(Mn)}Mn.bodyA=Mn.bodyB=Mn.shapeA=Mn.shapeB=null}if(s){for(let r=0,o=Tn.length;r<o;r+=2){const a=this.getShapeById(Tn[r]),l=this.getShapeById(Tn[r+1]);An.shapeA=a,An.shapeB=l,a&&(An.bodyA=a.body),l&&(An.bodyB=l.body),this.dispatchEvent(An)}An.bodyA=An.bodyB=An.shapeA=An.shapeB=null}}clearForces(){const e=this.bodies,t=e.length;for(let i=0;i!==t;i++){const s=e[i];s.force,s.torque,s.force.set(0,0,0),s.torque.set(0,0,0)}}}new Nt;const qa=new $e,Ze=globalThis.performance||{};if(!Ze.now){let n=Date.now();Ze.timing&&Ze.timing.navigationStart&&(n=Ze.timing.navigationStart),Ze.now=()=>Date.now()-n}new x;const Z2={type:"postStep"},Q2={type:"preStep"},js={type:ie.COLLIDE_EVENT_NAME,body:null,contact:null},J2=[],eT=[],tT=[],nT=[],Pn=[],Tn=[],Hs={type:"beginContact",bodyA:null,bodyB:null},Gs={type:"endContact",bodyA:null,bodyB:null},Mn={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},An={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};function DT(n,e,t){let{color:i=65280,scale:s=1,onInit:r,onUpdate:o}=t===void 0?{}:t;const a=[],l=new mv({color:i??65280,wireframe:!0}),c=new x,u=new x,h=new x,d=new Ne,p=new Xc(1),m=new Zc(1,1,1),f=new Qc(10,10,10,10);f.translate(0,0,1e-4);function v(_){const w=new so,b=[];for(let B=0;B<_.vertices.length;B++){const z=_.vertices[B];b.push(z.x,z.y,z.z)}w.setAttribute("position",new sa(b,3));const I=[];for(let B=0;B<_.faces.length;B++){const z=_.faces[B],D=z[0];for(let N=1;N<z.length-1;N++){const L=z[N],U=z[N+1];I.push(D,L,U)}}return w.setIndex(I),w.computeBoundingSphere(),w.computeVertexNormals(),w}function C(_){const w=new so,b=[],I=c,B=u,z=h;for(let D=0;D<_.indices.length/3;D++)_.getTriangleVertices(D,I,B,z),b.push(I.x,I.y,I.z),b.push(B.x,B.y,B.z),b.push(z.x,z.y,z.z);return w.setAttribute("position",new sa(b,3)),w.computeBoundingSphere(),w.computeVertexNormals(),w}function g(_){const w=new so,b=_.elementSize||1,I=_.data.flatMap((z,D)=>z.flatMap((N,L)=>[D*b,L*b,N])),B=[];for(let z=0;z<_.data.length-1;z++)for(let D=0;D<_.data[z].length-1;D++){const N=_.data[z].length,L=z*N+D;B.push(L+1,L+N,L+N+1),B.push(L+N,L+1,L)}return w.setIndex(B),w.setAttribute("position",new sa(I,3)),w.computeBoundingSphere(),w.computeVertexNormals(),w}function E(_){let w=new Rn;const{SPHERE:b,BOX:I,PLANE:B,CYLINDER:z,CONVEXPOLYHEDRON:D,TRIMESH:N,HEIGHTFIELD:L}=te.types;switch(_.type){case b:{w=new Rn(p,l);break}case I:{w=new Rn(m,l);break}case B:{w=new Rn(f,l);break}case z:{const U=new vv(_.radiusTop,_.radiusBottom,_.height,_.numSegments);w=new Rn(U,l),_.geometryId=U.id;break}case D:{const U=v(_);w=new Rn(U,l),_.geometryId=U.id;break}case N:{const U=C(_);w=new Rn(U,l),_.geometryId=U.id;break}case L:{const U=g(_);w=new Rn(U,l),_.geometryId=U.id;break}}return n.add(w),w}function T(_,w){const{SPHERE:b,BOX:I,PLANE:B,CYLINDER:z,CONVEXPOLYHEDRON:D,TRIMESH:N,HEIGHTFIELD:L}=te.types;switch(w.type){case b:{const{radius:U}=w;_.scale.set(U*s,U*s,U*s);break}case I:{_.scale.copy(w.halfExtents),_.scale.multiplyScalar(2*s);break}case B:break;case z:{_.scale.set(1*s,1*s,1*s);break}case D:{_.scale.set(1*s,1*s,1*s);break}case N:{_.scale.copy(w.scale).multiplyScalar(s);break}case L:{_.scale.set(1*s,1*s,1*s);break}}}function k(_,w){if(!_)return!1;const{geometry:b}=_;return b instanceof Xc&&w.type===te.types.SPHERE||b instanceof Zc&&w.type===te.types.BOX||b instanceof Qc&&w.type===te.types.PLANE||b.id===w.geometryId&&w.type===te.types.CYLINDER||b.id===w.geometryId&&w.type===te.types.CONVEXPOLYHEDRON||b.id===w.geometryId&&w.type===te.types.TRIMESH||b.id===w.geometryId&&w.type===te.types.HEIGHTFIELD}function P(_,w){let b=a[_],I=!1;return k(b,w)||(b&&n.remove(b),a[_]=b=E(w),I=!0),T(b,w),I}function R(){const _=a,w=c,b=d;let I=0;for(const B of e.bodies)for(let z=0;z!==B.shapes.length;z++){const D=B.shapes[z],N=P(I,D),L=_[I];L&&(B.quaternion.vmult(B.shapeOffsets[z],w),B.position.vadd(w,w),B.quaternion.mult(B.shapeOrientations[z],b),L.position.copy(w),L.quaternion.copy(b),N&&r instanceof Function&&r(B,L,D),!N&&o instanceof Function&&o(B,L,D)),I++}for(let B=I;B<_.length;B++){const z=_[B];z&&n.remove(z)}_.length=I}return{update:R}}const rv=Math.sqrt(5),iT=(rv-1)/4,nt=(5-rv)/20,no=n=>Math.floor(n)|0,io=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function NT(n=Math.random){const e=sT(n),t=new Float64Array(e).map(o=>io[o%32*4]),i=new Float64Array(e).map(o=>io[o%32*4+1]),s=new Float64Array(e).map(o=>io[o%32*4+2]),r=new Float64Array(e).map(o=>io[o%32*4+3]);return function(a,l,c,u){let h,d,p,m,f;const v=(a+l+c+u)*iT,C=no(a+v),g=no(l+v),E=no(c+v),T=no(u+v),k=(C+g+E+T)*nt,P=C-k,R=g-k,_=E-k,w=T-k,b=a-P,I=l-R,B=c-_,z=u-w;let D=0,N=0,L=0,U=0;b>I?D++:N++,b>B?D++:L++,b>z?D++:U++,I>B?N++:L++,I>z?N++:U++,B>z?L++:U++;const $=D>=3?1:0,Z=N>=3?1:0,ne=L>=3?1:0,oe=U>=3?1:0,J=D>=2?1:0,Ie=N>=2?1:0,Ee=L>=2?1:0,ze=U>=2?1:0,Fe=D>=1?1:0,q=N>=1?1:0,j=L>=1?1:0,y=U>=1?1:0,A=b-$+nt,F=I-Z+nt,S=B-ne+nt,M=z-oe+nt,O=b-J+2*nt,V=I-Ie+2*nt,H=B-Ee+2*nt,G=z-ze+2*nt,X=b-Fe+3*nt,Y=I-q+3*nt,K=B-j+3*nt,W=z-y+3*nt,ee=b-1+4*nt,Q=I-1+4*nt,se=B-1+4*nt,re=z-1+4*nt,ce=C&255,ve=g&255,pe=E&255,Xe=T&255;let We=.6-b*b-I*I-B*B-z*z;if(We<0)h=0;else{const he=ce+e[ve+e[pe+e[Xe]]];We*=We,h=We*We*(t[he]*b+i[he]*I+s[he]*B+r[he]*z)}let it=.6-A*A-F*F-S*S-M*M;if(it<0)d=0;else{const he=ce+$+e[ve+Z+e[pe+ne+e[Xe+oe]]];it*=it,d=it*it*(t[he]*A+i[he]*F+s[he]*S+r[he]*M)}let st=.6-O*O-V*V-H*H-G*G;if(st<0)p=0;else{const he=ce+J+e[ve+Ie+e[pe+Ee+e[Xe+ze]]];st*=st,p=st*st*(t[he]*O+i[he]*V+s[he]*H+r[he]*G)}let Kt=.6-X*X-Y*Y-K*K-W*W;if(Kt<0)m=0;else{const he=ce+Fe+e[ve+q+e[pe+j+e[Xe+y]]];Kt*=Kt,m=Kt*Kt*(t[he]*X+i[he]*Y+s[he]*K+r[he]*W)}let qn=.6-ee*ee-Q*Q-se*se-re*re;if(qn<0)f=0;else{const he=ce+1+e[ve+1+e[pe+1+e[Xe+1]]];qn*=qn,f=qn*qn*(t[he]*ee+i[he]*Q+s[he]*se+r[he]*re)}return 27*(h+d+p+m+f)}}function sT(n){const t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){const s=i+~~(n()*(256-i)),r=t[i];t[i]=t[s],t[s]=r}for(let i=256;i<512;i++)t[i]=t[i-256];return t}function tt(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var rT=tt;tt.EventEmitter=tt;tt.prototype._events=void 0;tt.prototype._maxListeners=void 0;tt.defaultMaxListeners=10;tt.prototype.setMaxListeners=function(n){if(!oT(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};tt.prototype.emit=function(n){var e,t,i,s,r,o;if(this._events||(this._events={}),n==="error"&&(!this._events.error||Tr(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(t=this._events[n],ov(t))return!1;if(jn(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),t.apply(this,s)}else if(Tr(t))for(s=Array.prototype.slice.call(arguments,1),o=t.slice(),i=o.length,r=0;r<i;r++)o[r].apply(this,s);return!0};tt.prototype.addListener=function(n,e){var t;if(!jn(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,jn(e.listener)?e.listener:e),this._events[n]?Tr(this._events[n])?this._events[n].push(e):this._events[n]=[this._events[n],e]:this._events[n]=e,Tr(this._events[n])&&!this._events[n].warned&&(ov(this._maxListeners)?t=tt.defaultMaxListeners:t=this._maxListeners,t&&t>0&&this._events[n].length>t&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this};tt.prototype.on=tt.prototype.addListener;tt.prototype.once=function(n,e){if(!jn(e))throw TypeError("listener must be a function");var t=!1;function i(){this.removeListener(n,i),t||(t=!0,e.apply(this,arguments))}return i.listener=e,this.on(n,i),this};tt.prototype.removeListener=function(n,e){var t,i,s,r;if(!jn(e))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(t=this._events[n],s=t.length,i=-1,t===e||jn(t.listener)&&t.listener===e)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,e);else if(Tr(t)){for(r=s;r-- >0;)if(t[r]===e||t[r].listener&&t[r].listener===e){i=r;break}if(i<0)return this;t.length===1?(t.length=0,delete this._events[n]):t.splice(i,1),this._events.removeListener&&this.emit("removeListener",n,e)}return this};tt.prototype.removeAllListeners=function(n){var e,t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[n],jn(t))this.removeListener(n,t);else if(t)for(;t.length;)this.removeListener(n,t[t.length-1]);return delete this._events[n],this};tt.prototype.listeners=function(n){var e;return!this._events||!this._events[n]?e=[]:jn(this._events[n])?e=[this._events[n]]:e=this._events[n].slice(),e};tt.prototype.listenerCount=function(n){if(this._events){var e=this._events[n];if(jn(e))return 1;if(e)return e.length}return 0};tt.listenerCount=function(n,e){return n.listenerCount(e)};function jn(n){return typeof n=="function"}function oT(n){return typeof n=="number"}function Tr(n){return typeof n=="object"&&n!==null}function ov(n){return n===void 0}var aT=rT,hd=["touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup"],lT={left:0,top:0},cT=function(e,t){t=t||{},e=e||window;var i=new aT;i.target=t.target||e;var s=null,r=t.filtered,o=hd;typeof t.type=="string"&&(o=hd.filter(function(c){return c.indexOf(t.type)===0}));var a=o.map(function(c){var u=hT(c),h=function(d){var p=d;if(/^touch/.test(c)&&(/^touchend$/.test(c)&&t.preventSimulated!==!1&&d.preventDefault(),r?p=l(d,c):p=dd(d.changedTouches,i.target)),!!p){var m=uT(p,i.target);i.emit(u,d,m)}};return{type:c,listener:h}});return i.enable=function(){return a.forEach(fd(e,!0)),i},i.disable=function(){return s=null,a.forEach(fd(e,!1)),i},i.enable(),i;function l(c,u){var h;return s&&/^touch(end|cancel)/.test(u)?(h=pd(c.changedTouches,s.identifier||0),h&&(s=null)):!s&&/^touchstart/.test(u)?s=h=dd(c.changedTouches,i.target):s&&(h=pd(c.changedTouches,s.identifier||0)),h}};function uT(n,e){var t=n.clientX||0,i=n.clientY||0,s=dT(e);return[t-s.left,i-s.top]}function dd(n,e){return Array.prototype.slice.call(n).filter(function(t){return t.target===e})[0]||n[0]}function pd(n,e){for(var t=0;t<n.length;t++)if(n[t].identifier===e)return n[t];return null}function fd(n,e){return function(t){e?n.addEventListener(t.type,t.listener,{passive:!1}):n.removeEventListener(t.type,t.listener,{passive:!1})}}function hT(n){return n.replace(/^(touch|mouse)/,"").replace(/up$/,"end").replace(/down$/,"start")}function dT(n){return n===window||n===document||n===document.body?lT:n.getBoundingClientRect()}const VT=Rr(cT);export{wT as A,bT as B,DT as C,na as D,Uc as E,Bn as F,ie as G,LT as H,zT as I,te as J,$d as K,VT as L,ia as M,ET as N,PT as O,BT as P,Ne as Q,OT as R,Ks as S,ST as T,de as U,x as V,FT as W,TT as X,kT as a,mg as b,gT as c,Pp as d,Av as e,Jg as f,CT as g,fT as h,Zg as i,xT as j,NT as k,Zv as l,np as m,vT as n,MT as o,Ll as p,zl as q,jo as r,RT as s,AT as t,cs as u,Iy as v,lg as w,mT as x,_T as y,yT as z};
